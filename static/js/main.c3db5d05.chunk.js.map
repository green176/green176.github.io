{"version":3,"sources":["ui-common/icon-wrapper/icon-wrapper.component.tsx","ui-desktop/history/components/history-table/theme/history-table.module.css","ui-common/chart/plugin/cross-tool/views/cross-tool.module.css","ui-common/chart/plugin/cross-tool/views/ava-chart-Info.module.css","ui-desktop/order-entry/components/order-entry-panel/theme/order-entry-panel.module.css","ui-desktop/positions/components/position-table/theme/position-table.module.css","ui-desktop/watchlist/components/watchlist-entity/theme/watchlist-entity.component.module.css","ui-desktop/layout/components/aside/theme/aside.module.css","ui-desktop/layout/components/menu/components/menu/theme/menu.module.css","ui-desktop/orders/components/order-entity/theme/order-entity.module.css","ui-desktop/layout/components/header/header-account-metrics/theme/header-account-metrics.module.css","ui-desktop/positions/components/position-close/theme/position-close.module.css","ui-desktop/history/components/history-filter-form/theme/history-filter-form.module.css","ui-common/numeric-stepper-ava/numeric-stepper.component.tsx","ui-common/link/link.component.tsx","ui-desktop/trade/components/symbol-search/theme/symbol-search.module.css","ui-common/scrollable/scrollable.component.tsx","ui-desktop/ui-kit/components/popover/popover.component.tsx","ui-desktop/positions/components/positions-dashboard/theme/positions-dashboard.module.css","ui-desktop/categories/components/categories/theme/categories.module.css","ui-desktop/trade/components/trade-dashboard/theme/trade-dashboard.module.css","ui-desktop/ui-kit/components/workspace/theme/workspace.module.css","ui-common/table-ava/theme/table.module.css","ui-desktop/history/components/history-dashboard/theme/history-dashboard.module.css","ui-desktop/popup/components/margin-popup/theme/margin-popup.module.css","ui-desktop/order-entry/components/order-entry-panel-side/theme/order-entry-panel-side.module.css","ui-common/error-panel/components/theme/error-panel.module.css","ui-common/symbol-info/theme/symbol-info.module.css","ui-desktop/chart/components/toolbar/toolbar/theme/toolbar.module.css","ui-common/order-details/theme/order-details.module.css","ui-common/history-details/theme/history-details.module.css","ui-common/checkbox/checkbox.component.tsx","ui-desktop/ui-kit/components/date-input/date-input.tsx","ui-desktop/order-entry/components/order-entry-panel/theme/numeric-stepper.child.module.css","ui-desktop/order-entry/components/order-entry-panel/theme/numeric-stepper.button.module.css","ui-common/locale-selector/theme/locale-selector.module.css","ui-desktop/ui-kit/components/preview-mode/components/theme/registration-open-button.module.css","ui-desktop/layout/components/layout/theme/layout.module.css","ui-common/table-ava/theme/table-cell.module.css","ui-common/table-ava/theme/scrollbars.module.css","ui-desktop/positions/components/editing-position/theme/editing-position.module.css","ui-desktop/orders/components/orders-dashboard/theme/orders-dashboard.module.css","ui-desktop/ui-kit/components/preview-mode/components/theme/registration-button.module.css","ui-desktop/ui-kit/components/menu/menu.component.tsx","ui-desktop/chart/components/chart/theme/chart.module.css","ui-desktop/chart/plugin/lines/theme/lines-plugin.module.css","ui-desktop/layout/components/header/header/theme/header.module.css","ui-common/layout/components/menu-account/theme/menu-account.module.css","ui-desktop/popup/components/relogin-popup/theme/relogin-popup.module.css","ui-common/checkbox/checkbox.module.css","ui-desktop/trade/components/symbol-search/theme/highlight.child.module.css","ui-common/position-details/theme/position-details.module.css","ui-desktop/orders/components/order-details/theme/order-details.module.css","ui-desktop/ui-kit/components/menu/theme/menu.module.css","ui-desktop/ui-kit/components/preloader/theme/preloader.module.css","ui-desktop/ui-kit/components/numeric-stepper/theme/input.module.css","ui-desktop/ui-kit/components/numeric-stepper/theme/button-icon.module.css","ui-desktop/ui-kit/components/date-input/theme/button-icon.module.css","ui-common/locale-selector/theme/locale-selector-anchor.module.css","ui-common/info-box/theme/info-box.module.css","ui-desktop/popup/components/connection-lost-popup/theme/connection-lost-popup.module.css","ui-desktop/popup/components/margin-popup/theme/button.child.module.css","ui-desktop/watchlist/components/watchlist-entity/theme/pip-rate.child.module.css","ui-desktop/watchlist/components/watchlist-entity/theme/optional.module.css","ui-desktop/order-entry/components/order-entry-takeprofit-stoploss/theme/order-entry-takeprofit-stoploss.module.css","ui-desktop/chart/plugin/lines/theme/lines.component.module.css","ui-desktop/chart/plugin/current-price-line/theme/current-price-line.module.css","ui-desktop/positions/components/position-details/theme/button.child.module.css","ui-desktop/positions/components/position-details/theme/position-details.module.css","ui-common/empty-screen/components/theme/button.child.module.css","ui-desktop/orders/components/order-entity/theme/icon-button.child.module.css","ui-desktop/ui-kit/components/input/input.module.css","ui-common/button/theme/button.module.css","ui-desktop/ui-kit/components/popover/popover.module.css","ui-desktop/ui-kit/components/steppable-input/theme/steppable-input.module.css","ui-desktop/ui-kit/components/steppable-input/theme/button-icon.module.css","ui-desktop/ui-kit/components/icons/minus.icon.tsx","ui-common/icon-wrapper/icon-wrapper.module.css","ui-desktop/ui-kit/components/icons/plus.icon.tsx","ui-desktop/ui-kit/components/steppable-input/steppable-input.tsx","ui-common/numeric-stepper-ava/numeric-stepper.utils.ts","ui-desktop/ui-kit/components/date-input/theme/date-input.module.css","ui-common/scrollable/theme/scrollable.module.css","ui-common/scrollable/theme/scrollbar.module.css","ui-common/button/theme/button-cta.module.css","ui-common/close-button/theme/close-button.module.css","ui-desktop/ui-kit/components/popup/theme/popup.module.css","ui-desktop/ui-kit/components/popup/theme/close-button.child.module.css","ui-common/iframe/theme/iframe.module.css","ui-desktop/upgrade-account-button/theme/button.child.module.css","ui-desktop/upgrade-account-button/theme/upgrade-account-button.module.css","ui-desktop/layout/components/header/header/theme/link.child.module.css","ui-desktop/layout/components/header/header/theme/registration-button.child.module.css","ui-desktop/ui-kit/components/selectbox/theme/selectbox.module.css","ui-common/flag-icon-wrapper/flag-icon-wrapper.module.css","ui-common/locale-selector/theme/selectbox.child.module.css","ui-common/locale-selector/theme/menu-item.child.module.css","ui-common/layout/components/menu-list-item/theme/menu-list-item.module.css","ui-common/layout/components/menu-divider/theme/menu-divider.module.css","ui-common/info-box/theme/not-now-button.module.css","ui-desktop/layout/components/menu/components/menu/theme/info-box.child.module.css","ui-common/layout/components/menu-accounts/theme/menu-accounts.module.css","ui-desktop/layout/components/menu/components/menu/theme/menu-live.module.css","ui-desktop/ui-kit/components/preview-mode/components/theme/disable-overlay.module.css","ui-desktop/ui-kit/components/preview-mode/components/theme/info-box-registration.module.css","ui-desktop/popup/components/welcome-popup/theme/welcome-popup.module.css","ui-desktop/popup/components/connection-lost-popup/theme/button.child.module.css","ui-desktop/popup/components/connection-lost-popup/theme/popup.child.module.css","ui-desktop/popup/components/margin-popup/theme/popup.child.module.css","ui-desktop/popup/components/relogin-popup/theme/popup.child.module.css","ui-desktop/popup/components/relogin-popup/theme/button.child.module.css","ui-common/pip-rate/theme/pip-rate.module.css","ui-common/price-direction/theme/price-direction.module.css","ui-desktop/watchlist/components/watchlist-entity/theme/button-sell.child.module.css","ui-desktop/watchlist/components/watchlist-entity/theme/button-buy.child.module.css","ui-desktop/watchlist/components/watchlist-entity/theme/price-direction.child.module.css","ui-common/side-panel/theme/side-panel.module.css","ui-common/side-panel/theme/scrollable.child.module.css","ui-desktop/order-entry/components/order-entry-panel-side/theme/pip-rate.child.module.css","ui-desktop/ui-kit/components/icons/checkbox-tick.icon.tsx","ui-desktop/ui-kit/components/icons/calendar.icon.tsx","ui-desktop/ui-kit/components/calendar/theme/calendar.module.css","ui-desktop/ui-kit/components/calendar/theme/button-icon.module.css","ui-desktop/order-entry/components/order-entry-panel/theme/numeric-stepper-error.child.module.css","ui-common/takeprofit-stoploss-panel/theme/numeric-stepper.child.module.css","ui-common/takeprofit-stoploss-panel/theme/numeric-stepper.button.module.css","ui-common/takeprofit-stoploss-panel/theme/takeprofit-stoploss-panel.module.css","ui-common/symbol/theme/symbol.module.css","ui-desktop/order-entry/components/order-entry-panel/theme/button.child.module.css","ui-desktop/order-entry/components/order-entry-panel/theme/button-deposit.child.module.css","ui-desktop/order-entry/components/order-entry-panel/theme/info-box.child.module.css","ui-desktop/order-entry/components/order-entry-panel/theme/side-panel.child.module.css","ui-desktop/order-entry/components/order-entry-panel/theme/symbol.child.module.css","ui-desktop/order-entry/components/order-entry-panel/theme/registration-info-box.child.module.css","ui-common/symbol-info-item/theme/info-panel.module.css","ui-common/symbol-info/theme/price-direction.child.module.css","ui-desktop/categories/components/categories/theme/scrollable.child.module.css","ui-desktop/chart/components/toolbar/toolbar/theme/periods-selectbox.child.module.css","ui-desktop/chart/components/toolbar/toolbar/theme/type-selectbox.child.module.css","ui-desktop/chart/components/toolbar/toolbar/theme/cross-tool-selectbox.child.module.css","ui-desktop/chart/components/chart/theme/chart-map.module.css","ui-desktop/chart/components/chart-wrapper/theme/chart-wrapper.module.css","ui-desktop/trade/components/symbol-search/theme/input.child.module.css","ui-desktop/trade/components/symbol-search/theme/popover.child.module.css","ui-desktop/chart/plugin/lines/theme/line.component.module.css","ui-desktop/positions/components/position-close/theme/button.child.module.css","ui-desktop/positions/components/position-close/theme/symbol.child.module.css","ui-desktop/positions/components/position-close/theme/numeric-stepper.child.module.css","ui-desktop/positions/components/position-close/theme/numeric-stepper.button.module.css","ui-common/editing-position/theme/editing-position.module.css","ui-desktop/positions/components/editing-position/theme/button.child.module.css","ui-desktop/positions/components/editing-position/theme/side-panel.child.module.css","ui-common/position-details/theme/price-direction.child.module.css","ui-common/position-details/theme/symbol.child.module.css","ui-common/empty-screen/components/theme/empty-screen.module.css","ui-common/cancel-confirmation/theme/cancel-confirmation.module.css","ui-common/cancel-confirmation/theme/button.child.module.css","ui-common/cancel-confirmation/theme/button-submit.child.module.css","ui-desktop/orders/components/order-entity/theme/button.child.module.css","ui-common/order-details/theme/symbol.child.module.css","ui-desktop/orders/components/order-details/theme/scrollable.child.module.css","ui-desktop/orders/components/order-details/theme/side-panel.child.module.css","ui-desktop/history/components/history-filter-form/theme/period-button.child.module.css","ui-desktop/history/components/history-filter-form/theme/period-popover.child.module.css","ui-desktop/history/components/history-filter-form/theme/date-input-popover.child.module.css","ui-desktop/history/components/history-filter-form/theme/date-input.child.module.css","ui-desktop/history/components/history-filter-form/theme/date-input.button.module.css","ui-desktop/history/components/history-filter-form/theme/menu-item.child.module.css","ui-desktop/history/components/history-details/theme/history-details.module.css","utils/load-script.utils.ts","utils/server-error.utils.ts","utils/rxjs/shareReplayWithDefaults.ts","utils/router.utils.ts","api/post-message/post-message.to.ts","ui-common/routes.ts","utils/node-env.utils.ts","utils/route.utils.ts","view-model/env/env.view-model.ts","ui-desktop/ui-kit/components/preloader/preloader.component.tsx","ui-common/remote-data-state/remote-data-state.component.tsx","utils/react.utils.ts","utils/io-ts.utils.ts","api/socket/to/quote-subscription-initialized-message.to.ts","api/generated/swagger/definitions/QuoteTO.ts","api/socket/to/quote-message.to.ts","api/generated/swagger/definitions/SummaryTO.ts","api/socket/to/summary-message.to.ts","api/generated/swagger/utils/utils.ts","api/generated/swagger/definitions/AccountMetricsTO.ts","api/socket/to/account-metrics-message.to.ts","api/generated/swagger/definitions/StudyCandleTO.ts","api/generated/swagger/definitions/CandleTO.ts","api/generated/swagger/definitions/ChartResponseTO.ts","api/socket/to/chart-message.to.ts","api/generated/swagger/definitions/PriceIncrementsTO.ts","api/generated/swagger/definitions/InstrumentTO.ts","api/socket/to/instrument-message.to.ts","api/socket/to/accounts-message.to.ts","api/generated/swagger/definitions/PositionKeyTO.ts","api/generated/swagger/definitions/ProtectionOrderTO.ts","api/generated/swagger/definitions/PositionTO.ts","api/socket/to/position-message.to.ts","api/generated/swagger/definitions/FxPositionMetricsTO.ts","api/socket/to/fx-position-metrics-message.to.ts","api/generated/swagger/definitions/WatchlistsTO.ts","api/socket/to/watchlist-message.to.ts","api/socket/to/watchlist-subbscription-initialized-message.to.ts","api/generated/swagger/definitions/WatchlistContentTO.ts","api/socket/to/watchlist-content-message.to.ts","api/generated/swagger/definitions/AggregationPeriodTO.ts","api/generated/swagger/definitions/RangeTO.ts","api/generated/swagger/definitions/AggrPeriodRangePairTO.ts","api/generated/swagger/definitions/StudyLineTO.ts","api/generated/swagger/definitions/StudyParamValidationTO.ts","api/generated/swagger/definitions/StudyParamTO.ts","api/generated/swagger/definitions/StudyTO.ts","api/generated/swagger/definitions/GlobalChartSettings.ts","api/generated/swagger/definitions/GlobalChartSettingsTO.ts","api/socket/to/global-chart-settings-message.to.ts","api/generated/swagger/definitions/ConversionRateTO.ts","api/socket/to/conversion-rate-message.to.ts","api/generated/swagger/definitions/MarginImpactTO.ts","api/socket/to/margin-impacts-message.to.ts","api/generated/swagger/definitions/UserTO.ts","api/socket/to/user-message.to.ts","api/generated/swagger/definitions/ExecutionMessageTO.ts","api/generated/swagger/definitions/OrderTO.ts","api/socket/to/orders-message.to.ts","api/generated/swagger/definitions/HistoryOrderTO.ts","api/socket/to/history-order-message.to.ts","api/socket/to/account-switched-message.to.ts","api/generated/swagger/definitions/AvaTokenTO.ts","api/socket/to/ava-token-message.to.ts","api/generated/swagger/definitions/AvaAccountTO.ts","api/generated/swagger/definitions/AvaSystemSettingsTO.ts","api/socket/to/ava-system-settings-message.to.ts","api/generated/swagger/definitions/AccountSettingsTO.ts","api/socket/to/account-settings-message.to.ts","api/generated/swagger/definitions/LimitsDomainTO.ts","api/socket/to/limits-domain-message.to.ts","api/generated/swagger/definitions/InstrumentInfoTO.ts","api/socket/to/ava-instrument-info-message.to.ts","api/generated/swagger/definitions/AvaWatchListInstrumentInfoTO.ts","api/socket/to/ava-watchlist-instrument-info-message.to.ts","api/generated/swagger/definitions/LogoutReasonTO.ts","api/generated/swagger/definitions/LogoutEventTO.ts","api/socket/to/logout-event-message.to.ts","api/socket/socket-message.to.ts","api/socket-client.ts","utils/live-data.utils.ts","utils/setoid.utils.ts","api/api-client.ts","utils/i18n.utils.ts","config/theme.config.ts","ui-desktop/ui-kit/components/theme/theme.component.tsx","utils/withRXWithDefaults.ts","view-model/aside/aside.view-model.ts","ui-common/route-link/components/route-link.component.tsx","ui-common/route-link/containers/route-link.container.ts","ui-desktop/ui-kit/components/icons/trade.icon.tsx","ui-desktop/ui-kit/components/icons/positions.icon.tsx","ui-desktop/ui-kit/components/icons/orders.icon.tsx","ui-desktop/ui-kit/components/icons/history.icon.tsx","ui-desktop/ui-kit/components/icons/deposit.icon.tsx","ui-desktop/ui-kit/components/icons/chat.icon.tsx","ui-desktop/ui-kit/components/icons/burger.icon.tsx","ui-desktop/ui-kit/components/icons/burger-close.icon.tsx","ui-desktop/layout/components/aside/aside.component.tsx","ui-desktop/chat/chat.utils.ts","ui-desktop/layout/containers/aside/aside.container.ts","ui-desktop/ui-kit/components/icons/logo.icon.tsx","ui-common/optional/optional.component.tsx","ui-desktop/layout/components/header/header-account-metrics/header-account-metrics.component.tsx","utils/currency.utils.ts","ui-desktop/layout/containers/header-account-metrics/header-account-metrics.container.ts","ui-common/button/button.component.tsx","ui-common/button/button-cta.component.tsx","ui-common/icons/close.icon.tsx","ui-common/close-button/close-button.component.tsx","ui-desktop/ui-kit/components/popup/popup.component.tsx","ui-common/iframe/iframe.component.tsx","view-model/menu/menu.view-model.ts","ui-desktop/upgrade-account-button/upgrade-account-button.tsx","ui-desktop/ui-kit/components/preview-mode/components/registration-button.component.tsx","ui-desktop/layout/components/header/header/header.component.tsx","view-model/header/header.utils.ts","view-model/header/header.view-model.ts","ui-desktop/layout/containers/header/header.container.ts","view-model/menu/menu.utils.ts","ui-desktop/layout/components/menu/components/menu/menu.model.ts","ui-desktop/watchlist/components/watchlist-table/watchlist-table.model.ts","ui-common/table-ava/table.model.ts","ui-desktop/ui-kit/components/icons/logout.icon.tsx","ui-desktop/ui-kit/components/icons/arrow.icon.tsx","ui-desktop/ui-kit/components/selectbox/selectbox.component.tsx","ui-common/icons/check.icon.tsx","ui-common/icons/arrow-down-flat.icon.tsx","ui-common/flag-icon-wrapper/flag-icon-wrapper.component.tsx","ui-common/icons/flag-usa.icon.tsx","ui-common/icons/flag-russia.icon.tsx","ui-common/icons/flag-germany.icon.tsx","ui-common/icons/flag-france.icon.tsx","ui-common/icons/flag-italy.icon.tsx","ui-common/icons/flag-portugese.icon.tsx","ui-common/icons/flag-spain.icon.tsx","ui-common/icons/flag-israel.icon.tsx","ui-common/icons/flag-arabic.icon.tsx","ui-common/icons/flag-china.icon.tsx","ui-common/locale-selector/locale-selector.utils.tsx","ui-common/locale-selector/locale-selector-anchor.component.tsx","ui-common/locale-selector/locale-selector.model.ts","ui-common/locale-selector/locale-selector.component.tsx","ui-common/layout/components/menu-list-item/menu-list-item.component.tsx","ui-mobile/ui-kit/components/icons/accounts.icon.tsx","ui-desktop/ui-kit/components/icons/personal-details.icon.tsx","ui-common/layout/components/menu-divider/menu-divider.component.tsx","ui-desktop/ui-kit/components/icons/calculator.icon.tsx","ui-desktop/ui-kit/components/icons/upload-docs.icon.tsx","ui-desktop/ui-kit/components/icons/withdraw.icon.tsx","ui-common/info-box/info-box.component.tsx","ui-desktop/layout/components/menu/components/menu/menu-demo.component.tsx","ui-desktop/ui-kit/components/icons/trader.icon.tsx","ui-desktop/ui-kit/components/icons/switch.icon.tsx","ui-common/layout/components/menu-account/menu-account.component.tsx","ui-common/layout/components/menu-accounts/menu-accounts.component.tsx","ui-desktop/layout/components/menu/components/menu/menu-live.component.tsx","ui-desktop/ui-kit/components/preview-mode/components/disable-overlay.component.tsx","ui-desktop/ui-kit/components/preview-mode/components/registration-info-box.component.tsx","ui-desktop/layout/components/menu/components/menu/menu.component.tsx","ui-desktop/layout/components/menu/containers/menu.container.ts","ui-desktop/popup/components/welcome-popup/welcome-popup.component.tsx","view-model/welcome/welcome.view-model.ts","ui-desktop/popup/containers/welcome-popup/welcome-popup.container.ts","ui-desktop/popup/components/connection-lost-popup/connection-lost-popup.component.tsx","view-model/connection-status/connection-status.view-model.ts","ui-desktop/popup/containers/connection-lost-popup/connection-lost-popup.container.ts","ui-desktop/popup/components/margin-popup/margin-popup.component.tsx","view-model/margin/margin.view-model.ts","ui-desktop/popup/containers/margin-popup/margin-popup.container.ts","view-model/relogin/relogin.view-model.ts","ui-desktop/popup/components/relogin-popup/relogin-popup.component.tsx","ui-desktop/popup/containers/relogin-popup/relogin-popup.container.ts","ui-desktop/chat/components/chat.component.tsx","ui-desktop/chat/containers/chat.container.ts","ui-desktop/ui-kit/components/icons/minimize.icon.tsx","ui-desktop/ui-kit/components/icons/continue-registration-close.icon.tsx","ui-desktop/ui-kit/components/preview-mode/components/registration-open-button.component.tsx","ui-desktop/layout/components/layout/layout.component.tsx","ui-desktop/layout/containers/layout/layout.container.ts","ui-desktop/ui-kit/components/route/route.component.tsx","ui-common/route/containers/route.container.ts","ui-common/table-ava/table-cell.component.tsx","ui-common/table-ava/table.utils.tsx","ui-desktop/watchlist/components/watchlist-table/watchlist-table.utils.ts","view-model/watchlist/watchlist.view-model.ts","ui-common/table-ava/table-header.component.tsx","ui-common/table-ava/table-scrollbars.component.tsx","ui-common/table-ava/table-list.component.tsx","ui-common/autosized-table-ava/autosized-table.component.tsx","ui-common/pip-rate/pip-rate.model.ts","ui-common/pip-rate/pip-rate.component.tsx","ui-common/icons/info.icon.tsx","ui-desktop/ui-kit/components/icons/star-on.icon.tsx","ui-desktop/ui-kit/components/icons/star-off.icon.tsx","ui-common/pip-rate/pip-settings.utils.ts","ui-common/icons/arrow-up.icon.tsx","ui-common/icons/arrow-down.icon.tsx","ui-common/price-direction/price-direction.component.tsx","utils/option.utils.ts","ui-desktop/watchlist/components/watchlist-entity/watchlist-entity.component.tsx","api/generated/swagger/client/client.ts","api/generated/swagger/definitions/CreateWatchlistTO.ts","api/generated/swagger/definitions/ResponseResultTO.ts","api/generated/swagger/definitions/UpdateWatchlistSubscriptionTO.ts","api/generated/swagger/definitions/WatchlistCreationTO.ts","api/generated/swagger/controllers/WatchlistsController.ts","view-model/watchlist-entity/watchlist-entity.view-model.ts","ui-desktop/watchlist/containers/watchlist-entity/watchlist-entity.container.ts","ui-common/redirect/containers/redirect.container.ts","ui-desktop/watchlist/components/watchlist-table/watchlist-table.component.tsx","ui-desktop/watchlist/containers/watchlist/watchlist.container.ts","utils/rxjs/filtermap.ts","model/takeprofit-stoploss/takeprofit-stoploss.model.ts","model/order-entry/order-entry.model.ts","model/takeprofit-stoploss/takeprofit-stoploss.utils.ts","model/limits/limits.utils.ts","view-model/order-entry/order-entry.utils.ts","model/orders/orders.model.ts","view-model/orders/orders.utils.ts","ui-desktop/order-entry/components/order-entry-panel-side/order-entry-panel-side.model.ts","view-model/order-entry/order-entry.view-model.ts","ui-common/side-panel/side-panel.component.tsx","ui-desktop/order-entry/components/order-entry-panel/order-entry-panel.model.ts","ui-desktop/order-entry/components/order-entry-panel-side/order-entry-panel-side.component.tsx","ui-desktop/order-entry/components/order-entry-execution/order-entry-execution.model.ts","ui-desktop/ui-kit/components/calendar/calendar.component.tsx","ui-desktop/ui-kit/components/icons/move-left.icon.tsx","ui-desktop/ui-kit/components/icons/move-right.icon.tsx","ui-common/takeprofit-stoploss-panel/takeprofit-stoploss-panel.model.ts","ui-desktop/order-entry/components/order-entry-execution/order-entry-execution.component.tsx","ui-desktop/order-entry/containers/order-entry-execution/order-entry-execution.container.ts","ui-desktop/ui-kit/components/icons/error.icon.tsx","ui-common/takeprofit-stoploss-panel/takeprofit-stoploss-panel.component.tsx","ui-desktop/order-entry/components/order-entry-takeprofit-stoploss/order-entry-takeprofit-stoploss.component.tsx","ui-desktop/order-entry/containers/order-entry-takeprofit-stoploss/order-entry-takeprofit-stoploss.container.ts","ui-desktop/order-entry/containers/order-entry-takeprofit-stoploss/order-entry-takeprofit-stoploss.utils.ts","ui-common/symbol/symbol.tsx","ui-common/icons/exclamation.icon.tsx","ui-common/error-panel/components/error-panel.component.tsx","ui-desktop/order-entry/components/order-entry-panel/order-entry-panel.component.tsx","ui-desktop/order-entry/containers/order-entry-panel/order-entry-panel.utils.ts","view-model/chart/chart.view-model.ts","ui-desktop/order-entry/containers/order-entry-panel/order-entry-panel.container.ts","api/generated/swagger/definitions/AvaTradingSessionTO.ts","api/generated/swagger/definitions/AvaTradingWeekTO.ts","api/generated/swagger/controllers/TradinghoursendpointController.ts","view-model/info/symbol-info.utils.ts","view-model/info/symbol-info.view-model.ts","ui-common/symbol-info-item/symbol-info-item.component.tsx","ui-common/symbol-info/symbol-info.component.tsx","ui-desktop/info-panel/components/symbol-info/symbol-info.component.tsx","ui-desktop/info-panel/containers/symbol-info/symbol-info.container.ts","ui-desktop/categories/components/categories/categories.component.tsx","ui-desktop/categories/containers/categories/categories.utils.ts","ui-desktop/categories/containers/categories/categories.container.ts","api/generated/swagger/definitions/ChartInstrumentTO.ts","api/generated/swagger/definitions/ChartRequestResultTO.ts","api/generated/swagger/definitions/StudyChartRequestTO.ts","api/generated/swagger/definitions/ChartRequestTO.ts","api/generated/swagger/definitions/UpdateChartDataSubscriptionTO.ts","api/generated/swagger/controllers/ChartsController.ts","ui-desktop/chart/components/toolbar/toolbar.model.ts","ui-common/remote-data-loader/remote-data-loader.component.tsx","ui-desktop/chart/components/toolbar/toolbar.utils.ts","ui-desktop/ui-kit/components/icons/chart-bar.icon.tsx","ui-desktop/ui-kit/components/icons/chart-candles.icon.tsx","ui-desktop/ui-kit/components/icons/chart-line.icon.tsx","ui-desktop/chart/components/toolbar/periods-anchor/periods-anchor.component.tsx","ui-desktop/chart/components/toolbar/type-anchor/type-anchor.component.tsx","ui-desktop/ui-kit/components/icons/no-crosshair.icon.tsx","ui-desktop/ui-kit/components/icons/aim.icon.tsx","ui-desktop/chart/components/toolbar/cross-tool-anchor/cross-tool-anchor.component.tsx","ui-desktop/chart/components/toolbar/toolbar/toolbar.component.tsx","ui-common/chart/plugin/cross-tool/models/cross-tool.view-model.ts","ui-common/chart/plugin/cross-tool/views/cross-tool.view.ts","ui-common/chart/plugin/cross-tool/views/ava-chart-info-view.ts","ui-common/chart/plugin/plugin.model.ts","ui-common/chart/plugin/cross-tool/cross-tool.ts","ui-common/chart/plugin/cross-tool/views/chart-info.view.ts","ui-common/chart/plugin/utils/view.ts","ui-desktop/chart/components/chart/chart.model.tsx","ui-desktop/chart/components/chart/chart.config.ts","ui-desktop/chart/components/chart/chart-graph.component.tsx","ui-desktop/chart/components/chart/chart-map.component.tsx","ui-desktop/chart/components/chart/chart.component.tsx","ui-desktop/chart/containers/chart-loader/chart-loader.model.ts","ui-desktop/chart/components/chart-wrapper/chart-wrapper.component.tsx","ui-desktop/chart/components/chart-loader/chart-loader.component.tsx","ui-desktop/chart/containers/chart-loader/chart-loader.utils.ts","ui-desktop/chart/containers/chart-loader/chart-loader.container.ts","ui-desktop/positions/components/position-table/position-table.model.ts","ui-desktop/ui-kit/components/icons/clear.icon.tsx","ui-desktop/ui-kit/components/icons/search.icon.tsx","ui-desktop/trade/components/symbol-search/symbol-search.model.ts","ui-desktop/trade/components/symbol-search/symbol-search.component.tsx","view-model/symbol-search/symbol-search.view-model.ts","ui-desktop/trade/containers/symbol-search/symbol-search.model.ts","ui-desktop/trade/containers/symbol-search/symbol-search.container.ts","ui-desktop/chart/plugin/lines/line.component.tsx","ui-desktop/chart/plugin/lines/lines.component.tsx","ui-desktop/chart/plugin/current-price-line/current-price-line-plugin.ts","ui-desktop/ui-kit/components/workspace/workspace.component.tsx","ui-desktop/ui-kit/components/workspace/workspace-chart.component.tsx","ui-desktop/trade/components/trade-dashboard/trade-dashboard.component.tsx","ui-desktop/trade/containers/trade-dashboard/trade-dashboard.utils.ts","ui-desktop/trade/containers/trade-dashboard/trade-dashboard.container.ts","ui-desktop/positions/components/position-table/position-table.utils.ts","view-model/positions/position-entity.utils.ts","ui-common/position-details/position-details.model.ts","view-model/positions/position-entity.view-model.ts","ui-common/icons/delete.icon.tsx","ui-common/icons/edit.icon.tsx","ui-desktop/ui-kit/components/icons/add.icon.tsx","ui-desktop/positions/components/position-table/position-entity.component.tsx","ui-desktop/positions/containers/position-table/position-entity.container.ts","ui-desktop/positions/components/position-table/position-table.component.tsx","view-model/positions/positions.view-model.ts","ui-desktop/positions/containers/position-table/position-table.container.ts","view-model/positions/position-close.view-model.ts","ui-desktop/positions/components/position-close/position-close.component.tsx","ui-desktop/positions/containers/position-close/position-close.container.ts","ui-common/editing-position/editing-position.component.tsx","ui-desktop/positions/components/editing-position/editing-position.component.tsx","view-model/positions/editing-position.view-model.ts","ui-desktop/positions/containers/editing-position/editing-position.utils.ts","ui-desktop/positions/containers/editing-position/editing-position.container.ts","utils/with-props.utils.ts","ui-desktop/chart/plugin/lines/lines-plugin.ts","ui-desktop/positions/components/positions-dashboard/position-dashboard-chart.component.tsx","view-model/positions/position-dashboard-chart.view-model.ts","ui-desktop/positions/containers/position-dashboard-chart/position-dashboard-chart.container.tsx","model/positions/position-details.model.ts","ui-common/position-details/position-details.component.tsx","ui-desktop/positions/components/position-details/position-details.component.tsx","view-model/positions/position-details.view-model.ts","ui-common/empty-screen/components/empty-screen.component.tsx","ui-desktop/positions/containers/position-details/position-details.container.ts","ui-common/icons/empty-screen.icon.tsx","ui-common/icons/empty-screen-fund.icon.tsx","ui-common/icons/empty-screen-search.icon.tsx","ui-desktop/orders/components/orders-table/orders-table.model.ts","ui-desktop/empty-screen/containers/empty-screen.container.ts","ui-desktop/positions/components/positions-dashboard/positions-dashboard.component.tsx","ui-desktop/positions/containers/positions-dashboard/positions-dashboard.container.ts","ui-common/redirect/containers/redirect-listener.container.ts","ui-common/cancel-confirmation/cancel-confirmation.component.tsx","ui-desktop/orders/components/order-entity/order-entity.component.tsx","ui-desktop/orders/containers/order-entity/order-entity.container.ts","ui-desktop/orders/components/orders-table/orders-table.utils.ts","ui-desktop/orders/components/orders-table/orders-table.component.tsx","view-model/orders/orders.view-model.ts","ui-desktop/orders/containers/orders-table/orders-table.container.ts","ui-common/order-details/order-details.component.tsx","ui-desktop/orders/components/order-details/order-details.component.tsx","view-model/orders/order-details.view-model.ts","ui-desktop/orders/orders.model.ts","ui-desktop/orders/containers/order-details/order-details.container.ts","ui-desktop/history/components/history-filter-form/history-filter-form.model.ts","view-model/orders/order-dashboard-chart.view-model.ts","ui-desktop/orders/components/orders-dashboard/order-dashboard-chart.component.tsx","ui-desktop/orders/containers/order-dashboard-chart/order-dashboard-chart.container.ts","view-model/orders/order-edit.view-model.ts","ui-desktop/orders/components/order-edit/order-edit.component.tsx","ui-desktop/orders/containers/order-edit/order-edit.container.ts","ui-desktop/orders/components/orders-dashboard/orders-dashboard.component.tsx","ui-desktop/orders/containers/orders-dashboard/orders-dashboard.container.ts","ui-desktop/history/components/history-filter-form/history-filter-form.utils.ts","model/history/history.model.ts","ui-desktop/history/components/history-filter-form/history-filter-form.component.tsx","view-model/history/history-filter-form.utils.ts","view-model/history/history-filter-form.view-model.ts","ui-desktop/history/containers/history-filter-form/history-filter-form.container.ts","ui-desktop/history/components/history-table/history-table.utils.ts","ui-desktop/history/components/history-table/history-table.component.tsx","ui-desktop/history/containers/history-table/history-table.utils.ts","view-model/history/history-table.view-model.ts","ui-desktop/history/containers/history-table/history-table.container.ts","ui-common/history-details/history-details.component.tsx","ui-desktop/history/components/history-details/history-details.component.tsx","view-model/history/history-details.view-model.ts","ui-desktop/history/containers/history-details/history-details.container.ts","ui-desktop/ui-kit/components/workspace/workspace-panel.component.tsx","ui-desktop/history/components/history-dashboard/history-dashboard.component.tsx","view-model/history/history-dashboard.view-model.ts","ui-desktop/history/containers/history-dashboard/history-dashboard.container.ts","ui-common/crm-pages/components/deposit.component.tsx","ui-common/crm-pages/components/crm-pages.component.tsx","ui-desktop/app/components/authorized/authorized.component.tsx","api/generated/swagger/definitions/MarketSymbolsTO.ts","api/generated/swagger/definitions/ProfileTO.ts","api/generated/swagger/definitions/TradeTO.ts","api/generated/swagger/definitions/UpdateMarketSymbolsSubscriptionTO.ts","api/generated/swagger/controllers/MarketDataController.ts","utils/rxjs/tap-on-last-unsubscribe.ts","store/market-data/market-data.store.ts","store/instrument/instrument.store.ts","store/instrument-info/instrument-info.store.ts","api/generated/swagger/definitions/OrderTemplateTO.ts","api/generated/swagger/definitions/PositionAttachProtectionsTO.ts","api/generated/swagger/definitions/PositionCloseByTO.ts","api/generated/swagger/controllers/PositionsController.ts","store/positions/positions.store.ts","api/generated/swagger/definitions/BracketGroupTemplateTO.ts","api/generated/swagger/definitions/IfThenBracketGroupTemplateTO.ts","api/generated/swagger/definitions/OCOGroupTemplateTO.ts","api/generated/swagger/definitions/IfThenOCOGroupTemplateTO.ts","api/generated/swagger/definitions/OSOGroupTemplateTO.ts","api/generated/swagger/definitions/ValidationResultTO.ts","api/generated/swagger/controllers/OrdersController.ts","utils/tuple.utils.ts","store/order/order.store.ts","api/generated/swagger/definitions/InstrumentSuggestTO.ts","store/watchlist/watchlist.store.ts","api/generated/swagger/definitions/SuggestResultTO.ts","api/generated/swagger/definitions/InstrumentSuggestTreeNodeTO.ts","api/generated/swagger/definitions/TreeSuggestResultTO.ts","api/generated/swagger/controllers/SymbolSuggestController.ts","store/chart-settings/chart-settings.store.ts","view-model/account/account.view-model.ts","store/history-order/history-order.store.ts","api/generated/swagger/definitions/InstrumentInfoSubscriptionTO.ts","api/generated/swagger/controllers/InstrumentinfoController.ts","store/conversion-rate/conversion-rate.store.ts","store/metrics/metrics.store.ts","store/limits/limits.store.ts","api/generated/swagger/definitions/UpdatePositionKeysSubscriptionTO.ts","api/generated/swagger/controllers/MarginImpactsController.ts","store/margin-impact/margin-impact.store.ts","view-model/system-settings/system-settings.view-model.ts","ui-desktop/app/containers/authorized/authorized.container.ts","api/post-message.client.ts","ui-desktop/app/containers/app/app.container.ts","ui-desktop/env/components/env.component.tsx","api/generated/swagger/controllers/AvasystemsettingsinfoController.ts","ui-desktop/env/containers/env.container.ts","app.desktop.ts"],"names":["__webpack_require__","d","__webpack_exports__","IconWrapper","react__WEBPACK_IMPORTED_MODULE_0__","_icon_wrapper_module_css__WEBPACK_IMPORTED_MODULE_1__","props","className","theme","children","module","exports","row","rowColumn","cell","cell_empty","seconds","cell_numeric","cell_buy","cell_sell","cell_positive","cell_negative","infoCell","icon","container","axis","axis_x","axis_y","chartInfo","chartInfo_fixed","chartInfo_mobile","chartInfo_alignedRight","axisLabel","axisLabel_visible","axisLabel_y","axisLabelValue","axisLabel_x","visible","axis_visible","disabled","chart--graph","chart--axisWrapper","chart--axisWrapper-x","chart--axisWrapper-y","chart--axis-x","crossTool","containerMobile","header","toggle","label","title","containerDesktop","content","group","group_volume","studies","value","group_candle","group_up","group_down","groupTitle","line","parameter","delimeter","line_vertical","line_horizontal","overlay","collapsed","innerPaddedTopmostWrapper","innerPaddedWrapper","divider","operations","info","element","text","moreOptions","moreOptions_opened","optionsItem","priceHits","cancelOnDateCheckbox","cancelOnDate","validationError","rowSelected","rowColumn_small","rowColumn_left","rowColumn_right","rowColumn_center","positions","red","green","controls","control","icon_plus","addProtection","addProtection_small","symbolCell","changeCell","changeCell_empty","icon_accent","favCell","list","item","item_break","link","link_active","menuIcon","menuContainer","panel","wrapper","account","accountLabel","accountLabel_real","accountLabel_preview","footer","logoutIcon","logout","email","logoutLinkEmailWrapper","logoutIconWrapper","localeSelectorWrapper","TPSLCell_small","section","section__header","section__value","separator","headerLabel","profit","profitLabel","profitValue","profitValue_positive","profitValue_negative","columns","amount","amountHeader","lot","lotLabel","lotValue","dropdownWrapper","triangleWrapper","datePickersWrapper","dateInputWrapper","labelWrapper","error","NUMERIC_STEPPER","Symbol","RawNumericStepper","_this","Object","_Users_dmitry_Projects_dxtf_ava_web_node_modules_react_scripts_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","this","_Users_dmitry_Projects_dxtf_ava_web_node_modules_react_scripts_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_Users_dmitry_Projects_dxtf_ava_web_node_modules_react_scripts_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","call","inputRef","selectionStart","selectionEnd","getInnerInput","firstChild","saveCaretPosition","input","restoreCaretPosition","onKeyDown","event","displayedValue","state","String","isSelectionsEqualAndHasValue","length","keyCode","KeyCode","Up","preventDefault","increase","Down","decrease","Backspace","Number","charAt","Delete","onInputChange","manualEdit","isFocused","newValue","parseValue","pipe","O","constant","onValueChange","onFocus","setState","onBlur","target","onWheel","isDisabled","deltaY","step","onIncrement","onDecrement","arguments","undefined","formatValue","_this2","_this$props","decrementIcon","incrementIcon","clearIcon","min","max","SteppableInput","hasError","isNaN","react__WEBPACK_IMPORTED_MODULE_6__","_devexperts_react_kit_dist_components_input_Input__WEBPACK_IMPORTED_MODULE_13__","type","tabIndex","Input","concat","innerRef","ref","isInteger","toString","split","n","num","precision","getPrecision","frac","Math","pow","round","parser","newProps","prevState","_Users_dmitry_Projects_dxtf_ava_web_node_modules_react_scripts_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","formatter","React","NumericStepper","withTheme","withDefaults","NEGATIVE_INFINITY","POSITIVE_INFINITY","parseFloatWithLeadingZero","_ui_desktop_ui_kit_components_icons_minus_icon__WEBPACK_IMPORTED_MODULE_7__","_ui_desktop_ui_kit_components_icons_plus_icon__WEBPACK_IMPORTED_MODULE_8__","Link","_PureComponent","_getPrototypeOf2","_Users_dmitry_Projects_dxtf_ava_web_node_modules_react_scripts_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_len","args","Array","_key","_Users_dmitry_Projects_dxtf_ava_web_node_modules_react_scripts_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_dmitry_Projects_dxtf_ava_web_node_modules_react_scripts_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","apply","handleClick","e","onClick","_Users_dmitry_Projects_dxtf_ava_web_node_modules_react_scripts_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","_Users_dmitry_Projects_dxtf_ava_web_node_modules_react_scripts_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","key","react__WEBPACK_IMPORTED_MODULE_5__","_devexperts_react_kit_dist_components_Link_Link__WEBPACK_IMPORTED_MODULE_6__","assign","PureComponent","groupTitleText","suggestList","suggest","suggest_selected","selectedMark","description","iconWrapper","_devexperts_react_kit_dist_components_Scrollable_Scrollable__WEBPACK_IMPORTED_MODULE_0__","o","Popover","_devexperts_utils_dist_function_memoize__WEBPACK_IMPORTED_MODULE_1__","_devexperts_react_kit_dist_components_Popover_Popover__WEBPACK_IMPORTED_MODULE_2__","getRoot","memoize","document","getElementById","left","chart","aside","container_hasShadow","categories","symbols","watchlist","bottom","table","body","head","headCell","filterFormWrapper","historyTableWrapper","emptyScreen","buttons","container_sell","container_buy","container_disabled","error__icon","error__title","error__message","symbol","marketSentiment","marketSentimentBar","marketSentimentBarLeft","prefixChange","tradingHours","menuTypeIcon","widgetLabel","closeBtnWrapper","orderChainId","positiveSide","negativeSide","iconCheckboxTick","react__WEBPACK_IMPORTED_MODULE_8__","_ui_desktop_ui_kit_components_icons_checkbox_tick_icon__WEBPACK_IMPORTED_MODULE_12__","RawCheckbox","_classNames","_classNames2","checkMark","_Users_dmitry_Projects_dxtf_ava_web_node_modules_react_scripts_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__","_Users_dmitry_Projects_dxtf_ava_web_node_modules_react_scripts_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","view","classNames","_Users_dmitry_Projects_dxtf_ava_web_node_modules_react_scripts_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","view_isChecked","view_isCheckedDisabled","containerTheme","css","checkboxContainer","_devexperts_react_kit_dist_components_Checkbox_Checkbox__WEBPACK_IMPORTED_MODULE_11__","Component","defaultProps","Checkbox","CHECKBOX","DateInput","_devexperts_react_kit_dist_components_DateInput_DateInput__WEBPACK_IMPORTED_MODULE_6__","calendarIcon","_icons_calendar_icon__WEBPACK_IMPORTED_MODULE_7__","localeInSelector","flag","btn","main","cell_leftAligned","cell_rightAligned","cell_centerAligned","scrollbar","track","_devexperts_react_kit_dist_components_Menu_Menu__WEBPACK_IMPORTED_MODULE_0__","axisWrapper-x","graph","graph_resizable","axisWrapper_x","axisWrapper_y","canvasArea","canvasWrapper","studyOverlay","studyMarker","extraCanvas","container_selected","id","currency","status","status_demo","container_isDisabled","icon_isChecked","view_isDisabled","container_symbol","mark","buttonWrapper","itemGroup__header","item_active","item__content","itemGroup__header__content","loader","current","current_opened","container_isHidden","textBody","pip","noValue","price","price_down","container_trade","container_isFocused","container_hasError","errorText","inner","inner_isLoading","container_primary","container_hasArrow","container_placementTop","arrow","container_placementBottom","container_placementLeft","container_placementRight","slide-in-from-top","fade-in","MinusIcon","_ui_common_icon_wrapper_icon_wrapper_component__WEBPACK_IMPORTED_MODULE_1__","viewBox","fillRule","PlusIcon","_devexperts_react_kit_dist_components_SteppableInput_SteppableInput__WEBPACK_IMPORTED_MODULE_0__","accounting__WEBPACK_IMPORTED_MODULE_0__","numericString","unformat","slice","replace","section_isActive","scrollable","withVerticalScrollbar","overlayContent","vertical_scrollbar__bar","resizeDetector","bar","containerIsVisible","backdrop","backdrop_isModal","iframe","container__anchor","container__anchor__caret","container__anchor__text","container__anchor__content","container__anchor__content_hasCaret","container__anchor__caret_isReversed","container_isOpened","container__text","container__menu","container__menu_hasSelectedItem","container__item","container__item__activeIcon","container__item__text","container__popover__content","container__popover","hr","arrowUp","arrowDown","CheckboxTickIcon","fill","CalendarIcon","calendar","calendar__header","calendar__day","calendar__row","calendar__body","calendar__day_isHidden","calendar__day_isCurrent","calendar__monthName","calendar__yearsText","button_icon__wrapper","controlsWrapper","profitControlsWrapper","priceLabel","priceValue","limitLabel","checkboxWrapper","priceWrapper","plLabel","errorIcon","subtitle","item_secondary","window","chartMap","map","canvas","labels","button","button_toLeft","button_toRight","area","area_hidden","knob","knob_toLeft","knob_toRight","profitWrapper","profitAmount","profitAmount_positive","profitAmount_negative","element_label","element_text","verticalSpacer","takeProfitStopLossWrapper","textWrapper","title_preview","iconContainer","loadScript","src","script","createElement","appendChild","load$","fromEvent","success","error$","failure","Error","race","startWith","pending","ServerError","_Error","message","classCallCheck","possibleConstructorReturn","getPrototypeOf","setPrototypeOf","assertThisInitialized","prototype","inherits","createClass","wrapNativeSuper","shareReplayWithDefaults","source$","shareReplay","bufferSize","refCount","createRouter","ask","_e$history","history","listen","action","location","push","state$","Observable","subscriber","next","Sink","parse","match","path","run","Route","href","a","format","redirectToTradePostMessageTO","t","payload","redirectToTradeWithSymbolPostMessageTO","redirectToRealAccountPostMessageTO","url","redirectToPositionsPostMessageTO","redirectToOrdersPostMessageTO","redirectToHistoryPostMessageTO","redirectToCrmDepositPostMessageTO","redirectToCrmWithdrawPostMessageTO","redirectToCrmAccountsPostMessageTO","redirectToCrmUploaddocsPostMessageTO","redirectToCrmPersonalPostMessageTO","closePopupMessageTO","postMessagesTO","isRedirectToTradeWithSymbol","to","isRedirectToRealAccount","isClosePopup","isRedirectToCRMDeposit","root","end","api","lit","auth","then","relogin","redirect","avacrm","createDemoAccount","trade","category","str","tradeSymbolName","tradeSymbolAction","categorySymbol","categorySymbolAction","crm","crm_deposit","crm_withdraw","crm_accounts","crm_uploaddocs","crm_personal","crm_calculator","crm_become_trader","position","positionEdit","positionClose","positionInfo","editingPositionTakeProfitStopLossKind","orders","order","int","orderInfo","orderEdit","editingOrderTakeProfitStopLossKind","historyOrder","historyInfo","chat","routes","avarcm","create_demo_account","actionId","edit","profitLossKind","close","accounts","deposit","withdraw","uploaddocs","personal","calculator","becomeTrader","getPath","isProductionBuild","process","toLowerCase","console","log","isMobileBuild","REACT_APP_IS_MOBILE","redirectToRelogin","reloginHref","empty","createEnvViewModel","asks","initialize$","avasystemsettingsinfoController","getAppSettings","mapRD","data","lookup","tap","dataRD","isFailure","is","loadedScripts$","switchMapRD","system","includes","combineLatestRD","Preloader","react","RemoteDataState","getRenderRemoteData","DataStateNoData","DataStateFailure","DataStatePending","preloader_component_Preloader","runOnMount","Target","selector","_class2","_temp2","_PureComponent2","Wrapper","subscription","effectSubscription","p","identity","provide","createSelector","result","disposeSubscription","sink$","subscribe","disposeEffectSubscription","unsubscribe","displayName","stringOption","createOptionFromNullable","numberOption","NAN","DateFromISOString","DateFromUnixTime","NEAType","_t$Type","DoubleOptionType","m","v","c","validated","validate","E","_tag","name","encode","Type","nea","validatedArray","fromArray","toArray","quoteSubscriptionInitializedMessageTO","accountId","QuoteTOIO","stale","boolean","quantity","number","askDirection","bidDirection","markDirection","string","bid","askSize","bidSize","markPrice","date","quoteMessageTO","SummaryTOIO","dayOpen","dayHigh","dayLow","prevDayClose","dayClosePrice","summaryMessageTO","unknownType","_Type","UnknownType","_","getMessage","context","JSON","stringify","actual","cEntry","index","padding","join","getContextPath","fail","es","ok","report","validation","fold","AccountMetricsTOIO","availableFunds","balance","equity","margin","riskLevel","profitLoss","allMetrics","dictionary","accountMetricsMessageTO","StudyCandleTOIO","values","array","CandleTOIO","timestamp","open","high","low","volume","expansion","studyValues","time","ChartResponseTOIO","subtopic","historyData","requestID","CHART","chartMessageTO","PriceIncrementsTOIO","priceIncrements","pricePrecisions","bondFraction","InstrumentTOIO","recursion","union","literal","currencyPrecision","pipsSize","quantityIncrement","quantityPrecision","priceIncrement","version","priceIncrementsTO","lotSize","baseCurrency","lotName","multiplier","expiration","firstNoticeDate","initialMargin","maintenanceMargin","lastTradeDate","underlying","flex","mmy","unitName","instrumentMessageTO","accountsMessageTO","currentAccount","paperMoney","availableAccounts","PositionKeyTOIO","instrumentId","positionCode","ProtectionOrderTOIO","orderType","fixedPrice","fixedOffset","priceFixed","refOrderChainId","requestId","PositionTOIO","uid","positionKey","cost","costBasis","modifiedTime","userLogin","takeProfit","stopLoss","positionMessageTOIO","FxPositionMetricsTOIO","plOpen","swap","commission","positionMetricsMessageTOIO","WatchlistsTOIO","futures","common","watchlistMessageTOIO","accountWatchlists","commonWatchlists","watchlistSubscriptionInitializedMessageTO","WatchlistContentTOIO","watchlistId","watchlistContentMessageTO","AggregationPeriodTOIO","intraday","timeUnit","RangeTOIO","duration","AggrPeriodRangePairTOIO","aggregationPeriod","range","StudyLineTOIO","studyLineType","thickness","colors","StudyParamValidationTOIO","StudyParamTOIO","studyParamType","validationTO","StudyTOIO","parameters","lines","overlaying","GlobalChartSettingsIO","ranges","pairs","periods","GlobalChartSettingsTOIO","chartSettings","globalChartSettingsMessageTO","ConversionRateTOIO","from","conversionRateMessageTO","MarginImpactTOIO","instrumentSymbol","formula","marginImpactsMessageTOIO","UserTOIO","login","fullName","delimiterUserNameDomain","domain","userInfoMessageTO","user","ExecutionMessageTOIO","errorCode","OrderTOIO","orderId","ocoGroupCode","bracketGroupCode","statusDescription","createdTime","remainingQuantity","filledQuantity","limitPrice","averagePrice","stopPrice","stopLimitPrice","triggerPrice","liquidation","trailPrice","attached","stopPriceOffset","stopPriceOffsetPercent","timeInForce","fillPrice","expireAt","closedPL","parentOrderId","thenOrdersIds","orderRole","orderGroupCode","positionEffect","exchange","lastFillTime","stopPriceTriggerTime","hasTriggeredStop","commissionFee","alertExpression","reason","additionalParameters","ordersMessageTOIO","HistoryOrderTOIO","instrument","openTime","closeTime","openPrice","closePrice","swaps","commissions","side","profitSize","historyOrderMessageTOIO","accountSwitchedMessageTO","voidType","AvaTokenTOIO","avaToken","avaTokenMessageTO","AvaAccountTOIO","serverName","AvaSystemSettingsTOIO","platformType","reloginPage","previewUser","avaSystemSettingsMessageTOIO","AccountSettingsTOIO","liquidationLevel","marginAlertLevel1","accountSettingsMessageTOIO","LimitsDomainTOIO","limitStopDistanceType","limitStopDistance","limitStopDistanceInPercentOfSpread","minOrderSize","maxOrderSize","minOrderIncrement","limitType","defaultOrderSize","limitsDomainMessageTOIO","InstrumentInfoTOIO","dayChange","weekChange","monthChange","sentimentBuy","sentimentSell","avaInstrumentInfoMessageTOIO","AvaWatchListInstrumentInfoTOIO","AvaWatchListInstrumentInfoMessageTOIO","LogoutReasonTOIO","reasonType","LogoutEventTOIO","reasonTO","logoutEvenyMessageTO","socketMessageTO","isQuoteSubscriptionInitializedTO","isQuoteTO","isSummaryTO","isConversionRateTO","isChartTO","isAccountMetricsTO","isInstrumentTO","isAccountsTO","isOrdersTO","isLimitsTO","isHistoryOrderTO","isPositionTO","isPositionMetricsTO","isWatchlistTO","isMarginImpactTO","isWatchlistSubscriptionInitializedTO","isWatchlistContentTO","isGlobalChartSettingsTO","isUserInfoTO","isAvaSystemSettingsTO","isAccountSettingsTO","isAvaInstrumentInfoTO","isAvaWatchListInstrumentInfoTO","isLogoutEventTO","atmosphere","distinctUntilChangedStrict","setoid","distinctUntilChanged","getSetoid","setoidStrict","equals","strictEqual","setoidOptionString","getEq","eqString","setoidOptionNumber","eqNumber","setoidOptionDate","eqDate","distinctRDString","distinctRDOptionString","distinctRDNumber","distinctRDOptionNumber","distinctRDOptionDate","distinctRDNumberArray","getEqArray","ordNumber","distinctRDOptionNumberArray","getOrd","createApiClient","baseHref","uuid$","errorSubj$","Subject","asObservable","sharedUuid$","of","request","_request","_x","query","buildUrl","switchMap","uuid","headers","x-atmosphere-tracking-id","Content-Type","getOrElse","init","method","credentials","fromPromise","fetch","response","statusText","catchError","get","apiRequest","objectSpread","put","post","remove","i18n","use","LanguageDetector","detection","lookupQuerystring","lookupLocalStorage","lookupFromPathIndex","lookupFromSubdomainIndex","caches","resources","translations","fallbackLng","zh-Hans","default","debug","nsSeparator","keySeparator","interpolation","escapeValue","formatSeparator","wait","returnEmptyString","i18next","TRANSLATION_PLACEHOLDER","tspan","defaultTranslation","transTemplate","node","translatedText","textNode","data-lokalise","data-key","translate","getLanguageForCRM","language","CONTEXT_THEME","_CONTEXT_THEME","defineProperty","INPUT","inputCss","BUTTON","buttonCss","POPOVER","popoverCss","STEPPABLE_INPUT","steppableMainCss","ButtonIcon","steppableButtonIconCss","stepperInputCss","stepperButtonIconCss","NUMERIC_STEPPER_AVA","DATE_INPUT","dateInputCss","dateInputButtonIconCss","CalendarButtonIcon","MENU","menuCss","SCROLLABLE","scrollableCss","VERTICAL_SCROLLBAR","scrollbarCss","Theme","withRXWithDefaults","withRX","scheduler","asap","createAsideViewModel","combineContext","orderStore","positionsStore","orderCount$","keys$","keys","positionCount$","RouteLinkComponent","handleNavigate","isExact","onNavigate","_this$props2","render","isActive","rx","RouteLink","_class","_temp","Intermediate","props$","href$","pathname$","router","pathname","combineLatest","_ref","_ref2","slicedToArray","pattern","decodeURIComponent","RegExp","test","_ref3","_ref4","options","RouteLinkContainer","objectWithoutProperties","hrefValue","TradeIcon","icon_wrapper_component","xmlns","PositionsIcon","OrdersIcon","HistoryIcon","DepositIcon","ChatIcon","BurgerIcon","BurgerCloseIcon","activeLinkTheme","cn","linkTheme","Aside","withTranslation","AsideComponent","renderItem","link_component","menuCloser","toggleChat","menuIsOpened","menuHandler","orderCount","positionCount","isRealAccount","dyData","data-lng","isReal","data-type","burger_close_icon_BurgerCloseIcon","burger_icon_BurgerIcon","trade_icon_TradeIcon","positions_icon_PositionsIcon","orders_icon_OrdersIcon","history_icon_HistoryIcon","deposit_icon_DepositIcon","chat_icon_ChatIcon","currentTags","tagsObject","locale","updateTags","zE","$zopim","livechat","removeTags","reduce","addTags","prefill","setName","setEmail","hide","show","setLocale","setLanguage","l","r","convertRegionalLocale","setAccountId","config","onHide","setOnChatStart","Date","msg","say","sendStartingMessage","createChat","Container","asideViewModel","accountViewModel","current$","first","some","none","AsideContainer","deferContext","LogoIcon","width","height","Optional","HeaderAccountMetricsRaw","accounting","currencySymbol","withPreview","previewMode","optional_component_Optional","available","totalAllocated","HeaderAccountMetrics","currencyStringToSymbol","HeaderAccountMetricsContainer","_e$accountViewModel","accountMetrics$","equity$","accountMetrics","RawButton","restProps","Button","RawButtonCta","button_component_Button","wTheme","buttonCTATheme","ButtonCta","CloseIcon","RawCloseButton","close_icon_CloseIcon","CloseButton","RawPopup","renderHeader","onClose","closeButtonCss","Popup","POPUP","Iframe","scrolling","Mode","UpgradeAccountButtonRaw","isPopupOpened","handleClose","popup_component_Popup","isOpened","isModal","iframe_component_Iframe","UpgradeAccountButton","RawRegistrationButton","PURE","constUndefined","RegistrationButton","Header","renderLink","linkCss","logo_icon_LogoIcon","showDemoButton","showDepositButton","accountLabelClassName","constFalse","registrationButtonCss","isDemoMode","accountsExcludingCurrent","filter","isEmpty","createHeaderViewModel","availableAccounts$","showDemoButton$","showDepositButton$","headerViewModel","HeaderContainer","makeAccountUrl","lang","chooseMode","Demo","Real","tail","isTwoAccountsWithDifferentStatus","DemoLive","Regular","createMenuViewModel","menuMode$","proTraderAvaliable$","search","pluck","fromNullable","currentAccount$","TableSize","TableCellAlign","LogoutIcon","ArrowIcon","transform","arrowIcon","arrow_icon_ArrowIcon","Selectbox","SELECTBOX","caretIcon","CheckIcon","xlinkHref","mask","ArrowDownFlatIcon","FlagIconWrapper","FlagUsaIcon","flag_icon_wrapper_component_FlagIconWrapper","FlagRussiaIcon","x","y","FlagGermanyIcon","FlagFranceIcon","FlagItalyIcon","FlagPortugeseIcon","FlagSpainIcon","FlagIsraelIcon","stroke","strokeWidth","FlagArabicIcon","fontFamily","fontSize","FlagChinaIcon","getFlagIcon","flag_usa_icon_FlagUsaIcon","flag_russia_icon_FlagRussiaIcon","flag_germany_icon_FlagGermanyIcon","flag_france_icon_FlagFranceIcon","flag_italy_icon_FlagItalyIcon","flag_portugese_icon_FlagPortugeseIcon","flag_spain_icon_FlagSpainIcon","flag_israel_icon_FlagIsraelIcon","flag_arabic_icon_FlagArabicIcon","flag_china_icon_FlagChinaIcon","dispatchLocaleChangeEvent","IO","dispatchEvent","CustomEvent","detail","isLocale","RawLocaleSelectorAnchor","buttonTheme","isNotNullable","arrow_down_flat_icon_ArrowDownFlatIcon","LocaleSelectorAnchor","localesOptions","localeTitles","en","ru","de","fr","it","pt","he","ar","zh_CN","LocaleSelectorUnwrapped","toggleLocaleSelectorState","handleLocaleSelect","changeLocale","currentLocale","changeLanguage","catch","lng","getFallbackLanguage","selectbox_component_Selectbox","onToggle","Anchor","selectboxCss","itemClassName","menu_component","menuItemCss","check_icon_CheckIcon","LocaleSelector","RawMenuListItem","rel","MenuListItem","AccountsIcon","PersonalDetailsIcon","RawMenuDivider","memo","MenuDivider","CalculatorIcon","UploadDocsIcon","WithdrawIcon","RawInfoBox","isHidden","handleToggle","hides","notNowButtonCss","InfoBox","MenuDemo","handleRoute","accounts_icon_AccountsIcon","personal_details_icon_PersonalDetailsIcon","calculator_icon_CalculatorIcon","infoBoxCss","upload_docs_icon_UploadDocsIcon","withdraw_icon_WithdrawIcon","TraderIcon","SwitchIcon","MenuAccountRaw","getText","isSelected","statusTheme","MenuAccount","RawMenuAccounts","toggleList","accountCurrentContainer","accountCurrentContainer_isOpened","accountStatus","accountIcon","accountCurrency","isLast","handleSwitch","accountContainers","accountContainers_last","MenuAccounts","MenuLive","getSwitchModeText","onPreloaderChange","renderAccounts","mode","switch_icon_SwitchIcon","secondAccount","findFirst","switchModeText","proTraderAvaliable","isDemo","_ref5","trader_icon_TraderIcon","DisableOverlay","RegistrationInfoBoxRaw","RegistrationInfoBox","logoutLinkTheme","Menu","onContainerClick","currentTarget","renderContent","Scrollable_Scrollable","disable_overlay_component_DisableOverlay","logout_icon_LogoutIcon","fromModelToData","menuViewModel","accountInfo$","email$","MenuContainer","WelcomePopup","createWelcomeViewModel","ctx","postMessageClient","openCloseHandler","createHandler","initState$","locationSearch","show_as_popup","closePopupFromPostMessage$","postMessage$","or","handledState$","merge","value$","mapTo","shouldOpenPopup$","handle","_ctx$welcomeViewModel","welcomeViewModel","WelcomePopupContainer","ConnectionLostPopupRaw","popupCss","isPrimary","ConnectionLostPopup","ErrorStatuses","createConnectionLostViewModel","isConnectionError$","socketClient","connectionStatus$","connectionStatusViewModel","ConnectionLostPopupContainer","linkCN","MarginPopup","marginCallHelpLink","popupTheme","createMarginViewModel","accountMetricsWithMargin$","accountMargin$","reverseRiskLevel$","toggleHandler","marginAlertLevel$","message$","marginAlert","reverseRiskLevel","alert","_e$marginViewModel","marginViewModel","MarginPopupContainer","createReloginViewModel","logoutEvent$","logoutEvent","ReloginPopupRaw","ReloginPopup","reloginViewModel","ReloginPopupContainer","Chat","_Component","changeChatLocale","on","nextProps","chatConfig","_this$props$chatConfi","currentAccountId","currentName","currentEmail","hasNameChanged","hasEmailChanged","hasAccountIdChanged","off","chatConfig$","ChatContainer","MinimizeIcon","CloseContinueRegistrationIcon","RegistrationContinueButtonRaw","_useState","useState","_useState2","isShow","setShow","toggleHandle","useCallback","constVoid","minimize_icon_MinimizeIcon","continue_registration_close_icon_CloseContinueRegistrationIcon","RegistrationContinueButton","combinedPopupContexts","Layout","toggleMenu","closeMenu","PushwooshInstance","Pushwoosh","LayoutContainer","systemSettingsViewModel","platformType$","query$","enableLokaliseTranslation$","LOKALISE_CONFIG","projectId","disableAdvancedHtml","getTime","customerId$","pushWooshInfo$","customerId","applicationCode","PROD","DEV","logLevel","safariWebsitePushID","defaultNotificationTitle","autoSubscribe","userId","tags","AccountID","effects$","preloader$","RouteComponent","Boolean","exact","RouteContainer","TableCell","_cn","align","Left","Center","Right","getWidthFromConfig","dataKey","getVerticalOffset","itemIndex","itemSize","parentElem","verticalOffset","parentOffset","scrollTop","offsetHeight","offsetToLastWholeItem","elementsOnScreenHeight","trunc","gap","WatchlistLargeTableConfig","WatchlistSmallTableConfig","getColumnsConfig","translatedColumnNames","sell","buy","change","createWatchlistViewModel","categoryId","watchlistStore","data$","getById","wl","subscribeAllWlInstrumentsEffect$","toConsumableArray","marketDataStore","getDataBySymbol","routeState$","tableSize$","isContainsBuy","isContainsSell","isContainsInfo","Small","Large","tableSizeConfig$","tableSize","instrumentFromURL$","parsedURL","isSome","dataAndInstrumentPositionId$","_ref6","positionId","findIndex","s","TableHeader","rendeHeaderCell","style","flexBasis","table_cell_component_TableCell","renderHeaderRow","TABLE_HEADER_HEIGHT","THROTTLE_DELAY","CustomScrollbars","isEndOfScroll","refSetter","scrollbarsRef","forwardedRef","checkEndOfScroll","throttle","stateIsEndOfScroll","clientHeight","scrollHeight","renderScrollbarElements","getStyles","overflow","handleScroll","onScroll","react_custom_scrollbars_lib_default","scrollbarsCss","renderThumbVertical","renderTrackVertical","CustomScrollbarsVirtualList","forwardRef","table_scrollbars_component_CustomScrollbars","Table","outerRef","scheduleScroll","scrollToItem","raf","_this$props3","tableHeadClassname","outerElementType","table_header_component_TableHeader","index_esm","AutosizedTable","dist_index_esm","size","table_list_component_Table","putDot","dotIndex","startIndex","RawPipRate","rise","digits","stringValue","formatNumber","indexOf","commaIndex","start","valueNoDot","PipRate","InfoIcon","strokeLinejoin","StarOnIcon","StarOffIcon","definePipSettings","pipSize","valueString","pipString","valueDotIndex","pipDotIndex","valueInteger","ArrowUpIcon","ArrowDownIcon","RawPriceDirection","direction","arrow_up_icon_ArrowUpIcon","arrow_down_icon_ArrowDownIcon","PriceDirection","sequenceTOption","sequenceT","option","defaultColumnWidth","accentIconClassName","WatchlistEntity","renderSuccess","renderSymbolCell","renderSellCell","renderSellButton","renderBuyButton","renderBuyCell","renderChangeCell","renderInfoIcon","renderFavIcon","handleClickWithStopPropagation","pipRendered","pipRateCss","optionalCss","buttonSellCss","buttonBuyCss","stopPropagation","_ref7","_ref8","cellTheme","priceDirectionCss","_ref9","info_icon_InfoIcon","isFavorite","handleFavoriteIcon","star_on_icon_StarOnIcon","star_off_icon_StarOffIcon","toggleFavorite","currentColumn","remoteData","ResponseValidationError","errors","CreateWatchlistTOIO","ResponseResultTOIO","errorMessage","UpdateWatchlistSubscriptionTOIO","watchlistIdsToAdd","watchlistIdsToRemove","WatchlistCreationTOIO","watchlistsController","createWatchlist","encoded","partial","apiClient","chain","fromEither","decode","mapLeft","create","changeWatchlistContentSubscription","tvoid","renameWatchlist","newName","encodeURIComponent","deleteWatchlist","updateWatchlistCondition","duplicateWatchlist","getWatchlists","getWatchlistsContent","watchlistIds","createWatchlistEntityViewModel","fromReader","instrumentStore","instrument$","getBySymbol","positions$","getAllByInstrumentId","symbolData$","bid$","lastQuote","quote","ask$","pipsSize$","precision$","change$","favoriteWatchlist$","private$","isSuccess","watchListsRD","favWatchList","symbolsOfFavoriteWatchlist$","watchList","favoriteListId$","hasThisSymbolInFavorites$","bidAsk$","bidAskTuple","hasThisSymbolInFavorites","_bidAskTuple","toTableItem","toOption","toggleFavoriteEffect$","withLatestFrom","tableItem","filterArray","watchListSymbol","snoc","favoriteSymbols","favListId","watchlistEntityViewModel","WatchlistEntityContainer","rowData","vm","createVM","Redirect","WatchlistTable","getTranslatedColumnNames","renderTable","redirectToInstrument","getItemKey","rowIndex","columnNames","autosized_table_component_AutosizedTable","itemCount","itemData","itemKey","renderRow","firstSymbol","watchlistViewModel","WatchlistContainer","FilterMapSubscriber","destination","filterMap","thisArg","count","_next","Subscriber","FilterMapOperator","source","lift","ProfitLossKind","ProvidedLabelType","PriceValidationErrorMessages","OrderKind","OrderEntrySide","AmountValidationErrorMessages","ExecutionPriceValidationErrorMessages","preseededTPSLData","rawPrice","validatedPrice","right","minLimit","Infinity","maxLimit","possiblePL","isValueManuallyChanged","providedLabel","Max","providedLimit","instrumentPrecision","getDefaultTakeProfitStopLossData","takeProfitData","kind","Profit","hasTP","stopLossData","Loss","hasSL","calcTakeProfitStopLossPrice","symbolPrice","enteredPrice","calcPossiblePL","rate","abs","roundPriceWithPrecision","toFixed","getOrderType","plKind","mapTakeProfitStopLossPayload","priceRounded","preliminaryValue","getDefaultValueForTakeProfitStopLoss","PLKind","distance","calculated","Buy","Sell","calcDefaultTakeProfitValue","calcDefaultStopLossValue","getLabelAndMinMaxValuesForTakeProfitStopLoss","Min","calcTakeProfitMinMaxValues","calcStopLossMinMaxValues","getCurrentPrice","isQuantityPositive","marketData","getUpdatedProtectionOrderOption","protection","takeProfitStopLossData","defaultProtection","possibleProtection","getMinMaxLimit","getValidatedPrice","MoreOrEqual","LessOrEqual","getTakeProfitStopLossValue","currentTakeProfitData","currentStopLossData","prevTakeProfitValue","prevTakeProfitFixedPrice","prevStopLossValue","prevStopLossFixedPrice","parentPrice","parentOrderPrice","orderKind","preenteredTPValue","preenteredSLValue","propTPValue","propSLValue","recalculatedPriceTP","recalculatedPriceSL","refPrice","Order","Position","getRefPriceForPossiblePL","possibleProfit","possibleLoss","_getLabelAndMinMaxVal","_getLabelAndMinMaxVal2","labelTakeProfit","minMaxTPValue","_getLabelAndMinMaxVal3","_getLabelAndMinMaxVal4","labelStopLoss","minMaxSLValue","tpPriceRounded","slPriceRounded","_getMinMaxLimit","_getMinMaxLimit2","minLimitTP","maxLimitTP","_getMinMaxLimit3","_getMinMaxLimit4","minLimitSL","maxLimitSL","validatedPriceTP","validatedPriceSL","countDistance","spread","getExpireAt","today","day","getDate","month","getMonth","year","getYear","validateExecutionPrice","executionPrice","bidOrAskPrice","allowedDistance","commonErrorFields","hiRange","loRange","General","NotInRange","isMultiple","WrongStepping","validateOrderEditPrice","priceAndType","_priceAndType$value","OverRange","BelowRange","dividend","divisor","Big","mod","eq","convertDateInputValueToDate","setoidOEValues","getStructEq","execFormValue","isExecEnabled","eqBoolean","isExpireChecked","expireAtDate","isTPEnabled","takeProfitValue","isSLEnabled","stopLossValue","setoidBooleanRD","getSetoidRD","executionPriceValidationSetoid","setoidOrderEntryExecutionPrice","executionPriceValidated","setoidOrderType","toExpireAt","checkboxValues","expireAtActive","endOfDay","getAmount","OrdersSide","getTriggerPrice","getOrderSideByQuantity","getDistance","currentPrice","toOrderItem","validUntil","createOrderEntryViewModel","elementId","marginImpactStore","getRateBySymbol","conversionRateStore","getLimitsByInstrumentId","limitsStore","accountId$","baseCurrency$","accountBalance$","metrics","availableFunds$","instrumentId$","instrumentBaseCurrency$","currency$","instrumentRD","fromOption","description$","lotSize$","quantityIncrement$","priceIncrement$","unitName$","order$","orderAmount$","expireOrder$","stopPrice$","requestId$","orderChainId$","orderTypeDefault$","expireAt$","limitPrice$","takeProfitFixedPrice$","stopLossFixedPrice$","marketData$","marginImpactData$","getMarginImpactBySymbol","formulaMarginImpact$","argumentsMarginImpact$","quantity$","rate$","rates","conversionRate","limit$","minOrderIncrement$","limit","defaultOrderSize$","minOrderSize$","maxOrderSize$","successfulLimit$","limitStopDistanceType$","limitStopDistance$","limitStopDistanceInPercentOfSpread$","limits$","amountDefaultOrderSize$","amountMinOrderSize$","_ref10","_ref11","amountMaxOrderSize$","_ref12","_ref13","amountInput","send","moreOptionsHandle","executionCheckboxes","executionDates","takeProfitStopLossValueHandler","isValidHandler","isShownValidErrorsHandler","moreOptions$","constTrue","executionCheckboxes$","executePriceOpened","successfulBid$","successfulAsk$","step$","_ref14","_ref15","amountPrecision$","stepString","valueInit$","takeUntil","valueManuallyEntered$","successfulValue$","amount$","lot$","_ref16","_ref17","div","spot$","_ref18","_ref19","valueSum$","_ref20","_ref21","spot","accountBaseCurrency","instrumentBaseCurrency","marginImpactQuantity$","getSignBySide","marginImpact$","_ref22","_ref23","Function","valueSettings$","_ref24","_ref25","currencySymbol$","baseData$","_ref26","_ref27","valueSettings","marginImpact","toOrderEntryData","isShownValidErrors$","successfulPipsSize$","distance$","_ref28","_ref29","defaultDistance$","_ref30","_ref31","bidAskPrecision$","precisionRaw$","defaultExecutionPrice$","bidAsk","_ref32","_ref33","_ref34","_ref35","val","defaultExecutionPriceWithOrder$","_ref36","_ref37","defaultPrice","priceIncrementRaw$","initExecutionPrice$","_ref38","_ref39","defaultExecutionPrice","_ref39$","validatedDefaultExecutionPrice","disabledDaysMin$","interval","endOfYesterday","b","isSameDay","initExecutionDates","disabledDaysMin","executionDatesValues$","_ref40","_ref41","getFullYear","executionFormValues$","executionDates$","orderTypeAndCheckboxes$","executionPrice$","_ref42","_ref43","_ref43$","_ref44","_ref45","executionData","_ref45$2","executionPriceValue$","_ref46","orderPrice$","_ref47","_ref48","checkboxes","form","orderType$","_ref49","_ref50","spotAmountOrderPriceCombined$","initTakeProfitStopLossValue$","_ref51","_ref52","takeProfitFixedPrice","stopLossFixedPrice","currentAndPreviousTakeProfitStopLoss$","takeProfitStopLossPreCombineData1$","takeProfitStopLossPreCombineData2$","takeProfitStopLossCalculatedData$","_ref53","_ref54","_ref54$","_ref54$$$","_ref55","_ref56","_ref56$","_ref56$$","_ref56$$$","_ref56$2","_ref56$2$","spotValue","orderPrice","_ref56$2$2","takeProfitStopLossData$","amountValidated$","_ref57","_ref58","inputValue","commonFailureFields","Multiple","validateAmount","successfulAmountValidated$","validationStatus$","_ref59","_ref60","amountValidated","_takeProfitStopLossDa","isSelectedTP","_takeProfitStopLossDa2","isSelectedSL","isTPPriceValid","isSLPriceValid","isExecPriceValid","sendData$","_ref61","_ref62","takeProfitStopLossLiveData$","isValid$","sendEffect$","_ref63","_ref64","_ref64$","_ref64$$","orderEntrySide","_ref64$$2","_ref64$$3","takeProfitPayload","stopLossPayload","operation","toOrderTOSide","share","sendUpdateOrder$","updateOrder","sendCreateOrder$","place","isEmitingOrdersAllowedRaw$","delay","isEmitingOrdersAllowed$","isFundsEnough$","_ref65","_ref66","errorEffect$","orderEntryValues$","_ref67","_ref68","_ref68$","takeProfitStopLossPrices$","initOrderEntryValues$","_ref69","_ref70","oeValues","_ref70$","isOrderEntryValuesChanged$","_ref71","_ref72","initVal","currVal","onSend","isValid","moreOptionsOpened$","onToggleMoreOptions","onToggleExecutionCheckboxes","onChangeExecutionPrice","onChangeExecutionDates","takeProfitStopLossValue$","onTakeProfitStopLossValueChange","RawSidePanel","SidePanel","renderBody","_this$props2$theme","Scrollable","scrollable_component","OrderEntryPanelSideUnwrapped","pipSettings","pipCss","OrderEntryPanelSide","iconMoveLeft","points","iconMoveRight","RawCalendar","selectedDate","getTranslatedMonthNames","onPrevMonthClick","subMonths","onNextMonthClick","addMonths","onDayClick","prevProps","onMouseDown","currentMonthIndex","nextMonth","startOfCurrentMonth","startOfMonth","startOfCurrentMonthWeek","startOfWeek","weekStartsOn","startOfNextMonth","startOfNextMonthWeek","startOfNextFullMonthWeek","addWeeks","diffInCalendarWeeks","differenceInCalendarWeeks","monthNames","Holdable","onHold","isFlat","i","renderWeek","forMonth","currentDate","_this3","disabledDates","_classnames","addDays","dayTheme","classnames","calendar__day_isSelected","isDayOff","isUndefined","find","disabledDay","isBefore","isAfter","buttonIconCss","Calendar","dateInputTheme","stepperCss","steppableButtonCss","OrderEntryExecutionComponentUnwrapped","renderStepper","formValues","isShownValidErrors","stepperErrorCss","numeric_stepper_component","handlePriceInput","renderError","stringifyPriceErrors","constNull","defaultValue","handleToggleCheckbox","onToggleCheckbox","visibleValues","handleDateInput","_this$props4","formDate","_this$props5","isChangeable","stepperData","checkbox_component","date_input","OrderEntryExecutionComponent","OrderEntryExecutionContainer","_e$orderEntryViewMode","orderEntryViewModel","ErrorIcon","handleNegativeValue","steppableInputTheme","stepperButtonCss","TakeProfitStopLossComponentUnwrapped","formatNumericStepperValue","error_icon_ErrorIcon","stringifyError","handleCheckboxChange","handleValueChange","getCheckboxLabel","getPLLabel","stringifyProvidedLabel","_this$props4$data","PLLabel","controlsWrapperClassname","formatMoney","TakeProfitStopLossComponent","OrderEntryTakeProfitStopLoss","changedValue","OrderEntryTakeProfitStopLossContainer","toOrderEntryTakeProfitStopLossComponentData","RawSymbolComponent","SymbolComponent","ExclamationIcon","ErrorPanel","exclamation_icon_ExclamationIcon","sidePanelTheme","sidePanelCss","OrderEntryPanel","moreOptionsOpened","isEdit","amountPrecision","cnMoreOptions","side_panel_component_SidePanel","renderFooter","symbolCss","renderSide","stringifyAmountErrors","dataR","handleToggleMoreOptions","renderMoreOptionsPanels","isPreviewMode","registrationInfoBox","renderDepositBox","buttonDepositCss","handleSideChange","onMoreOptionsClick","onFooterButtonClick","isSubmitAllowed","isEditAllowed","accountBalance","isAccountBalanceZero","ChartType","limitsOrderSize$","fullData$","_ref2$","toOrderEntryPanelData","OrderEntryPanelContainer","isElementIdLeft","elementIdValue","AvaTradingSessionTOIO","startTime","startTimeFormatted","endTime","endTimeFormatted","AvaTradingWeekTOIO","timeZone","sunday","monday","tuesday","wednesday","thursday","friday","saturday","tradinghoursendpointController","getWeekTradingHours","timezoneOffset","toTradingHours","tradingSessions","session","createSymbolInfoViewModel","instrumentInfoStore","tradingHoursController","askDirection$","bidDirection$","dayHigh$","lastSummary","summary","dayLow$","basicInstrumentInfo$","extendedInstrumentInfo$","dayChange$","weekChange$","monthChange$","sentimentSell$","sentimentBuy$","tradingWeek$","getTimezoneOffset","combinedData1$","combinedData2$","combinedData3$","symbolInfoData$","_ref2$2","_ref2$3","tradingWeek","currentBuyPrice","buyPriceDirection","currentSellPrice","sellPriceDirection","measurementUnit","timeZoneOffset","changeDay","changeWeek","changeMonth","marketSentimentLeft","marketSentimentRight","RawSymbolInfoItem","_this$props$isSeconda","isSecondary","SymbolInfoItem","SymbolInfoCommon","renderPrice","directionPriceCss","renderChange","renderTradingHours","dailyTradingHours","marketSentimentWidth","thousand","SymbolInfo","symbolInfoViewModel","SymbolInfoContainer","CategoriesList","createRef","renderGroup","localizeCategoryTitle","renderCategory","localizeCategoryName","scrollLeft","parentNode","trendsSort","second","firstId","secondId","CategoriesContainer","categories$","public$","privateList","publicList","categoryList","sort","ChartInstrumentTOIO","hasVolume","hasDescription","code","ChartRequestResultTOIO","feedSubtopicId","chartResultRequestError","StudyChartRequestTOIO","ChartRequestTOIO","aggregationPeriodSeconds","forexPriceField","studySubscription","maxBarsCount","extendedSession","UpdateChartDataSubscriptionTOIO","chartIds","requests","chartsController","getChart","updateChartsSubscription","requestChart","getStudy","CrossToolMode","chartId","createChartViewModel","chartSettingsStore","charts$","isMobile","selectedPeriod","selectedChartType","isCrossToolEnabled","aggregationPeriodPair","periods$","mapOption","el","chartPeriodName$","chartPeriodSeconds$","selectedPeriod$","selectedChartType$","isCrossToolEnabled$","chart$","requestChartData","period","pairs$","getAggregationPairMatchingPredicate","tapRD","getChartRequestTO","initialPeriod$","requestHistoricalData$","isInitialized$","requestChangeChartParameters$","allChartData$","candles$","lastCandles$","aggregationPeriodPair$","onChangePeriod","onChangeChartType","onSwitchCrossTool","sequenceRDArray","sequence","typeToString","Line","Bar","Candle","toType","modeToString","Disabled","Crosshair","toMode","ChartBarIcon","ChartCandlesIcon","ChartLineIcon","strokeLinecap","strokeMiterlimit","RawPeriodsAnchor","valueText","caret","PeriodsAnchor","RawTypeAnchor","renderTypeIcon","chart_bar_icon_ChartBarIcon","chart_candles_icon_ChartCandlesIcon","chart_line_icon_ChartLineIcon","TypeAnchor","NoCrosshairIcon","AimIcon","RawCrossToolAnchor","renderCrossToolIcon","no_crosshair_icon_NoCrosshairIcon","aim_icon_AimIcon","CrossToolAnchor","ToolbarRaw","isPeriodsSelectboxOpened","isTypeSelectboxOpened","isCrossToolModeSelectboxOpened","renderScrollableMenu","handlePeriodsToggle","handlePeriodSelect","onPeriodSelect","handleTypeToggle","handleTypeSelect","onTypeSelect","handleCrossToolModeToggle","handleCrossToolModeSelect","onCrossToolModeSelect","localizeChartType","localizeCrossMode","selectedType","selectedCrossToolMode","_this$state","periodsSelectboxCss","Menu_Menu","typeSelectboxCss","crossToolSelectboxCss","Toolbar","E_CROSS_TOOL_PLUGIN_MODEL","CHANGE_IS_FIXED","CHANGE_IS_ENABLED","CHANGE_DATETIME_FORMATTER","CrossToolViewModel","_isFixed","_isEnabled","_dateTimeFormatter","merged","isFixed","isEnabled","dateTimeFormatter","_emit","Emitter","createElementWithClass","tagName","wheelEvent","MAIN_CHART_INFO_ID","CrossToolPluginView","model","chartXAxis","chartYAxis","studySeries","createChartInfoView","_model","_element","_container","_isVisible","_isDisabled","_isMobile","_chartInfoView","_chartInfoContainer","_xAxisLine","_yAxisLine","_xChartAxisLabel","_yChartAxisLabel","_xChartAxisLabelValue","_yChartAxisLabelValue","_isXAxisLineVisible","_uiid","_onMouseOver","_onMouseOut","_isAlignedRight","_onChangeIsFixed","classList","add","uiid","xChartAxisLabelLine","yChartAxisLabelLine","_disable","_enable","hoverModel","update","_moveChartInfoView","_moveAxises","_updateLabels","priceFormatter","yValue","_show","_hide","notifyResized","addStudy","removeStudy","removeChild","notStudyView","clientWidth","xValue","Plugin","MAIN_CHART_INFO_VIEW_ID","getAscendantByClassName","filterFn","parentElement","getAscendantByFilter","currentElement","contains","CrossTool","_bus","_clearer","_views","_chartConfig","_createChartInfoView","_subscriptions","_onChartHover","_iterateViews","_onChartResized","_onChartCloseHover","_onStudySeriesAdd","studyGraphElement","canvasModel","parent","querySelector","CrossToolView","fire","types","INC_MOVE_HANDLER","_onStudySeriesRemove","DEC_MOVE_HANDLER","_onModelIsEnabledChange","resolver","bus","clearer","chartBootstrap","events","components","mainChartGraphElement","chartElement","disable","STUDY_ADDED","STUDY_REMOVED","iterator","forEach","_this4","allowCandleAsLine","highlightActiveCandle","showActiveCandlesBorder","HOVER","RESIZED","CLOSE_HOVER","enable","_this5","ChartInfoView","_studySeries","_initializedStudySeries","_title","_open","_high","_low","_close","_studies","_lastHoverModel","_onCrossToolPluginModelDateTimeFormatterChange","textContent","_createElement","_subscribe","esm_get","currentStudySeries","studiesMap","innerHTML","studiesTemplate","_getTitle","overlays","study","conf","found","splice","onChartResized","candleTemplate","colorIdx","dummy","template","clearers","pop","documentElement","WheelEvent","ChartYAxisPosition","CandleDirection","BarType","CANDLE_DIRECTION","AVAChartInfoView","_candleGroup","_content","_toggle","_isCollapsed","_overlaysAmount","_onModelIsFixedChange","_expand","_onToggleClick","_collapse","_onWheelScroll","removeEventListener","candle","overlaysAmount","setTimeout","addEventListener","createAVAChartInfoView","mainConfig","grid","dash","highLow","volumes","dateFormat","studyLegend","studyResizeHandler","labelTemplate","lineTemplate","waterMark","titleFontSize","titleBottomPadding","descriptionFontSize","descriptionBottomPadding","timeIntervalFontSize","defaultZoomCandleWidth","minWidth","space","CANDLE","instrumentInfo","infoTemplate","candleTheme","bullColor","bearColor","noneColor","bullWickColor","bearWickColor","noneWickColor","borderOpacity","activeCandleTheme","barTheme","areaTheme","lineColor","fillColor","startColor","stopColor","waterMarkTheme","descriptionColor","timeIntervalColor","titleColor","chartAreaTheme","backgroundColor","axisColor","gridColor","volumeLineColor","volumeFillColor","mapFillColor","mapGradientTopColor","mapGradientBottomColor","mapColor","lineTheme","yAxis","labelTextColor","labelBoxColor","labelBoxPositiveColor","labelBoxNegativeColor","xAxis","navigationMap","buttonColor","knotColor","sliderColor","buttonArrowColor","knotLineColor","logEvents","RawChartGraph","renderYAxis","axisYClassName","data-element","yAxisPosition","data-chart-container","ChartGraph","RawChartMap","ChartMap","CANDLES_ON_CHART","RawChart","crosstoolViewModel","requestAnimationFrameId","updateChartScale","historical","setXScale","requestAnimationFrame","BAR","LINE","plugins","_this$props$periodRan","periodRangePair","chartConfig","defaultPlugins","chartInstance","ChartBootstrap","createInstrument","setInstrument","updateHistorical","plugin","register","registerPlugin","isPeriodAndRangeChanged","_nextProps$periodRang","last","updateLastCandles","setChartType","cancelAnimationFrame","chartAxisClassName","LOADING","setCandles","candles","CANDLE_CAME","Chart","RawChartWrapper","lastCandles","ChartLoader","RemoteDataLoader","_len2","_key2","handleSuccess","acc","makeRemoteDataLoader","booleanToMode","toChartCandle","PositionSide","EditPositionPreset","chartViewModel","selectedCrossToolMode$","historical$","isCrosshair","ChartLoaderContainer","ClearIcon","SearchIcon","getSuggests","suggestGroups","getSuggest","suggestId","suggests","nextSuggest","selectedId","prevSuggest","symbolClassName","highlightTheme","SymbolSearchUnwrapped","isInputFocused","groupIndex","listItemClassName","symbolCN","onMouseEnter","handleHover","onMouseMove","Highlight","onSelect","handleKeyDown","onEnter","onCloseRequest","selectedSuggest","f","inputHandleBlur","inputHandleFocus","popoverHandleBlur","onInputBlur","handleIconClick","inputTheme","placeholder","clear_icon_ClearIcon","search_icon_SearchIcon","popover_component","onRequestClose","closeOnClickAway","PopoverAlign","placement","PopoverPlacement","Bottom","anchor","popoverTheme","SymbolSearch","createSymbolSearchViewModel","symbolSuggestController","selectedSuggestId","searchValue","closeRequest","searchValue$","inputValue$","suggest$","requestSuggestsTree","instrumentTypes","childNodes","selectedSuggestId$","isOpened$","selectedSymbol","onInputValueChange","keepOpened","onSelectSuggest","onSearch","searchEffect$","toSuggestGroup","instrumentGroup","symbolSearchViewModel","selectedId$","SymbolSearchContainer","RawLine","yPosition","formattedPrice","top","RawLines","_React$Component","Lines","ThemedLines","theme_component_Theme","CurrentPriceLinePlugin","_Plugin","chartModel","isDownDirection","ReactDOM","floor","toY","renderLiftA3","liftA3","lastCandleTickHandler","candleDirection","ASK","drawMainHandler","elements","mainCanvas","addRedrawListener","LAST_CANDLE","Workspace","innerShadow","workspaceClassName","WorkspaceChart","TradeDashboard","firstCategoryId","workspace_component_Workspace","renderWatchlist","workspace_chart_component_WorkspaceChart","renderChart","renderAside","renderInfo","fromStringToSide","toCategoryId","categoriesListRD","categoriesList","TradeDashboardContainer","PositionLargeTableConfig","PositionSmallTableConfig","createPositionEntityViewModel","getPositionByUid","getMetricsByUid","metricsStore","_context$instrumentSt","position$","costBasis$","stopLoss$","takeProfit$","uid$","profitLoss$","symbol$","getSymbolByInstrumentId","instrumentData$","conversionRate$","Bought","Sold","DeleteIcon","EditIcon","AddIcon","PositionEntity","role","renderCell","renderValueCell","renderProfitLossCell","renderStopLossCell","renderTakeProfitCell","renderControls","_cn2","pl","getSide","renderAddProtection","StopLoss","TakeProfit","edit_icon_EditIcon","delete_icon_DeleteIcon","preset","routeSuffix","getEditingPositionRouteSuffix","add_icon_AddIcon","None","_e$positionEntityView","positionEntityViewModel","PositionEntityContainer","PositionTable","positionsUid","createPositionViewModel","positionsUid$","windowResize$","isContainsClose","isContainsEdit","innerWidth","_e$positionViewModel","positionViewModel","PositionContainer","createPositionCloseViewModel","_e$positionsStore","sendCloseRequest","closedPositions$","positionEntityData$","plOpen$","symbolDescription","limitsMinOrderIncrement$","limits","quote$","positionQuantityRD$","positionQuantity$","amountData$","lotsPrecision$","limitsMinOrderIncrement","limitsMinOrderIncrementString","lotsPrecision","initAmount","positionKey$","sendPrerequisites$","_ref18$","positionQuantity","isReadyToClose$","instrumentData","profit$","onAmountChange","steppableTheme","PositionClose","isClosingPositionAllowed","handlePositionClose","renderSuccessfulInstrumentData","renderSuccessfulProfitLoss","profitValueClassName","onPositionClose","profitLossValue","_e$positionCloseViewM","positionCloseViewModel","PositionCloseContainer","EditingPositionRaw","_useMemo","useMemo","profitAmountClassName","TakeProfitStopLoss","EditingPosition","onPositionUpdate","isEditingPositionAllowed","editing_position_component_EditingPosition","createEditingPositionViewModel","editingPositionContext","_editingPositionConte","sendUpdateProtectionOrdersRequest","_editingPositionConte2","_editingPositionConte3","updateProtectionOrdersHandler","positionAmount$","positionAmountAbs$","positionOpeningPrice$","extractedTakeProfitStopLoss$","symbolMarginImpact$","amountAbs$","quantityInc$","priceInc$","prevTPValue$","prevSLValue$","orderSide$","quantityInc","sign","spotAmountCostCombined$","prevTPValue","prevSLValue","limitsData$","_ref28$","_ref28$$$","_ref30$","_ref30$$","_ref30$$$","_ref30$$2","takeProfitStopLossLiveData","successfulPrecision$","protectionOrders$","successfulPrecision","protectionOrders","_protectionOrders","tpProtection","slProtection","takeProfitProtection","stopLossProtection","maybeEmptyArrayWithProtections","isEditingPositionAllowed$","isFundsEnough","toEditingPositionData","_e$editingPositionVie","editingPositionViewModel","EditingPositionContainer","withProps","LinesPlugin","renderLiftA2","liftA2","PositionDashboardChart","createPositionDashboardChartViewModel","_context$positionDash","positionDashboardChartViewModel","PositionDashboardChartContainer","PositionDetailsCommomn","headerData","currentPriceAndDirection","currentValue","sizeInLots","openDateTime","renderPipsValue","renderOptionalPipsValue","maybeValue","renderOptionalPipsDirectionValue","maybeDirection","piprateNode","directionNode","nodeToRender","renderDateString","infoItemCss","PositionDetails","ScreenType","createPositionDetailsViewModel","positionDetailsContext","_positionDetailsConte","metricsData$","positionSide$","maybeTakeProfitValue","maybeStopLossValue","currentPriceDirectionTuple$","positionCode$","side$","openPrice$","currentPriceAndDirection$","sizeInLots$","positionAmount","currentValue$","openDateTime$","takeProfitValue$","stopLossValue$","swap$","commission$","_e$positionDetailsVie","positionDetailsViewModel","PositionDetailsContainer","EmptyScreenIcon","EmptyScreenFundIcon","cx","cy","EmptyScreenSearchIcon","EditOrdersPreset","EmptyScreenRaw","isCurrentDemo","screenType","isZeroEquity","renderButton","toTrade","renderIconByScreenType","Positions","Orders","isZero","empty_screen_fund_icon_EmptyScreenFundIcon","empty_screen_icon_EmptyScreenIcon","History","HistorySearch","empty_screen_search_icon_EmptyScreenSearchIcon","Deposit","getTitleByScreenType","getSubTitleByScreenType","EmptyScreen","EmptyScreenContainer","someEquity","PositionsDashboard","firstPositionId","renderRoot","renderEditingPositionAside","renderPositionDetailsAside","renderPosition","PositionDashboardContainer","all$","RedirectListener","envViewModel","directLinkRedirect$","categoriesRD","symbolAndActionHref","params","getValueBySymbol","symbolHref","messagesWithMatch$","not","toTradeWithSymbolPostMessage$","toTradeWithSymbolHref$","redirectToRealAccount$","otherHref$","other","localRedirects$","DYListener$","DYPush","redirectEffect$","DY","API","countAsPageview","CancelConfirmationRaw","onCancel","handleSubmit","onSubmit","buttonSubmitCss","CancelConfirmation","OrderEntity","isConfirmPopupOpened","rowColumnRight","rowColumnCenter","handleEditClick","iconButtonCss","handleEdit","openConfirmPopup","closeConfirmPopup","handleAddProtectionClick","getEditingOrderRouteSuffix","OrderEntityContainer","ordersViewModel","orderItem$","orderIdRD$","triggerPrice$","validUntil$","combinedConstantData$","combinedVariableData$","_ref13$","_ref13$2","OrdersLargeTableConfig","OrdersSmallTableConfig","OrdersTable","noData","createOrdersViewModel","mapSingleOrderToOrderItem","lastQuote$","getBidAskFromMarketData","orders$","A","mapNonEmptyOrders","ordersData","orderData","closeEffect$","jumpToFirstOrderEffect$","removedOrderId","firstOrder","tableItems","OrdersTableContainer","DEFAULT_PIP_SETTINGS","directionTheme","labelTheme","OrderDetailsCommon","localizeOrderDetailsSide","ordersSide","orderDetails","changeDirection","renderPipRate","getPipRateRenderer","getSideClassName","renderFormattedDate","settings","mainPart","OrderDetails","localData","createOrderDetailsViewModel","orderId$","createdTime$","changeDirection$","orderDetails$","_ref14$","_ref14$2","_ref14$3","quantityAbs","getOrdersSide","DateType","Period","orderInfoViewModel","withOrderId","OrderInfoContainer","createOrderInfoViewModel","createOrderDashboardChartViewModel","OrderDashboardChart","_context$orderDashboa","orderDashboardChartViewModel","OrderDashboardChartContainer","createOrderEditViewModel","orderEditData$","OrderEdit","orderEditViewModel","OrderEditContainer","OrdersDashboard","firstOrderId","renderOrderInfo","renderEdit","OrdersDashboardContainer","HistoryOrderSide","getMenuItemName","translatedPeriodNames","last7days","last30Days","last365days","thisMonth","thisYear","all","custom","isPeriod","dateInputButtonCss","dateInputPopoverCss","HistoryFilterFormUnwrapped","getTranslatedPeriodNames","renderPeriodsAnchor","periodNames","periodButtonCss","renderPeriodsPopover","periodPopoverCss","renderValidationResult","validatedValue","onPeriodDropdownToggle","_this$props$value","startDate","endDate","isPeriodDropdownOpened","isDateInputChanged","handleDateChange","dateType","_this$props$value2","changeDate","_this$props$value3","Dropdown","onItemSelect","HistoryFilterForm","getTimestampFromDateInputValue","inputDate","mapDatesToPeriod","getDifferenceInDays","differenceInDays","now","daysToThisMonth","daysToThisYear","startOfYear","daysToAllPeriod","differenceInDaysBetweenDates","isEndDateCustomized","isPeriodMatched","unwrapDatesFromValue","endOfThisDay","getStartOfDay","substactDays","startOfDay","subDays","wrapDatesToValue","unwrappedValues","_unwrappedValues","dedupeValues","prevValue","currValue","every","prevHistoryDataValue","validateDateInputs","_unwrappedValues$slic","_unwrappedValues$slic2","createHistoryFilterFormViewModel","historyOrderStore","dropdownHandler","filterFormHandler","initValue","weekAgo","getDefaultHistoryValue","initHandlerValue","unwrappedValue$","validatedValue$","effect$","_ref$value","startTimestamp","endTimestamp","onDateChange","isPeriodDropdownOpened$","_ctx$historyFilterFor","historyFilterFormViewModel","initPeriod","HistoryFilterFormContainer","closeDateTime","stringifyOrderSideEnum","HistoryTableConfig","HistoryTable","getFlexBasis","renderOpenDateTime","renderInstrument","renderProfitLoss","renderAmount","renderOpenPrice","renderClosePrice","renderCloseDateTime","cnCell","toStringDate","toStringProfitLoss","stringifiedSide","localizeOrderSideEnum","prefix","historyOrderId","render_remote_data_component","toOrderSideEnum","rawSide","toHistoryTableData","createHistoryTableViewModel","HistoryTableContext","requestedOrders$","HistoryTableComponent","historyTableViewModel","HistoryTableContainer","HistoryDetailsCommon","stringifyProfitLossKind","HistoryDetails","createHistoryDetailsViewModel","historyDetailsContext","getOrderHistoryById","tp","sl","historyDetailsViewModel","HistoryDetailsContainer","WorkspacePanel","HistoryDashboard","workspace_panel_component_WorkspacePanel","renderHistoryDetailsAside","historyOrdersCount","createHistoryDashboardViewModel","allHistoryRequest$","historyOrdersCount$","allOrders$","items","historyDashboardViewModel","HistoryDashboardContainer","DepositPage","CrmPages","Authorized","dist_es","MarketSymbolsTOIO","ProfileTOIO","tradingStatus","statusReason","haltStartTime","haltEndTime","highLimitPrice","lowLimitPrice","TradeTOIO","lastDirection","UpdateMarketSymbolsSubscriptionTOIO","symbolsToAdd","symbolsToRemove","marketDataController","getConversionRates","changeConversionRateSubscription","changeSubscription","subscribeInstrumentTemporary","removeTemporaryInstrumentSubscription","getLatestProfiles","getLatestQuotes","getLatestSummaries","getLatestTrades","tapOnLastUnsubscribe","cb","setoidMarketDataEntity","createMarketDataStore","quotes$","summaries$","avaWatchlistInstrumentInfo$","pk","entity","store","EntityStore","onSymbolRemove","removeSymbolEffect$","mergeMap","request$","quotes","summary$","summaries","changeInfo","entity$","scan","_entity","getPKFromId","createInstrumentStore","instruments$","getAll","instruments","createInstrumentInfoStore","removeBySymbol","removeEffect$","instrumentInfoController","changeInstrumentInfoSubscription","instrumentInfoMessages$","OrderTemplateTOIO","effect","orderSide","directExchange","PositionAttachProtectionsTOIO","PositionCloseByTOIO","positionsController","getPositions","closePosition","closeBy","closeAllPositions","getPositionMetrics","modifyProtectionOrders","placeProtectionOrders","closeAllPositionsForInstrument","createPositionsStore","positionTO","pos","filterZeroQtyPositionsPredicate","closeOrders$","positionUid","positionsData","positionData","getPredicateByInstrumentId","buildCloseOrderTemplateTO","err","removePositionFromStore","filterClosedPositions","BracketGroupTemplateTOIO","secondOrder","IfThenBracketGroupTemplateTOIO","ifOrder","brackets","OCOGroupTemplateTOIO","IfThenOCOGroupTemplateTOIO","ocoGroupTemplateTO","OSOGroupTemplateTOIO","thenOrder","ValidationResultTOIO","riskyOrdersTradeCost","restriction","executionMessages","ordersController","getOrders","modifyBracketOrder","placeBracketOrder","cancelOrder","getOrderHistory","requestOrderHistory","modifyIfThenBracketOrder","placeIfThenBracketOrder","modifyIfThenOcoOrder","placeIfThenOcoOrder","cancelAllOrders","modifyOCOOrder","placeOCOOrder","validateOcoOrder","modifyIfThenOrder","placeIfThenOrder","modifySingleOrder","placeSingleOrder","validateOrder","unsubscribeHistory","secondT","createOrderStore","orderMessages$","filterWorkingOrderPredicate","foundStatusWorking","filterCompletedAndCancelledOrdersPredicate","ordersToRemove","buildOrderTemplateTO","exists","subscribeToOrdersAndUpdateStore","updateOrderInStore","updateEffects$","dataTemplateTO","sendRequestToUpdateOrder","sideVal","getCurrentQuantity","WatchlistType","InstrumentSuggestTOIO","sortIndex","SuggestResultTOIO","InstrumentSuggestTreeNodeTOIO","TreeSuggestResultTOIO","requestSuggestions","setoidWatchlistEntity","getSetoidArray","setoidWatchlistEntityRD","setoidWatchlistEntityArrayRD","createWatchlistStore","watchlists$","watchlists","watchlistData$","wldata","watchlistsWithData$","watchlistsData","watchlistData","PUBLIC","PRIVATE","watchlistSubscribeEffect$","watchlistsFromInstrumentTree$","suggestion","CATEGORY","ordString","compare","privateWlRD","privateWl","createChartSettingsStore","chartSettings$","res","createAccountViewModel","preloader","createHistoryOrderStore","compareAsc","lastOrders$","takeEnd","compareDesc","sendOrdersHistoryRequest","sharedHistoryRequestData$","requestData","allOrdersWithinGivenPeriod$","isOrderWithinRangePredicate","sendEffect","InstrumentInfoSubscriptionTOIO","instrumentinfoController","getInstrumentInfo","setoidConversionRateEntity","createConversionRateStore","conversionRates$","result$","createMetricsStore","metrics$","metricsTO","metric","createLimitsStore","UpdatePositionKeysSubscriptionTOIO","positionKeysToAdd","positionKeysToRemove","marginImpactsController","getMarginImpactsByPositions","positionCodes","changeSubscriptionByPositions","getMarginImpactsBySymbols","changeSubscriptionByInstruments","createMarginImpactStore","marginImpacts$","marginImpacts","createSystemSettingsViewModel","settings$","incomplete","preview$","ContainerWithStores","sequenceTContext","sequenceTSink","ContainerWithStoresAndRouter","createBrowserHistory","ContainerWithGlobalViewModels","AuthorizedContainer","AppContainer","Connection","socketURL","BehaviorSubject","onMessage","onConnectionStatusChange","transport","fallbackTransport","withCredentials","enableProtocol","enableXDR","rewriteURL","trackMessageLength","maxStreamingLength","reconnectInterval","attachHeadersAsQueryString","sessionState","responseBody","parsed","decoded","errorReport","PathReporter","onOpen","onClientTimeout","onError","createSocketClient","restURL","origin","tryCatch2v","isRight","Resolved","thunk","DoOnMount","doOnMount","EnvComponent","initialize","getSystemInfo","EnvContainerInstanceVM","EnvContainerWithApiClient","EnvContainer","askReader","Reader","app","env"],"mappings":"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","file":"static/js/main.c3db5d05.chunk.js","sourcesContent":["import * as React from 'react';\nimport * as theme from './icon-wrapper.module.css';\n\nexport const IconWrapper: React.FunctionComponent<JSX.IntrinsicAttributes> = props => (\n\t<i className={theme.container}>{props.children}</i>\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"history-table_row__2B9Mj\",\"rowColumn\":\"history-table_rowColumn__2ITzt\",\"cell\":\"history-table_cell__RxNcO\",\"cell_empty\":\"history-table_cell_empty__2uo_s\",\"seconds\":\"history-table_seconds__16gKM\",\"cell_numeric\":\"history-table_cell_numeric__18E2X\",\"cell_buy\":\"history-table_cell_buy__2atah\",\"cell_sell\":\"history-table_cell_sell__1HNHu\",\"cell_positive\":\"history-table_cell_positive__3tDPr\",\"cell_negative\":\"history-table_cell_negative__37wm4\",\"infoCell\":\"history-table_infoCell__12Sev\",\"icon\":\"history-table_icon__-ND4b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"cross-tool_container__3F7YJ\",\"axis\":\"cross-tool_axis__1V6Y2\",\"axis_x\":\"cross-tool_axis_x__30V-a\",\"axis_y\":\"cross-tool_axis_y__22THL\",\"chartInfo\":\"cross-tool_chartInfo__2IXD1\",\"chartInfo_fixed\":\"cross-tool_chartInfo_fixed__31_i4\",\"chartInfo_mobile\":\"cross-tool_chartInfo_mobile__37Hha\",\"chartInfo_alignedRight\":\"cross-tool_chartInfo_alignedRight__2ac5r\",\"axisLabel\":\"cross-tool_axisLabel__5TILZ\",\"axisLabel_visible\":\"cross-tool_axisLabel_visible__1oMeZ\",\"axisLabel_y\":\"cross-tool_axisLabel_y__3hFoz\",\"axisLabelValue\":\"cross-tool_axisLabelValue__KOlXR\",\"axisLabel_x\":\"cross-tool_axisLabel_x__R0XU6\",\"visible\":\"cross-tool_visible__206wq\",\"axis_visible\":\"cross-tool_axis_visible__3O_PT\",\"disabled\":\"cross-tool_disabled__MhASI\",\"chart--graph\":\"cross-tool_chart--graph__3g7NU\",\"chart--axisWrapper\":\"cross-tool_chart--axisWrapper__3pc6z\",\"chart--axisWrapper-x\":\"cross-tool_chart--axisWrapper-x__LET9p\",\"chart--axisWrapper-y\":\"cross-tool_chart--axisWrapper-y__zTwEE\",\"chart--axis-x\":\"cross-tool_chart--axis-x__2Vfic\",\"crossTool\":\"cross-tool_crossTool__tuoJD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ava-chart-Info_container__1AzVl\",\"containerMobile\":\"ava-chart-Info_containerMobile__luPJr\",\"header\":\"ava-chart-Info_header__3CNQ_\",\"toggle\":\"ava-chart-Info_toggle__A6S6I\",\"label\":\"ava-chart-Info_label__3BLXr\",\"title\":\"ava-chart-Info_title__2YqWR\",\"containerDesktop\":\"ava-chart-Info_containerDesktop__383os\",\"icon\":\"ava-chart-Info_icon__1x6dn\",\"content\":\"ava-chart-Info_content__2pqXQ\",\"group\":\"ava-chart-Info_group__3BvKZ\",\"group_volume\":\"ava-chart-Info_group_volume__FD5VO\",\"studies\":\"ava-chart-Info_studies__zMk5A\",\"value\":\"ava-chart-Info_value__2_Ahr\",\"group_candle\":\"ava-chart-Info_group_candle__2JCRn\",\"group_up\":\"ava-chart-Info_group_up__2Ctqz\",\"group_down\":\"ava-chart-Info_group_down__2Tp1l\",\"groupTitle\":\"ava-chart-Info_groupTitle__2Tzwz\",\"line\":\"ava-chart-Info_line__3uXS4\",\"parameter\":\"ava-chart-Info_parameter__3wIWY\",\"delimeter\":\"ava-chart-Info_delimeter__1GoJY\",\"line_vertical\":\"ava-chart-Info_line_vertical__3asrh\",\"line_horizontal\":\"ava-chart-Info_line_horizontal__LFGdx\",\"overlay\":\"ava-chart-Info_overlay__1pb7L\",\"collapsed\":\"ava-chart-Info_collapsed__1kD17\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"order-entry-panel_content__3P_8v\",\"innerPaddedTopmostWrapper\":\"order-entry-panel_innerPaddedTopmostWrapper__ps0pZ\",\"innerPaddedWrapper\":\"order-entry-panel_innerPaddedWrapper__3iEJX\",\"divider\":\"order-entry-panel_divider__1drdp\",\"operations\":\"order-entry-panel_operations__1DHqw\",\"info\":\"order-entry-panel_info__3wpQL\",\"element\":\"order-entry-panel_element__38N0u\",\"label\":\"order-entry-panel_label__2-b9n\",\"title\":\"order-entry-panel_title__1YS8U\",\"text\":\"order-entry-panel_text__3cWrn\",\"moreOptions\":\"order-entry-panel_moreOptions__3b0Yk\",\"moreOptions_opened\":\"order-entry-panel_moreOptions_opened__1n6-v\",\"optionsItem\":\"order-entry-panel_optionsItem__1K6oJ\",\"priceHits\":\"order-entry-panel_priceHits__2cVTd\",\"cancelOnDateCheckbox\":\"order-entry-panel_cancelOnDateCheckbox__1K3NU\",\"cancelOnDate\":\"order-entry-panel_cancelOnDate__1m542\",\"validationError\":\"order-entry-panel_validationError__3ZjoT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"position-table_row__1HX-V\",\"rowSelected\":\"position-table_rowSelected__3JsWq\",\"rowColumn\":\"position-table_rowColumn__uTBpJ\",\"rowColumn_small\":\"position-table_rowColumn_small__YzRX-\",\"rowColumn_left\":\"position-table_rowColumn_left__2SaJa\",\"rowColumn_right\":\"position-table_rowColumn_right__3GXPa\",\"rowColumn_center\":\"position-table_rowColumn_center__3mpgM\",\"positions\":\"position-table_positions__36Uu_\",\"red\":\"position-table_red__1Sjpw\",\"green\":\"position-table_green__1t_9b\",\"controls\":\"position-table_controls__jGiCp\",\"control\":\"position-table_control__3IsJ_\",\"icon\":\"position-table_icon__26soH\",\"icon_plus\":\"position-table_icon_plus__3oiL9\",\"addProtection\":\"position-table_addProtection__fP8OZ\",\"addProtection_small\":\"position-table_addProtection_small__sa8dl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"watchlist-entity.component_row__1EXm9\",\"rowSelected\":\"watchlist-entity.component_rowSelected__1s_Fr\",\"rowColumn\":\"watchlist-entity.component_rowColumn__PFuq9\",\"symbolCell\":\"watchlist-entity.component_symbolCell__193m7\",\"positions\":\"watchlist-entity.component_positions__3GIuM\",\"changeCell\":\"watchlist-entity.component_changeCell__3MHK9\",\"changeCell_empty\":\"watchlist-entity.component_changeCell_empty__2Mv6B\",\"icon\":\"watchlist-entity.component_icon__4I_vi\",\"icon_accent\":\"watchlist-entity.component_icon_accent__2U-Bu\",\"infoCell\":\"watchlist-entity.component_infoCell__3Txo2\",\"favCell\":\"watchlist-entity.component_favCell__1lrxS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"aside_container__HvSZ5\",\"list\":\"aside_list__37OwU\",\"item\":\"aside_item__1Gi07\",\"item_break\":\"aside_item_break__22f1n\",\"link\":\"aside_link__I91Jr\",\"link_active\":\"aside_link_active__3krYU\",\"icon\":\"aside_icon__1ZUHg\",\"label\":\"aside_label__grJeU\",\"title\":\"aside_title__3ijao\",\"menuIcon\":\"aside_menuIcon__1i0U6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"menu_container__1SbHK\",\"menuContainer\":\"menu_menuContainer__1Kl_i\",\"panel\":\"menu_panel__teGdf\",\"wrapper\":\"menu_wrapper__YEzP0\",\"header\":\"menu_header__2N2ak\",\"account\":\"menu_account__13R5g\",\"accountLabel\":\"menu_accountLabel__U3mtu\",\"accountLabel_real\":\"menu_accountLabel_real__TkTvn\",\"accountLabel_preview\":\"menu_accountLabel_preview__nUfnj\",\"footer\":\"menu_footer__3TcB9\",\"logoutIcon\":\"menu_logoutIcon__1O9Es\",\"logout\":\"menu_logout__16LIL\",\"email\":\"menu_email__1Xwgd\",\"logoutLinkEmailWrapper\":\"menu_logoutLinkEmailWrapper__1TLXv\",\"logoutIconWrapper\":\"menu_logoutIconWrapper__17izk\",\"localeSelectorWrapper\":\"menu_localeSelectorWrapper__2Q-rE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"order-entity_row__7zI0n\",\"rowSelected\":\"order-entity_rowSelected__1enzj\",\"rowColumn\":\"order-entity_rowColumn__2o_Rx\",\"rowColumn_small\":\"order-entity_rowColumn_small__1zFfI\",\"rowColumn_left\":\"order-entity_rowColumn_left__1WAEv\",\"rowColumn_right\":\"order-entity_rowColumn_right__2YWYB\",\"rowColumn_center\":\"order-entity_rowColumn_center__15Q04\",\"positions\":\"order-entity_positions__WiuFp\",\"icon\":\"order-entity_icon__K2L0e\",\"icon_plus\":\"order-entity_icon_plus__328wV\",\"infoCell\":\"order-entity_infoCell__2GuVt\",\"controls\":\"order-entity_controls__1h6mE\",\"control\":\"order-entity_control__T4rXZ\",\"red\":\"order-entity_red__3JYXo\",\"green\":\"order-entity_green__23_r7\",\"TPSLCell_small\":\"order-entity_TPSLCell_small__36xql\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"header-account-metrics_container__3PINN\",\"section\":\"header-account-metrics_section__1_X-1\",\"section__header\":\"header-account-metrics_section__header__1NWRZ\",\"section__value\":\"header-account-metrics_section__value__lZb3-\",\"separator\":\"header-account-metrics_separator__1lmOy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"position-close_container__3fDUl\",\"header\":\"position-close_header__3v8NN\",\"headerLabel\":\"position-close_headerLabel__1xuQY\",\"content\":\"position-close_content__1oE7q\",\"profit\":\"position-close_profit__25f6-\",\"profitLabel\":\"position-close_profitLabel__2Zsef\",\"profitValue\":\"position-close_profitValue__2juj-\",\"profitValue_positive\":\"position-close_profitValue_positive__1obEP\",\"profitValue_negative\":\"position-close_profitValue_negative__XmNAY\",\"columns\":\"position-close_columns__2HMqM\",\"amount\":\"position-close_amount__3F26N\",\"amountHeader\":\"position-close_amountHeader__2nx53\",\"lot\":\"position-close_lot__1reuJ\",\"lotLabel\":\"position-close_lotLabel__2cCfp\",\"lotValue\":\"position-close_lotValue__1Zjb2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"history-filter-form_container__Ki2wM\",\"dropdownWrapper\":\"history-filter-form_dropdownWrapper__1YTlD\",\"text\":\"history-filter-form_text__1dRkC\",\"triangleWrapper\":\"history-filter-form_triangleWrapper__3HVGe\",\"datePickersWrapper\":\"history-filter-form_datePickersWrapper__3TbDH\",\"dateInputWrapper\":\"history-filter-form_dateInputWrapper__3WVBn\",\"labelWrapper\":\"history-filter-form_labelWrapper__zz4T0\",\"label\":\"history-filter-form_label__u8GSj\",\"error\":\"history-filter-form_error__2q4hL\"};","import * as React from 'react';\nimport { MinusIcon } from '../../ui-desktop/ui-kit/components/icons/minus.icon';\nimport { PlusIcon } from '../../ui-desktop/ui-kit/components/icons/plus.icon';\nimport { withDefaults } from '@devexperts/react-kit/dist/utils/with-defaults';\nexport * from '@devexperts/react-kit/dist/components/NumericStepper/NumericStepper';\nimport {\n\tTSteppableInputProps,\n\tSteppableInput,\n} from '../../ui-desktop/ui-kit/components/steppable-input/steppable-input';\nimport { KeyCode, TControlProps } from '@devexperts/react-kit/dist/components/Control/Control';\nimport { Input, TInputProps } from '@devexperts/react-kit/dist/components/input/Input';\nimport * as O from 'fp-ts/lib/Option';\nimport { PartialKeys } from '@devexperts/utils/dist/object';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { ReactRef } from '@devexperts/react-kit/dist/utils/typings';\nimport { parseFloatWithLeadingZero } from './numeric-stepper.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\n\nexport const NUMERIC_STEPPER = Symbol('NumericStepper') as symbol;\n\nexport type TNumericStepperOwnProps = TSteppableInputProps &\n\tTControlProps<any> & {\n\t\tstep: number;\n\t\tmin: number;\n\t\tmax: number;\n\t\tparser?: any;\n\t\tformatter?: any;\n\t\tmanualEdit: boolean;\n\t};\n\nexport type TNumericStepperFullProps = TNumericStepperOwnProps & {\n\tSteppableInput: React.ComponentClass<TSteppableInputProps> | React.SFC<TSteppableInputProps>;\n\ttheme: {\n\t\tSteppableInput?: TSteppableInputProps['theme'];\n\t\tInput?: TInputProps['theme'];\n\t};\n};\n\ntype TNumericStepperState = {\n\tisFocused: boolean;\n\tdisplayedValue: any;\n};\n\nclass RawNumericStepper extends React.Component<TNumericStepperFullProps, TNumericStepperState> {\n\tprivate inputRef!: ReactRef<HTMLElement>;\n\tprivate selectionStart!: number | null;\n\tprivate selectionEnd!: number | null;\n\n\tconstructor(props: TNumericStepperFullProps) {\n\t\tsuper(props);\n\n\t\tconst state: TNumericStepperState = {\n\t\t\tisFocused: false,\n\t\t\tdisplayedValue: props.value,\n\t\t};\n\n\t\tif (props.value) {\n\t\t\tstate.displayedValue = RawNumericStepper.formatValue(props, props.value);\n\t\t}\n\n\t\tthis.state = state;\n\t}\n\n\tstatic getDerivedStateFromProps(\n\t\tnewProps: TNumericStepperFullProps,\n\t\tprevState: TNumericStepperState,\n\t): TNumericStepperState {\n\t\treturn {\n\t\t\t...prevState,\n\t\t\tdisplayedValue: RawNumericStepper.formatValue(newProps, newProps.value),\n\t\t};\n\t}\n\n\tcomponentWillUpdate() {\n\t\tthis.saveCaretPosition();\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.restoreCaretPosition();\n\t}\n\n\trender() {\n\t\tconst { displayedValue } = this.state;\n\n\t\tconst {\n\t\t\ttheme,\n\t\t\tdecrementIcon,\n\t\t\tincrementIcon,\n\t\t\tvalue,\n\t\t\tisDisabled,\n\t\t\tclearIcon,\n\t\t\tmin,\n\t\t\tmax,\n\t\t\tSteppableInput,\n\t\t} = this.props;\n\n\t\tconst hasError = isNaN(value) || value < min || value > max;\n\n\t\treturn (\n\t\t\t<SteppableInput\n\t\t\t\tisDisabled={isDisabled}\n\t\t\t\terror={hasError}\n\t\t\t\ttheme={theme.SteppableInput}\n\t\t\t\tonDecrement={this.onDecrement}\n\t\t\t\tonIncrement={this.onIncrement}\n\t\t\t\tdecrementIcon={decrementIcon}\n\t\t\t\tincrementIcon={incrementIcon}\n\t\t\t\tclearIcon={clearIcon}>\n\t\t\t\t<Input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tonKeyDown={this.onKeyDown}\n\t\t\t\t\tonFocus={this.onFocus}\n\t\t\t\t\tonWheel={this.onWheel}\n\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\terror={hasError}\n\t\t\t\t\ttheme={theme.Input}\n\t\t\t\t\tisDisabled={isDisabled}\n\t\t\t\t\tvalue={`${displayedValue}`}\n\t\t\t\t\tonBlur={this.onBlur}\n\t\t\t\t\tonValueChange={this.onInputChange}\n\t\t\t\t\tinnerRef={ref => (this.inputRef = ref)}\n\t\t\t\t/>\n\t\t\t</SteppableInput>\n\t\t);\n\t}\n\n\tprivate getInnerInput = () => {\n\t\t// Input referred to div wrapper of actual input element,\n\t\t// so first child of the wrapper is our target\n\t\tconst inputWrapper = this.inputRef as HTMLElement;\n\t\treturn inputWrapper.firstChild as HTMLInputElement;\n\t};\n\n\tprivate saveCaretPosition = () => {\n\t\tconst input = this.getInnerInput();\n\n\t\tthis.selectionStart = input.selectionStart;\n\t\tthis.selectionEnd = input.selectionEnd;\n\t};\n\n\tprivate restoreCaretPosition = () => {\n\t\tconst input = this.getInnerInput();\n\n\t\tif (this.selectionStart || this.selectionStart === 0) {\n\t\t\tinput.selectionStart = this.selectionStart;\n\t\t}\n\n\t\tif (this.selectionEnd || this.selectionEnd === 0) {\n\t\t\tinput.selectionEnd = this.selectionEnd;\n\t\t}\n\t};\n\n\tprivate onKeyDown = (event: React.KeyboardEvent<HTMLElement>) => {\n\t\tconst input = this.getInnerInput();\n\t\tconst { displayedValue } = this.state;\n\n\t\tconst value = String(displayedValue);\n\t\tconst isSelectionsEqualAndHasValue = input.selectionStart === input.selectionEnd && value.length;\n\n\t\tswitch (event.keyCode) {\n\t\t\tcase KeyCode.Up:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.increase();\n\t\t\t\tbreak;\n\t\t\tcase KeyCode.Down:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.decrease();\n\t\t\t\tbreak;\n\t\t\tcase KeyCode.Backspace:\n\t\t\t\tif (\n\t\t\t\t\tisSelectionsEqualAndHasValue &&\n\t\t\t\t\tNumber(input.selectionEnd) > 0 &&\n\t\t\t\t\tvalue.charAt(Number(input.selectionEnd) - 1) === '.'\n\t\t\t\t) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// jump over the dot\n\t\t\t\t\tinput.selectionStart = input.selectionEnd = Number(input.selectionEnd) - 1;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase KeyCode.Delete:\n\t\t\t\tif (\n\t\t\t\t\tisSelectionsEqualAndHasValue &&\n\t\t\t\t\tNumber(input.selectionEnd) < value.length - 1 &&\n\t\t\t\t\tvalue.charAt(Number(input.selectionEnd)) === '.'\n\t\t\t\t) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// jump over the dot\n\t\t\t\t\tinput.selectionStart = input.selectionEnd = Number(input.selectionEnd) + 1;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tprivate onInputChange = (value: string | undefined) => {\n\t\tif (!this.props.manualEdit) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.state.isFocused) {\n\t\t\tconst newValue = this.parseValue(\n\t\t\t\tpipe(\n\t\t\t\t\tvalue,\n\t\t\t\t\tO.fromNullable,\n\t\t\t\t\tO.getOrElse(constant('')),\n\t\t\t\t),\n\t\t\t);\n\t\t\tthis.onValueChange(newValue, true);\n\t\t}\n\t};\n\n\tprivate getPrecision(step: number): number {\n\t\tif (Number.isInteger(step)) {\n\t\t\treturn 0;\n\t\t} else {\n\t\t\treturn step.toString(10).split('.')[1].length;\n\t\t}\n\t}\n\n\tprivate step(n: number) {\n\t\tconst { step } = this.props;\n\t\tconst value = Number(this.props.value);\n\n\t\tconst num = value + n * step;\n\t\tconst precision = this.getPrecision(step);\n\n\t\tconst frac = Math.pow(10, precision);\n\t\tconst newValue = Math.round(num * frac) / frac;\n\n\t\tif (newValue !== value) {\n\t\t\tthis.onValueChange(newValue, true);\n\t\t}\n\t}\n\n\tprivate onFocus = () => {\n\t\tthis.setState({\n\t\t\tisFocused: true,\n\t\t});\n\t};\n\n\tprivate static formatValue(props: TNumericStepperFullProps, value: number | string): string {\n\t\tconst { formatter } = props;\n\t\treturn formatter ? formatter(value) : value;\n\t}\n\n\t/**\n\t * Trying to parse the entered string to a number.\n\t * Done here because `onChange` should return a valid numeric value if possible,\n\t * e.g. for proper interop with `stateful`.\n\t */\n\tprivate parseValue(value: string): string | number {\n\t\tconst { parser } = this.props;\n\n\t\tif (parser) {\n\t\t\treturn parser(value);\n\t\t} else {\n\t\t\tconst num = Number(value);\n\t\t\treturn isNaN(num) ? value : num;\n\t\t}\n\t}\n\n\tprivate onBlur = (event: React.FocusEvent<HTMLInputElement>) => {\n\t\tconst { manualEdit } = this.props;\n\t\tif (!manualEdit) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { value } = event.target;\n\t\tconst newValue = this.parseValue(value as string);\n\n\t\tthis.onValueChange(newValue);\n\t};\n\n\tprivate onWheel = (event: React.WheelEvent<HTMLElement>) => {\n\t\tconst { isDisabled } = this.props;\n\t\tconst { isFocused } = this.state;\n\n\t\tif (!isDisabled && isFocused) {\n\t\t\tif (event.deltaY < 0) {\n\t\t\t\tthis.increase();\n\t\t\t} else {\n\t\t\t\tthis.decrease();\n\t\t\t}\n\t\t}\n\t};\n\n\tprivate decrease = () => {\n\t\tthis.step(-1);\n\t};\n\n\tprivate increase = () => {\n\t\tthis.step(1);\n\t};\n\n\tonIncrement = () => {\n\t\tthis.increase();\n\t};\n\n\tonDecrement = () => {\n\t\tthis.decrease();\n\t};\n\n\tonValueChange = (newValue: any, isFocused = false) => {\n\t\tconst { onValueChange } = this.props;\n\n\t\tthis.setState({\n\t\t\tisFocused,\n\t\t\tdisplayedValue: RawNumericStepper.formatValue(this.props, newValue),\n\t\t});\n\n\t\tonValueChange && onValueChange(newValue);\n\t};\n}\n\nexport type TNumericStepperProps = PartialKeys<\n\tTNumericStepperFullProps,\n\t'theme' | 'SteppableInput' | 'step' | 'max' | 'min' | 'manualEdit'\n>;\n\nexport const NumericStepper: React.ComponentClass<TNumericStepperProps> = withTheme(NUMERIC_STEPPER)(\n\twithDefaults<\n\t\tTNumericStepperFullProps,\n\t\t'SteppableInput' | 'step' | 'max' | 'min' | 'manualEdit' | 'decrementIcon' | 'incrementIcon' | 'parser'\n\t>({\n\t\tstep: 1,\n\t\tmanualEdit: true,\n\t\tmin: Number.NEGATIVE_INFINITY,\n\t\tmax: Number.POSITIVE_INFINITY,\n\t\tparser: parseFloatWithLeadingZero,\n\t\tdecrementIcon: <MinusIcon />,\n\t\tincrementIcon: <PlusIcon />,\n\t\tSteppableInput,\n\t})(RawNumericStepper),\n);\n","import * as React from 'react';\nimport { MouseEventHandler, PureComponent } from 'react';\nexport * from '@devexperts/react-kit/dist/components/Link/Link';\nimport { Link as DXLink, TLinkProps } from '@devexperts/react-kit/dist/components/Link/Link';\n\nexport class Link extends PureComponent<TLinkProps> {\n\trender() {\n\t\treturn <DXLink {...this.props} onClick={this.handleClick} />;\n\t}\n\n\tprivate handleClick: MouseEventHandler<HTMLAnchorElement> = e => {\n\t\tif (this.props.onClick) {\n\t\t\te.preventDefault();\n\t\t\tthis.props.onClick(e);\n\t\t}\n\t};\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"symbol-search_container__2NkBK\",\"groupTitle\":\"symbol-search_groupTitle__1UlyF\",\"groupTitleText\":\"symbol-search_groupTitleText__1UgxB\",\"suggestList\":\"symbol-search_suggestList__1vpnt\",\"suggest\":\"symbol-search_suggest__1b32K\",\"suggest_selected\":\"symbol-search_suggest_selected__1L-CD\",\"selectedMark\":\"symbol-search_selectedMark__W_lir\",\"description\":\"symbol-search_description__3H9Ws\",\"iconWrapper\":\"symbol-search_iconWrapper__1rcvc\"};","export * from '@devexperts/react-kit/dist/components/Scrollable/Scrollable';\n","import * as React from 'react';\nimport { memoize } from '@devexperts/utils/dist/function/memoize';\n\nexport * from '@devexperts/react-kit/dist/components/Popover/Popover';\nimport { Popover as DXCPopover, TPopoverProps } from '@devexperts/react-kit/dist/components/Popover/Popover';\nimport { SFC } from 'react';\n\nconst getRoot = memoize(() => {\n\tconst root = document.getElementById('root');\n\treturn root || undefined;\n});\n\nexport const Popover: SFC<TPopoverProps> = (props: TPopoverProps) => <DXCPopover container={getRoot()} {...props} />;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"positions-dashboard_container__3g-5K\",\"left\":\"positions-dashboard_left__3jqX6\",\"chart\":\"positions-dashboard_chart__1d-0H\",\"aside\":\"positions-dashboard_aside__BaiqF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"categories_container__3yXwU\",\"container_hasShadow\":\"categories_container_hasShadow__3retg\",\"categories\":\"categories_categories__1xL9r\",\"link\":\"categories_link__7DASx\",\"link_active\":\"categories_link_active__T1pjA\",\"title\":\"categories_title__121bF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"trade-dashboard_container__d8ZvB\",\"symbols\":\"trade-dashboard_symbols__UnceO\",\"watchlist\":\"trade-dashboard_watchlist__1PAw7\",\"left\":\"trade-dashboard_left__2rI7C\",\"aside\":\"trade-dashboard_aside__1kKHQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"workspace_container__rzV6D\",\"bottom\":\"workspace_bottom__3Ey8z\",\"panel\":\"workspace_panel__24h3T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"table_table__3KXaP\",\"row\":\"table_row__1cjVl\",\"body\":\"table_body__3sVwj\",\"head\":\"table_head__gut0r\",\"headCell\":\"table_headCell__3cZsh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"history-dashboard_container__2KUqr\",\"left\":\"history-dashboard_left__1t66s\",\"filterFormWrapper\":\"history-dashboard_filterFormWrapper__2nvTn\",\"historyTableWrapper\":\"history-dashboard_historyTableWrapper__7288y\",\"aside\":\"history-dashboard_aside__1ZuOx\",\"emptyScreen\":\"history-dashboard_emptyScreen__1cczM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"margin-popup_content__1dKOW\",\"text\":\"margin-popup_text__1-YZ8\",\"link\":\"margin-popup_link__3qp9n\",\"buttons\":\"margin-popup_buttons___maCX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order-entry-panel-side_container__31eRc\",\"container_sell\":\"order-entry-panel-side_container_sell__2kWrF\",\"container_buy\":\"order-entry-panel-side_container_buy__2TFaB\",\"container_disabled\":\"order-entry-panel-side_container_disabled__1mVuN\",\"text\":\"order-entry-panel-side_text__15UtP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"error-panel_error__1NtIk\",\"error__icon\":\"error-panel_error__icon__2JpVz\",\"error__title\":\"error-panel_error__title__hyfV9\",\"error__message\":\"error-panel_error__message__1glBR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"symbol-info_content__14OVy\",\"symbol\":\"symbol-info_symbol__3Pvfq\",\"description\":\"symbol-info_description__2EfHQ\",\"marketSentiment\":\"symbol-info_marketSentiment__3dttO\",\"marketSentimentBar\":\"symbol-info_marketSentimentBar__2bU4L\",\"marketSentimentBarLeft\":\"symbol-info_marketSentimentBarLeft__3Ymoi\",\"prefixChange\":\"symbol-info_prefixChange__1HZYR\",\"tradingHours\":\"symbol-info_tradingHours__1I7vn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"toolbar_container__3RxZB\",\"title\":\"toolbar_title__1SOQO\",\"controls\":\"toolbar_controls__7XxfR\",\"menuTypeIcon\":\"toolbar_menuTypeIcon__2yJUa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"order-details_content__H6uqY\",\"header\":\"order-details_header__12il9\",\"widgetLabel\":\"order-details_widgetLabel__1Smk0\",\"closeBtnWrapper\":\"order-details_closeBtnWrapper__1V7mc\",\"red\":\"order-details_red__fXkri\",\"green\":\"order-details_green__3UtCK\",\"seconds\":\"order-details_seconds__2kkuL\",\"icon\":\"order-details_icon__6ggtP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"history-details_content__1FXeF\",\"orderChainId\":\"history-details_orderChainId__29eBy\",\"symbol\":\"history-details_symbol__3pF8k\",\"positiveSide\":\"history-details_positiveSide__ky3VQ\",\"negativeSide\":\"history-details_negativeSide__1WNeU\",\"seconds\":\"history-details_seconds__BfR_J\"};","import * as React from 'react';\nimport { Component, ReactNode } from 'react';\nimport * as classNames from 'classnames';\nimport { Omit } from 'typelevel-ts';\nimport { PartialKeys } from '@devexperts/utils/dist/object/object';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nexport * from '@devexperts/react-kit/dist/components/Checkbox/Checkbox';\nimport { TControlProps } from '@devexperts/react-kit/dist/components/Control/Control';\nimport {\n\tCheckbox as DXCCheckbox,\n\tCHECKBOX,\n\tTFullCheckboxProps as TDXCFullCheckboxProps,\n} from '@devexperts/react-kit/dist/components/Checkbox/Checkbox';\n\nimport { CheckboxTickIcon } from '../../ui-desktop/ui-kit/components/icons/checkbox-tick.icon';\n\nimport * as css from './checkbox.module.css';\n\nconst iconCheckboxTick = <CheckboxTickIcon />;\n\nexport type TFullCheckboxProps = Omit<TDXCFullCheckboxProps, 'checkMark'> & {\n\tchildren?: ReactNode;\n\tcheckMark?: ReactNode;\n\ttheme: {\n\t\tview_isChecked?: string;\n\t\tcheckboxContainer?: string;\n\t\tview_isCheckedDisabled?: string;\n\t\ttext?: string;\n\t} & TDXCFullCheckboxProps['theme'];\n} & TControlProps<boolean>;\n\nclass RawCheckbox extends Component<TFullCheckboxProps> {\n\tstatic defaultProps = {\n\t\tcheckMark: iconCheckboxTick,\n\t};\n\n\trender() {\n\t\tconst { value, isDisabled, children, checkMark, ...props } = this.props;\n\t\tlet theme = props.theme;\n\n\t\ttheme = {\n\t\t\t...theme,\n\t\t\tview: classNames(theme.view, {\n\t\t\t\t[theme.view_isChecked as string]: value,\n\t\t\t\t[theme.view_isCheckedDisabled as string]: value && isDisabled,\n\t\t\t}),\n\t\t};\n\n\t\tconst containerTheme = classNames(theme.container, {\n\t\t\t[css.container_isDisabled as string]: isDisabled,\n\t\t\t[css.container_isCheckedDisabled as string]: value && isDisabled,\n\t\t});\n\n\t\treturn (\n\t\t\t<label className={containerTheme}>\n\t\t\t\t<div className={theme.checkboxContainer}>\n\t\t\t\t\t<DXCCheckbox {...this.props} theme={theme} checkMark={checkMark} />\n\t\t\t\t</div>\n\t\t\t\t{children && <span className={theme.text}>{children}</span>}\n\t\t\t</label>\n\t\t);\n\t}\n}\n\nexport type TCheckboxProps = PartialKeys<TFullCheckboxProps, 'theme'>;\nexport const Checkbox = withTheme(CHECKBOX, css)(RawCheckbox);\n","import { PureComponent } from 'react';\nimport { PartialKeys } from '@devexperts/utils/dist/object';\nimport * as React from 'react';\nexport * from '@devexperts/react-kit/dist/components/DateInput/DateInput';\nimport {\n\tDateInput as DXDateInput,\n\tTDateInputProps as TDXDateInputProps,\n} from '@devexperts/react-kit/dist/components/DateInput/DateInput';\nimport { CalendarIcon } from '../icons/calendar.icon';\n\nexport type TDateInputProps = PartialKeys<TDXDateInputProps, 'incrementIcon' | 'decrementIcon'>;\n\nexport class DateInput extends PureComponent<TDateInputProps> {\n\trender() {\n\t\treturn <DXDateInput {...this.props} calendarIcon={<CalendarIcon />} />;\n\t}\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"numeric-stepper.child_container__3DNmj\",\"input\":\"numeric-stepper.child_input__13BY2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"numeric-stepper.button_container__2cjIA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"localeInSelector\":\"locale-selector_localeInSelector__1lxPJ\",\"flag\":\"locale-selector_flag__3Cpx3\",\"icon\":\"locale-selector_icon__1yJt7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"registration-open-button_container__2jVMa\",\"title\":\"registration-open-button_title__2Q7c-\",\"btn\":\"registration-open-button_btn__31MBj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"layout_container__26zjl\",\"content\":\"layout_content__3m2rP\",\"main\":\"layout_main__1idlo\",\"left\":\"layout_left__p2lmO\",\"aside\":\"layout_aside__XyML3\",\"header\":\"layout_header__FmFSK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cell\":\"table-cell_cell__1LVQw\",\"cell_leftAligned\":\"table-cell_cell_leftAligned__o4Mrt\",\"cell_rightAligned\":\"table-cell_cell_rightAligned__TNUbq\",\"cell_centerAligned\":\"table-cell_cell_centerAligned__3xfq7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scrollbar\":\"scrollbars_scrollbar__1TI3J\",\"container_hasShadow\":\"scrollbars_container_hasShadow__3kRwX\",\"track\":\"scrollbars_track__tzMnR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"editing-position_header__18gl5\",\"widgetLabel\":\"editing-position_widgetLabel__2INU5\",\"closeBtnWrapper\":\"editing-position_closeBtnWrapper__3WNhu\",\"content\":\"editing-position_content__dRHj3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"orders-dashboard_container__ma3Mz\",\"left\":\"orders-dashboard_left__3Rjqk\",\"aside\":\"orders-dashboard_aside__1Czfu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"registration-button_container__2ugNT\"};","export * from '@devexperts/react-kit/dist/components/Menu/Menu';\nimport './theme/menu.module.css';\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"chart_wrapper__3qWYn\",\"container\":\"chart_container__3w0ys\",\"axisWrapper-x\":\"chart_axisWrapper-x__1a4Pa\",\"graph\":\"chart_graph__13L70\",\"graph_resizable\":\"chart_graph_resizable__3RHqC\",\"axisWrapper_x\":\"chart_axisWrapper_x__1Dc2-\",\"axisWrapper_y\":\"chart_axisWrapper_y__3Dhto\",\"axis_y\":\"chart_axis_y__2ZoqY\",\"axis\":\"chart_axis__1xZSf\",\"axis_x\":\"chart_axis_x__3s2Gx\",\"canvasArea\":\"chart_canvasArea__2XpRR\",\"canvasWrapper\":\"chart_canvasWrapper__cP1vR\",\"studyOverlay\":\"chart_studyOverlay__s_CHq\",\"studyMarker\":\"chart_studyMarker__37xwi\",\"extraCanvas\":\"chart_extraCanvas__3sVuE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"lines-plugin_container__1Cnud\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"header_container__1kWXo\",\"accountLabel\":\"header_accountLabel__2vwkt\",\"accountLabel_real\":\"header_accountLabel_real__PRqFs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"menu-account_container__yNvhu\",\"container_selected\":\"menu-account_container_selected__1qa3o\",\"id\":\"menu-account_id__2tFcw\",\"icon\":\"menu-account_icon__197tY\",\"currency\":\"menu-account_currency__1LqD1\",\"status\":\"menu-account_status__27wsn\",\"status_demo\":\"menu-account_status_demo__23sLC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"relogin-popup_content__2D8Va\",\"text\":\"relogin-popup_text__2PbUx\",\"link\":\"relogin-popup_link__2Ht6W\",\"buttons\":\"relogin-popup_buttons__9bRqh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"checkbox_container__E7DKG\",\"input\":\"checkbox_input__2ex6p\",\"container_isDisabled\":\"checkbox_container_isDisabled__3_hsW\",\"checkboxContainer\":\"checkbox_checkboxContainer__1k1uO\",\"icon\":\"checkbox_icon__3Obj_\",\"icon_isChecked\":\"checkbox_icon_isChecked__YyJH_\",\"view\":\"checkbox_view__O0YW0\",\"view_isChecked\":\"checkbox_view_isChecked__36PQX\",\"view_isDisabled\":\"checkbox_view_isDisabled__2lNJF\",\"view_isCheckedDisabled\":\"checkbox_view_isCheckedDisabled__20QNL\",\"text\":\"checkbox_text__22dQY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container_symbol\":\"highlight.child_container_symbol__bOZhv\",\"mark\":\"highlight.child_mark__2BQhe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"position-details_content__2mTk_\",\"title\":\"position-details_title__14ucY\",\"positiveSide\":\"position-details_positiveSide__1d_aP\",\"negativeSide\":\"position-details_negativeSide__1Ih-N\",\"seconds\":\"position-details_seconds__2Re3Q\",\"buttonWrapper\":\"position-details_buttonWrapper__1sypm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"order-details_content__33Qap\",\"header\":\"order-details_header__Tig_0\",\"widgetLabel\":\"order-details_widgetLabel__1ctIh\",\"closeBtnWrapper\":\"order-details_closeBtnWrapper__1HM3z\",\"red\":\"order-details_red__SCQXg\",\"green\":\"order-details_green__2fpkV\",\"seconds\":\"order-details_seconds__2N9ky\",\"icon\":\"order-details_icon__1p8Cr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"menu_container__31MTg\",\"item\":\"menu_item__2hFrQ\",\"itemGroup__header\":\"menu_itemGroup__header__2QUYp\",\"item_active\":\"menu_item_active__23hIt\",\"item__content\":\"menu_item__content__3PH4R\",\"itemGroup__header__content\":\"menu_itemGroup__header__content__1OaoI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"preloader_container__3kfJ3\",\"loader\":\"preloader_loader__1NI_A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"input_container__364Fx\",\"input\":\"input_input__ezCYp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button-icon_container__Hddqu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button-icon_container__ZqUeT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"current\":\"locale-selector-anchor_current__nxF1K\",\"current_opened\":\"locale-selector-anchor_current_opened__2gIrD\",\"icon\":\"locale-selector-anchor_icon__dPjih\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"info-box_container__waqPc\",\"container_isHidden\":\"info-box_container_isHidden__3gray\",\"text\":\"info-box_text__3yjCS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textBody\":\"connection-lost-popup_textBody__1bqv0\",\"buttonWrapper\":\"connection-lost-popup_buttonWrapper__27Vgp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button.child_container__DTTPr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"pip-rate.child_container__3RiTP\",\"pip\":\"pip-rate.child_pip__3ptUS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noValue\":\"optional_noValue__3-wO5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order-entry-takeprofit-stoploss_wrapper__3eQrZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"lines.component_container__2Efn7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"current-price-line_container__1AIhq\",\"price\":\"current-price-line_price__7OSDE\",\"price_down\":\"current-price-line_price_down__cTT2m\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button.child_container__1NEwe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"position-details_content__2Udnd\",\"title\":\"position-details_title__2oLlo\",\"positiveSide\":\"position-details_positiveSide__1ghqJ\",\"negativeSide\":\"position-details_negativeSide__snsVO\",\"seconds\":\"position-details_seconds__3Vr31\",\"buttonWrapper\":\"position-details_buttonWrapper__11HMN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button.child_container__2kbfv\",\"container_trade\":\"button.child_container_trade__36usF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"icon-button.child_container__3xA9h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"input_container__egd6K\",\"container_isFocused\":\"input_container_isFocused__1hktt\",\"container_hasError\":\"input_container_hasError__2o6QO\",\"container_isDisabled\":\"input_container_isDisabled__1RU0x\",\"input\":\"input_input__eBENc\",\"errorText\":\"input_errorText__2Ua0m\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button_container__PhV3g\",\"inner\":\"button_inner__2qaDS\",\"inner_isLoading\":\"button_inner_isLoading__1jP1p\",\"container_primary\":\"button_container_primary__8wI6S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"popover_container__1Sg9b\",\"container_hasArrow\":\"popover_container_hasArrow__3dwLF popover_container__1Sg9b\",\"container_placementTop\":\"popover_container_placementTop__27Swq\",\"arrow\":\"popover_arrow__2ogzj\",\"container_placementBottom\":\"popover_container_placementBottom__3esnt\",\"container_placementLeft\":\"popover_container_placementLeft__1XetD\",\"container_placementRight\":\"popover_container_placementRight__3dS3R\",\"content\":\"popover_content__2KtTr\",\"slide-in-from-top\":\"popover_slide-in-from-top__3yG1c\",\"fade-in\":\"popover_fade-in__wxrRg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inner\":\"steppable-input_inner__3eSm4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button-icon_container__1WHl8\",\"container_isDisabled\":\"button-icon_container_isDisabled__2AOkx\"};","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const MinusIcon: React.SFC = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 11 11\">\n\t\t\t<path fillRule=\"evenodd\" d=\"M0 5h11v1H0z\" />\n\t\t</svg>\n\t</IconWrapper>\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"icon-wrapper_container__2_qL0\"};","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const PlusIcon: React.SFC = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 11 11\">\n\t\t\t<path fillRule=\"evenodd\" d=\"M5 5V0h1v5h5v1H6v5H5V6H0V5h5z\" />\n\t\t</svg>\n\t</IconWrapper>\n);\n","export * from '@devexperts/react-kit/dist/components/SteppableInput/SteppableInput';\n","import { unformat } from 'accounting';\n\nexport const parseFloatWithLeadingZero = (numericString: string): number =>\n\tnumericString.charAt(0) === '0' && unformat(numericString) >= 1\n\t\t? // extract original value and replace first occurence of fractional sign\n\t\t  unformat(`0.${numericString.slice(1).replace('.', '')}`)\n\t\t: unformat(numericString);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inner\":\"date-input_inner__1TjmC\",\"section\":\"date-input_section__xhn7x\",\"separator\":\"date-input_separator__2PcgP\",\"section_isActive\":\"date-input_section_isActive__20VgQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scrollable\":\"scrollable_scrollable__3nASz\",\"withVerticalScrollbar\":\"scrollable_withVerticalScrollbar__11zD4\",\"overlayContent\":\"scrollable_overlayContent__3iSgu\",\"wrapper\":\"scrollable_wrapper__N6nCE\",\"container\":\"scrollable_container__3gada\",\"content\":\"scrollable_content__2tf95\",\"vertical_scrollbar__bar\":\"scrollable_vertical_scrollbar__bar__T2NjU\",\"resizeDetector\":\"scrollable_resizeDetector__Ldw48\",\"scrollbar\":\"scrollable_scrollbar___XLiL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"track\":\"scrollbar_track__7u9F7\",\"bar\":\"scrollbar_bar__220gj\",\"container\":\"scrollbar_container__2OxWp\",\"containerIsVisible\":\"scrollbar_containerIsVisible__2muw0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button-cta_container__2MgEJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"close-button_container__MUw3i\",\"icon\":\"close-button_icon__3IZAQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"popup_backdrop__2FHbi\",\"backdrop_isModal\":\"popup_backdrop_isModal__vj0VW\",\"container\":\"popup_container__39JlX\",\"header\":\"popup_header__2nHqm\",\"title\":\"popup_title__2yRNx\",\"body\":\"popup_body__EeJNJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"close-button.child_container__3rVz3\",\"icon\":\"close-button.child_icon__LZR1w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"iframe_container__1NgcD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button.child_container__3Q3_o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iframe\":\"upgrade-account-button_iframe__2SIDK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"link.child_container__1Lzh3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"registration-button.child_container__VXVfH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container__anchor\":\"selectbox_container__anchor__tqlfM\",\"container__anchor__caret\":\"selectbox_container__anchor__caret__35mBs\",\"container__anchor__text\":\"selectbox_container__anchor__text__2qRR9\",\"container__anchor__content\":\"selectbox_container__anchor__content__1IWAw\",\"container__anchor__content_hasCaret\":\"selectbox_container__anchor__content_hasCaret__3f7lw\",\"container__anchor__caret_isReversed\":\"selectbox_container__anchor__caret_isReversed__3ynyy\",\"container_isOpened\":\"selectbox_container_isOpened__1NhJU\",\"container__text\":\"selectbox_container__text__2qQ3h\",\"container__menu\":\"selectbox_container__menu__1zwwF\",\"container__menu_hasSelectedItem\":\"selectbox_container__menu_hasSelectedItem__j3txe\",\"container__item\":\"selectbox_container__item__j_uUb\",\"container__item__activeIcon\":\"selectbox_container__item__activeIcon__346Or\",\"container__item__text\":\"selectbox_container__item__text__1R6k9\",\"container__popover__content\":\"selectbox_container__popover__content__1wArj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"flag-icon-wrapper_container__39Be_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container__anchor\":\"selectbox.child_container__anchor__eIm3A\",\"container__anchor__caret\":\"selectbox.child_container__anchor__caret__2RBL4\",\"container__anchor__content\":\"selectbox.child_container__anchor__content__2GkiT\",\"container__anchor__content_hasCaret\":\"selectbox.child_container__anchor__content_hasCaret__2yBx9\",\"container__anchor__text\":\"selectbox.child_container__anchor__text__3fUJj\",\"container_isOpened\":\"selectbox.child_container_isOpened__1lddo\",\"container__popover\":\"selectbox.child_container__popover__3wsTf\",\"container__popover__content\":\"selectbox.child_container__popover__content__1meBx\",\"container__item\":\"selectbox.child_container__item__3w1xq\",\"container__item__text\":\"selectbox.child_container__item__text__1Crdy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"menu-item.child_item__2TD6Z\",\"item__content\":\"menu-item.child_item__content__3ZywJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"menu-list-item_container__1A4Bk\",\"icon\":\"menu-list-item_icon__2-Uqy\",\"container_disabled\":\"menu-list-item_container_disabled__3Cwtf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"menu-divider_container__2lVIh\",\"hr\":\"menu-divider_hr__1cnEk\",\"label\":\"menu-divider_label__1rfVY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"not-now-button_container__JlFBj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"info-box.child_container__3H7Pj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"current\":\"menu-accounts_current__1UnkM\",\"current_opened\":\"menu-accounts_current_opened__KtLLy\",\"icon\":\"menu-accounts_icon__2Szt-\",\"list\":\"menu-accounts_list__1SP51\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"menu-live_container__dEVOC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"disable-overlay_container__1EsQ6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"info-box-registration_container__3nmPw\",\"text\":\"info-box-registration_text__3y_Mv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iframe\":\"welcome-popup_iframe__10TMO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button.child_container__aP5oH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"popup.child_backdrop__LIE1N\",\"container\":\"popup.child_container__14hdt\",\"header\":\"popup.child_header__2L2i4\",\"body\":\"popup.child_body__3Aw7K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"popup.child_header__1mFCO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"popup.child_header__1YAed\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button.child_container__1EFmW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"pip-rate_container__2uyw0\",\"pip\":\"pip-rate_pip__3NUcE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"price-direction_icon__5SCBu\",\"arrowUp\":\"price-direction_arrowUp__2oNfj\",\"arrowDown\":\"price-direction_arrowDown__1iFuB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button-sell.child_container__2ARMF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button-buy.child_container__7D5kM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"price-direction.child_icon__2A-4S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"side-panel_container__3MdHE\",\"header\":\"side-panel_header__1mGL0\",\"content\":\"side-panel_content__3bwia\",\"footer\":\"side-panel_footer__1gEDG\",\"body\":\"side-panel_body__19rWI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"scrollable.child_container__2tnxa\",\"content\":\"scrollable.child_content__3qS2a\",\"wrapper\":\"scrollable.child_wrapper__3cez5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"pip-rate.child_container__2c48L\",\"pip\":\"pip-rate.child_pip__1zv6G\"};","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const CheckboxTickIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"2 0 14 18\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M14.8 4.27a.26.26 0 0 1 .21-.11.26.26 0 0 1 .22.1l.33.3a.4.4 0 0 1 .08.25.3.3 0 0 1-.08.22l-8.2 8.2a.33.33 0 0 1-.23.11.33.33 0 0 1-.24-.1L3.63 9.97a.3.3 0 0 1-.08-.22.4.4 0 0 1 .08-.25l.33-.3a.26.26 0 0 1 .22-.1.26.26 0 0 1 .22.1l2.7 2.71z\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const CalendarIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 30 30\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M23.53 11.75a.45.45 0 0 0 .33-.14.45.45 0 0 0 .14-.33v-1.4a1.8 1.8 0 0 0-.55-1.33A1.8 1.8 0 0 0 22.13 8h-1.88V5.97a.45.45 0 0 0-.14-.33.45.45 0 0 0-.33-.14h-1.56a.45.45 0 0 0-.33.14.45.45 0 0 0-.14.33V8h-5V5.97a.45.45 0 0 0-.14-.33.45.45 0 0 0-.33-.14h-1.56a.45.45 0 0 0-.33.14.45.45 0 0 0-.14.33V8H8.37a1.8 1.8 0 0 0-1.32.55 1.8 1.8 0 0 0-.55 1.32v1.41a.45.45 0 0 0 .14.33.45.45 0 0 0 .33.14zM6.97 13a.45.45 0 0 0-.33.14.45.45 0 0 0-.14.33v10.15a1.8 1.8 0 0 0 .55 1.33 1.8 1.8 0 0 0 1.33.55h13.75a1.8 1.8 0 0 0 1.32-.55 1.8 1.8 0 0 0 .55-1.32V13.46a.45.45 0 0 0-.14-.33.45.45 0 0 0-.33-.14zm4.53 7.97v1.56a.45.45 0 0 1-.14.33.45.45 0 0 1-.33.14H9.47a.45.45 0 0 1-.33-.14.45.45 0 0 1-.14-.33v-1.56a.45.45 0 0 1 .14-.33.45.45 0 0 1 .33-.14h1.56a.45.45 0 0 1 .33.14.45.45 0 0 1 .14.33zm0-5v1.56a.45.45 0 0 1-.14.33.45.45 0 0 1-.33.14H9.47a.45.45 0 0 1-.33-.14.45.45 0 0 1-.14-.33v-1.56a.45.45 0 0 1 .14-.33.45.45 0 0 1 .33-.14h1.56a.45.45 0 0 1 .33.14.45.45 0 0 1 .14.33zm5 5v1.56a.45.45 0 0 1-.14.33.45.45 0 0 1-.33.14h-1.56a.45.45 0 0 1-.33-.14.45.45 0 0 1-.14-.33v-1.56a.45.45 0 0 1 .14-.33.45.45 0 0 1 .33-.14h1.56a.45.45 0 0 1 .33.14.45.45 0 0 1 .14.33zm0-5v1.56a.45.45 0 0 1-.14.33.45.45 0 0 1-.33.14h-1.56a.45.45 0 0 1-.33-.14.45.45 0 0 1-.14-.33v-1.56a.45.45 0 0 1 .14-.33.45.45 0 0 1 .33-.14h1.56a.45.45 0 0 1 .33.14.45.45 0 0 1 .14.33zm5 5v1.56a.45.45 0 0 1-.14.33.45.45 0 0 1-.33.14h-1.56a.45.45 0 0 1-.33-.14.45.45 0 0 1-.14-.33v-1.56a.45.45 0 0 1 .14-.33.45.45 0 0 1 .33-.14h1.56a.45.45 0 0 1 .33.14.45.45 0 0 1 .14.33zm0-5v1.56a.45.45 0 0 1-.14.33.45.45 0 0 1-.33.14h-1.56a.45.45 0 0 1-.33-.14.45.45 0 0 1-.14-.33v-1.56a.45.45 0 0 1 .14-.33.45.45 0 0 1 .33-.14h1.56a.45.45 0 0 1 .33.14.45.45 0 0 1 .14.33z\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"calendar_container__kSZm-\",\"calendar\":\"calendar_calendar__25VPa\",\"calendar__header\":\"calendar_calendar__header__1tXIv\",\"calendar__day\":\"calendar_calendar__day__hqJjS\",\"calendar__row\":\"calendar_calendar__row__1Em_l\",\"calendar__body\":\"calendar_calendar__body__1FcgF\",\"calendar__day_isHidden\":\"calendar_calendar__day_isHidden__3lDbf\",\"calendar__day_isCurrent\":\"calendar_calendar__day_isCurrent__3bQrD\",\"calendar__monthName\":\"calendar_calendar__monthName__2R4El\",\"calendar__yearsText\":\"calendar_calendar__yearsText__FrxzB\",\"button_icon__wrapper\":\"calendar_button_icon__wrapper__29U-7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button-icon_container__bh_ra\",\"icon\":\"button-icon_icon__2auGc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"numeric-stepper-error.child_container__3otSO\",\"container_isFocused\":\"numeric-stepper-error.child_container_isFocused__2VIdC\",\"container_hasError\":\"numeric-stepper-error.child_container_hasError__1-lXy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"numeric-stepper.child_container__1QTCY\",\"input\":\"numeric-stepper.child_input__3hUsM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"numeric-stepper.button_container__1888F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"takeprofit-stoploss-panel_content__2k5gX\",\"controlsWrapper\":\"takeprofit-stoploss-panel_controlsWrapper__1jzWF\",\"profitControlsWrapper\":\"takeprofit-stoploss-panel_profitControlsWrapper__36uLH\",\"element\":\"takeprofit-stoploss-panel_element__366xR\",\"priceLabel\":\"takeprofit-stoploss-panel_priceLabel__LWEMK\",\"priceValue\":\"takeprofit-stoploss-panel_priceValue__1BzWd\",\"label\":\"takeprofit-stoploss-panel_label__kMRuJ\",\"limitLabel\":\"takeprofit-stoploss-panel_limitLabel__2P5pS\",\"checkboxWrapper\":\"takeprofit-stoploss-panel_checkboxWrapper__3RH7N\",\"priceWrapper\":\"takeprofit-stoploss-panel_priceWrapper__2aqE2\",\"plLabel\":\"takeprofit-stoploss-panel_plLabel__11fMT\",\"controls\":\"takeprofit-stoploss-panel_controls__1bKND\",\"error\":\"takeprofit-stoploss-panel_error__1aga0\",\"errorIcon\":\"takeprofit-stoploss-panel_errorIcon__2Z2bf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"symbol_title__14VUX\",\"subtitle\":\"symbol_subtitle__1JVXM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button.child_container__ikPda\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button-deposit.child_container__2LGP-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"info-box.child_container__V3LYo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"side-panel.child_body__2jF_8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"symbol.child_container__xMuHe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"registration-info-box.child_container__2uPJM\",\"text\":\"registration-info-box.child_text__3mfFD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"info-panel_item__2uNT4\",\"item_secondary\":\"info-panel_item_secondary__iCyC7\",\"label\":\"info-panel_label__fgZci\",\"value\":\"info-panel_value__2iEHf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"price-direction.child_icon__3Q0kI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"scrollable.child_wrapper__2Ee4P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container__anchor\":\"periods-selectbox.child_container__anchor__2P00B\",\"container__anchor__caret\":\"periods-selectbox.child_container__anchor__caret__3B_X9\",\"container__anchor__content\":\"periods-selectbox.child_container__anchor__content__q__Qf\",\"container__anchor__content_hasCaret\":\"periods-selectbox.child_container__anchor__content_hasCaret__2tHnX\",\"container_isOpened\":\"periods-selectbox.child_container_isOpened__3leVs\",\"container__popover\":\"periods-selectbox.child_container__popover__1PT0P\",\"container__popover__content\":\"periods-selectbox.child_container__popover__content__xSvs6\",\"container__menu\":\"periods-selectbox.child_container__menu__3nC9b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container__anchor\":\"type-selectbox.child_container__anchor__dbynB\",\"container__anchor__caret\":\"type-selectbox.child_container__anchor__caret__3KhGH\",\"container__anchor__content\":\"type-selectbox.child_container__anchor__content__1PIgq\",\"container__anchor__content_hasCaret\":\"type-selectbox.child_container__anchor__content_hasCaret__1s1Ei\",\"container__anchor__text\":\"type-selectbox.child_container__anchor__text__sOurl\",\"container_isOpened\":\"type-selectbox.child_container_isOpened__1mFwq\",\"container__popover\":\"type-selectbox.child_container__popover__1QC_F\",\"container__popover__content\":\"type-selectbox.child_container__popover__content__2qgLR\",\"container__menu\":\"type-selectbox.child_container__menu__2cKrT\",\"container__item__text\":\"type-selectbox.child_container__item__text__2OIIE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container__anchor\":\"cross-tool-selectbox.child_container__anchor__rQD2-\",\"container__anchor__caret\":\"cross-tool-selectbox.child_container__anchor__caret__1Y703\",\"container__anchor__content\":\"cross-tool-selectbox.child_container__anchor__content__3626A\",\"container__anchor__content_hasCaret\":\"cross-tool-selectbox.child_container__anchor__content_hasCaret__3-hre\",\"container__anchor__text\":\"cross-tool-selectbox.child_container__anchor__text__20Ugg\",\"container_isOpened\":\"cross-tool-selectbox.child_container_isOpened__1i7yZ\",\"container__popover\":\"cross-tool-selectbox.child_container__popover__1A_kZ\",\"container__popover__content\":\"cross-tool-selectbox.child_container__popover__content__17-3W\",\"container__menu\":\"cross-tool-selectbox.child_container__menu__xcbZA\",\"container__item__text\":\"cross-tool-selectbox.child_container__item__text__XFjwN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"window\":\"chart-map_window__1yp73\",\"container\":\"chart-map_container__3YISa\",\"chartMap\":\"chart-map_chartMap__QJ3EK\",\"map\":\"chart-map_map__3gqqR\",\"canvasWrapper\":\"chart-map_canvasWrapper__2lLoZ\",\"canvas\":\"chart-map_canvas__1V6k8\",\"labels\":\"chart-map_labels__2cMD5\",\"controls\":\"chart-map_controls__1QOTN\",\"button\":\"chart-map_button__jMRus\",\"button_toLeft\":\"chart-map_button_toLeft__3MN9_\",\"button_toRight\":\"chart-map_button_toRight__2SKlo\",\"area\":\"chart-map_area__13vtS\",\"area_hidden\":\"chart-map_area_hidden__1T4k3\",\"knob\":\"chart-map_knob__2BZ2y\",\"knob_toLeft\":\"chart-map_knob_toLeft__3pWfp\",\"knob_toRight\":\"chart-map_knob_toRight__DF9YC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"chart-wrapper_container__i8lTV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"input.child_container__2TRke\",\"input\":\"input.child_input__MI3R1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"popover.child_container__3W1Qa\",\"content\":\"popover.child_content__lAFSF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"line.component_container__2tjct\",\"label\":\"line.component_label__343u3\",\"price\":\"line.component_price__3elwJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button.child_container__2whkp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"symbol.child_container__Gp7FU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"numeric-stepper.child_container__X0gZI\",\"input\":\"numeric-stepper.child_input__2s22s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"numeric-stepper.button_container__xFPXL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"symbol\":\"editing-position_symbol__2LFge\",\"description\":\"editing-position_description__25d7d\",\"info\":\"editing-position_info__3faD2\",\"element\":\"editing-position_element__3YRDR\",\"profitWrapper\":\"editing-position_profitWrapper__3n6tK\",\"profitLabel\":\"editing-position_profitLabel__l0_RE\",\"profitAmount\":\"editing-position_profitAmount__3w8TY\",\"profitAmount_positive\":\"editing-position_profitAmount_positive__3OyL2\",\"profitAmount_negative\":\"editing-position_profitAmount_negative__2If7v\",\"element_label\":\"editing-position_element_label__2OcB7\",\"element_text\":\"editing-position_element_text__yAaTi\",\"divider\":\"editing-position_divider__20YMs\",\"verticalSpacer\":\"editing-position_verticalSpacer__1oBWR\",\"closeBtnWrapper\":\"editing-position_closeBtnWrapper__3DO_v\",\"takeProfitStopLossWrapper\":\"editing-position_takeProfitStopLossWrapper__LMlrC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button.child_container__jn6o6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"side-panel.child_body__i9EHD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"price-direction.child_icon__1C-0T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"symbol.child_container__1yZC2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"empty-screen_container__29z2e\",\"content\":\"empty-screen_content__1UcWj\",\"textWrapper\":\"empty-screen_textWrapper__18weB\",\"title\":\"empty-screen_title__FUB5f\",\"title_preview\":\"empty-screen_title_preview__26R11\",\"subtitle\":\"empty-screen_subtitle__1smv3\",\"iconContainer\":\"empty-screen_iconContainer__339fH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"cancel-confirmation_container__25mZj\",\"title\":\"cancel-confirmation_title__1OyAE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button.child_container__2uwCr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button-submit.child_container__347jg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"button.child_container__edIEt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"symbol.child_container__3_6Id\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"scrollable.child_wrapper__3NVz8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"side-panel.child_content__1ROCi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"period-button.child_container__Ciw6w\",\"inner\":\"period-button.child_inner__lC3lQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"period-popover.child_container__3Z31Z\",\"content\":\"period-popover.child_content__1GBcR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"date-input-popover.child_content__6yjdv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"date-input.child_container__2PXDJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"date-input.button_container__1_ypn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"menu-item.child_item__z49nb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"history-details_content__1wyGs\",\"orderChainId\":\"history-details_orderChainId__2kdQw\",\"symbol\":\"history-details_symbol__27JnQ\",\"positiveSide\":\"history-details_positiveSide__3Czba\",\"negativeSide\":\"history-details_negativeSide__3r8EJ\",\"seconds\":\"history-details_seconds__2G1G-\"};","import { fromEvent, race } from 'rxjs';\nimport { startWith, map } from 'rxjs/operators';\nimport { pending, success, failure } from '@devexperts/remote-data-ts';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\n\nexport const loadScript = (src: string): LiveData<Error, Event> => {\n\tconst script = document.createElement('script');\n\tscript.src = src;\n\tdocument.body.appendChild(script);\n\tconst load$ = fromEvent(script, 'load').pipe(map(e => success<Error, Event>(e)));\n\tconst error$ = fromEvent(script, 'error').pipe(\n\t\tmap(() => failure<Error, Event>(new Error(`Error loaded ${script.src}`))),\n\t);\n\treturn race(error$, load$).pipe(startWith(pending));\n};\n","export class ServerError extends Error {\n\tconstructor(readonly status: number, readonly message: string) {\n\t\tsuper('ServerError');\n\t\tObject.setPrototypeOf(this, ServerError.prototype);\n\t}\n\n\tstatic is(error: Error): error is ServerError {\n\t\treturn error instanceof ServerError;\n\t}\n}\n","import { OperatorFunction } from 'rxjs/internal/types';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { shareReplay } from 'rxjs/operators';\n\nexport function shareReplayWithDefaults<T>(): OperatorFunction<T, T> {\n\treturn (source$: Observable<T>) => source$.pipe(shareReplay({ bufferSize: 1, refCount: true }));\n}\n","import { Observable } from 'rxjs';\nimport { Action, History, Location } from 'history';\nimport { ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { end, format, Match, Route } from 'fp-ts-routing';\nimport { Option } from 'fp-ts/lib/Option';\nimport { shareReplayWithDefaults } from './rxjs/shareReplayWithDefaults';\n\nexport type RouterState = {\n\tlocation: Location;\n\taction: Action;\n};\n\nexport type Router = {\n\tstate: RouterState;\n\tstate$: Observable<RouterState>;\n\tpush: History['push'];\n\treplace: History['replace'];\n};\n\nexport type CreateRouter = () => Sink<Router>;\n\nexport type RouterContext = {\n\thistory: History;\n};\n\nexport const createRouter = ask<RouterContext>().map(\n\t(e): CreateRouter => {\n\t\tconst {\n\t\t\thistory: { listen, action, location, push, replace },\n\t\t} = e;\n\t\tconst state$ = new Observable<RouterState>(subscriber =>\n\t\t\tlisten((location, action) =>\n\t\t\t\tsubscriber.next({\n\t\t\t\t\tlocation,\n\t\t\t\t\taction,\n\t\t\t\t}),\n\t\t\t),\n\t\t).pipe(shareReplayWithDefaults());\n\t\treturn () =>\n\t\t\tnew Sink(\n\t\t\t\t{\n\t\t\t\t\tstate: {\n\t\t\t\t\t\tlocation,\n\t\t\t\t\t\taction,\n\t\t\t\t\t},\n\t\t\t\t\tstate$,\n\t\t\t\t\tpush,\n\t\t\t\t\treplace,\n\t\t\t\t},\n\t\t\t\tstate$,\n\t\t\t);\n\t},\n);\n\nexport const parse = <A extends object>(match: Match<A>, path: string): Option<[A, Route]> =>\n\tmatch.parser.run(Route.parse(path));\nexport const href = <A extends object>(match: Match<A>, a: A): string => format(match.formatter, a, true);\nexport type MatchType<M extends Match<any>> = M extends Match<infer A> ? A : never;\nexport const exact = <A extends object>(match: Match<A>): Match<A> => match.then(end);\n","import * as t from 'io-ts';\nimport * as O from 'fp-ts/lib/Option';\n\nexport const REDIRECT_TO_TRADE = 'REDIRECT_TO_TRADE';\nexport const REDIRECT_TO_POSITIONS = 'REDIRECT_TO_POSITIONS';\nexport const REDIRECT_TO_ORDERS = 'REDIRECT_TO_ORDERS';\nexport const REDIRECT_TO_HISTORY = 'REDIRECT_TO_HISTORY';\nexport const REDIRECT_TO_CRM_DEPOSIT = 'REDIRECT_TO_CRM_DEPOSIT';\nexport const REDIRECT_TO_CRM_WITHDRAW = 'REDIRECT_TO_CRM_WITHDRAW';\nexport const REDIRECT_TO_CRM_ACCOUNTS = 'REDIRECT_TO_CRM_ACCOUNTS';\nexport const REDIRECT_TO_CRM_UPLOADDOCS = 'REDIRECT_TO_CRM_UPLOADDOCS';\nexport const REDIRECT_TO_CRM_PERSONAL = 'REDIRECT_TO_CRM_PERSONAL';\nexport const UPGRADE_ACCOUNT = 'UPGRADE_ACCOUNT';\nexport const CLOSE_POPUP = 'CLOSE';\n\ntype RedirectToTrade = {\n\ttype: typeof REDIRECT_TO_TRADE;\n\tpayload: Record<string, unknown> | undefined;\n};\ntype RedirectToTradeWithSymbol = {\n\ttype: typeof REDIRECT_TO_TRADE;\n\tpayload: {\n\t\tsymbol: string;\n\t\taction?: string;\n\t};\n};\ntype RedirectToPositions = {\n\ttype: typeof REDIRECT_TO_POSITIONS;\n};\ntype RedirectToOrders = {\n\ttype: typeof REDIRECT_TO_ORDERS;\n};\ntype RedirectToHistory = {\n\ttype: typeof REDIRECT_TO_HISTORY;\n};\ntype RedirectToCrmDeposit = {\n\ttype: typeof REDIRECT_TO_CRM_DEPOSIT;\n};\ntype RedirectToCrmWithdraw = {\n\ttype: typeof REDIRECT_TO_CRM_WITHDRAW;\n};\ntype RedirectToCrmAccounts = {\n\ttype: typeof REDIRECT_TO_CRM_ACCOUNTS;\n};\ntype RedirectToCrmUploaddocs = {\n\ttype: typeof REDIRECT_TO_CRM_UPLOADDOCS;\n};\ntype RedirectToCrmPersonal = {\n\ttype: typeof REDIRECT_TO_CRM_PERSONAL;\n};\nexport type RedirectToRealAccount = {\n\ttype: typeof UPGRADE_ACCOUNT;\n\tpayload: {\n\t\turl: string;\n\t};\n};\nexport type ClosePopup = {\n\ttype: typeof CLOSE_POPUP;\n};\n\nconst redirectToTradePostMessageTO: t.Tagged<'type', RedirectToTrade, unknown> = t.type({\n\ttype: t.literal(REDIRECT_TO_TRADE),\n\tpayload: t.union([t.UnknownRecord, t.undefined]),\n});\nconst redirectToTradeWithSymbolPostMessageTO: t.Tagged<'type', RedirectToTradeWithSymbol, unknown> = t.type({\n\ttype: t.literal(REDIRECT_TO_TRADE),\n\tpayload: t.union([\n\t\tt.type({\n\t\t\tsymbol: t.string,\n\t\t\taction: t.string,\n\t\t}),\n\t\tt.type({\n\t\t\tsymbol: t.string,\n\t\t}),\n\t]),\n});\nconst redirectToRealAccountPostMessageTO: t.Tagged<'type', RedirectToRealAccount, unknown> = t.type({\n\ttype: t.literal(UPGRADE_ACCOUNT),\n\tpayload: t.type({\n\t\turl: t.string,\n\t}),\n});\nconst redirectToPositionsPostMessageTO: t.Tagged<'type', RedirectToPositions, unknown> = t.type({\n\ttype: t.literal(REDIRECT_TO_POSITIONS),\n});\nconst redirectToOrdersPostMessageTO: t.Tagged<'type', RedirectToOrders, unknown> = t.type({\n\ttype: t.literal(REDIRECT_TO_ORDERS),\n});\nconst redirectToHistoryPostMessageTO: t.Tagged<'type', RedirectToHistory, unknown> = t.type({\n\ttype: t.literal(REDIRECT_TO_HISTORY),\n});\nconst redirectToCrmDepositPostMessageTO: t.Tagged<'type', RedirectToCrmDeposit, unknown> = t.type({\n\ttype: t.literal(REDIRECT_TO_CRM_DEPOSIT),\n});\nconst redirectToCrmWithdrawPostMessageTO: t.Tagged<'type', RedirectToCrmWithdraw, unknown> = t.type({\n\ttype: t.literal(REDIRECT_TO_CRM_WITHDRAW),\n});\nconst redirectToCrmAccountsPostMessageTO: t.Tagged<'type', RedirectToCrmAccounts, unknown> = t.type({\n\ttype: t.literal(REDIRECT_TO_CRM_ACCOUNTS),\n});\nconst redirectToCrmUploaddocsPostMessageTO: t.Tagged<'type', RedirectToCrmUploaddocs, unknown> = t.type({\n\ttype: t.literal(REDIRECT_TO_CRM_UPLOADDOCS),\n});\nconst redirectToCrmPersonalPostMessageTO: t.Tagged<'type', RedirectToCrmPersonal, unknown> = t.type({\n\ttype: t.literal(REDIRECT_TO_CRM_PERSONAL),\n});\nconst closePopupMessageTO: t.Tagged<'type', ClosePopup, unknown> = t.type({\n\ttype: t.literal(CLOSE_POPUP),\n});\n\nexport type PostMessageTO =\n\t| RedirectToTrade\n\t| RedirectToTradeWithSymbol\n\t| RedirectToPositions\n\t| RedirectToOrders\n\t| RedirectToHistory\n\t| RedirectToCrmDeposit\n\t| RedirectToCrmWithdraw\n\t| RedirectToCrmAccounts\n\t| RedirectToCrmUploaddocs\n\t| RedirectToCrmPersonal\n\t| RedirectToRealAccount\n\t| ClosePopup;\n\nexport type LocalRedirectPostMessageTO = Exclude<PostMessageTO, ClosePopup | RedirectToRealAccount>;\n\nexport const postMessagesTO: t.Tagged<'type', PostMessageTO, unknown> = t.taggedUnion('type', [\n\tt.union([redirectToTradePostMessageTO, redirectToTradeWithSymbolPostMessageTO]),\n\tredirectToPositionsPostMessageTO,\n\tredirectToOrdersPostMessageTO,\n\tredirectToHistoryPostMessageTO,\n\tredirectToCrmDepositPostMessageTO,\n\tredirectToCrmWithdrawPostMessageTO,\n\tredirectToCrmAccountsPostMessageTO,\n\tredirectToCrmUploaddocsPostMessageTO,\n\tredirectToCrmPersonalPostMessageTO,\n\tredirectToRealAccountPostMessageTO,\n\tclosePopupMessageTO,\n]);\n\nexport const isRedirectToTradeWithSymbol = (to: PostMessageTO): to is RedirectToTradeWithSymbol =>\n\tto.type === REDIRECT_TO_TRADE && O.isSome(O.fromNullable(to.payload && to.payload.symbol));\n\nexport const isRedirectToRealAccount = (to: PostMessageTO): to is RedirectToRealAccount => to.type === UPGRADE_ACCOUNT;\n\nexport const isClosePopup = (to: PostMessageTO): to is ClosePopup => to.type === CLOSE_POPUP;\n\nexport const isRedirectToCRMDeposit = (to: PostMessageTO): to is RedirectToCrmDeposit =>\n\tto.type === REDIRECT_TO_CRM_DEPOSIT;\n","import { end, int, lit, str, Match } from 'fp-ts-routing';\nimport {\n\tREDIRECT_TO_TRADE,\n\tREDIRECT_TO_POSITIONS,\n\tREDIRECT_TO_ORDERS,\n\tREDIRECT_TO_HISTORY,\n\tREDIRECT_TO_CRM_DEPOSIT,\n\tREDIRECT_TO_CRM_WITHDRAW,\n\tREDIRECT_TO_CRM_ACCOUNTS,\n\tREDIRECT_TO_CRM_UPLOADDOCS,\n\tREDIRECT_TO_CRM_PERSONAL,\n\tLocalRedirectPostMessageTO,\n} from '../api/post-message/post-message.to';\n\nconst root = end;\n\n//api\nconst api = lit('api');\nconst auth = api.then(lit('auth'));\nconst relogin = auth.then(lit('relogin'));\nconst logout = auth.then(lit('logout'));\nconst redirect = logout.then(lit('redirect'));\nconst avacrm = api.then(lit('avacrm'));\nconst createDemoAccount = avacrm.then(lit('create_demo_account'));\n//trade\nconst trade = lit('trade');\nconst category = trade.then(str('categoryId'));\nconst tradeSymbol = trade.then(lit('symbol'));\nconst tradeSymbolName = tradeSymbol.then(str('symbol'));\nconst tradeSymbolAction = tradeSymbolName.then(str('action'));\n\nconst categorySymbol = category.then(str('symbol'));\nconst categorySymbolAction = categorySymbol.then(str('action'));\nconst info = categorySymbol.then(lit('info'));\n\n// menu links\nconst crm = lit('crm');\nconst crm_deposit = crm.then(lit('deposit'));\nconst crm_withdraw = crm.then(lit('withdraw'));\nconst crm_accounts = crm.then(lit('accounts'));\nconst crm_uploaddocs = crm.then(lit('uploaddocs'));\nconst crm_personal = crm.then(lit('personal'));\nconst crm_calculator = crm.then(lit('calculator'));\nconst crm_become_trader = crm.then(lit('become_trader'));\n\n//positions\nconst positions = lit('positions');\nconst position = positions.then(str('positionId'));\nconst positionEdit = position.then(lit('edit'));\nconst positionClose = position.then(lit('close'));\nconst positionInfo = position.then(lit('info'));\nconst editingPositionTakeProfitStopLossKind = positionEdit.then(str('profitLossKind'));\n\n//orders\nconst orders = lit('orders');\nconst order = orders.then(int('orderId'));\nconst orderInfo = order.then(lit('info'));\nconst orderEdit = order.then(lit('edit'));\nconst editingOrderTakeProfitStopLossKind = orderEdit.then(str('profitLossKind'));\n\n//history\nconst history = lit('history');\nconst historyOrder = history.then(int('historyOrderId'));\nconst historyInfo = historyOrder.then(lit('info'));\n\n//chat\nconst chat = lit('chat');\n\nexport const AVATRADE_CALC_URL = '//www.avatrade.com/trading-info/trading-calculator';\nexport const POPUP_CONTENT_URL = '/api/iframe/welcome';\n\nexport const routes = {\n\troot,\n\tapi: {\n\t\troot: api,\n\t\tavarcm: {\n\t\t\troot: avacrm,\n\t\t\tcreate_demo_account: createDemoAccount,\n\t\t},\n\t\tauth: {\n\t\t\troot: auth,\n\t\t\tlogout: {\n\t\t\t\troot: logout,\n\t\t\t\tredirect,\n\t\t\t},\n\t\t\trelogin,\n\t\t},\n\t},\n\ttrade: {\n\t\troot: trade,\n\t\tcategory: {\n\t\t\troot: category,\n\t\t\tsymbol: {\n\t\t\t\troot: categorySymbol,\n\t\t\t\taction: {\n\t\t\t\t\troot: categorySymbolAction,\n\t\t\t\t},\n\t\t\t\tinfo: {\n\t\t\t\t\troot: info,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tsymbol: {\n\t\t\troot: tradeSymbolName,\n\t\t\tactionId: {\n\t\t\t\troot: tradeSymbolAction,\n\t\t\t},\n\t\t},\n\t},\n\tpositions: {\n\t\troot: positions,\n\t\tposition: {\n\t\t\troot: position,\n\t\t\tedit: {\n\t\t\t\troot: positionEdit,\n\t\t\t\tprofitLossKind: {\n\t\t\t\t\troot: editingPositionTakeProfitStopLossKind,\n\t\t\t\t},\n\t\t\t},\n\t\t\tclose: {\n\t\t\t\troot: positionClose,\n\t\t\t},\n\t\t\tinfo: {\n\t\t\t\troot: positionInfo,\n\t\t\t},\n\t\t},\n\t},\n\torders: {\n\t\troot: orders,\n\t\torder: {\n\t\t\troot: order,\n\t\t\tinfo: {\n\t\t\t\troot: orderInfo,\n\t\t\t},\n\t\t\tedit: {\n\t\t\t\tprofitLossKind: {\n\t\t\t\t\troot: editingOrderTakeProfitStopLossKind,\n\t\t\t\t},\n\t\t\t\troot: orderEdit,\n\t\t\t},\n\t\t},\n\t},\n\thistory: {\n\t\troot: history,\n\t\torder: {\n\t\t\troot: historyOrder,\n\t\t\tinfo: {\n\t\t\t\troot: historyInfo,\n\t\t\t},\n\t\t},\n\t},\n\tchat: {\n\t\troot: chat,\n\t},\n\tcrm: {\n\t\troot: crm,\n\t\taccounts: {\n\t\t\troot: crm_accounts,\n\t\t},\n\t\tdeposit: {\n\t\t\troot: crm_deposit,\n\t\t},\n\t\twithdraw: {\n\t\t\troot: crm_withdraw,\n\t\t},\n\t\tuploaddocs: {\n\t\t\troot: crm_uploaddocs,\n\t\t},\n\t\tpersonal: {\n\t\t\troot: crm_personal,\n\t\t},\n\t\tcalculator: {\n\t\t\troot: crm_calculator,\n\t\t},\n\t\tbecomeTrader: {\n\t\t\troot: crm_become_trader,\n\t\t},\n\t},\n};\n\nexport const getPath = (message: LocalRedirectPostMessageTO): Match<{}> => {\n\tswitch (message.type) {\n\t\tcase REDIRECT_TO_TRADE: {\n\t\t\treturn routes.trade.root;\n\t\t}\n\t\tcase REDIRECT_TO_POSITIONS: {\n\t\t\treturn routes.positions.root;\n\t\t}\n\t\tcase REDIRECT_TO_ORDERS: {\n\t\t\treturn routes.orders.root;\n\t\t}\n\t\tcase REDIRECT_TO_HISTORY: {\n\t\t\treturn routes.history.root;\n\t\t}\n\t\tcase REDIRECT_TO_CRM_DEPOSIT: {\n\t\t\treturn routes.crm.deposit.root;\n\t\t}\n\t\tcase REDIRECT_TO_CRM_WITHDRAW: {\n\t\t\treturn routes.crm.withdraw.root;\n\t\t}\n\t\tcase REDIRECT_TO_CRM_ACCOUNTS: {\n\t\t\treturn routes.crm.accounts.root;\n\t\t}\n\t\tcase REDIRECT_TO_CRM_UPLOADDOCS: {\n\t\t\treturn routes.crm.uploaddocs.root;\n\t\t}\n\t\tcase REDIRECT_TO_CRM_PERSONAL: {\n\t\t\treturn routes.crm.personal.root;\n\t\t}\n\t}\n};\n","export const isProductionBuild = process.env.NODE_ENV && process.env.NODE_ENV.toLowerCase() === 'production';\nconsole.log(process.env.NODE_ENV);\n\nexport const isMobileBuild =\n\tprocess.env.REACT_APP_IS_MOBILE && process.env.REACT_APP_IS_MOBILE.toLowerCase() === 'true';\n","import { href } from './router.utils';\nimport { routes } from '../ui-common/routes';\nimport { isProductionBuild } from './node-env.utils';\nimport { empty } from 'fp-ts/lib/Record';\n\nexport const redirectToRelogin = () => {\n\tconst reloginHref = isProductionBuild ? href(routes.api.auth.relogin, empty) : '/login.html';\n\twindow.location.href = reloginHref;\n};\n","import { tap } from 'rxjs/operators';\nimport { lookup } from 'fp-ts/lib/Record';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { AvasystemsettingsinfoController } from '../../api/generated/swagger/controllers/AvasystemsettingsinfoController';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { asks } from '@devexperts/rx-utils/dist/context.utils';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { loadScript } from '../../utils/load-script.utils';\nimport { ServerError } from '../../utils/server-error.utils';\nimport { redirectToRelogin } from '../../utils/route.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { shareReplayWithDefaults } from '../../utils/rxjs/shareReplayWithDefaults';\n\nexport type EnvContext = {\n\tavasystemsettingsinfoController: AvasystemsettingsinfoController;\n};\n\nexport type EnvViewModel = {\n\tinitialize$: LiveData<ServerError, Option<string>>;\n\tloadedScripts$: LiveData<Error, Event[]>;\n};\n\ntype InitializeData = LiveData<ServerError, { system: string }>;\n\nexport type CreateEnvViewModel = () => EnvViewModel;\n\nexport const createEnvViewModel = asks(\n\t(e: EnvContext): CreateEnvViewModel => {\n\t\tconst { avasystemsettingsinfoController } = e;\n\t\tconst settings$ = avasystemsettingsinfoController.getAppSettings() as InitializeData;\n\n\t\tconst initialize$ = settings$.pipe(\n\t\t\tmapRD(data => lookup('system', data)),\n\t\t\ttap(dataRD => {\n\t\t\t\tif (dataRD.isFailure()) {\n\t\t\t\t\tconst error = dataRD.error;\n\t\t\t\t\tif (ServerError.is(error) && error.status === 401) {\n\t\t\t\t\t\tredirectToRelogin();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst loadedScripts$: LiveData<Error, Event[]> = initialize$.pipe(\n\t\t\tswitchMapRD(system => {\n\t\t\t\tconst id = pipe(\n\t\t\t\t\tsystem,\n\t\t\t\t\tO.exists(system => ['live', 'demo'].includes(system)),\n\t\t\t\t)\n\t\t\t\t\t? process.env.REACT_APP_DY_ID_PROD\n\t\t\t\t\t: process.env.REACT_APP_DY_ID_QA;\n\t\t\t\treturn combineLatestRD(\n\t\t\t\t\tloadScript(`//cdn.dynamicyield.com/api/${id}/api_dynamic.js`),\n\t\t\t\t\tloadScript(`//cdn.dynamicyield.com/api/${id}/api_static.js`),\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\n\t\treturn () => ({ initialize$, loadedScripts$ });\n\t},\n);\n","import * as React from 'react';\nimport * as css from './theme/preloader.module.css';\n\nexport const Preloader: React.SFC = () => (\n\t<div className={css.container}>\n\t\t<div className={css.loader}>\n\t\t\t<div />\n\t\t\t<div />\n\t\t</div>\n\t</div>\n);\n","import * as React from 'react';\n\nimport { getRenderRemoteData } from '@devexperts/react-kit/dist/components/render-remote-data/get-render-remote-data';\nimport { Preloader } from '../../ui-desktop/ui-kit/components/preloader/preloader.component';\n\nexport const RemoteDataState = getRenderRemoteData<unknown>({\n\tDataStateNoData: () => <div>No data</div>,\n\tDataStateFailure: () => <div>Error loading data</div>,\n\tDataStatePending: () => <Preloader />,\n});\n","import { ComponentClass, ComponentType, createElement, PureComponent } from 'react';\nimport { Subscription } from 'rxjs';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { Context } from '@devexperts/rx-utils/dist/context.utils';\nimport { Endomorphism, identity } from 'fp-ts/lib/function';\nimport { createSelector } from 'reselect';\n\nexport const doOnMount = <P>(Target: ComponentType<P>, thunk: (props: P) => void): ComponentType<P> =>\n\tclass DoOnMount extends PureComponent<P> {\n\t\tstatic displayName = `DoOnMount(${Target.displayName || Target.name})`;\n\n\t\tcomponentDidMount(): void {\n\t\t\tthunk(this.props);\n\t\t}\n\n\t\trender() {\n\t\t\treturn createElement(Target, this.props);\n\t\t}\n\t};\n\nexport const runOnMount = <E, P>(\n\tTarget: Context<E, ComponentType<P>>,\n\tselector: (p: Endomorphism<P>) => (props: P) => E | Sink<E>,\n): ComponentClass<P> =>\n\tclass Wrapper extends PureComponent<P> {\n\t\tstatic displayName = `RunOnMount`;\n\n\t\tprivate subscription: Subscription | undefined;\n\t\tprivate effectSubscription: Subscription | undefined;\n\t\tprivate p: Endomorphism<P> = identity;\n\t\tprivate provide = selector(this.p);\n\t\tprivate e = createSelector(\n\t\t\tthis.p,\n\t\t\tthis.provide,\n\t\t);\n\t\tprivate result = createSelector(\n\t\t\tthis.e,\n\t\t\te => {\n\t\t\t\tconst result = Target.run(e instanceof Sink ? e.value : e);\n\t\t\t\tthis.disposeSubscription();\n\t\t\t\tthis.subscription = result.sink$.subscribe();\n\t\t\t\tthis.disposeEffectSubscription();\n\t\t\t\tif (e instanceof Sink) {\n\t\t\t\t\tthis.effectSubscription = e.sink$.subscribe();\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t},\n\t\t);\n\n\t\tcomponentWillUnmount() {\n\t\t\tthis.disposeSubscription();\n\t\t\tthis.disposeEffectSubscription();\n\t\t}\n\n\t\trender() {\n\t\t\treturn createElement(this.result(this.props).value, this.props);\n\t\t}\n\n\t\tprivate disposeSubscription() {\n\t\t\tif (this.subscription) {\n\t\t\t\tthis.subscription.unsubscribe();\n\t\t\t}\n\t\t}\n\n\t\tprivate disposeEffectSubscription() {\n\t\t\tif (this.effectSubscription) {\n\t\t\t\tthis.effectSubscription.unsubscribe();\n\t\t\t}\n\t\t}\n\t};\n","import * as t from 'io-ts';\nimport { createOptionFromNullable, DateFromISOString, DateFromUnixTime } from 'io-ts-types';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport * as E from 'fp-ts/lib/Either';\nimport { Any, Type } from 'io-ts';\nimport { fromArray, NonEmptyArray } from 'fp-ts/lib/NonEmptyArray';\n\nexport const stringOption = createOptionFromNullable(t.string);\nexport const booleanOption = createOptionFromNullable(t.boolean);\nexport const numberOption = createOptionFromNullable(t.number);\nexport const dateOptionFromString = createOptionFromNullable(DateFromISOString);\nexport const dateOptionFromUnixTime = createOptionFromNullable(DateFromUnixTime);\n\nconst NAN = 'NaN';\n\nexport const doubleOption = new (class DoubleOptionType extends t.Type<\n\tOption<number>,\n\tnumber | undefined | null | typeof NAN\n> {\n\treadonly _tag: 'DoubleOptionType' = 'DoubleOptionType';\n\tprivate v = createOptionFromNullable(t.union([t.literal(NAN), t.number]));\n\n\tconstructor() {\n\t\tsuper(\n\t\t\t'DoubleOption',\n\t\t\t(m): m is Option<number> => this.v.is(m),\n\t\t\t(m, c) => {\n\t\t\t\tconst validated = this.v.validate(m, c);\n\t\t\t\tif (E.isLeft(validated) || O.isNone(validated.value)) {\n\t\t\t\t\treturn validated as any;\n\t\t\t\t}\n\t\t\t\tif (validated.value.value === NAN) {\n\t\t\t\t\treturn t.success(O.none);\n\t\t\t\t}\n\t\t\t\treturn numberOption.validate(validated.value.value, c);\n\t\t\t},\n\t\t\ta => (O.isNone(a) ? NAN : a.value),\n\t\t);\n\t}\n})();\n\nclass NEAType<RT extends Any, A = any, O = A, I = t.mixed> extends Type<A, O, I> {\n\treadonly _tag: 'NEAType' = 'NEAType';\n\tconstructor(\n\t\tname: string,\n\t\tis: NEAType<RT, A, O, I>['is'],\n\t\tvalidate: NEAType<RT, A, O, I>['validate'],\n\t\tencode: NEAType<RT, A, O, I>['encode'],\n\t\treadonly type: RT,\n\t) {\n\t\tsuper(name, is, validate, encode);\n\t}\n}\nexport const nea = <RT extends t.Mixed>(\n\ttype: RT,\n\tname: string = `NEA<${type.name}>`,\n): NEAType<RT, NonEmptyArray<t.TypeOf<RT>>, Array<t.OutputOf<RT>>, t.mixed> => {\n\tconst v = t.array(type);\n\treturn new NEAType(\n\t\tname,\n\t\t(m): m is NonEmptyArray<t.TypeOf<RT>> => v.is(m) && m.length > 0,\n\t\t(m, c) => {\n\t\t\tconst validatedArray = v.validate(m, c);\n\t\t\tif (E.isLeft(validatedArray)) {\n\t\t\t\treturn validatedArray as any;\n\t\t\t}\n\t\t\tconst result = fromArray(validatedArray.value);\n\t\t\treturn O.isNone(result) ? t.failure(m, c) : t.success(result.value);\n\t\t},\n\t\tnea => v.encode(nea.toArray()),\n\t\ttype,\n\t);\n};\n","import * as t from 'io-ts';\nimport { stringOption } from '../../../utils/io-ts.utils';\nimport { Option } from 'fp-ts/lib/Option';\n\nexport const QUOTE_SUBSCRIPTION_INITIALIZED = 'QUOTE_SUBSCRIPTION_INITIALIZED';\n\nexport type QuoteSubscriptionInitializedMessageTO = {\n\ttype: typeof QUOTE_SUBSCRIPTION_INITIALIZED;\n\taccountId: Option<string>;\n\tbody: {\n\t\tsuccess: boolean;\n\t};\n};\nexport const quoteSubscriptionInitializedMessageTO: t.Tagged<\n\t'type',\n\tQuoteSubscriptionInitializedMessageTO,\n\tunknown\n> = t.type({\n\ttype: t.literal(QUOTE_SUBSCRIPTION_INITIALIZED),\n\taccountId: stringOption,\n\tbody: t.type({\n\t\tsuccess: t.boolean,\n\t}),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { boolean, number, string, type } from 'io-ts';\nimport { createOptionFromNullable, DateFromISOString } from 'io-ts-types';\n\nexport type QuoteTO = {\n\tstale: boolean;\n\tquantity: Option<number>;\n\taskDirection: number;\n\tbidDirection: number;\n\tmarkDirection: number;\n\tsymbol: string;\n\task: Option<number>;\n\tbid: Option<number>;\n\taskSize: number;\n\tbidSize: number;\n\tmarkPrice: Option<number>;\n\tdate: Date;\n};\nexport const QuoteTOIO = type({\n\tstale: boolean,\n\tquantity: createOptionFromNullable(number),\n\taskDirection: number,\n\tbidDirection: number,\n\tmarkDirection: number,\n\tsymbol: string,\n\task: createOptionFromNullable(number),\n\tbid: createOptionFromNullable(number),\n\taskSize: number,\n\tbidSize: number,\n\tmarkPrice: createOptionFromNullable(number),\n\tdate: DateFromISOString,\n});\n","import * as t from 'io-ts';\nimport { nea } from '../../../utils/io-ts.utils';\nimport { NonEmptyArray } from 'fp-ts/lib/NonEmptyArray';\nimport { QuoteTO, QuoteTOIO } from '../../generated/swagger/definitions/QuoteTO';\n\nexport const QUOTE = 'QUOTE';\n\nexport type QuoteMessageTO = {\n\ttype: typeof QUOTE;\n\tbody: NonEmptyArray<QuoteTO>;\n};\n\nexport const quoteMessageTO: t.Tagged<'type', QuoteMessageTO, unknown> = t.type({\n\ttype: t.literal(QUOTE),\n\tbody: nea(QuoteTOIO),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { string, number, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type SummaryTO = {\n\tsymbol: string;\n\tquantity: Option<number>;\n\tdayOpen: Option<number>;\n\tdayHigh: Option<number>;\n\tdayLow: Option<number>;\n\tprevDayClose: Option<number>;\n\tdayClosePrice: Option<number>;\n};\nexport const SummaryTOIO = type({\n\tsymbol: string,\n\tquantity: createOptionFromNullable(number),\n\tdayOpen: createOptionFromNullable(number),\n\tdayHigh: createOptionFromNullable(number),\n\tdayLow: createOptionFromNullable(number),\n\tprevDayClose: createOptionFromNullable(number),\n\tdayClosePrice: createOptionFromNullable(number),\n});\n","import { NonEmptyArray } from 'fp-ts/lib/NonEmptyArray';\nimport * as t from 'io-ts';\nimport { nea } from '../../../utils/io-ts.utils';\nimport { SummaryTO, SummaryTOIO } from '../../generated/swagger/definitions/SummaryTO';\n\nexport const SUMMARY = 'SUMMARY';\n\nexport type SummaryMessageTO = {\n\ttype: typeof SUMMARY;\n\tbody: NonEmptyArray<SummaryTO>;\n};\n\nexport const summaryMessageTO: t.Tagged<'type', SummaryMessageTO, unknown> = t.type({\n\ttype: t.literal(SUMMARY),\n\tbody: nea(SummaryTOIO),\n});\n","import { Type, success, identity, Errors, Validation, Context, ValidationError } from 'io-ts';\n\nexport const unknownType = new (class UnknownType extends Type<unknown> {\n\treadonly _tag: 'UnknownType' = 'UnknownType';\n\n\tconstructor() {\n\t\tsuper('unknownType', (_: unknown): _ is unknown => true, success, identity);\n\t}\n})();\n\nfunction getMessage(e: ValidationError) {\n\treturn e.message !== undefined\n\t\t? e.message\n\t\t: createMessage(e.context) + '\\n in context: \\n' + getContextPath(e.context);\n}\n\nfunction createMessage(context: Context) {\n\treturn (\n\t\t'\\n Received: \\n  ' +\n\t\tJSON.stringify(context[context.length - 1].actual) +\n\t\t'\\n expected: \\n  ' +\n\t\tcontext[context.length - 1].type.name +\n\t\t'\\n in field \\n  ' +\n\t\tcontext[context.length - 1].key\n\t);\n}\n\nfunction getContextPath(context: Context) {\n\treturn context\n\t\t.map(function(cEntry, index) {\n\t\t\tconst padding = new Array(index * 2 + 2).fill(' ').join('');\n\t\t\treturn (\n\t\t\t\tpadding + cEntry.key + (index > 0 ? ': ' : '') + cEntry.type.name.replace(/([,{])/g, '$1 \\n' + padding)\n\t\t\t);\n\t\t})\n\t\t.join(' -> \\n');\n}\n\nfunction fail(es: Errors) {\n\treturn es.map(getMessage);\n}\n\nfunction ok() {\n\treturn ['No errors!'];\n}\n\nexport const report = function(validation: Validation<unknown>) {\n\treturn validation.fold(fail, ok);\n};\n","import { unknownType } from '../utils/utils';\nimport { Option } from 'fp-ts/lib/Option';\nimport { string, number, dictionary, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type AccountMetricsTO = {\n\taccountId: string;\n\tavailableFunds: Option<number>;\n\tbalance: Option<number>;\n\tequity: Option<number>;\n\tmargin: Option<number>;\n\triskLevel: Option<number>;\n\tprofitLoss: Option<number>;\n\tallMetrics: { [key: string]: unknown };\n};\nexport const AccountMetricsTOIO = type({\n\taccountId: string,\n\tavailableFunds: createOptionFromNullable(number),\n\tbalance: createOptionFromNullable(number),\n\tequity: createOptionFromNullable(number),\n\tmargin: createOptionFromNullable(number),\n\triskLevel: createOptionFromNullable(number),\n\tprofitLoss: createOptionFromNullable(number),\n\tallMetrics: dictionary(string, unknownType),\n});\n","import * as t from 'io-ts';\nimport { AccountMetricsTO, AccountMetricsTOIO } from '../../generated/swagger/definitions/AccountMetricsTO';\n\nexport const ACCOUNT_METRICS = 'ACCOUNT_METRICS';\n\nexport type AccountMetricsMessageTO = {\n\ttype: typeof ACCOUNT_METRICS;\n\tbody: AccountMetricsTO;\n};\n\nexport const accountMetricsMessageTO: t.Tagged<'type', AccountMetricsMessageTO, unknown> = t.type({\n\ttype: t.literal(ACCOUNT_METRICS),\n\tbody: AccountMetricsTOIO,\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { number, array, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type StudyCandleTO = { values: Option<Array<number>> };\nexport const StudyCandleTOIO = type({ values: createOptionFromNullable(array(number)) });\n","import { StudyCandleTO, StudyCandleTOIO } from '../definitions/StudyCandleTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { number, boolean, type } from 'io-ts';\nimport { DateFromISOString, createOptionFromNullable } from 'io-ts-types';\n\nexport type CandleTO = {\n\ttimestamp: Date;\n\topen: Option<number>;\n\thigh: Option<number>;\n\tlow: Option<number>;\n\tclose: Option<number>;\n\tvolume: Option<number>;\n\texpansion: Option<boolean>;\n\tvisible: boolean;\n\tstudyValues: Option<StudyCandleTO>;\n\ttime: Option<number>;\n};\nexport const CandleTOIO = type({\n\ttimestamp: DateFromISOString,\n\topen: createOptionFromNullable(number),\n\thigh: createOptionFromNullable(number),\n\tlow: createOptionFromNullable(number),\n\tclose: createOptionFromNullable(number),\n\tvolume: createOptionFromNullable(number),\n\texpansion: createOptionFromNullable(boolean),\n\tvisible: boolean,\n\tstudyValues: createOptionFromNullable(StudyCandleTOIO),\n\ttime: createOptionFromNullable(number),\n});\n","import { CandleTO, CandleTOIO } from '../definitions/CandleTO';\nimport { string, boolean, array, number, type } from 'io-ts';\n\nexport type ChartResponseTO = { subtopic: string; historyData: boolean; data: Array<CandleTO>; requestID: number };\nexport const ChartResponseTOIO = type({\n\tsubtopic: string,\n\thistoryData: boolean,\n\tdata: array(CandleTOIO),\n\trequestID: number,\n});\n","import * as t from 'io-ts';\nimport { ChartResponseTOIO, ChartResponseTO } from '../../generated/swagger/definitions/ChartResponseTO';\n\nexport const CHART = 'chartFeedSubtopic';\n\nexport type ChartMessageTO = {\n\ttype: typeof CHART;\n\tbody: ChartResponseTO;\n};\n\nexport const chartMessageTO: t.Tagged<'type', ChartMessageTO, unknown> = t.type({\n\ttype: t.literal(CHART),\n\tbody: ChartResponseTOIO,\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { number, array, boolean, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type PriceIncrementsTO = {\n\tpriceIncrements: Option<Array<number>>;\n\tpricePrecisions: Option<Array<number>>;\n\tbondFraction: Option<boolean>;\n};\nexport const PriceIncrementsTOIO = type({\n\tpriceIncrements: createOptionFromNullable(array(number)),\n\tpricePrecisions: createOptionFromNullable(array(number)),\n\tbondFraction: createOptionFromNullable(boolean),\n});\n","import { PriceIncrementsTO, PriceIncrementsTOIO } from '../definitions/PriceIncrementsTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { number, string, union, literal, boolean, type, recursion } from 'io-ts';\nimport { createOptionFromNullable, DateFromISOString } from 'io-ts-types';\n\nexport type InstrumentTO = {\n\tid: number;\n\tsymbol: string;\n\tdescription: Option<string>;\n\ttype:\n\t\t| 'CURRENCY'\n\t\t| 'STOCK'\n\t\t| 'FOREX'\n\t\t| 'FUTURES'\n\t\t| 'PRODUCT'\n\t\t| 'INDEX'\n\t\t| 'CFD'\n\t\t| 'OPTION'\n\t\t| 'SPREAD_BET'\n\t\t| 'CFD_FUTURES'\n\t\t| 'SB_FUTURES'\n\t\t| 'FX_OPTION'\n\t\t| 'FX_FORWARD'\n\t\t| 'CFD_OPTION'\n\t\t| 'SB_OPTION'\n\t\t| 'CFD_STOCK'\n\t\t| 'SB_STOCK'\n\t\t| 'CFD_FOREX'\n\t\t| 'SB_FOREX'\n\t\t| 'SPREAD'\n\t\t| 'WARRANT'\n\t\t| 'ETF';\n\tcurrency: Option<string>;\n\tcurrencyPrecision: number;\n\tprecision: number;\n\tpipsSize: number;\n\tquantityIncrement: number;\n\tquantityPrecision: Option<number>;\n\tpriceIncrement: number;\n\tversion: number;\n\tpriceIncrementsTO: PriceIncrementsTO;\n\tlotSize: number;\n\tbaseCurrency: Option<string>;\n\tlotName: Option<string>;\n\tmultiplier: number;\n\topen: boolean;\n\texpiration: Option<Date>;\n\tfirstNoticeDate: Option<Date>;\n\tinitialMargin: Option<number>;\n\tmaintenanceMargin: Option<number>;\n\tlastTradeDate: Option<Date>;\n\tunderlying: Option<InstrumentTO>;\n\tflex: Option<boolean>;\n\tmmy: Option<string>;\n\tunitName: Option<string>;\n};\nexport const InstrumentTOIO = recursion<InstrumentTO, unknown>('InstrumentTOIO', InstrumentTOIO =>\n\ttype({\n\t\tid: number,\n\t\tsymbol: string,\n\t\tdescription: createOptionFromNullable(string),\n\t\ttype: union([\n\t\t\tliteral('CURRENCY'),\n\t\t\tliteral('STOCK'),\n\t\t\tliteral('FOREX'),\n\t\t\tliteral('FUTURES'),\n\t\t\tliteral('PRODUCT'),\n\t\t\tliteral('INDEX'),\n\t\t\tliteral('CFD'),\n\t\t\tliteral('OPTION'),\n\t\t\tliteral('SPREAD_BET'),\n\t\t\tliteral('CFD_FUTURES'),\n\t\t\tliteral('SB_FUTURES'),\n\t\t\tliteral('FX_OPTION'),\n\t\t\tliteral('FX_FORWARD'),\n\t\t\tliteral('CFD_OPTION'),\n\t\t\tliteral('SB_OPTION'),\n\t\t\tliteral('CFD_STOCK'),\n\t\t\tliteral('SB_STOCK'),\n\t\t\tliteral('CFD_FOREX'),\n\t\t\tliteral('SB_FOREX'),\n\t\t\tliteral('SPREAD'),\n\t\t\tliteral('WARRANT'),\n\t\t\tliteral('ETF'),\n\t\t]),\n\t\tcurrency: createOptionFromNullable(string),\n\t\tcurrencyPrecision: number,\n\t\tprecision: number,\n\t\tpipsSize: number,\n\t\tquantityIncrement: number,\n\t\tquantityPrecision: createOptionFromNullable(number),\n\t\tpriceIncrement: number,\n\t\tversion: number,\n\t\tpriceIncrementsTO: PriceIncrementsTOIO,\n\t\tlotSize: number,\n\t\tbaseCurrency: createOptionFromNullable(string),\n\t\tlotName: createOptionFromNullable(string),\n\t\tmultiplier: number,\n\t\topen: boolean,\n\t\texpiration: createOptionFromNullable(DateFromISOString),\n\t\tfirstNoticeDate: createOptionFromNullable(DateFromISOString),\n\t\tinitialMargin: createOptionFromNullable(number),\n\t\tmaintenanceMargin: createOptionFromNullable(number),\n\t\tlastTradeDate: createOptionFromNullable(DateFromISOString),\n\t\tunderlying: createOptionFromNullable(InstrumentTOIO),\n\t\tflex: createOptionFromNullable(boolean),\n\t\tmmy: createOptionFromNullable(string),\n\t\tunitName: createOptionFromNullable(string),\n\t}),\n);\n","import { InstrumentTO, InstrumentTOIO } from '../../generated/swagger/definitions/InstrumentTO';\nimport { literal, Tagged, type } from 'io-ts';\nimport { nea } from '../../../utils/io-ts.utils';\nimport { NonEmptyArray } from 'fp-ts/lib/NonEmptyArray';\n\nexport const INSTRUMENTS = 'INSTRUMENTS';\n\nexport type InstrumentMessageTO = {\n\ttype: typeof INSTRUMENTS;\n\tbody: NonEmptyArray<InstrumentTO>;\n};\n\nexport const instrumentMessageTO: Tagged<'type', InstrumentMessageTO, unknown> = type({\n\ttype: literal(INSTRUMENTS),\n\tbody: nea(InstrumentTOIO),\n});\n","import { array, boolean, literal, string, Tagged, type } from 'io-ts';\n\nexport const ACCOUNTS = 'ACCOUNTS';\n\nexport type AccountTO = {\n\tid: string;\n\tbaseCurrency: string;\n\tpaperMoney: boolean;\n};\n\nexport type AccountsTO = {\n\tcurrentAccount: AccountTO;\n\tavailableAccounts: AccountTO[];\n};\n\nexport type AccountsMessageTO = {\n\ttype: typeof ACCOUNTS;\n\tbody: AccountsTO;\n};\n\nexport const accountsMessageTO: Tagged<'type', AccountsMessageTO, unknown> = type({\n\ttype: literal(ACCOUNTS),\n\tbody: type({\n\t\tcurrentAccount: type({\n\t\t\tid: string,\n\t\t\tbaseCurrency: string,\n\t\t\tpaperMoney: boolean,\n\t\t}),\n\t\tavailableAccounts: array(\n\t\t\ttype({\n\t\t\t\tid: string,\n\t\t\t\tbaseCurrency: string,\n\t\t\t\tpaperMoney: boolean,\n\t\t\t}),\n\t\t),\n\t}),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { number, string, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type PositionKeyTO = { instrumentId: number; positionCode: Option<string> };\nexport const PositionKeyTOIO = type({ instrumentId: number, positionCode: createOptionFromNullable(string) });\n","import { Option } from 'fp-ts/lib/Option';\nimport { string, number, boolean, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type ProtectionOrderTO = {\n\torderType: string;\n\tfixedPrice: Option<number>;\n\tfixedOffset: Option<number>;\n\tpriceFixed: boolean;\n\trefOrderChainId: Option<string>;\n\trequestId: Option<string>;\n};\nexport const ProtectionOrderTOIO = type({\n\torderType: string,\n\tfixedPrice: createOptionFromNullable(number),\n\tfixedOffset: createOptionFromNullable(number),\n\tpriceFixed: boolean,\n\trefOrderChainId: createOptionFromNullable(string),\n\trequestId: createOptionFromNullable(string),\n});\n","import { PositionKeyTO, PositionKeyTOIO } from '../definitions/PositionKeyTO';\nimport { ProtectionOrderTO, ProtectionOrderTOIO } from '../definitions/ProtectionOrderTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { string, number, type } from 'io-ts';\nimport { DateFromISOString, createOptionFromNullable } from 'io-ts-types';\n\nexport type PositionTO = {\n\tuid: string;\n\taccountId: string;\n\tpositionKey: PositionKeyTO;\n\tquantity: number;\n\tcost: number;\n\tcostBasis: number;\n\ttime: Date;\n\tmodifiedTime: Option<Date>;\n\tuserLogin: Option<string>;\n\ttakeProfit: Option<ProtectionOrderTO>;\n\tstopLoss: Option<ProtectionOrderTO>;\n};\nexport const PositionTOIO = type({\n\tuid: string,\n\taccountId: string,\n\tpositionKey: PositionKeyTOIO,\n\tquantity: number,\n\tcost: number,\n\tcostBasis: number,\n\ttime: DateFromISOString,\n\tmodifiedTime: createOptionFromNullable(DateFromISOString),\n\tuserLogin: createOptionFromNullable(string),\n\ttakeProfit: createOptionFromNullable(ProtectionOrderTOIO),\n\tstopLoss: createOptionFromNullable(ProtectionOrderTOIO),\n});\n","import { PositionTO, PositionTOIO } from '../../generated/swagger/definitions/PositionTO';\nimport { array, literal, type } from 'io-ts';\n\nexport const POSITIONS = 'POSITIONS';\n\nexport type PositionMessageTO = {\n\ttype: typeof POSITIONS;\n\tbody: PositionTO[];\n};\n\nexport const positionMessageTOIO = type({\n\ttype: literal(POSITIONS),\n\tbody: array(PositionTOIO),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { string, number, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type FxPositionMetricsTO = {\n\tuid: string;\n\taccountId: string;\n\tmargin: Option<number>;\n\tplOpen: Option<number>;\n\tswap: Option<number>;\n\tcommission: Option<number>;\n};\nexport const FxPositionMetricsTOIO = type({\n\tuid: string,\n\taccountId: string,\n\tmargin: createOptionFromNullable(number),\n\tplOpen: createOptionFromNullable(number),\n\tswap: createOptionFromNullable(number),\n\tcommission: createOptionFromNullable(number),\n});\n","import { FxPositionMetricsTO, FxPositionMetricsTOIO } from '../../generated/swagger/definitions/FxPositionMetricsTO';\nimport { array, literal, type } from 'io-ts';\n\nexport const POSITION_METRICS = 'POSITION_METRICS';\n\nexport type FxPositionMetricsMessageTo = {\n\ttype: typeof POSITION_METRICS;\n\tbody: FxPositionMetricsTO[];\n};\n\nexport const positionMetricsMessageTOIO = type({\n\ttype: literal(POSITION_METRICS),\n\tbody: array(FxPositionMetricsTOIO),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { string, boolean, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type WatchlistsTO = {\n\tid: string;\n\tname: string;\n\tdescription: Option<string>;\n\tfutures: Option<boolean>;\n\tcommon: Option<boolean>;\n};\nexport const WatchlistsTOIO = type({\n\tid: string,\n\tname: string,\n\tdescription: createOptionFromNullable(string),\n\tfutures: createOptionFromNullable(boolean),\n\tcommon: createOptionFromNullable(boolean),\n});\n","import { WatchlistsTO, WatchlistsTOIO } from '../../generated/swagger/definitions/WatchlistsTO';\nimport { array, literal, type } from 'io-ts';\n\nexport const AVAILABLE_WATCHLISTS = 'AVAILABLE_WATCHLISTS';\n\nexport type WatchlistMessageTO = {\n\ttype: typeof AVAILABLE_WATCHLISTS;\n\tbody: {\n\t\taccountWatchlists: WatchlistsTO[];\n\t\tcommonWatchlists: WatchlistsTO[];\n\t};\n};\n\nexport const watchlistMessageTOIO = type({\n\ttype: literal(AVAILABLE_WATCHLISTS),\n\tbody: type({\n\t\taccountWatchlists: array(WatchlistsTOIO),\n\t\tcommonWatchlists: array(WatchlistsTOIO),\n\t}),\n});\n","import * as t from 'io-ts';\nimport { Option } from 'fp-ts/lib/Option';\nimport { stringOption } from '../../../utils/io-ts.utils';\n\nexport const WATCHLIST_SUBSCRIPTION_INITIALIZED = 'WATCHLIST_SUBSCRIPTION_INITIALIZED';\n\nexport type WatchlistSubscriptionInitializedMessageTO = {\n\ttype: typeof WATCHLIST_SUBSCRIPTION_INITIALIZED;\n\taccountId: Option<string>;\n\tbody: {\n\t\tsuccess: boolean;\n\t};\n};\n\nexport const watchlistSubscriptionInitializedMessageTO: t.Tagged<\n\t'type',\n\tWatchlistSubscriptionInitializedMessageTO,\n\tunknown\n> = t.type({\n\ttype: t.literal(WATCHLIST_SUBSCRIPTION_INITIALIZED),\n\taccountId: stringOption,\n\tbody: t.type({\n\t\tsuccess: t.boolean,\n\t}),\n});\n","import { string, array, type } from 'io-ts';\n\nexport type WatchlistContentTO = { watchlistId: string; symbols: Array<string> };\nexport const WatchlistContentTOIO = type({ watchlistId: string, symbols: array(string) });\n","import { WatchlistContentTO, WatchlistContentTOIO } from '../../generated/swagger/definitions/WatchlistContentTO';\nimport * as t from 'io-ts';\n\nexport const WATCHLISTS_CONTENT = 'WATCHLISTS_CONTENT';\n\nexport type WatchlistContentMessageTO = {\n\ttype: typeof WATCHLISTS_CONTENT;\n\tbody: Array<WatchlistContentTO>;\n};\n\nexport const watchlistContentMessageTO: t.Tagged<'type', WatchlistContentMessageTO, unknown> = t.type({\n\ttype: t.literal(WATCHLISTS_CONTENT),\n\tbody: t.array(WatchlistContentTOIO),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { string, number, boolean, union, literal, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type AggregationPeriodTO = {\n\tname: Option<string>;\n\tseconds: Option<number>;\n\tintraday: Option<boolean>;\n\ttimeUnit: Option<'SECOND' | 'MINUTE' | 'HOUR' | 'DAY' | 'WEEK' | 'MONTH' | 'YEAR'>;\n};\nexport const AggregationPeriodTOIO = type({\n\tname: createOptionFromNullable(string),\n\tseconds: createOptionFromNullable(number),\n\tintraday: createOptionFromNullable(boolean),\n\ttimeUnit: createOptionFromNullable(\n\t\tunion([\n\t\t\tliteral('SECOND'),\n\t\t\tliteral('MINUTE'),\n\t\t\tliteral('HOUR'),\n\t\t\tliteral('DAY'),\n\t\t\tliteral('WEEK'),\n\t\t\tliteral('MONTH'),\n\t\t\tliteral('YEAR'),\n\t\t]),\n\t),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { string, number, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type RangeTO = { name: Option<string>; duration: Option<number> };\nexport const RangeTOIO = type({ name: createOptionFromNullable(string), duration: createOptionFromNullable(number) });\n","import { AggregationPeriodTO, AggregationPeriodTOIO } from '../definitions/AggregationPeriodTO';\nimport { RangeTO, RangeTOIO } from '../definitions/RangeTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type AggrPeriodRangePairTO = { aggregationPeriod: Option<AggregationPeriodTO>; range: Option<RangeTO> };\nexport const AggrPeriodRangePairTOIO = type({\n\taggregationPeriod: createOptionFromNullable(AggregationPeriodTOIO),\n\trange: createOptionFromNullable(RangeTOIO),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { string, union, literal, number, array, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type StudyLineTO = {\n\ttitle: Option<string>;\n\tstudyLineType: Option<\n\t\t| 'UNDEFINED_TYPE'\n\t\t| 'LINEAR_TYPE'\n\t\t| 'HISTOGRAM_TYPE'\n\t\t| 'POINTS_TYPE'\n\t\t| 'COMPARATIVE_TYPE'\n\t\t| 'TREND_HISTOGRAM_TYPE'\n\t\t| 'ARROW_UP_TYPE'\n\t\t| 'ARROW_DOWN_TYPE'\n\t\t| 'PIECEWISE_TYPE'\n\t\t| 'PIECEWISE_NO_MARKER_TYPE'\n\t>;\n\tthickness: Option<number>;\n\tcolors: Option<Array<string>>;\n};\nexport const StudyLineTOIO = type({\n\ttitle: createOptionFromNullable(string),\n\tstudyLineType: createOptionFromNullable(\n\t\tunion([\n\t\t\tliteral('UNDEFINED_TYPE'),\n\t\t\tliteral('LINEAR_TYPE'),\n\t\t\tliteral('HISTOGRAM_TYPE'),\n\t\t\tliteral('POINTS_TYPE'),\n\t\t\tliteral('COMPARATIVE_TYPE'),\n\t\t\tliteral('TREND_HISTOGRAM_TYPE'),\n\t\t\tliteral('ARROW_UP_TYPE'),\n\t\t\tliteral('ARROW_DOWN_TYPE'),\n\t\t\tliteral('PIECEWISE_TYPE'),\n\t\t\tliteral('PIECEWISE_NO_MARKER_TYPE'),\n\t\t]),\n\t),\n\tthickness: createOptionFromNullable(number),\n\tcolors: createOptionFromNullable(array(string)),\n});\n","import { unknownType } from '../utils/utils';\nimport { Option } from 'fp-ts/lib/Option';\nimport { number, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type StudyParamValidationTO = { min: Option<unknown>; max: Option<unknown>; precision: Option<number> };\nexport const StudyParamValidationTOIO = type({\n\tmin: createOptionFromNullable(unknownType),\n\tmax: createOptionFromNullable(unknownType),\n\tprecision: createOptionFromNullable(number),\n});\n","import { StudyParamValidationTO, StudyParamValidationTOIO } from '../definitions/StudyParamValidationTO';\nimport { unknownType } from '../utils/utils';\nimport { Option } from 'fp-ts/lib/Option';\nimport { string, union, literal, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type StudyParamTO = {\n\tid: Option<string>;\n\tstudyParamType: Option<\n\t\t| 'INTEGER_RANGE'\n\t\t| 'DOUBLE_RANGE'\n\t\t| 'PRICE_FIELD'\n\t\t| 'STRING'\n\t\t| 'AGGREGATION'\n\t\t| 'BOOLEAN'\n\t\t| 'AVERAGE'\n\t\t| 'UNDEFINED'\n\t>;\n\tvalue: Option<unknown>;\n\tvalidationTO: Option<StudyParamValidationTO>;\n};\nexport const StudyParamTOIO = type({\n\tid: createOptionFromNullable(string),\n\tstudyParamType: createOptionFromNullable(\n\t\tunion([\n\t\t\tliteral('INTEGER_RANGE'),\n\t\t\tliteral('DOUBLE_RANGE'),\n\t\t\tliteral('PRICE_FIELD'),\n\t\t\tliteral('STRING'),\n\t\t\tliteral('AGGREGATION'),\n\t\t\tliteral('BOOLEAN'),\n\t\t\tliteral('AVERAGE'),\n\t\t\tliteral('UNDEFINED'),\n\t\t]),\n\t),\n\tvalue: createOptionFromNullable(unknownType),\n\tvalidationTO: createOptionFromNullable(StudyParamValidationTOIO),\n});\n","import { StudyLineTO, StudyLineTOIO } from '../definitions/StudyLineTO';\nimport { StudyParamTO, StudyParamTOIO } from '../definitions/StudyParamTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { string, array, boolean, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type StudyTO = {\n\tid: Option<string>;\n\ttitle: Option<string>;\n\tparameters: Array<StudyParamTO>;\n\tlines: Array<StudyLineTO>;\n\toverlaying: Option<boolean>;\n\tcategories: Option<string>;\n};\nexport const StudyTOIO = type({\n\tid: createOptionFromNullable(string),\n\ttitle: createOptionFromNullable(string),\n\tparameters: array(StudyParamTOIO),\n\tlines: array(StudyLineTOIO),\n\toverlaying: createOptionFromNullable(boolean),\n\tcategories: createOptionFromNullable(string),\n});\n","import { AggrPeriodRangePairTO, AggrPeriodRangePairTOIO } from '../definitions/AggrPeriodRangePairTO';\nimport { AggregationPeriodTO, AggregationPeriodTOIO } from '../definitions/AggregationPeriodTO';\nimport { RangeTO, RangeTOIO } from '../definitions/RangeTO';\nimport { StudyTO, StudyTOIO } from '../definitions/StudyTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { array, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type GlobalChartSettings = {\n\tranges: Option<Array<RangeTO>>;\n\tstudies: Option<Array<StudyTO>>;\n\tpairs: Option<Array<AggrPeriodRangePairTO>>;\n\tperiods: Option<Array<AggregationPeriodTO>>;\n};\nexport const GlobalChartSettingsIO = type({\n\tranges: createOptionFromNullable(array(RangeTOIO)),\n\tstudies: createOptionFromNullable(array(StudyTOIO)),\n\tpairs: createOptionFromNullable(array(AggrPeriodRangePairTOIO)),\n\tperiods: createOptionFromNullable(array(AggregationPeriodTOIO)),\n});\n","import { GlobalChartSettings, GlobalChartSettingsIO } from '../definitions/GlobalChartSettings';\nimport { Option } from 'fp-ts/lib/Option';\nimport { type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type GlobalChartSettingsTO = { chartSettings: Option<GlobalChartSettings> };\nexport const GlobalChartSettingsTOIO = type({ chartSettings: createOptionFromNullable(GlobalChartSettingsIO) });\n","import * as t from 'io-ts';\nimport {\n\tGlobalChartSettingsTO,\n\tGlobalChartSettingsTOIO,\n} from '../../generated/swagger/definitions/GlobalChartSettingsTO';\n\nexport const GLOBAL_CHART_SETTINGS = 'GLOBAL_CHART_SETTINGS';\n\nexport type GlobalChartSettingsMessageTO = {\n\ttype: typeof GLOBAL_CHART_SETTINGS;\n\tbody: GlobalChartSettingsTO;\n};\n\nexport const globalChartSettingsMessageTO: t.Tagged<'type', GlobalChartSettingsMessageTO, unknown> = t.type({\n\ttype: t.literal(GLOBAL_CHART_SETTINGS),\n\tbody: GlobalChartSettingsTOIO,\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { number, string, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type ConversionRateTO = {\n\tquantity: Option<number>;\n\tfrom: Option<string>;\n\tto: Option<string>;\n\tvalue: Option<number>;\n};\nexport const ConversionRateTOIO = type({\n\tquantity: createOptionFromNullable(number),\n\tfrom: createOptionFromNullable(string),\n\tto: createOptionFromNullable(string),\n\tvalue: createOptionFromNullable(number),\n});\n","import * as t from 'io-ts';\nimport { ConversionRateTO, ConversionRateTOIO } from '../../generated/swagger/definitions/ConversionRateTO';\nimport { array } from 'io-ts';\n\nexport const CONVERSION_RATE = 'CONVERSION_RATE';\n\nexport type ConversionRateMessageTO = {\n\ttype: typeof CONVERSION_RATE;\n\tbody: ConversionRateTO[];\n};\n\nexport const conversionRateMessageTO: t.Tagged<'type', ConversionRateMessageTO, unknown> = t.type({\n\ttype: t.literal(CONVERSION_RATE),\n\tbody: array(ConversionRateTOIO),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { string, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type MarginImpactTO = {\n\tuid: Option<string>;\n\tinstrumentSymbol: Option<string>;\n\targuments: Option<string>;\n\tformula: Option<string>;\n};\nexport const MarginImpactTOIO = type({\n\tuid: createOptionFromNullable(string),\n\tinstrumentSymbol: createOptionFromNullable(string),\n\targuments: createOptionFromNullable(string),\n\tformula: createOptionFromNullable(string),\n});\n","import { array, literal, type } from 'io-ts';\nimport { MarginImpactTO, MarginImpactTOIO } from '../../generated/swagger/definitions/MarginImpactTO';\n\nexport const MARGIN_IMPACT = 'MARGIN_IMPACT';\n\nexport type MarginImpactMessageTO = {\n\ttype: typeof MARGIN_IMPACT;\n\tbody: MarginImpactTO[];\n};\n\nexport const marginImpactsMessageTOIO = type({\n\ttype: literal(MARGIN_IMPACT),\n\tbody: array(MarginImpactTOIO),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { number, string, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type UserTO = {\n\tid: Option<number>;\n\tlogin: Option<string>;\n\tfullName: Option<string>;\n\temail: Option<string>;\n\tstatus: Option<string>;\n\taccountId: Option<string>;\n\tdelimiterUserNameDomain: Option<string>;\n\tdomain: Option<string>;\n};\nexport const UserTOIO = type({\n\tid: createOptionFromNullable(number),\n\tlogin: createOptionFromNullable(string),\n\tfullName: createOptionFromNullable(string),\n\temail: createOptionFromNullable(string),\n\tstatus: createOptionFromNullable(string),\n\taccountId: createOptionFromNullable(string),\n\tdelimiterUserNameDomain: createOptionFromNullable(string),\n\tdomain: createOptionFromNullable(string),\n});\n","import { UserTO, UserTOIO } from '../../generated/swagger/definitions/UserTO';\nimport { Tagged, type, literal } from 'io-ts';\n\nexport const USER_LOGIN_INFO = 'USER_LOGIN_INFO';\n\nexport type UserInfoMessageTO = {\n\ttype: typeof USER_LOGIN_INFO;\n\tbody: { user: UserTO };\n};\n\nexport const userInfoMessageTO: Tagged<'type', UserInfoMessageTO, unknown> = type({\n\ttype: literal(USER_LOGIN_INFO),\n\tbody: type({\n\t\tuser: UserTOIO,\n\t}),\n});\n","import { unknownType } from '../utils/utils';\nimport { Option } from 'fp-ts/lib/Option';\nimport { union, literal, array, number, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type ExecutionMessageTO = {\n\tkey:\n\t\t| 'REQUEST_ORIGINATOR_IS_NOT_DETERMINED'\n\t\t| 'CANNOT_VALIDATE_SYSTEM_WIDE_SNAPSHOT_NOT_READY'\n\t\t| 'CANNOT_VALIDATE_ACCOUNT_SETTINGS_SNAPSHOT_NOT_READY'\n\t\t| 'CAN_NOT_FIND_BROKER_FOR_CLIENT_ACCOUNT'\n\t\t| 'VALIDATION_FAILED'\n\t\t| 'VALIDATION_FAILED_TIME_IN_FORCE_NOT_SET'\n\t\t| 'VALIDATION_FAILED_WRONG_TIME_IN_FORCE_FOR_MARKET_ORDER'\n\t\t| 'VALIDATION_FAILED_WRONG_TIME_IN_FORCE_FOR_STOP_ORDER'\n\t\t| 'VALIDATION_FAILED_WRONG_TIME_IN_FORCE_FOR_STOP_LIMIT_ORDER'\n\t\t| 'VALIDATION_FAILED_WRONG_TIME_IN_FORCE_FOR_LIMIT_ORDER'\n\t\t| 'VALIDATION_FAILED_MANDATORY_PARAMETER_NOT_SET'\n\t\t| 'VALIDATION_FAILED_OUT_OF_MARKET_HOURS'\n\t\t| 'VALIDATION_FAILED_INSTRUMENT_OUT_OF_TRADING_HOURS'\n\t\t| 'VALIDATION_FAILED_TRADING_IS_CLOSE_ONLY'\n\t\t| 'VALIDATION_FAILED_TRADING_IS_NO'\n\t\t| 'VALIDATION_FAILED_ACCOUNT_TRADING_IS_CLOSE_ONLY'\n\t\t| 'VALIDATION_FAILED_ACCOUNT_TRADING_IS_NO'\n\t\t| 'VALIDATION_FAILED_FEED_IS_OFFLINE'\n\t\t| 'VALIDATION_FAILED_UNEXPECTED_ERROR_DURING_METRICS_CALCULATION'\n\t\t| 'VALIDATION_FAILED_ERROR_DURING_BP_CALCULATION'\n\t\t| 'VALIDATION_FAILED_INVALID_BP_CALCULATED'\n\t\t| 'VALIDATION_FAILED_NON_POSITIVE_PROSPECTIVE_BP'\n\t\t| 'VALIDATION_FAILED_POSITION_CODE_NOT_SET'\n\t\t| 'VALIDATION_FAILED_POSITION_EFFECT_NOT_SET'\n\t\t| 'VALIDATION_FAILED_POSITION_CODE_REFERS_TO_EXISTING_POSITION'\n\t\t| 'VALIDATION_FAILED_POSITION_CODE_REFERS_TO_NON_EXISTING_POSITION'\n\t\t| 'VALIDATION_FAILED_ORDER_SHOULD_BE_OPPOSITE_TO_EXISTING_POSITION'\n\t\t| 'VALIDATION_FAILED_TOO_SMALL_REPLACING_QUANTITY_AFTER_PARTIAL_FILL'\n\t\t| 'VALIDATION_FAILED_MIN_ORDER_SIZE'\n\t\t| 'VALIDATION_FAILED_MIN_ORDER_SIZE_INCREMENT'\n\t\t| 'VALIDATION_FAILED_INSTRUMENT_QUANTITY_INCREMENT'\n\t\t| 'VALIDATION_FAILED_MAX_ORDER_SIZE'\n\t\t| 'VALIDATION_FAILED_POSITION_LIMIT'\n\t\t| 'VALIDATION_FAILED_EXPOSURE_LIMIT_SHORT_DESCRIPTION'\n\t\t| 'VALIDATION_FAILED_EXPOSURE_LIMIT_PER_INSTRUMENT'\n\t\t| 'VALIDATION_FAILED_EXPOSURE_LIMIT_PER_ACCOUNT'\n\t\t| 'VALIDATION_FAILED_EXPOSURE_LIMIT_PER_INSTRUMENT_PER_ACCOUNT'\n\t\t| 'VALIDATION_FAILED_UNKNOWN_INSTRUMENT'\n\t\t| 'VALIDATION_FAILED_NO_CALCULATOR'\n\t\t| 'VALIDATION_FAILED_NEW_ORDER_HAS_NO_LEGS'\n\t\t| 'VALIDATION_FAILED_ACCOUNT_TERMINATED'\n\t\t| 'VALIDATION_FAILED_ACCOUNT_EXPIRED'\n\t\t| 'VALIDATION_FAILED_LOGIN_DISABLED'\n\t\t| 'VALIDATION_FAILED_LIQUIDATION_IS_IN_PROGRESS'\n\t\t| 'VALIDATION_FAILED_CONDITIONAL_TRANSFER_NOT_SUPPORTED'\n\t\t| 'VALIDATION_FAILED_UNEXPECTED_ERROR'\n\t\t| 'VALIDATION_FAILED_AMBIGUOUS_ACCOUNT_GROUP'\n\t\t| 'VALIDATION_FAILED_AMBIGUOUS_STAKE_ACCOUNT_GROUP'\n\t\t| 'VALIDATION_FAILED_NO_LIQUIDATION_FOR_BROKERAGE_ACCOUNTS'\n\t\t| 'VALIDATION_FAILED_QUOTE_STALE'\n\t\t| 'VALIDATION_FAILED_QUOTE_IN_CONFIRMATION'\n\t\t| 'VALIDATION_FAILED_SPEEDBUMP'\n\t\t| 'VALIDATION_FAILED_PRICE_INCREMENT'\n\t\t| 'VALIDATION_FAILED_NO_SHORT_SELLING'\n\t\t| 'BROKER_STP_VALIDATION_FAILED_NON_BROKER_ACCOUNT'\n\t\t| 'FIX_ROUTER_OFFLINE'\n\t\t| 'FIX_ABSORBED'\n\t\t| 'FIX_CONNECTION_OFFLINE'\n\t\t| 'EXECUTOR_ORDER_PROCESSING_TIMEOUT'\n\t\t| 'EXECUTOR_EXCHANGE'\n\t\t| 'MANUAL_LIQUIDATION_REQUIRES_COMMENT'\n\t\t| 'HEDGING_MARKET_ORDER_REJECTED'\n\t\t| 'HEDGING_LIMIT_ORDER_REJECTED'\n\t\t| 'HEDGED_QUANTITY_TOO_SMALL_TO_GENERATE_CLIENT_TRADE'\n\t\t| 'NO_STRATEGY_SELECTED'\n\t\t| 'STRATEGY_NOT_AVAILABLE'\n\t\t| 'REPLACE_ORDER_MARKET_OFF'\n\t\t| 'MIN_PROFIT_NOT_GRANTED'\n\t\t| 'MAX_LOSING_SLIPPAGE_NOT_GRANTED'\n\t\t| 'ORDER_RETURNED_TO_ACTIVATOR_DUE_TO_MIN_PROFIT'\n\t\t| 'MIN_PROFIT_NOT_GRANTED_AND_MAX_ACTIVATE_ATTEMPTS_EXCEEDED'\n\t\t| 'REJECTED_BY_SAME_QUOTE_LEVEL_RULE'\n\t\t| 'STRATEGY_NOT_CONFIGURED_NO_PARAMETER'\n\t\t| 'STRATEGY_NOT_CONFIGURED_INVALID_PARAMETER'\n\t\t| 'EXECUTION_DESTINATION_NOT_CONFIGURED'\n\t\t| 'EXECUTION_DESTINATION_NOT_FOUND'\n\t\t| 'OFFSET_ACCOUNT_NOT_SET'\n\t\t| 'OFFSET_ACCOUNT_IS_NOT_VALID'\n\t\t| 'OFFSET_ACCOUNT_DESTINATION_IS_NOT_VALID'\n\t\t| 'OFFSET_ACCOUNT_LP_MIN_ORDER_SIZE'\n\t\t| 'OFFSET_ACCOUNT_LP_TIME_IN_FORCE_IS_NOT_SUPPORTED'\n\t\t| 'REJECTED_BY_DEALING_DESK'\n\t\t| 'TRADING_IS_NOT_PERMITTED'\n\t\t| 'PBASED_ORDER_WRONG_CLOSING_DIRECTION'\n\t\t| 'PBASED_ORDER_NOT_ENOUGH_WORKING_QUANTITY'\n\t\t| 'PBASED_MARKET_ORDER_REPLACE_NOT_ALLOWED'\n\t\t| 'PBASED_REPLACE_POSITION_QUANTITY_NOT_ALLOWED'\n\t\t| 'PBASED_NO_POSITION_FOR_CLOSE'\n\t\t| 'LIQUIDATION_CANCELLED'\n\t\t| 'LIQUIDATION_CANCEL_REJECTED'\n\t\t| 'NO_OPERATION_ALLOWED_DURING_LIQ_STRATEGY'\n\t\t| 'LIQ_ORDER_FOR_BROKER_NOT_ALLOWED'\n\t\t| 'BROKERAGE_VALIDATION_FAILED_ACCOUNT_GROUP_MISSING'\n\t\t| 'VALIDATION_FAILED_INSTRUMENT_TYPE_NOT_PROVIDED_FOR_ACCOUNT'\n\t\t| 'VALIDATION_FAILED_INSTRUMENT_EXPIRED'\n\t\t| 'VALIDATION_FAILED_INSTRUMENT_EXPIRED_2'\n\t\t| 'ORDER_COULD_NOT_BE_EXECUTED_AFTER_THE_LAST_TRADE_TIME'\n\t\t| 'ORDER_ALREADY_CANCELED_REPLACED'\n\t\t| 'ORDER_CANNOT_BE_ACTIVATED_AT_CURRENT_PRICE'\n\t\t| 'ORDER_UNEXPECTED'\n\t\t| 'ORDER_CANNOT_BE_ACTIVATED'\n\t\t| 'ORDER_TOO_LATE_TO_CANCEL'\n\t\t| 'ORDER_TOO_LATE_TO_REPLACE_CANCEL'\n\t\t| 'ORDER_QUOTE_NOT_AVAILABLE'\n\t\t| 'ORDER_LIQUIDATED_BY_BROKER'\n\t\t| 'ORDER_AGGREGATED'\n\t\t| 'INSTRUMENT_OF_ORDER_EXPIRED'\n\t\t| 'DAY_ORDER_EXPIRED'\n\t\t| 'GTD_ORDER_EXPIRED'\n\t\t| 'RFQ_ORDER_EXPIRED'\n\t\t| 'RFQ_TRADING_FORBIDDEN'\n\t\t| 'REASON_WITH_DESCRIPTION'\n\t\t| 'NO_TRANSLATION_AVAILABLE'\n\t\t| 'COND_TRANSFER_ONE_LEG'\n\t\t| 'COND_TRANSFER_AMOUNT_NEGATIVE'\n\t\t| 'COND_TRANSFER_LOSS_CUT_IN_PROGRESS'\n\t\t| 'COND_TRANSFER_NOT_ENOUGH_BALANCE'\n\t\t| 'COND_TRANSFER_TYPE_INVALID'\n\t\t| 'PROFILE_ASSIGNMENT_VALIDATION_FAILED_PROFILES_INTERSECT'\n\t\t| 'PROFILE_ASSIGNMENT_VALIDATION_FAILED_GROUP_DOES_NOT_BELONG_TO_HS_CATEGORY'\n\t\t| 'PROFILE_ASSIGNMENT_VALIDATION_FAILED_MORE_THAN_ONE_ACCOUNT_PROFILES'\n\t\t| 'PROFILE_ASSIGNMENT_VALIDATION_FAILED_PROFILE_DOMAINS_DO_NOT_MATCH_TO_GROUP_DOMAINS'\n\t\t| 'PROFILE_ASSIGNMENT_VALIDATION_FAILED_PROFILE_ACCOUNT_DOES_NOT_MATCH_ACCOUNT'\n\t\t| 'PROFILE_ASSIGNMENT_VALIDATION_FAILED_ACCOUNT_PROFILE_CANNOT_BE_ASSIGNED_TO_GROUP'\n\t\t| 'PROFILE_ASSIGNMENT_VALIDATION_FAILED_DEFINITION_LEVEL_DOES_NOT_MATCH'\n\t\t| 'PROFILE_ASSIGNMENT_VALIDATION_FAILED_PROFILE_DOES_NOT_EXIST'\n\t\t| 'PROFILE_ASSIGNMENT_VALIDATION_FAILED_ACCOUNT_GROUP_DOES_NOT_EXIST'\n\t\t| 'PROFILE_ASSIGNMENT_VALIDATION_FAILED_CANNOT_REMOVE_NON_EXISTING_ASSIGNMENT'\n\t\t| 'PROFILE_ASSIGNMENT_VALIDATION_FAILED_CANNOT_REMOVE_ACCOUNT_PROFILE_ASSIGNMENTS'\n\t\t| 'GROUP_VALIDATION_FAILED_GROUP_WITH_KEY_ALREADY_EXIST'\n\t\t| 'GROUP_VALIDATION_FAILED_GROUP_WITH_CODE_ALREADY_EXIST'\n\t\t| 'GROUP_VALIDATION_FAILED_CANNOT_REMOVE_GROUP_WITH_PARTICIPANTS'\n\t\t| 'GROUP_VALIDATION_FAILED_REMOVAL_OF_BROKER_GROUP_IS_FORBIDDEN'\n\t\t| 'GROUP_VALIDATION_FAILED_TRIED_TO_PERFORM_OPERATION_ON_ALREADY_REMOVED_GROUP'\n\t\t| 'GROUP_VALIDATION_FAILED_GROUP_DOES_NOT_EXIST'\n\t\t| 'GROUP_VALIDATION_FAILED_TRIED_TO_REMOVE_ABSENT_PARTICIPANTS'\n\t\t| 'GROUP_VALIDATION_FAILED_GROUP_ALREADY_CONTAINS_PARTICIPANT'\n\t\t| 'GROUP_VALIDATION_FAILED_CANNOT_REMOVE_GROUP_WITH_ASSIGNED_PROFILES'\n\t\t| 'DTREE_VALIDATION_FAILED_DUPLICATE_SETTINGS_DOMAIN_DECLARED'\n\t\t| 'DTREE_VALIDATION_FAILED_TYPE_NODES_INTERSECT_BY_INSTRUMENTS_AND_CONDITIONS'\n\t\t| 'DTREE_VALIDATION_FAILED_TYPE_NODES_INTERSECT_BY_INSTRUMENTS_AND_DOMAINS'\n\t\t| 'DTREE_VALIDATION_FAILED_CANNOT_LOAD_INSTRUMENTS'\n\t\t| 'DTREE_VALIDATION_FAILED_INSTRUMENT_CANNOT_BE_LOCATED_UNDER_THIS_TYPE_NODE'\n\t\t| 'DTREE_VALIDATION_FAILED_PRECONFIGURED_NODES_CHANGED'\n\t\t| 'INTERNAL_PLATFORM_CONFIGURATION_PROBLEM'\n\t\t| 'UNSUPPORTED_ORDER_CHARACTERISTIC'\n\t\t| 'INTERNAL_ERROR'\n\t\t| 'INSUFFICIENT_PROSPECTIVE_EQUITY'\n\t\t| 'INSUFFICIENT_PROSPECTIVE_DAY_TRADING_EQUITY'\n\t\t| 'INSUFFICIENT_PROSPECTIVE_BP'\n\t\t| 'INSUFFICIENT_PROSPECTIVE_DTBP'\n\t\t| 'INSUFFICIENT_PROSPECTIVE_NET_LIQ'\n\t\t| 'VALIDATION_FAILED_VIOLATED_AVAILABLE_QUANTITY_TO_CLOSE'\n\t\t| 'VALIDATION_FAILED_OPENING_ORDER_SHOULD_NOT_DECREASE_POSITION'\n\t\t| 'VALIDATION_FAILED_TO_CALCULATE_AVAILABLE_QUANTITY_TO_CLOSE'\n\t\t| 'VALIDATION_FAILED_BOXED_ORDERS_NOT_ALLOWED'\n\t\t| 'OCO_ORDER_UNSUPPORTED_ORDER_TYPE'\n\t\t| 'OCO_ORDER_UNSUPPORTED_TIF'\n\t\t| 'OCO_ORDERS_SAME'\n\t\t| 'BRACKET_ORDER_UNSUPPORTED_ORDER_TYPE'\n\t\t| 'BRACKET_ORDER_UNSUPPORTED_TIF'\n\t\t| 'ORDER_GROUP_REJECTED'\n\t\t| 'VALIDATION_FAILED_PRODUCT_IS_COMPLEX_DEFAULT'\n\t\t| 'VALIDATION_FAILED_PRODUCT_IS_COMPLEX_FOR_CONVENIENT'\n\t\t| 'VALIDATION_FAILED_PRODUCT_IS_COMPLEX_FOR_NO_CONVENIENT'\n\t\t| 'CANT_CHANGE_STOP_PRICE_AFTER_TRIGGERING'\n\t\t| 'VALIDATION_FAILED_CAN_NOT_OPEN_SHORT_POSITION_ON_CASH_ACCOUNT'\n\t\t| 'VALIDATION_FAILED_TRACK_TYPE_NOT_SET'\n\t\t| 'VALIDATION_FAILED_POSITION_CODE_DOES_NOT_MATCH_TRACK_TYPE'\n\t\t| 'VALIDATION_FAILED_ORDER_SIDE_DOES_NOT_MATCH_TRACK_TYPE_AND_POSITION_EFFECT'\n\t\t| 'VALIDATION_FAILED_TAX_HANDLING_MODE_IS_NOT_POSSIBLE_FOR_ACCOUNT'\n\t\t| 'VALIDATION_FAILED_INSUFFICIENT_PROSPECTIVE_FUNDS'\n\t\t| 'VALIDATION_FAILED_NISA_REMAINING_NEGATIVE'\n\t\t| 'VALIDATION_FAILED_INSTRUMENT_TRADING_STATUS'\n\t\t| 'VALIDATION_FAILED_MINIMUM_COLLATERAL_REQUIREMENT_NOT_SET'\n\t\t| 'VALIDATION_FAILED_MINIMUM_COLLATERAL_REQUIREMENT'\n\t\t| 'VALIDATION_FAILED_STANDARDIZED_MARGIN_STATUS'\n\t\t| 'VALIDATION_FAILED_IOC_NOT_AT_REGULAR_MARKET_STATE'\n\t\t| 'VALIDATION_FAILED_SHORT_SELLING_LIMIT_EXCEEDED'\n\t\t| 'VALIDATION_FAILED_ORDER_SHOULD_HAVE_ONE_LEG'\n\t\t| 'VALIDATION_FAILED_PROSPECTIVE_BALANCE_FUNDS_SHOULD_BE_POSITIVE'\n\t\t| 'VALIDATION_FAILED_DIRECT_EXCHANGE_NOT_BY_FOREX'\n\t\t| 'VALIDATION_FAILED_DIRECT_EXCHANGE_ORDER_CAN_NOT_BE_ATTACHED'\n\t\t| 'VALIDATION_FAILED_DIRECT_EXCHANGE_ON_IMMEDIATE_CONVERSION_ACCOUNT'\n\t\t| 'SENDING_DEPOSIT_WITHDRAWAL_REQUEST_FAILED'\n\t\t| 'DEPOSIT_WITHDRAWAL_REQUEST_REJECTED'\n\t\t| 'VALIDATION_FAILED_REPLACEMENT_OF_TRIGGERED_ALERT_PROHIBITED'\n\t\t| 'TAG_ASSIGNMENT_VALIDATION_FAILED_UNEXPECTEDLY'\n\t\t| 'TAG_ASSIGNMENT_VALIDATION_FAILED_CANNOT_ASSIGN_TAG_TO_EXISTING_CHAIN'\n\t\t| 'TAG_ASSIGNMENT_VALIDATION_FAILED_CANNOT_ASSIGN_TWO_TAGS_TO_THE_SAME_CHAIN'\n\t\t| 'TAG_ASSIGNMENT_VALIDATION_FAILED_CANNOT_CREATE_TAG_FOR_UNKNOWN_POSITION_COLOR'\n\t\t| 'TAG_ASSIGNMENT_VALIDATION_FAILED_CANNOT_COLOR_POSITION_TWICE'\n\t\t| 'ROLL_VALIDATION_FAILED_ROLLED_POSITIONS_BELONG_TO_DIFFERENT_CHAINS_OF_USER'\n\t\t| 'ROLL_VALIDATION_FAILED_ROLLED_POSITIONS_BELONG_TO_DIFFERENT_CHAINS_OF_ANOTHER_USER'\n\t\t| 'CANCELLED'\n\t\t| 'REPLACED'\n\t\t| 'BUY'\n\t\t| 'SELL';\n\tparameters: Option<Array<unknown>>;\n\terrorCode: number;\n};\nexport const ExecutionMessageTOIO = type({\n\tkey: union([\n\t\tliteral('REQUEST_ORIGINATOR_IS_NOT_DETERMINED'),\n\t\tliteral('CANNOT_VALIDATE_SYSTEM_WIDE_SNAPSHOT_NOT_READY'),\n\t\tliteral('CANNOT_VALIDATE_ACCOUNT_SETTINGS_SNAPSHOT_NOT_READY'),\n\t\tliteral('CAN_NOT_FIND_BROKER_FOR_CLIENT_ACCOUNT'),\n\t\tliteral('VALIDATION_FAILED'),\n\t\tliteral('VALIDATION_FAILED_TIME_IN_FORCE_NOT_SET'),\n\t\tliteral('VALIDATION_FAILED_WRONG_TIME_IN_FORCE_FOR_MARKET_ORDER'),\n\t\tliteral('VALIDATION_FAILED_WRONG_TIME_IN_FORCE_FOR_STOP_ORDER'),\n\t\tliteral('VALIDATION_FAILED_WRONG_TIME_IN_FORCE_FOR_STOP_LIMIT_ORDER'),\n\t\tliteral('VALIDATION_FAILED_WRONG_TIME_IN_FORCE_FOR_LIMIT_ORDER'),\n\t\tliteral('VALIDATION_FAILED_MANDATORY_PARAMETER_NOT_SET'),\n\t\tliteral('VALIDATION_FAILED_OUT_OF_MARKET_HOURS'),\n\t\tliteral('VALIDATION_FAILED_INSTRUMENT_OUT_OF_TRADING_HOURS'),\n\t\tliteral('VALIDATION_FAILED_TRADING_IS_CLOSE_ONLY'),\n\t\tliteral('VALIDATION_FAILED_TRADING_IS_NO'),\n\t\tliteral('VALIDATION_FAILED_ACCOUNT_TRADING_IS_CLOSE_ONLY'),\n\t\tliteral('VALIDATION_FAILED_ACCOUNT_TRADING_IS_NO'),\n\t\tliteral('VALIDATION_FAILED_FEED_IS_OFFLINE'),\n\t\tliteral('VALIDATION_FAILED_UNEXPECTED_ERROR_DURING_METRICS_CALCULATION'),\n\t\tliteral('VALIDATION_FAILED_ERROR_DURING_BP_CALCULATION'),\n\t\tliteral('VALIDATION_FAILED_INVALID_BP_CALCULATED'),\n\t\tliteral('VALIDATION_FAILED_NON_POSITIVE_PROSPECTIVE_BP'),\n\t\tliteral('VALIDATION_FAILED_POSITION_CODE_NOT_SET'),\n\t\tliteral('VALIDATION_FAILED_POSITION_EFFECT_NOT_SET'),\n\t\tliteral('VALIDATION_FAILED_POSITION_CODE_REFERS_TO_EXISTING_POSITION'),\n\t\tliteral('VALIDATION_FAILED_POSITION_CODE_REFERS_TO_NON_EXISTING_POSITION'),\n\t\tliteral('VALIDATION_FAILED_ORDER_SHOULD_BE_OPPOSITE_TO_EXISTING_POSITION'),\n\t\tliteral('VALIDATION_FAILED_TOO_SMALL_REPLACING_QUANTITY_AFTER_PARTIAL_FILL'),\n\t\tliteral('VALIDATION_FAILED_MIN_ORDER_SIZE'),\n\t\tliteral('VALIDATION_FAILED_MIN_ORDER_SIZE_INCREMENT'),\n\t\tliteral('VALIDATION_FAILED_INSTRUMENT_QUANTITY_INCREMENT'),\n\t\tliteral('VALIDATION_FAILED_MAX_ORDER_SIZE'),\n\t\tliteral('VALIDATION_FAILED_POSITION_LIMIT'),\n\t\tliteral('VALIDATION_FAILED_EXPOSURE_LIMIT_SHORT_DESCRIPTION'),\n\t\tliteral('VALIDATION_FAILED_EXPOSURE_LIMIT_PER_INSTRUMENT'),\n\t\tliteral('VALIDATION_FAILED_EXPOSURE_LIMIT_PER_ACCOUNT'),\n\t\tliteral('VALIDATION_FAILED_EXPOSURE_LIMIT_PER_INSTRUMENT_PER_ACCOUNT'),\n\t\tliteral('VALIDATION_FAILED_UNKNOWN_INSTRUMENT'),\n\t\tliteral('VALIDATION_FAILED_NO_CALCULATOR'),\n\t\tliteral('VALIDATION_FAILED_NEW_ORDER_HAS_NO_LEGS'),\n\t\tliteral('VALIDATION_FAILED_ACCOUNT_TERMINATED'),\n\t\tliteral('VALIDATION_FAILED_ACCOUNT_EXPIRED'),\n\t\tliteral('VALIDATION_FAILED_LOGIN_DISABLED'),\n\t\tliteral('VALIDATION_FAILED_LIQUIDATION_IS_IN_PROGRESS'),\n\t\tliteral('VALIDATION_FAILED_CONDITIONAL_TRANSFER_NOT_SUPPORTED'),\n\t\tliteral('VALIDATION_FAILED_UNEXPECTED_ERROR'),\n\t\tliteral('VALIDATION_FAILED_AMBIGUOUS_ACCOUNT_GROUP'),\n\t\tliteral('VALIDATION_FAILED_AMBIGUOUS_STAKE_ACCOUNT_GROUP'),\n\t\tliteral('VALIDATION_FAILED_NO_LIQUIDATION_FOR_BROKERAGE_ACCOUNTS'),\n\t\tliteral('VALIDATION_FAILED_QUOTE_STALE'),\n\t\tliteral('VALIDATION_FAILED_QUOTE_IN_CONFIRMATION'),\n\t\tliteral('VALIDATION_FAILED_SPEEDBUMP'),\n\t\tliteral('VALIDATION_FAILED_PRICE_INCREMENT'),\n\t\tliteral('VALIDATION_FAILED_NO_SHORT_SELLING'),\n\t\tliteral('BROKER_STP_VALIDATION_FAILED_NON_BROKER_ACCOUNT'),\n\t\tliteral('FIX_ROUTER_OFFLINE'),\n\t\tliteral('FIX_ABSORBED'),\n\t\tliteral('FIX_CONNECTION_OFFLINE'),\n\t\tliteral('EXECUTOR_ORDER_PROCESSING_TIMEOUT'),\n\t\tliteral('EXECUTOR_EXCHANGE'),\n\t\tliteral('MANUAL_LIQUIDATION_REQUIRES_COMMENT'),\n\t\tliteral('HEDGING_MARKET_ORDER_REJECTED'),\n\t\tliteral('HEDGING_LIMIT_ORDER_REJECTED'),\n\t\tliteral('HEDGED_QUANTITY_TOO_SMALL_TO_GENERATE_CLIENT_TRADE'),\n\t\tliteral('NO_STRATEGY_SELECTED'),\n\t\tliteral('STRATEGY_NOT_AVAILABLE'),\n\t\tliteral('REPLACE_ORDER_MARKET_OFF'),\n\t\tliteral('MIN_PROFIT_NOT_GRANTED'),\n\t\tliteral('MAX_LOSING_SLIPPAGE_NOT_GRANTED'),\n\t\tliteral('ORDER_RETURNED_TO_ACTIVATOR_DUE_TO_MIN_PROFIT'),\n\t\tliteral('MIN_PROFIT_NOT_GRANTED_AND_MAX_ACTIVATE_ATTEMPTS_EXCEEDED'),\n\t\tliteral('REJECTED_BY_SAME_QUOTE_LEVEL_RULE'),\n\t\tliteral('STRATEGY_NOT_CONFIGURED_NO_PARAMETER'),\n\t\tliteral('STRATEGY_NOT_CONFIGURED_INVALID_PARAMETER'),\n\t\tliteral('EXECUTION_DESTINATION_NOT_CONFIGURED'),\n\t\tliteral('EXECUTION_DESTINATION_NOT_FOUND'),\n\t\tliteral('OFFSET_ACCOUNT_NOT_SET'),\n\t\tliteral('OFFSET_ACCOUNT_IS_NOT_VALID'),\n\t\tliteral('OFFSET_ACCOUNT_DESTINATION_IS_NOT_VALID'),\n\t\tliteral('OFFSET_ACCOUNT_LP_MIN_ORDER_SIZE'),\n\t\tliteral('OFFSET_ACCOUNT_LP_TIME_IN_FORCE_IS_NOT_SUPPORTED'),\n\t\tliteral('REJECTED_BY_DEALING_DESK'),\n\t\tliteral('TRADING_IS_NOT_PERMITTED'),\n\t\tliteral('PBASED_ORDER_WRONG_CLOSING_DIRECTION'),\n\t\tliteral('PBASED_ORDER_NOT_ENOUGH_WORKING_QUANTITY'),\n\t\tliteral('PBASED_MARKET_ORDER_REPLACE_NOT_ALLOWED'),\n\t\tliteral('PBASED_REPLACE_POSITION_QUANTITY_NOT_ALLOWED'),\n\t\tliteral('PBASED_NO_POSITION_FOR_CLOSE'),\n\t\tliteral('LIQUIDATION_CANCELLED'),\n\t\tliteral('LIQUIDATION_CANCEL_REJECTED'),\n\t\tliteral('NO_OPERATION_ALLOWED_DURING_LIQ_STRATEGY'),\n\t\tliteral('LIQ_ORDER_FOR_BROKER_NOT_ALLOWED'),\n\t\tliteral('BROKERAGE_VALIDATION_FAILED_ACCOUNT_GROUP_MISSING'),\n\t\tliteral('VALIDATION_FAILED_INSTRUMENT_TYPE_NOT_PROVIDED_FOR_ACCOUNT'),\n\t\tliteral('VALIDATION_FAILED_INSTRUMENT_EXPIRED'),\n\t\tliteral('VALIDATION_FAILED_INSTRUMENT_EXPIRED_2'),\n\t\tliteral('ORDER_COULD_NOT_BE_EXECUTED_AFTER_THE_LAST_TRADE_TIME'),\n\t\tliteral('ORDER_ALREADY_CANCELED_REPLACED'),\n\t\tliteral('ORDER_CANNOT_BE_ACTIVATED_AT_CURRENT_PRICE'),\n\t\tliteral('ORDER_UNEXPECTED'),\n\t\tliteral('ORDER_CANNOT_BE_ACTIVATED'),\n\t\tliteral('ORDER_TOO_LATE_TO_CANCEL'),\n\t\tliteral('ORDER_TOO_LATE_TO_REPLACE_CANCEL'),\n\t\tliteral('ORDER_QUOTE_NOT_AVAILABLE'),\n\t\tliteral('ORDER_LIQUIDATED_BY_BROKER'),\n\t\tliteral('ORDER_AGGREGATED'),\n\t\tliteral('INSTRUMENT_OF_ORDER_EXPIRED'),\n\t\tliteral('DAY_ORDER_EXPIRED'),\n\t\tliteral('GTD_ORDER_EXPIRED'),\n\t\tliteral('RFQ_ORDER_EXPIRED'),\n\t\tliteral('RFQ_TRADING_FORBIDDEN'),\n\t\tliteral('REASON_WITH_DESCRIPTION'),\n\t\tliteral('NO_TRANSLATION_AVAILABLE'),\n\t\tliteral('COND_TRANSFER_ONE_LEG'),\n\t\tliteral('COND_TRANSFER_AMOUNT_NEGATIVE'),\n\t\tliteral('COND_TRANSFER_LOSS_CUT_IN_PROGRESS'),\n\t\tliteral('COND_TRANSFER_NOT_ENOUGH_BALANCE'),\n\t\tliteral('COND_TRANSFER_TYPE_INVALID'),\n\t\tliteral('PROFILE_ASSIGNMENT_VALIDATION_FAILED_PROFILES_INTERSECT'),\n\t\tliteral('PROFILE_ASSIGNMENT_VALIDATION_FAILED_GROUP_DOES_NOT_BELONG_TO_HS_CATEGORY'),\n\t\tliteral('PROFILE_ASSIGNMENT_VALIDATION_FAILED_MORE_THAN_ONE_ACCOUNT_PROFILES'),\n\t\tliteral('PROFILE_ASSIGNMENT_VALIDATION_FAILED_PROFILE_DOMAINS_DO_NOT_MATCH_TO_GROUP_DOMAINS'),\n\t\tliteral('PROFILE_ASSIGNMENT_VALIDATION_FAILED_PROFILE_ACCOUNT_DOES_NOT_MATCH_ACCOUNT'),\n\t\tliteral('PROFILE_ASSIGNMENT_VALIDATION_FAILED_ACCOUNT_PROFILE_CANNOT_BE_ASSIGNED_TO_GROUP'),\n\t\tliteral('PROFILE_ASSIGNMENT_VALIDATION_FAILED_DEFINITION_LEVEL_DOES_NOT_MATCH'),\n\t\tliteral('PROFILE_ASSIGNMENT_VALIDATION_FAILED_PROFILE_DOES_NOT_EXIST'),\n\t\tliteral('PROFILE_ASSIGNMENT_VALIDATION_FAILED_ACCOUNT_GROUP_DOES_NOT_EXIST'),\n\t\tliteral('PROFILE_ASSIGNMENT_VALIDATION_FAILED_CANNOT_REMOVE_NON_EXISTING_ASSIGNMENT'),\n\t\tliteral('PROFILE_ASSIGNMENT_VALIDATION_FAILED_CANNOT_REMOVE_ACCOUNT_PROFILE_ASSIGNMENTS'),\n\t\tliteral('GROUP_VALIDATION_FAILED_GROUP_WITH_KEY_ALREADY_EXIST'),\n\t\tliteral('GROUP_VALIDATION_FAILED_GROUP_WITH_CODE_ALREADY_EXIST'),\n\t\tliteral('GROUP_VALIDATION_FAILED_CANNOT_REMOVE_GROUP_WITH_PARTICIPANTS'),\n\t\tliteral('GROUP_VALIDATION_FAILED_REMOVAL_OF_BROKER_GROUP_IS_FORBIDDEN'),\n\t\tliteral('GROUP_VALIDATION_FAILED_TRIED_TO_PERFORM_OPERATION_ON_ALREADY_REMOVED_GROUP'),\n\t\tliteral('GROUP_VALIDATION_FAILED_GROUP_DOES_NOT_EXIST'),\n\t\tliteral('GROUP_VALIDATION_FAILED_TRIED_TO_REMOVE_ABSENT_PARTICIPANTS'),\n\t\tliteral('GROUP_VALIDATION_FAILED_GROUP_ALREADY_CONTAINS_PARTICIPANT'),\n\t\tliteral('GROUP_VALIDATION_FAILED_CANNOT_REMOVE_GROUP_WITH_ASSIGNED_PROFILES'),\n\t\tliteral('DTREE_VALIDATION_FAILED_DUPLICATE_SETTINGS_DOMAIN_DECLARED'),\n\t\tliteral('DTREE_VALIDATION_FAILED_TYPE_NODES_INTERSECT_BY_INSTRUMENTS_AND_CONDITIONS'),\n\t\tliteral('DTREE_VALIDATION_FAILED_TYPE_NODES_INTERSECT_BY_INSTRUMENTS_AND_DOMAINS'),\n\t\tliteral('DTREE_VALIDATION_FAILED_CANNOT_LOAD_INSTRUMENTS'),\n\t\tliteral('DTREE_VALIDATION_FAILED_INSTRUMENT_CANNOT_BE_LOCATED_UNDER_THIS_TYPE_NODE'),\n\t\tliteral('DTREE_VALIDATION_FAILED_PRECONFIGURED_NODES_CHANGED'),\n\t\tliteral('INTERNAL_PLATFORM_CONFIGURATION_PROBLEM'),\n\t\tliteral('UNSUPPORTED_ORDER_CHARACTERISTIC'),\n\t\tliteral('INTERNAL_ERROR'),\n\t\tliteral('INSUFFICIENT_PROSPECTIVE_EQUITY'),\n\t\tliteral('INSUFFICIENT_PROSPECTIVE_DAY_TRADING_EQUITY'),\n\t\tliteral('INSUFFICIENT_PROSPECTIVE_BP'),\n\t\tliteral('INSUFFICIENT_PROSPECTIVE_DTBP'),\n\t\tliteral('INSUFFICIENT_PROSPECTIVE_NET_LIQ'),\n\t\tliteral('VALIDATION_FAILED_VIOLATED_AVAILABLE_QUANTITY_TO_CLOSE'),\n\t\tliteral('VALIDATION_FAILED_OPENING_ORDER_SHOULD_NOT_DECREASE_POSITION'),\n\t\tliteral('VALIDATION_FAILED_TO_CALCULATE_AVAILABLE_QUANTITY_TO_CLOSE'),\n\t\tliteral('VALIDATION_FAILED_BOXED_ORDERS_NOT_ALLOWED'),\n\t\tliteral('OCO_ORDER_UNSUPPORTED_ORDER_TYPE'),\n\t\tliteral('OCO_ORDER_UNSUPPORTED_TIF'),\n\t\tliteral('OCO_ORDERS_SAME'),\n\t\tliteral('BRACKET_ORDER_UNSUPPORTED_ORDER_TYPE'),\n\t\tliteral('BRACKET_ORDER_UNSUPPORTED_TIF'),\n\t\tliteral('ORDER_GROUP_REJECTED'),\n\t\tliteral('VALIDATION_FAILED_PRODUCT_IS_COMPLEX_DEFAULT'),\n\t\tliteral('VALIDATION_FAILED_PRODUCT_IS_COMPLEX_FOR_CONVENIENT'),\n\t\tliteral('VALIDATION_FAILED_PRODUCT_IS_COMPLEX_FOR_NO_CONVENIENT'),\n\t\tliteral('CANT_CHANGE_STOP_PRICE_AFTER_TRIGGERING'),\n\t\tliteral('VALIDATION_FAILED_CAN_NOT_OPEN_SHORT_POSITION_ON_CASH_ACCOUNT'),\n\t\tliteral('VALIDATION_FAILED_TRACK_TYPE_NOT_SET'),\n\t\tliteral('VALIDATION_FAILED_POSITION_CODE_DOES_NOT_MATCH_TRACK_TYPE'),\n\t\tliteral('VALIDATION_FAILED_ORDER_SIDE_DOES_NOT_MATCH_TRACK_TYPE_AND_POSITION_EFFECT'),\n\t\tliteral('VALIDATION_FAILED_TAX_HANDLING_MODE_IS_NOT_POSSIBLE_FOR_ACCOUNT'),\n\t\tliteral('VALIDATION_FAILED_INSUFFICIENT_PROSPECTIVE_FUNDS'),\n\t\tliteral('VALIDATION_FAILED_NISA_REMAINING_NEGATIVE'),\n\t\tliteral('VALIDATION_FAILED_INSTRUMENT_TRADING_STATUS'),\n\t\tliteral('VALIDATION_FAILED_MINIMUM_COLLATERAL_REQUIREMENT_NOT_SET'),\n\t\tliteral('VALIDATION_FAILED_MINIMUM_COLLATERAL_REQUIREMENT'),\n\t\tliteral('VALIDATION_FAILED_STANDARDIZED_MARGIN_STATUS'),\n\t\tliteral('VALIDATION_FAILED_IOC_NOT_AT_REGULAR_MARKET_STATE'),\n\t\tliteral('VALIDATION_FAILED_SHORT_SELLING_LIMIT_EXCEEDED'),\n\t\tliteral('VALIDATION_FAILED_ORDER_SHOULD_HAVE_ONE_LEG'),\n\t\tliteral('VALIDATION_FAILED_PROSPECTIVE_BALANCE_FUNDS_SHOULD_BE_POSITIVE'),\n\t\tliteral('VALIDATION_FAILED_DIRECT_EXCHANGE_NOT_BY_FOREX'),\n\t\tliteral('VALIDATION_FAILED_DIRECT_EXCHANGE_ORDER_CAN_NOT_BE_ATTACHED'),\n\t\tliteral('VALIDATION_FAILED_DIRECT_EXCHANGE_ON_IMMEDIATE_CONVERSION_ACCOUNT'),\n\t\tliteral('SENDING_DEPOSIT_WITHDRAWAL_REQUEST_FAILED'),\n\t\tliteral('DEPOSIT_WITHDRAWAL_REQUEST_REJECTED'),\n\t\tliteral('VALIDATION_FAILED_REPLACEMENT_OF_TRIGGERED_ALERT_PROHIBITED'),\n\t\tliteral('TAG_ASSIGNMENT_VALIDATION_FAILED_UNEXPECTEDLY'),\n\t\tliteral('TAG_ASSIGNMENT_VALIDATION_FAILED_CANNOT_ASSIGN_TAG_TO_EXISTING_CHAIN'),\n\t\tliteral('TAG_ASSIGNMENT_VALIDATION_FAILED_CANNOT_ASSIGN_TWO_TAGS_TO_THE_SAME_CHAIN'),\n\t\tliteral('TAG_ASSIGNMENT_VALIDATION_FAILED_CANNOT_CREATE_TAG_FOR_UNKNOWN_POSITION_COLOR'),\n\t\tliteral('TAG_ASSIGNMENT_VALIDATION_FAILED_CANNOT_COLOR_POSITION_TWICE'),\n\t\tliteral('ROLL_VALIDATION_FAILED_ROLLED_POSITIONS_BELONG_TO_DIFFERENT_CHAINS_OF_USER'),\n\t\tliteral('ROLL_VALIDATION_FAILED_ROLLED_POSITIONS_BELONG_TO_DIFFERENT_CHAINS_OF_ANOTHER_USER'),\n\t\tliteral('CANCELLED'),\n\t\tliteral('REPLACED'),\n\t\tliteral('BUY'),\n\t\tliteral('SELL'),\n\t]),\n\tparameters: createOptionFromNullable(array(unknownType)),\n\terrorCode: number,\n});\n","import { ExecutionMessageTO, ExecutionMessageTOIO } from '../definitions/ExecutionMessageTO';\nimport { ProtectionOrderTO, ProtectionOrderTOIO } from '../definitions/ProtectionOrderTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { number, string, union, literal, boolean, array, dictionary, type } from 'io-ts';\nimport { createOptionFromNullable, DateFromISOString } from 'io-ts-types';\n\nexport type OrderTO = {\n\torderId: number;\n\taccountId: string;\n\torderChainId: string;\n\tocoGroupCode: Option<string>;\n\tbracketGroupCode: Option<string>;\n\tinstrumentId: number;\n\tstatus:\n\t\t| 'SENDING'\n\t\t| 'PENDING'\n\t\t| 'PLACED'\n\t\t| 'WAITING_CONDITION'\n\t\t| 'WAITING_TRIGGER'\n\t\t| 'WAITING_LIMIT'\n\t\t| 'WAITING_STOP'\n\t\t| 'WORKING'\n\t\t| 'CANCELING'\n\t\t| 'REPLACING'\n\t\t| 'CANCELED'\n\t\t| 'COMPLETED'\n\t\t| 'REJECTED'\n\t\t| 'EXPIRED'\n\t\t| 'EXECUTING'\n\t\t| 'UNKNOWN';\n\tstatusDescription: string;\n\tcreatedTime: Date;\n\tmodifiedTime: Date;\n\tquantity: number;\n\tremainingQuantity: number;\n\tfilledQuantity: number;\n\ttype:\n\t\t| 'CANCEL'\n\t\t| 'MARKET'\n\t\t| 'AUTO'\n\t\t| 'LIMIT'\n\t\t| 'STOP'\n\t\t| 'TRIGGERED_STOP'\n\t\t| 'STOP_LIMIT'\n\t\t| 'TRIGGERED_LIMIT'\n\t\t| 'TRAIL_STOP'\n\t\t| 'TRAIL_STOP_LIMIT'\n\t\t| 'OCO';\n\tlimitPrice: Option<number>;\n\taveragePrice: Option<number>;\n\tstopPrice: Option<number>;\n\tstopLimitPrice: Option<number>;\n\ttriggerPrice: Option<number>;\n\tliquidation: Option<boolean>;\n\ttrailPrice: Option<number>;\n\tattached: boolean;\n\tstopPriceOffset: Option<number>;\n\tstopPriceOffsetPercent: Option<number>;\n\trequestId: Option<string>;\n\ttimeInForce: Option<'DAY' | 'GTC' | 'IOC' | 'GTD' | 'FOK'>;\n\tfillPrice: Option<number>;\n\texpireAt: Option<Date>;\n\tclosedPL: Option<number>;\n\tparentOrderId: Option<string>;\n\tthenOrdersIds: Option<Array<string>>;\n\torderRole: Option<\n\t\t'SIMPLE' | 'OCO_ORDER' | 'IF_ORDER' | 'THEN_ORDER' | 'THEN_OCO_ORDER' | 'BRACKET_ORDER' | 'THEN_BRACKET_ORDER'\n\t>;\n\torderGroupCode: Option<number>;\n\ttakeProfit: Option<ProtectionOrderTO>;\n\tstopLoss: Option<ProtectionOrderTO>;\n\tpositionEffect: Option<'OPENING' | 'CLOSING'>;\n\texchange: Option<string>;\n\tlastFillTime: Option<Date>;\n\tstopPriceTriggerTime: Option<Date>;\n\thasTriggeredStop: boolean;\n\tcommissionFee: Option<number>;\n\talertExpression: Option<string>;\n\treason: Option<ExecutionMessageTO>;\n\tadditionalParameters: { [key: string]: string };\n};\nexport const OrderTOIO = type({\n\torderId: number,\n\taccountId: string,\n\torderChainId: string,\n\tocoGroupCode: createOptionFromNullable(string),\n\tbracketGroupCode: createOptionFromNullable(string),\n\tinstrumentId: number,\n\tstatus: union([\n\t\tliteral('SENDING'),\n\t\tliteral('PENDING'),\n\t\tliteral('PLACED'),\n\t\tliteral('WAITING_CONDITION'),\n\t\tliteral('WAITING_TRIGGER'),\n\t\tliteral('WAITING_LIMIT'),\n\t\tliteral('WAITING_STOP'),\n\t\tliteral('WORKING'),\n\t\tliteral('CANCELING'),\n\t\tliteral('REPLACING'),\n\t\tliteral('CANCELED'),\n\t\tliteral('COMPLETED'),\n\t\tliteral('REJECTED'),\n\t\tliteral('EXPIRED'),\n\t\tliteral('EXECUTING'),\n\t\tliteral('UNKNOWN'),\n\t]),\n\tstatusDescription: string,\n\tcreatedTime: DateFromISOString,\n\tmodifiedTime: DateFromISOString,\n\tquantity: number,\n\tremainingQuantity: number,\n\tfilledQuantity: number,\n\ttype: union([\n\t\tliteral('CANCEL'),\n\t\tliteral('MARKET'),\n\t\tliteral('AUTO'),\n\t\tliteral('LIMIT'),\n\t\tliteral('STOP'),\n\t\tliteral('TRIGGERED_STOP'),\n\t\tliteral('STOP_LIMIT'),\n\t\tliteral('TRIGGERED_LIMIT'),\n\t\tliteral('TRAIL_STOP'),\n\t\tliteral('TRAIL_STOP_LIMIT'),\n\t\tliteral('OCO'),\n\t]),\n\tlimitPrice: createOptionFromNullable(number),\n\taveragePrice: createOptionFromNullable(number),\n\tstopPrice: createOptionFromNullable(number),\n\tstopLimitPrice: createOptionFromNullable(number),\n\ttriggerPrice: createOptionFromNullable(number),\n\tliquidation: createOptionFromNullable(boolean),\n\ttrailPrice: createOptionFromNullable(number),\n\tattached: boolean,\n\tstopPriceOffset: createOptionFromNullable(number),\n\tstopPriceOffsetPercent: createOptionFromNullable(number),\n\trequestId: createOptionFromNullable(string),\n\ttimeInForce: createOptionFromNullable(\n\t\tunion([literal('DAY'), literal('GTC'), literal('IOC'), literal('GTD'), literal('FOK')]),\n\t),\n\tfillPrice: createOptionFromNullable(number),\n\texpireAt: createOptionFromNullable(DateFromISOString),\n\tclosedPL: createOptionFromNullable(number),\n\tparentOrderId: createOptionFromNullable(string),\n\tthenOrdersIds: createOptionFromNullable(array(string)),\n\torderRole: createOptionFromNullable(\n\t\tunion([\n\t\t\tliteral('SIMPLE'),\n\t\t\tliteral('OCO_ORDER'),\n\t\t\tliteral('IF_ORDER'),\n\t\t\tliteral('THEN_ORDER'),\n\t\t\tliteral('THEN_OCO_ORDER'),\n\t\t\tliteral('BRACKET_ORDER'),\n\t\t\tliteral('THEN_BRACKET_ORDER'),\n\t\t]),\n\t),\n\torderGroupCode: createOptionFromNullable(number),\n\ttakeProfit: createOptionFromNullable(ProtectionOrderTOIO),\n\tstopLoss: createOptionFromNullable(ProtectionOrderTOIO),\n\tpositionEffect: createOptionFromNullable(union([literal('OPENING'), literal('CLOSING')])),\n\texchange: createOptionFromNullable(string),\n\tlastFillTime: createOptionFromNullable(DateFromISOString),\n\tstopPriceTriggerTime: createOptionFromNullable(DateFromISOString),\n\thasTriggeredStop: boolean,\n\tcommissionFee: createOptionFromNullable(number),\n\talertExpression: createOptionFromNullable(string),\n\treason: createOptionFromNullable(ExecutionMessageTOIO),\n\tadditionalParameters: dictionary(string, string),\n});\n","import { OrderTO, OrderTOIO } from '../../generated/swagger/definitions/OrderTO';\nimport { array, literal, type } from 'io-ts';\n\nexport const ORDERS = 'ORDERS';\n\nexport type OrdersMessageTO = {\n\ttype: typeof ORDERS;\n\tbody: OrderTO[];\n};\n\nexport const ordersMessageTOIO = type({\n\ttype: literal(ORDERS),\n\tbody: array(OrderTOIO),\n});\n","import { ExecutionMessageTO, ExecutionMessageTOIO } from '../definitions/ExecutionMessageTO';\nimport { InstrumentTO, InstrumentTOIO } from '../definitions/InstrumentTO';\nimport { ProtectionOrderTO, ProtectionOrderTOIO } from '../definitions/ProtectionOrderTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { number, union, literal, string, boolean, array, dictionary, type } from 'io-ts';\nimport { DateFromISOString, createOptionFromNullable } from 'io-ts-types';\n\nexport type HistoryOrderTO = {\n\tinstrument: InstrumentTO;\n\topenTime: Option<Date>;\n\tcloseTime: Date;\n\topenPrice: Option<number>;\n\tclosePrice: Option<number>;\n\tswaps: Option<number>;\n\tcommissions: Option<number>;\n\tside: 'BUY' | 'SELL';\n\tprofitSize: Option<number>;\n\torderId: number;\n\taccountId: string;\n\torderChainId: string;\n\tocoGroupCode: Option<string>;\n\tbracketGroupCode: Option<string>;\n\tinstrumentId: number;\n\tstatus:\n\t\t| 'SENDING'\n\t\t| 'PENDING'\n\t\t| 'PLACED'\n\t\t| 'WAITING_CONDITION'\n\t\t| 'WAITING_TRIGGER'\n\t\t| 'WAITING_LIMIT'\n\t\t| 'WAITING_STOP'\n\t\t| 'WORKING'\n\t\t| 'CANCELING'\n\t\t| 'REPLACING'\n\t\t| 'CANCELED'\n\t\t| 'COMPLETED'\n\t\t| 'REJECTED'\n\t\t| 'EXPIRED'\n\t\t| 'EXECUTING'\n\t\t| 'UNKNOWN';\n\tstatusDescription: string;\n\tcreatedTime: Date;\n\tmodifiedTime: Date;\n\tquantity: number;\n\tremainingQuantity: number;\n\tfilledQuantity: number;\n\ttype:\n\t\t| 'CANCEL'\n\t\t| 'MARKET'\n\t\t| 'AUTO'\n\t\t| 'LIMIT'\n\t\t| 'STOP'\n\t\t| 'TRIGGERED_STOP'\n\t\t| 'STOP_LIMIT'\n\t\t| 'TRIGGERED_LIMIT'\n\t\t| 'TRAIL_STOP'\n\t\t| 'TRAIL_STOP_LIMIT'\n\t\t| 'OCO';\n\tlimitPrice: Option<number>;\n\taveragePrice: Option<number>;\n\tstopPrice: Option<number>;\n\tstopLimitPrice: Option<number>;\n\ttriggerPrice: Option<number>;\n\tliquidation: Option<boolean>;\n\ttrailPrice: Option<number>;\n\tattached: boolean;\n\tstopPriceOffset: Option<number>;\n\tstopPriceOffsetPercent: Option<number>;\n\trequestId: Option<string>;\n\ttimeInForce: Option<'DAY' | 'GTC' | 'IOC' | 'GTD' | 'FOK'>;\n\tfillPrice: Option<number>;\n\texpireAt: Option<Date>;\n\tclosedPL: Option<number>;\n\tparentOrderId: Option<string>;\n\tthenOrdersIds: Option<Array<string>>;\n\torderRole: Option<\n\t\t'SIMPLE' | 'OCO_ORDER' | 'IF_ORDER' | 'THEN_ORDER' | 'THEN_OCO_ORDER' | 'BRACKET_ORDER' | 'THEN_BRACKET_ORDER'\n\t>;\n\torderGroupCode: Option<number>;\n\ttakeProfit: Option<ProtectionOrderTO>;\n\tstopLoss: Option<ProtectionOrderTO>;\n\tpositionEffect: Option<'OPENING' | 'CLOSING'>;\n\texchange: Option<string>;\n\tlastFillTime: Option<Date>;\n\tstopPriceTriggerTime: Option<Date>;\n\thasTriggeredStop: boolean;\n\tcommissionFee: Option<number>;\n\talertExpression: Option<string>;\n\treason: Option<ExecutionMessageTO>;\n\tadditionalParameters: { [key: string]: string };\n};\nexport const HistoryOrderTOIO = type({\n\tinstrument: InstrumentTOIO,\n\topenTime: createOptionFromNullable(DateFromISOString),\n\tcloseTime: DateFromISOString,\n\topenPrice: createOptionFromNullable(number),\n\tclosePrice: createOptionFromNullable(number),\n\tswaps: createOptionFromNullable(number),\n\tcommissions: createOptionFromNullable(number),\n\tside: union([literal('BUY'), literal('SELL')]),\n\tprofitSize: createOptionFromNullable(number),\n\torderId: number,\n\taccountId: string,\n\torderChainId: string,\n\tocoGroupCode: createOptionFromNullable(string),\n\tbracketGroupCode: createOptionFromNullable(string),\n\tinstrumentId: number,\n\tstatus: union([\n\t\tliteral('SENDING'),\n\t\tliteral('PENDING'),\n\t\tliteral('PLACED'),\n\t\tliteral('WAITING_CONDITION'),\n\t\tliteral('WAITING_TRIGGER'),\n\t\tliteral('WAITING_LIMIT'),\n\t\tliteral('WAITING_STOP'),\n\t\tliteral('WORKING'),\n\t\tliteral('CANCELING'),\n\t\tliteral('REPLACING'),\n\t\tliteral('CANCELED'),\n\t\tliteral('COMPLETED'),\n\t\tliteral('REJECTED'),\n\t\tliteral('EXPIRED'),\n\t\tliteral('EXECUTING'),\n\t\tliteral('UNKNOWN'),\n\t]),\n\tstatusDescription: string,\n\tcreatedTime: DateFromISOString,\n\tmodifiedTime: DateFromISOString,\n\tquantity: number,\n\tremainingQuantity: number,\n\tfilledQuantity: number,\n\ttype: union([\n\t\tliteral('CANCEL'),\n\t\tliteral('MARKET'),\n\t\tliteral('AUTO'),\n\t\tliteral('LIMIT'),\n\t\tliteral('STOP'),\n\t\tliteral('TRIGGERED_STOP'),\n\t\tliteral('STOP_LIMIT'),\n\t\tliteral('TRIGGERED_LIMIT'),\n\t\tliteral('TRAIL_STOP'),\n\t\tliteral('TRAIL_STOP_LIMIT'),\n\t\tliteral('OCO'),\n\t]),\n\tlimitPrice: createOptionFromNullable(number),\n\taveragePrice: createOptionFromNullable(number),\n\tstopPrice: createOptionFromNullable(number),\n\tstopLimitPrice: createOptionFromNullable(number),\n\ttriggerPrice: createOptionFromNullable(number),\n\tliquidation: createOptionFromNullable(boolean),\n\ttrailPrice: createOptionFromNullable(number),\n\tattached: boolean,\n\tstopPriceOffset: createOptionFromNullable(number),\n\tstopPriceOffsetPercent: createOptionFromNullable(number),\n\trequestId: createOptionFromNullable(string),\n\ttimeInForce: createOptionFromNullable(\n\t\tunion([literal('DAY'), literal('GTC'), literal('IOC'), literal('GTD'), literal('FOK')]),\n\t),\n\tfillPrice: createOptionFromNullable(number),\n\texpireAt: createOptionFromNullable(DateFromISOString),\n\tclosedPL: createOptionFromNullable(number),\n\tparentOrderId: createOptionFromNullable(string),\n\tthenOrdersIds: createOptionFromNullable(array(string)),\n\torderRole: createOptionFromNullable(\n\t\tunion([\n\t\t\tliteral('SIMPLE'),\n\t\t\tliteral('OCO_ORDER'),\n\t\t\tliteral('IF_ORDER'),\n\t\t\tliteral('THEN_ORDER'),\n\t\t\tliteral('THEN_OCO_ORDER'),\n\t\t\tliteral('BRACKET_ORDER'),\n\t\t\tliteral('THEN_BRACKET_ORDER'),\n\t\t]),\n\t),\n\torderGroupCode: createOptionFromNullable(number),\n\ttakeProfit: createOptionFromNullable(ProtectionOrderTOIO),\n\tstopLoss: createOptionFromNullable(ProtectionOrderTOIO),\n\tpositionEffect: createOptionFromNullable(union([literal('OPENING'), literal('CLOSING')])),\n\texchange: createOptionFromNullable(string),\n\tlastFillTime: createOptionFromNullable(DateFromISOString),\n\tstopPriceTriggerTime: createOptionFromNullable(DateFromISOString),\n\thasTriggeredStop: boolean,\n\tcommissionFee: createOptionFromNullable(number),\n\talertExpression: createOptionFromNullable(string),\n\treason: createOptionFromNullable(ExecutionMessageTOIO),\n\tadditionalParameters: dictionary(string, string),\n});\n","import { HistoryOrderTO, HistoryOrderTOIO } from '../../generated/swagger/definitions/HistoryOrderTO';\nimport { literal, type, array } from 'io-ts';\n\nexport const HISTORY_ORDER = 'HISTORY_ORDER';\n\nexport type HistoryOrderMessageTO = {\n\ttype: typeof HISTORY_ORDER;\n\tbody: HistoryOrderTO[];\n};\n\nexport const historyOrderMessageTOIO = type({\n\ttype: literal(HISTORY_ORDER),\n\tbody: array(HistoryOrderTOIO),\n});\n","import { literal, Tagged, type, voidType } from 'io-ts';\n\nexport const ACCOUNT_SWITCHED = 'ACCOUNT_SWITCHED';\n\nexport type AccountSwitchedMessageTO = {\n\ttype: typeof ACCOUNT_SWITCHED;\n\tbody: void;\n};\n\nexport const accountSwitchedMessageTO: Tagged<'type', AccountSwitchedMessageTO, unknown> = type({\n\ttype: literal(ACCOUNT_SWITCHED),\n\tbody: voidType,\n});\n","import { string, type } from 'io-ts';\n\nexport type AvaTokenTO = { avaToken: string };\nexport const AvaTokenTOIO = type({ avaToken: string });\n","import * as t from 'io-ts';\nimport { AvaTokenTO, AvaTokenTOIO } from '../../generated/swagger/definitions/AvaTokenTO';\n\nexport const AVA_TOKEN = 'AVA_TOKEN';\n\nexport type AvaTokenMessageTO = {\n\ttype: typeof AVA_TOKEN;\n\tbody: AvaTokenTO;\n};\n\nexport const avaTokenMessageTO: t.Tagged<'type', AvaTokenMessageTO, unknown> = t.type({\n\ttype: t.literal(AVA_TOKEN),\n\tbody: AvaTokenTOIO,\n});\n","import { string, type } from 'io-ts';\n\nexport type AvaAccountTO = { accountId: string; serverName: string };\nexport const AvaAccountTOIO = type({ accountId: string, serverName: string });\n","import { AvaAccountTO, AvaAccountTOIO } from '../definitions/AvaAccountTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { union, literal, string, array, boolean, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type AvaSystemSettingsTO = {\n\tplatformType: 'DEV' | 'PROD';\n\treloginPage: string;\n\tavailableAccounts: Array<AvaAccountTO>;\n\tpreviewUser: Option<boolean>;\n};\nexport const AvaSystemSettingsTOIO = type({\n\tplatformType: union([literal('DEV'), literal('PROD')]),\n\treloginPage: string,\n\tavailableAccounts: array(AvaAccountTOIO),\n\tpreviewUser: createOptionFromNullable(boolean),\n});\n","import { AvaSystemSettingsTO, AvaSystemSettingsTOIO } from '../../generated/swagger/definitions/AvaSystemSettingsTO';\nimport { type, literal } from 'io-ts';\n\nexport const AVA_SYSTEM_SETTINGS = 'AVA_SYSTEM_SETTINGS';\n\nexport type AvaSystemSettingsMessageTO = {\n\ttype: typeof AVA_SYSTEM_SETTINGS;\n\tbody: AvaSystemSettingsTO;\n};\n\nexport const avaSystemSettingsMessageTOIO = type({\n\ttype: literal(AVA_SYSTEM_SETTINGS),\n\tbody: AvaSystemSettingsTOIO,\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { number, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type AccountSettingsTO = { liquidationLevel: Option<number>; marginAlertLevel1: Option<number> };\nexport const AccountSettingsTOIO = type({\n\tliquidationLevel: createOptionFromNullable(number),\n\tmarginAlertLevel1: createOptionFromNullable(number),\n});\n","import { type, literal } from 'io-ts';\nimport { AccountSettingsTO, AccountSettingsTOIO } from '../../generated/swagger/definitions/AccountSettingsTO';\n\nexport const ACCOUNT_SETTINGS = 'ACCOUNT_SETTINGS';\n\nexport type AccountSettingsMessageTO = {\n\ttype: typeof ACCOUNT_SETTINGS;\n\tbody: AccountSettingsTO;\n};\n\nexport const accountSettingsMessageTOIO = type({\n\ttype: literal(ACCOUNT_SETTINGS),\n\tbody: AccountSettingsTOIO,\n});\n","import { string, number, union, literal, type } from 'io-ts';\n\nexport type LimitsDomainTO = {\n\tsymbol: string;\n\tinstrumentId: number;\n\tlimitStopDistanceType: 'PIPS' | 'PERCENT_OF_SPREAD';\n\tlimitStopDistance: number;\n\tlimitStopDistanceInPercentOfSpread: number;\n\tminOrderSize: number;\n\tmaxOrderSize: number;\n\tminOrderIncrement: number;\n\tlimitType: 'LOTS' | 'NOTIONAL_CURRENCY';\n\tdefaultOrderSize: number;\n};\nexport const LimitsDomainTOIO = type({\n\tsymbol: string,\n\tinstrumentId: number,\n\tlimitStopDistanceType: union([literal('PIPS'), literal('PERCENT_OF_SPREAD')]),\n\tlimitStopDistance: number,\n\tlimitStopDistanceInPercentOfSpread: number,\n\tminOrderSize: number,\n\tmaxOrderSize: number,\n\tminOrderIncrement: number,\n\tlimitType: union([literal('LOTS'), literal('NOTIONAL_CURRENCY')]),\n\tdefaultOrderSize: number,\n});\n","import { array, literal, type } from 'io-ts';\nimport { LimitsDomainTO, LimitsDomainTOIO } from '../../generated/swagger/definitions/LimitsDomainTO';\n\nexport const LIMITS = 'LIMITS';\n\nexport type LimitsDomainMessageTO = {\n\ttype: typeof LIMITS;\n\tbody: Array<LimitsDomainTO>;\n};\n\nexport const limitsDomainMessageTOIO = type({\n\ttype: literal(LIMITS),\n\tbody: array(LimitsDomainTOIO),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { string, number, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type InstrumentInfoTO = {\n\tsymbol: string;\n\tdayChange: Option<number>;\n\tweekChange: Option<number>;\n\tmonthChange: Option<number>;\n\tsentimentBuy: Option<number>;\n\tsentimentSell: Option<number>;\n};\nexport const InstrumentInfoTOIO = type({\n\tsymbol: string,\n\tdayChange: createOptionFromNullable(number),\n\tweekChange: createOptionFromNullable(number),\n\tmonthChange: createOptionFromNullable(number),\n\tsentimentBuy: createOptionFromNullable(number),\n\tsentimentSell: createOptionFromNullable(number),\n});\n","import { type, literal, array } from 'io-ts';\nimport { InstrumentInfoTOIO, InstrumentInfoTO } from '../../generated/swagger/definitions/InstrumentInfoTO';\n\nexport const AVA_INSTRUMENT_INFO = 'AVA_INSTRUMENT_INFO';\n\nexport type AvaInstrumentInfoMessageTO = {\n\ttype: typeof AVA_INSTRUMENT_INFO;\n\tbody: InstrumentInfoTO[];\n};\n\nexport const avaInstrumentInfoMessageTOIO = type({\n\ttype: literal(AVA_INSTRUMENT_INFO),\n\tbody: array(InstrumentInfoTOIO),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { string, number, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type AvaWatchListInstrumentInfoTO = { symbol: string; dayChange: Option<number> };\nexport const AvaWatchListInstrumentInfoTOIO = type({ symbol: string, dayChange: createOptionFromNullable(number) });\n","import { type, literal, array } from 'io-ts';\nimport {\n\tAvaWatchListInstrumentInfoTOIO,\n\tAvaWatchListInstrumentInfoTO,\n} from '../../generated/swagger/definitions/AvaWatchListInstrumentInfoTO';\n\nexport const AVA_WATCH_LIST_INSTRUMENT_INFO = 'AVA_WATCH_LIST_INSTRUMENT_INFO';\n\nexport type AvaWatchListInstrumentInfoMessageTO = {\n\ttype: typeof AVA_WATCH_LIST_INSTRUMENT_INFO;\n\tbody: AvaWatchListInstrumentInfoTO[];\n};\n\nexport const AvaWatchListInstrumentInfoMessageTOIO = type({\n\ttype: literal(AVA_WATCH_LIST_INSTRUMENT_INFO),\n\tbody: array(AvaWatchListInstrumentInfoTOIO),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { union, literal, string, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type LogoutReasonTO = {\n\treasonType: Option<\n\t\t| 'SESSION_EXPIRED'\n\t\t| 'USER_DISABLED'\n\t\t| 'SESSION_CLOSED_BY_DEALER'\n\t\t| 'SESSION_CLOSED_BY_REQUEST'\n\t\t| 'EXTERNAL_USER_DISABLED'\n\t\t| 'SESSION_FORCE_OUT'\n\t\t| 'UNKNOWN'\n\t>;\n\tmessage: Option<string>;\n};\nexport const LogoutReasonTOIO = type({\n\treasonType: createOptionFromNullable(\n\t\tunion([\n\t\t\tliteral('SESSION_EXPIRED'),\n\t\t\tliteral('USER_DISABLED'),\n\t\t\tliteral('SESSION_CLOSED_BY_DEALER'),\n\t\t\tliteral('SESSION_CLOSED_BY_REQUEST'),\n\t\t\tliteral('EXTERNAL_USER_DISABLED'),\n\t\t\tliteral('SESSION_FORCE_OUT'),\n\t\t\tliteral('UNKNOWN'),\n\t\t]),\n\t),\n\tmessage: createOptionFromNullable(string),\n});\n","import { LogoutReasonTO, LogoutReasonTOIO } from '../definitions/LogoutReasonTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { string, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type LogoutEventTO = { message: string; reasonTO: Option<LogoutReasonTO> };\nexport const LogoutEventTOIO = type({ message: string, reasonTO: createOptionFromNullable(LogoutReasonTOIO) });\n","import * as t from 'io-ts';\nimport { LogoutEventTO, LogoutEventTOIO } from '../../generated/swagger/definitions/LogoutEventTO';\n\nexport const LOGOUT_EVENT = 'LOGOUT_EVENT';\n\nexport type LogoutEventMessageTO = {\n\ttype: typeof LOGOUT_EVENT;\n\tbody: LogoutEventTO;\n};\n\nexport const logoutEvenyMessageTO: t.Tagged<'type', LogoutEventMessageTO, unknown> = t.type({\n\ttype: t.literal(LOGOUT_EVENT),\n\tbody: LogoutEventTOIO,\n});\n","import * as t from 'io-ts';\nimport {\n\tQUOTE_SUBSCRIPTION_INITIALIZED,\n\tQuoteSubscriptionInitializedMessageTO,\n\tquoteSubscriptionInitializedMessageTO,\n} from './to/quote-subscription-initialized-message.to';\nimport { QUOTE, quoteMessageTO, QuoteMessageTO } from './to/quote-message.to';\nimport { SUMMARY, summaryMessageTO, SummaryMessageTO } from './to/summary-message.to';\nimport { ACCOUNT_METRICS, accountMetricsMessageTO, AccountMetricsMessageTO } from './to/account-metrics-message.to';\nimport { CHART, ChartMessageTO, chartMessageTO } from './to/chart-message.to';\nimport { instrumentMessageTO, InstrumentMessageTO, INSTRUMENTS } from './to/instrument-message.to';\nimport { ACCOUNTS, accountsMessageTO, AccountsMessageTO } from './to/accounts-message.to';\nimport { POSITIONS, PositionMessageTO, positionMessageTOIO } from './to/position-message.to';\nimport {\n\tPOSITION_METRICS,\n\tFxPositionMetricsMessageTo,\n\tpositionMetricsMessageTOIO,\n} from './to/fx-position-metrics-message.to';\nimport { AVAILABLE_WATCHLISTS, WatchlistMessageTO, watchlistMessageTOIO } from './to/watchlist-message.to';\nimport {\n\tWATCHLIST_SUBSCRIPTION_INITIALIZED,\n\twatchlistSubscriptionInitializedMessageTO,\n\tWatchlistSubscriptionInitializedMessageTO,\n} from './to/watchlist-subbscription-initialized-message.to';\nimport {\n\twatchlistContentMessageTO,\n\tWatchlistContentMessageTO,\n\tWATCHLISTS_CONTENT,\n} from './to/watchlist-content-message.to';\nimport {\n\tGLOBAL_CHART_SETTINGS,\n\tglobalChartSettingsMessageTO,\n\tGlobalChartSettingsMessageTO,\n} from './to/global-chart-settings-message.to';\nimport { CONVERSION_RATE, ConversionRateMessageTO, conversionRateMessageTO } from './to/conversion-rate-message.to';\nimport { MARGIN_IMPACT, MarginImpactMessageTO, marginImpactsMessageTOIO } from './to/margin-impacts-message.to';\nimport { UserInfoMessageTO, userInfoMessageTO, USER_LOGIN_INFO } from './to/user-message.to';\nimport { ORDERS, OrdersMessageTO, ordersMessageTOIO } from './to/orders-message.to';\nimport { HISTORY_ORDER, HistoryOrderMessageTO, historyOrderMessageTOIO } from './to/history-order-message.to';\nimport { ACCOUNT_SWITCHED, AccountSwitchedMessageTO, accountSwitchedMessageTO } from './to/account-switched-message.to';\nimport { AVA_TOKEN, AvaTokenMessageTO, avaTokenMessageTO } from './to/ava-token-message.to';\nimport {\n\tavaSystemSettingsMessageTOIO,\n\tAVA_SYSTEM_SETTINGS,\n\tAvaSystemSettingsMessageTO,\n} from './to/ava-system-settings-message.to';\nimport {\n\tAccountSettingsMessageTO,\n\tACCOUNT_SETTINGS,\n\taccountSettingsMessageTOIO,\n} from './to/account-settings-message.to';\nimport { LIMITS, LimitsDomainMessageTO, limitsDomainMessageTOIO } from './to/limits-domain-message.to';\nimport {\n\tAVA_INSTRUMENT_INFO,\n\tAvaInstrumentInfoMessageTO,\n\tavaInstrumentInfoMessageTOIO,\n} from './to/ava-instrument-info-message.to';\nimport {\n\tAVA_WATCH_LIST_INSTRUMENT_INFO,\n\tAvaWatchListInstrumentInfoMessageTO,\n\tAvaWatchListInstrumentInfoMessageTOIO,\n} from './to/ava-watchlist-instrument-info-message.to';\nimport { LOGOUT_EVENT, LogoutEventMessageTO, logoutEvenyMessageTO } from './to/logout-event-message.to';\n\nexport type SocketMessageTO =\n\t| QuoteSubscriptionInitializedMessageTO\n\t| QuoteMessageTO\n\t| SummaryMessageTO\n\t| ConversionRateMessageTO\n\t| AvaTokenMessageTO\n\t| AccountMetricsMessageTO\n\t| ChartMessageTO\n\t| InstrumentMessageTO\n\t| AccountsMessageTO\n\t| AccountSwitchedMessageTO\n\t| OrdersMessageTO\n\t| MarginImpactMessageTO\n\t| PositionMessageTO\n\t| FxPositionMetricsMessageTo\n\t| WatchlistMessageTO\n\t| WatchlistSubscriptionInitializedMessageTO\n\t| WatchlistContentMessageTO\n\t| GlobalChartSettingsMessageTO\n\t| UserInfoMessageTO\n\t| HistoryOrderMessageTO\n\t| LimitsDomainMessageTO\n\t| AvaSystemSettingsMessageTO\n\t| AccountSettingsMessageTO\n\t| AvaInstrumentInfoMessageTO\n\t| AvaWatchListInstrumentInfoMessageTO\n\t| LogoutEventMessageTO;\n\nexport const socketMessageTO: t.Tagged<'type', SocketMessageTO, unknown> = t.taggedUnion('type', [\n\tquoteSubscriptionInitializedMessageTO,\n\tquoteMessageTO,\n\tsummaryMessageTO,\n\tconversionRateMessageTO,\n\tchartMessageTO,\n\tavaTokenMessageTO,\n\taccountMetricsMessageTO,\n\tinstrumentMessageTO,\n\taccountsMessageTO,\n\taccountSwitchedMessageTO,\n\tordersMessageTOIO,\n\tpositionMessageTOIO,\n\tpositionMetricsMessageTOIO,\n\tmarginImpactsMessageTOIO,\n\twatchlistMessageTOIO,\n\twatchlistSubscriptionInitializedMessageTO,\n\twatchlistContentMessageTO,\n\tglobalChartSettingsMessageTO,\n\tuserInfoMessageTO,\n\thistoryOrderMessageTOIO,\n\tlimitsDomainMessageTOIO,\n\tavaSystemSettingsMessageTOIO,\n\taccountSettingsMessageTOIO,\n\tavaInstrumentInfoMessageTOIO,\n\tAvaWatchListInstrumentInfoMessageTOIO,\n\tlogoutEvenyMessageTO,\n]);\n\nexport const isQuoteSubscriptionInitializedTO = (to: SocketMessageTO): to is QuoteSubscriptionInitializedMessageTO =>\n\tto.type === QUOTE_SUBSCRIPTION_INITIALIZED;\n\nexport const isQuoteTO = (to: SocketMessageTO): to is QuoteMessageTO => to.type === QUOTE;\n\nexport const isSummaryTO = (to: SocketMessageTO): to is SummaryMessageTO => to.type === SUMMARY;\n\nexport const isConversionRateTO = (to: SocketMessageTO): to is ConversionRateMessageTO => to.type === CONVERSION_RATE;\n\nexport const isChartTO = (to: SocketMessageTO): to is ChartMessageTO => to.type === CHART;\n\nexport const isAvaTokenTO = (to: SocketMessageTO): to is AvaTokenMessageTO => to.type === AVA_TOKEN;\n\nexport const isAccountMetricsTO = (to: SocketMessageTO): to is AccountMetricsMessageTO => to.type === ACCOUNT_METRICS;\n\nexport const isInstrumentTO = (to: SocketMessageTO): to is InstrumentMessageTO => to.type === INSTRUMENTS;\n\nexport const isAccountsTO = (to: SocketMessageTO): to is AccountsMessageTO => to.type === ACCOUNTS;\n\nexport const isAccountSwitchedTO = (to: SocketMessageTO): to is AccountSwitchedMessageTO =>\n\tto.type === ACCOUNT_SWITCHED;\n\nexport const isOrdersTO = (to: SocketMessageTO): to is OrdersMessageTO => to.type === ORDERS;\n\nexport const isLimitsTO = (to: SocketMessageTO): to is LimitsDomainMessageTO => to.type === LIMITS;\n\nexport const isHistoryOrderTO = (to: SocketMessageTO): to is HistoryOrderMessageTO => to.type === HISTORY_ORDER;\n\nexport const isPositionTO = (to: SocketMessageTO): to is PositionMessageTO => to.type === POSITIONS;\n\nexport const isPositionMetricsTO = (to: SocketMessageTO): to is FxPositionMetricsMessageTo =>\n\tto.type === POSITION_METRICS;\n\nexport const isWatchlistTO = (to: SocketMessageTO): to is WatchlistMessageTO => to.type === AVAILABLE_WATCHLISTS;\n\nexport const isMarginImpactTO = (to: SocketMessageTO): to is MarginImpactMessageTO => to.type === MARGIN_IMPACT;\n\nexport const isWatchlistSubscriptionInitializedTO = (\n\tto: SocketMessageTO,\n): to is WatchlistSubscriptionInitializedMessageTO => to.type === WATCHLIST_SUBSCRIPTION_INITIALIZED;\n\nexport const isWatchlistContentTO = (to: SocketMessageTO): to is WatchlistContentMessageTO =>\n\tto.type === WATCHLISTS_CONTENT;\n\nexport const isGlobalChartSettingsTO = (to: SocketMessageTO): to is GlobalChartSettingsMessageTO =>\n\tto.type === GLOBAL_CHART_SETTINGS;\n\nexport const isUserInfoTO = (to: SocketMessageTO): to is UserInfoMessageTO => to.type === USER_LOGIN_INFO;\n\nexport const isAvaSystemSettingsTO = (to: SocketMessageTO): to is AvaSystemSettingsMessageTO =>\n\tto.type === AVA_SYSTEM_SETTINGS;\n\nexport const isAccountSettingsTO = (to: SocketMessageTO): to is AccountSettingsMessageTO =>\n\tto.type === ACCOUNT_SETTINGS;\n\nexport const isAvaInstrumentInfoTO = (to: SocketMessageTO): to is AvaInstrumentInfoMessageTO =>\n\tto.type === AVA_INSTRUMENT_INFO;\n\nexport const isAvaWatchListInstrumentInfoTO = (to: SocketMessageTO): to is AvaWatchListInstrumentInfoMessageTO =>\n\tto.type === AVA_WATCH_LIST_INSTRUMENT_INFO;\n\nexport const isLogoutEventTO = (to: SocketMessageTO): to is LogoutEventMessageTO => to.type === LOGOUT_EVENT;\n","import { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { PathReporter } from 'io-ts/lib/PathReporter';\nimport { socketMessageTO, SocketMessageTO } from './socket/socket-message.to';\nimport { fromOption, pending, RemoteData } from '@devexperts/remote-data-ts';\nimport * as atmosphere from 'atmosphere.js';\nimport * as O from 'fp-ts/lib/Option';\nimport * as E from 'fp-ts/lib/Either';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type ConnectionStatus = 'TIMEDOUT' | 'ERROR' | 'WORKING';\n\nexport type SocketClient = {\n\treadonly uuid$: LiveData<Error, string>;\n\treadonly message$: Observable<SocketMessageTO>;\n\treadonly connectionStatus$: Observable<ConnectionStatus>;\n};\n\nexport type IdleSocketClient = SocketClient & {\n\treadonly run: () => void;\n};\n\nconst MAX_STREAM_SIZE = 2000000;\nconst RECONNECT_INTERVAL = 300;\nconst SESSION_STATE_RECOVER = 'dx-recover';\nconst SESSION_STATE_NEW = 'dx-new';\n\nconst subscribe = atmosphere.subscribe as (request?: Atmosphere.Request) => Atmosphere.Request;\n\nexport const createSocketClient = (socketURL: string): IdleSocketClient => {\n\tconst uuid$ = new BehaviorSubject<RemoteData<Error, string>>(pending);\n\tconst onMessage = createHandler<SocketMessageTO>();\n\tconst onConnectionStatusChange = createHandler<ConnectionStatus>();\n\n\t/**\n\t * @mutable\n\t */\n\tconst request: Atmosphere.Request = {\n\t\turl: socketURL,\n\t\ttransport: 'websocket',\n\t\tfallbackTransport: 'streaming',\n\t\twithCredentials: true,\n\t\tenableProtocol: true,\n\t\tenableXDR: true,\n\t\trewriteURL: true,\n\t\ttrackMessageLength: true,\n\t\tmaxStreamingLength: MAX_STREAM_SIZE,\n\t\treconnectInterval: RECONNECT_INTERVAL,\n\t\tattachHeadersAsQueryString: true,\n\t\theaders: {\n\t\t\tsessionState: SESSION_STATE_NEW,\n\t\t},\n\t\tonMessage(message) {\n\t\t\tif (message && message.responseBody) {\n\t\t\t\ttry {\n\t\t\t\t\tconst parsed = JSON.parse(message.responseBody);\n\t\t\t\t\tconst decoded = socketMessageTO.decode(parsed);\n\t\t\t\t\tconst errorReport = PathReporter.report(decoded);\n\t\t\t\t\tif (E.isRight(decoded)) {\n\t\t\t\t\t\tif (errorReport[0] !== 'No errors!') {\n\t\t\t\t\t\t\tconsole.error('VALIDATION TOIO HAS ERRORS', parsed, errorReport);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMessage.handle(decoded.value);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\tonConnectionStatusChange.handle('WORKING');\n\t\t},\n\t\tonOpen(response) {\n\t\t\t//overwrite\n\t\t\trequest.headers.sessionState = SESSION_STATE_RECOVER;\n\t\t\tuuid$.next(\n\t\t\t\tfromOption(\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tresponse,\n\t\t\t\t\t\tO.fromNullable,\n\t\t\t\t\t\tO.mapNullable(response => response.request),\n\t\t\t\t\t\tO.mapNullable(request => request.uuid),\n\t\t\t\t\t),\n\t\t\t\t\t() => new Error('Cannot read UUID from Atmosphere event'),\n\t\t\t\t),\n\t\t\t);\n\t\t},\n\t\tonClientTimeout() {\n\t\t\tonConnectionStatusChange.handle('TIMEDOUT');\n\t\t},\n\t\tonError() {\n\t\t\tonConnectionStatusChange.handle('ERROR');\n\t\t},\n\t};\n\n\treturn {\n\t\tuuid$,\n\t\tmessage$: onMessage.value$,\n\t\tconnectionStatus$: onConnectionStatusChange.value$,\n\t\trun() {\n\t\t\tsubscribe(request);\n\t\t},\n\t};\n};\n","import { MonoTypeOperatorFunction } from 'rxjs';\nimport { getSetoid, RemoteData } from '@devexperts/remote-data-ts';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { Eq } from 'fp-ts/lib/Eq';\nimport { setoidStrict } from '@devexperts/utils/dist/typeclasses/setoid/setoid.utils';\n\nexport function distinctUntilChangedStrict<L, A>(setoid: Eq<A>): MonoTypeOperatorFunction<RemoteData<L, A>> {\n\treturn distinctUntilChanged(getSetoid(setoidStrict, setoid).equals) as any;\n}\n","import { Eq, strictEqual, eqString, eqNumber, eqDate } from 'fp-ts/lib/Eq';\nimport { getEq, Option, getOrd } from 'fp-ts/lib/Option';\nimport { getEq as getEqArray } from 'fp-ts/lib/Array';\nimport { ordNumber } from 'fp-ts/lib/Ord';\nimport { distinctUntilChangedStrict } from './live-data.utils';\n\nexport const setoidStrict: Eq<unknown> = {\n\tequals: strictEqual,\n};\n\nexport const setoidOptionString = getEq(eqString);\nexport const setoidOptionNumber = getEq(eqNumber);\nexport const setoidOptionDate = getEq(eqDate);\nexport const distinctRDString = distinctUntilChangedStrict<Error, string>(eqString);\nexport const distinctRDOptionString = distinctUntilChangedStrict<Error, Option<string>>(getEq(eqString));\nexport const distinctRDNumber = distinctUntilChangedStrict<Error, number>(eqNumber);\nexport const distinctRDOptionNumber = distinctUntilChangedStrict<Error, Option<number>>(getEq(eqNumber));\nexport const distinctRDOptionDate = distinctUntilChangedStrict<Error, Option<Date>>(getEq(eqDate));\nexport const distinctRDNumberArray = distinctUntilChangedStrict<Error, number[]>(getEqArray(ordNumber));\nexport const distinctRDOptionNumberArray = distinctUntilChangedStrict<Error, Option<number>[]>(\n\tgetEqArray(getOrd(ordNumber)),\n);\n","import { Observable, of, Subject } from 'rxjs';\nimport { failure, pending, RemoteData, success } from '@devexperts/remote-data-ts';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { startWith, switchMap, catchError } from 'rxjs/operators';\nimport { stringify } from 'querystring';\nimport { TAPIClient } from './generated/swagger/client/client';\nimport { fromPromise } from 'rxjs/internal-compatibility';\nimport { distinctRDString } from '../utils/setoid.utils';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { ServerError } from '../utils/server-error.utils';\nimport { shareReplayWithDefaults } from '../utils/rxjs/shareReplayWithDefaults';\n\nexport type ApiRequest = {\n\turl: string;\n\tquery?: object;\n\tbody?: unknown;\n};\nexport type FullApiRequest = ApiRequest & {\n\tmethod: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH' | 'HEAD' | 'OPTIONS';\n};\ntype FetchHeaders =\n\t| {\n\t\t\t'x-atmosphere-tracking-id': string;\n\t\t\t'Content-Type': string;\n\t  }\n\t| { 'Content-Type': string };\n\nexport interface ApiClient extends TAPIClient {\n\treadonly error$: Observable<Error>;\n\treadonly request: <R>(request: FullApiRequest) => LiveData<Error, R>;\n\treadonly get: <R>(request: ApiRequest) => LiveData<Error, R>;\n\treadonly post: <R>(request: ApiRequest) => LiveData<Error, R>;\n\treadonly remove: <R>(request: ApiRequest) => LiveData<Error, R>;\n\treadonly put: <R>(request: ApiRequest) => LiveData<Error, R>;\n}\n\nexport const createApiClient = (baseHref: string, uuid$?: LiveData<Error, string>): ApiClient => {\n\tconst errorSubj$ = new Subject<Error>();\n\tconst error$ = errorSubj$.asObservable();\n\n\tconst sharedUuid$ = pipe(\n\t\tO.fromNullable(uuid$),\n\t\tO.map(uuid$ =>\n\t\t\tuuid$.pipe(\n\t\t\t\tdistinctRDString,\n\t\t\t\tshareReplayWithDefaults(),\n\t\t\t),\n\t\t),\n\t\tO.getOrElse<LiveData<Error, string>>(() => of(pending)),\n\t);\n\n\tconst request = <R = never>(request: FullApiRequest): LiveData<Error, R> => {\n\t\tconst url = `${baseHref}${buildUrl(request.url, request.query)}`;\n\t\treturn sharedUuid$.pipe(\n\t\t\tswitchMap(uuid => {\n\t\t\t\tconst headers = uuid\n\t\t\t\t\t.map<FetchHeaders>(uuid => ({\n\t\t\t\t\t\t'x-atmosphere-tracking-id': uuid,\n\t\t\t\t\t\t'Content-Type': 'application/json; charset=UTF-8',\n\t\t\t\t\t}))\n\t\t\t\t\t.getOrElse({ 'Content-Type': 'application/json; charset=UTF-8' });\n\n\t\t\t\tconst init: RequestInit = {\n\t\t\t\t\tmethod: request.method,\n\t\t\t\t\tcredentials: 'include',\n\t\t\t\t\tredirect: 'follow',\n\t\t\t\t\theaders,\n\t\t\t\t\tbody: JSON.stringify(request.body),\n\t\t\t\t};\n\n\t\t\t\treturn fromPromise<RemoteData<Error, R>>(\n\t\t\t\t\tfetch(url, init)\n\t\t\t\t\t\t.then(response => {\n\t\t\t\t\t\t\tif (!response.ok) {\n\t\t\t\t\t\t\t\tthrow new ServerError(response.status, response.statusText);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn response;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(response => response.text())\n\t\t\t\t\t\t.then(text => (text === '' ? undefined : JSON.parse(text)))\n\t\t\t\t\t\t.then(response => success<Error, R>(response)),\n\t\t\t\t);\n\t\t\t}),\n\t\t\tcatchError<RemoteData<Error, R>, LiveData<Error, R>>(response => {\n\t\t\t\terrorSubj$.next(response);\n\t\t\t\treturn of(failure(response));\n\t\t\t}),\n\t\t\tstartWith(pending),\n\t\t);\n\t};\n\n\tconst get = <R = never>(apiRequest: ApiRequest): LiveData<Error, R> =>\n\t\trequest({\n\t\t\t...apiRequest,\n\t\t\tmethod: 'GET',\n\t\t});\n\n\tconst post = <Response = never>(apiRequest: ApiRequest): LiveData<Error, Response> => {\n\t\treturn request({\n\t\t\t...apiRequest,\n\t\t\tmethod: 'POST',\n\t\t});\n\t};\n\n\tconst remove = <Response = never>(apiRequest: ApiRequest): LiveData<Error, Response> => {\n\t\treturn request({\n\t\t\t...apiRequest,\n\t\t\tmethod: 'DELETE',\n\t\t});\n\t};\n\n\tconst put = <Response = never>(apiRequest: ApiRequest): LiveData<Error, Response> => {\n\t\treturn request({\n\t\t\t...apiRequest,\n\t\t\tmethod: 'PUT',\n\t\t});\n\t};\n\n\treturn {\n\t\terror$,\n\t\trequest,\n\t\tget,\n\t\tput,\n\t\tpost,\n\t\tremove,\n\t};\n};\n\nfunction buildUrl(url: string, query?: {}): string {\n\treturn query ? `${url}?${stringify(query)}` : url;\n}\n","import * as React from 'react';\nimport i18n from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport translations from '../localizations/i18n.json';\nimport { isProductionBuild } from './node-env.utils';\n\nconst detectionOptions = {\n\torder: ['querystring', 'localStorage'],\n\tlookupQuerystring: 'lang',\n\tlookupLocalStorage: 'i18nextlng',\n\tlookupFromPathIndex: 0,\n\tlookupFromSubdomainIndex: 0,\n\n\tcaches: ['localStorage'],\n};\n\ni18n.use(LanguageDetector).init({\n\tdetection: detectionOptions,\n\n\tresources: translations,\n\tfallbackLng: {\n\t\t'zh-Hans': ['zh_CN'],\n\t\tdefault: ['en'],\n\t},\n\tdebug: !isProductionBuild,\n\tnsSeparator: false,\n\tkeySeparator: false,\n\n\tinterpolation: {\n\t\tescapeValue: false,\n\t\tformatSeparator: ',',\n\t},\n\n\treact: {\n\t\twait: true,\n\t},\n\n\treturnEmptyString: false,\n});\n\nexport const i18next = i18n;\n\nexport const TRANSLATION_PLACEHOLDER = 'TRANSLATION_PLACEHOLDER';\n\nconst translate = (\n\tkey: string,\n\tdefaultTranslation: string | i18n.TOptions<i18n.StringMap>,\n\tnode: keyof React.ReactHTML,\n\ttransTemplate?: string,\n) => {\n\tconst translatedText = i18next.t(key, defaultTranslation);\n\tconst textNode = transTemplate ? transTemplate.replace(TRANSLATION_PLACEHOLDER, translatedText) : translatedText;\n\n\treturn React.createElement(\n\t\tnode,\n\t\t{\n\t\t\t'data-lokalise': true,\n\t\t\t'data-key': key,\n\t\t},\n\t\ttextNode,\n\t);\n};\n\nexport const tspan = (\n\tkey: string,\n\tdefaultTranslation: string | i18n.TOptions<i18n.StringMap>,\n\ttransTemplate?: string,\n) => {\n\treturn translate(key, defaultTranslation, 'span', transTemplate);\n};\n\nexport const getLanguageForCRM = (i18n: i18n.i18n) => {\n\tswitch (i18n.language) {\n\t\tcase 'zh_CN':\n\t\t\treturn 'zh-hans';\n\t\tdefault:\n\t\t\treturn i18n.language;\n\t}\n};\n","import { INPUT } from '@devexperts/react-kit/dist/components/input/Input';\nimport * as inputCss from '../ui-desktop/ui-kit/components/input/input.module.css';\nimport { BUTTON } from '@devexperts/react-kit/dist/components/Button/Button';\nimport * as buttonCss from '../ui-common/button/theme/button.module.css';\nimport { POPOVER } from '@devexperts/react-kit/dist/components/Popover/Popover';\nimport * as popoverCss from '../ui-desktop/ui-kit/components/popover/popover.module.css';\nimport { STEPPABLE_INPUT } from '@devexperts/react-kit/dist/components/SteppableInput/SteppableInput';\nimport * as steppableMainCss from '../ui-desktop/ui-kit/components/steppable-input/theme/steppable-input.module.css';\nimport * as steppableButtonIconCss from '../ui-desktop/ui-kit/components/steppable-input/theme/button-icon.module.css';\nimport { NUMERIC_STEPPER } from '@devexperts/react-kit/dist/components/NumericStepper/NumericStepper';\nimport { NUMERIC_STEPPER as NUMERIC_STEPPER_AVA } from '../ui-common/numeric-stepper-ava/numeric-stepper.component';\nimport * as stepperInputCss from '../ui-desktop/ui-kit/components/numeric-stepper/theme/input.module.css';\nimport * as stepperButtonIconCss from '../ui-desktop/ui-kit/components/numeric-stepper/theme/button-icon.module.css';\nimport { DATE_INPUT } from '@devexperts/react-kit/dist/components/DateInput/DateInput';\nimport * as dateInputCss from '../ui-desktop/ui-kit/components/date-input/theme/date-input.module.css';\nimport * as dateInputButtonIconCss from '../ui-desktop/ui-kit/components/date-input/theme/button-icon.module.css';\nimport { MENU } from '@devexperts/react-kit/dist/components/Menu/Menu';\nimport * as menuCss from '../ui-desktop/ui-kit/components/menu/theme/menu.module.css';\nimport { SCROLLABLE } from '@devexperts/react-kit/dist/components/Scrollable/Scrollable';\nimport * as scrollableCss from '../ui-common/scrollable/theme/scrollable.module.css';\nimport { VERTICAL_SCROLLBAR } from '@devexperts/react-kit/dist/components/Scrollbar/VerticalScrollbar';\nimport * as scrollbarCss from '../ui-common/scrollable/theme/scrollbar.module.css';\n\nexport const CONTEXT_THEME = {\n\t[INPUT]: inputCss,\n\t[BUTTON]: buttonCss,\n\t[POPOVER]: popoverCss,\n\t[STEPPABLE_INPUT]: { ...steppableMainCss, ButtonIcon: steppableButtonIconCss },\n\t[NUMERIC_STEPPER]: { Input: stepperInputCss, ButtonIcon: stepperButtonIconCss },\n\t[NUMERIC_STEPPER_AVA]: { Input: stepperInputCss, ButtonIcon: stepperButtonIconCss },\n\t[DATE_INPUT]: { ...dateInputCss, ButtonIcon: dateInputButtonIconCss, CalendarButtonIcon: dateInputButtonIconCss },\n\t[MENU]: menuCss,\n\t[SCROLLABLE]: scrollableCss,\n\t[VERTICAL_SCROLLBAR]: scrollbarCss,\n};\n","import * as React from 'react';\nimport { FunctionComponent, ReactNode } from 'react';\nimport { ThemeProvider, TTheme } from '@devexperts/react-kit/dist/utils/withTheme';\n\nimport '../preloader/theme/preloader-window.module.css';\nimport 'reset-css';\nimport './theme.module.css';\n\nimport { CONTEXT_THEME } from '../../../../config/theme.config';\n\nexport type TThemeProps = {\n\tchildren?: ReactNode;\n\ttheme?: TTheme;\n};\n\nexport const Theme: FunctionComponent<TThemeProps> = props => {\n\tconst theme = props.theme || CONTEXT_THEME;\n\treturn <ThemeProvider theme={theme}>{props.children}</ThemeProvider>;\n};\n","import { Observable } from 'rxjs/internal/Observable';\nimport { WithRXSelectorResult, withRX } from '@devexperts/react-kit/dist/utils/with-rx2';\nimport { ComponentType } from 'react';\nimport { asap } from 'rxjs/internal/scheduler/asap';\n\nexport const withRXWithDefaults = <P extends object>(Target: ComponentType<P>) => <D extends Partial<P>>(\n\tselector: (props$: Observable<Readonly<P>>) => WithRXSelectorResult<P, D>,\n) =>\n\twithRX(Target)(selector, {\n\t\tscheduler: asap,\n\t});\n","import { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { OrderStore } from '../../store/order/order.store';\nimport { PositionsStore } from '../../store/positions/positions.store';\nimport { map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\nexport type AsideViewModel = {\n\torderCount$: Observable<number>;\n\tpositionCount$: Observable<number>;\n};\n\nexport type AsideViewModelContext = {\n\torderStore: OrderStore;\n\tpositionsStore: PositionsStore;\n};\nexport type CreateAsideViewModel = () => AsideViewModel;\n\nexport const createAsideViewModel = combineContext(\n\task<AsideViewModelContext>(),\n\t(e): CreateAsideViewModel => () => {\n\t\tconst { orderStore, positionsStore } = e;\n\t\tconst orderCount$ = orderStore.keys$.pipe(map(keys => keys.length));\n\t\tconst positionCount$ = positionsStore.keys$.pipe(map(keys => keys.length));\n\n\t\treturn {\n\t\t\torderCount$,\n\t\t\tpositionCount$,\n\t\t};\n\t},\n);\n","import { PureComponent, ReactNode } from 'react';\nimport { Action } from 'history';\n\nexport type RouteLinkNavigateOptions = {\n\taction: Action;\n\thref: string;\n};\n\nexport type RouteLinkRenderProps = {\n\treadonly onNavigate: () => void;\n\treadonly isActive: boolean;\n\treadonly href: string;\n};\n\nexport type RouteLinkProps = {\n\treadonly href: string;\n\treadonly action: Action;\n\treadonly isActive: boolean;\n\treadonly isExact: boolean;\n\treadonly onNavigate: (options: RouteLinkNavigateOptions) => void;\n\treadonly render: (props: RouteLinkRenderProps) => ReactNode;\n};\n\nexport class RouteLinkComponent extends PureComponent<RouteLinkProps> {\n\trender() {\n\t\tconst { href, render, isActive } = this.props;\n\t\treturn render({\n\t\t\tonNavigate: this.handleNavigate,\n\t\t\tisActive,\n\t\t\thref,\n\t\t});\n\t}\n\n\tprivate handleNavigate = () => {\n\t\tconst { href, action, isExact, onNavigate } = this.props;\n\t\tif (!isExact) {\n\t\t\tonNavigate({\n\t\t\t\thref,\n\t\t\t\taction,\n\t\t\t});\n\t\t}\n\t};\n}\n","import { href, Router } from '../../../utils/router.utils';\nimport { RouteLinkComponent, RouteLinkProps } from '../components/route-link.component';\nimport { createElement, PureComponent } from 'react';\nimport { Omit } from 'typelevel-ts';\nimport { PartialKeys } from '@devexperts/utils/dist/object';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\nimport { combineLatest } from 'rxjs';\nimport { Match } from 'fp-ts-routing';\nimport { ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../utils/withRXWithDefaults';\n\nexport type RouteLinkContainerContext = {\n\trouter: Router;\n};\n\nconst rx = withRXWithDefaults(RouteLinkComponent);\n\nexport type RouteLinkContainerProps<A extends object> = PartialKeys<\n\tOmit<RouteLinkProps, 'onNavigate' | 'isActive' | 'isExact' | 'href'>,\n\t'action'\n> & {\n\tto: Match<A>;\n\tvalue: A;\n};\n\nexport const RouteLink = ask<RouteLinkContainerContext>().map(e => {\n\tconst Intermediate = rx(props$ => {\n\t\tconst href$ = props$.pipe(\n\t\t\tmap(props => props.href),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\t\tconst pathname$ = e.router.state$.pipe(\n\t\t\tmap(state => state.location.pathname),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\t\tconst isActive$ = combineLatest(href$, pathname$).pipe(\n\t\t\tmap(([href, pathname]) => {\n\t\t\t\tconst pattern = `^${decodeURIComponent(href)}(\\/|$)`;\n\t\t\t\tconst regexp = new RegExp(pattern);\n\n\t\t\t\treturn regexp.test(decodeURIComponent(pathname));\n\t\t\t}),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\t\tconst isExact$ = combineLatest(href$, pathname$).pipe(\n\t\t\tmap(([href, pathname]) => pathname === href),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tisActive: isActive$,\n\t\t\t\tisExact: isExact$,\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tonNavigate: options => {\n\t\t\t\t\tconst { href, action } = options;\n\t\t\t\t\tswitch (action) {\n\t\t\t\t\t\tcase 'PUSH': {\n\t\t\t\t\t\t\treturn e.router.push(href);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'REPLACE': {\n\t\t\t\t\t\t\treturn e.router.replace(href);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t});\n\n\t// dedicated class for type inference of type argument A\n\treturn class RouteLinkContainer<A extends object> extends PureComponent<RouteLinkContainerProps<A>> {\n\t\tstatic displayName = `RouteLinkContainer(${Intermediate.displayName})`;\n\n\t\trender() {\n\t\t\tconst { children, to, value, action, ...props } = this.props;\n\t\t\tconst hrefValue = href(to, value);\n\t\t\tconst pattern = `^${decodeURIComponent(hrefValue)}(\\/|$)`;\n\t\t\tconst regexp = new RegExp(pattern);\n\n\t\t\tconst isActive = regexp.test(decodeURIComponent(e.router.state.location.pathname));\n\t\t\tconst isExact = decodeURIComponent(e.router.state.location.pathname) === decodeURIComponent(hrefValue);\n\t\t\treturn createElement(Intermediate, {\n\t\t\t\t...props,\n\t\t\t\tisActive,\n\t\t\t\tisExact,\n\t\t\t\taction: action || 'PUSH',\n\t\t\t\thref: hrefValue,\n\t\t\t});\n\t\t}\n\t};\n});\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\nimport { FunctionComponent } from 'react';\n\nexport const TradeIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\">\n\t\t\t<path\n\t\t\t\td=\"M39.3 34.125H11.875V14.2a.678.678 0 0 0-.205-.5.678.678 0 0 0-.5-.205h-.47a.678.678 0 0 0-.5.205.678.678 0 0 0-.205.5v21.1a.678.678 0 0 0 .205.5.678.678 0 0 0 .5.2h28.6a.678.678 0 0 0 .5-.205.678.678 0 0 0 .2-.495v-.469a.678.678 0 0 0-.205-.5.678.678 0 0 0-.495-.206zm-19.922-4.1a.338.338 0 0 1-.117.234.338.338 0 0 1-.234.117h-1.175a.338.338 0 0 1-.234-.117.338.338 0 0 1-.118-.236V25.1a.338.338 0 0 1 .117-.234.338.338 0 0 1 .234-.117h1.172a.338.338 0 0 1 .234.117.338.338 0 0 1 .117.234zm16.875 0a.338.338 0 0 1-.117.234.338.338 0 0 1-.234.117h-1.175a.338.338 0 0 1-.234-.117.338.338 0 0 1-.117-.234v-14.3a.338.338 0 0 1 .117-.234.338.338 0 0 1 .234-.117H35.9a.338.338 0 0 1 .234.117.338.338 0 0 1 .117.234zm-5.625 0a.338.338 0 0 1-.117.234.338.338 0 0 1-.234.117H29.1a.338.338 0 0 1-.234-.117.338.338 0 0 1-.117-.234v-8.672a.338.338 0 0 1 .117-.234A.338.338 0 0 1 29.1 21h1.173a.338.338 0 0 1 .234.117.338.338 0 0 1 .117.234zM25 30.023a.338.338 0 0 1-.117.234.338.338 0 0 1-.234.117h-1.172a.338.338 0 0 1-.234-.117.338.338 0 0 1-.117-.234V17.6a.338.338 0 0 1 .117-.234.338.338 0 0 1 .234-.117h1.171a.338.338 0 0 1 .234.117.338.338 0 0 1 .118.234z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\nimport { FunctionComponent } from 'react';\n\nexport const PositionsIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\">\n\t\t\t<path\n\t\t\t\td=\"M37.188 15.375a2.712 2.712 0 0 1 1.992.82 2.712 2.712 0 0 1 .82 1.993v16.875a2.712 2.712 0 0 1-.82 1.992 2.712 2.712 0 0 1-1.992.82H12.813a2.712 2.712 0 0 1-1.992-.82A2.712 2.712 0 0 1 10 35.063V18.188a2.712 2.712 0 0 1 .82-1.992 2.712 2.712 0 0 1 1.992-.82h6.563v-2.344a1.356 1.356 0 0 1 .41-1 1.356 1.356 0 0 1 1-.41h8.434a1.356 1.356 0 0 1 1 .41 1.356 1.356 0 0 1 .41 1v2.344zM21.25 13.5v1.875h7.5V13.5zm16.875 21.563v-8.438H28.75v2.344a1.356 1.356 0 0 1-.41 1 1.356 1.356 0 0 1-1 .41h-4.684a1.356 1.356 0 0 1-1-.41 1.356 1.356 0 0 1-.41-1v-2.344h-9.375v8.438a.913.913 0 0 0 .264.674.913.913 0 0 0 .678.263h24.375a.912.912 0 0 0 .674-.264.913.913 0 0 0 .263-.673zm-15-8.437V28.5h3.75v-1.875zm-11.25-1.875h26.25v-6.562a.912.912 0 0 0-.264-.674.913.913 0 0 0-.674-.264H12.813a.913.913 0 0 0-.674.264.913.913 0 0 0-.264.674z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\nimport { FunctionComponent } from 'react';\n\nexport const OrdersIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\">\n\t\t\t<path\n\t\t\t\td=\"M38.945 17.164a.338.338 0 0 0 .234-.117.338.338 0 0 0 .118-.235v-1.406a.338.338 0 0 0-.117-.234.338.338 0 0 0-.234-.117h-21.8a.338.338 0 0 0-.234.117.338.338 0 0 0-.117.234v1.406a.338.338 0 0 0 .117.234.338.338 0 0 0 .234.117zm.352 9.023a.338.338 0 0 1-.117.234.338.338 0 0 1-.234.117h-21.8a.338.338 0 0 1-.234-.117.338.338 0 0 1-.117-.234v-1.406a.338.338 0 0 1 .117-.234.338.338 0 0 1 .234-.117h21.8a.338.338 0 0 1 .234.117.338.338 0 0 1 .117.234zm0 9.375a.338.338 0 0 1-.117.234.338.338 0 0 1-.234.117h-21.8a.338.338 0 0 1-.234-.117.338.338 0 0 1-.115-.234v-1.406a.338.338 0 0 1 .117-.234.338.338 0 0 1 .234-.117h21.8a.338.338 0 0 1 .234.117.338.338 0 0 1 .115.234zM12.11 14a2.034 2.034 0 0 1 1.494.615 2.034 2.034 0 0 1 .615 1.494 2.034 2.034 0 0 1-.615 1.494 2.034 2.034 0 0 1-1.494.615 2.034 2.034 0 0 1-1.494-.615 2.034 2.034 0 0 1-.615-1.494 2.034 2.034 0 0 1 .615-1.494A2.034 2.034 0 0 1 12.11 14zm0 9.375a2.034 2.034 0 0 1 1.494.615 2.034 2.034 0 0 1 .615 1.494 2.034 2.034 0 0 1-.615 1.494 2.034 2.034 0 0 1-1.494.615 2.034 2.034 0 0 1-1.494-.615 2.034 2.034 0 0 1-.619-1.494 2.034 2.034 0 0 1 .615-1.494 2.034 2.034 0 0 1 1.498-.615zm0 9.375a2.034 2.034 0 0 1 1.494.615 2.034 2.034 0 0 1 .615 1.494 2.034 2.034 0 0 1-.615 1.494 2.034 2.034 0 0 1-1.494.615 2.034 2.034 0 0 1-1.494-.615 2.034 2.034 0 0 1-.619-1.494 2.034 2.034 0 0 1 .615-1.494 2.034 2.034 0 0 1 1.498-.615z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\nimport { FunctionComponent } from 'react';\n\nexport const HistoryIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\">\n\t\t\t<path\n\t\t\t\td=\"M10.703 10.937a.678.678 0 0 0-.5.205.678.678 0 0 0-.205.5v8.439a.678.678 0 0 0 .205.5.678.678 0 0 0 .5.205h8.438a.678.678 0 0 0 .5-.205.678.678 0 0 0 .205-.5v-.586a.678.678 0 0 0-.205-.5.678.678 0 0 0-.5-.205h-5.742a12.261 12.261 0 0 1 4.57-4.951 12.248 12.248 0 0 1 6.562-1.847 12.243 12.243 0 0 1 6.3 1.7 12.508 12.508 0 0 1 4.57 4.57 12.25 12.25 0 0 1 1.67 6.27 12.243 12.243 0 0 1-1.7 6.3 12.508 12.508 0 0 1-4.57 4.568 12.25 12.25 0 0 1-6.27 1.67 12.186 12.186 0 0 1-4.541-.85 12.759 12.759 0 0 1-3.838-2.373.816.816 0 0 0-.5-.176.7.7 0 0 0-.5.234l-.41.41a.674.674 0 0 0-.176.5.586.586 0 0 0 .234.5 14.456 14.456 0 0 0 4.458 2.751 14.214 14.214 0 0 0 5.273.996 14.086 14.086 0 0 0 7.266-1.963 14.756 14.756 0 0 0 5.3-5.273 13.985 13.985 0 0 0 1.963-7.266 14.3 14.3 0 0 0-1.929-7.295 14.455 14.455 0 0 0-5.273-5.3A14.14 14.14 0 0 0 24.56 10a14.3 14.3 0 0 0-7.295 1.934 14.232 14.232 0 0 0-5.273 5.273v-5.566a.678.678 0 0 0-.205-.5.678.678 0 0 0-.5-.205zM29.57 29.394a.75.75 0 0 1-.469.293.634.634 0 0 1-.527-.117l-4.98-3.633v-9.609a.678.678 0 0 1 .205-.5.678.678 0 0 1 .5-.205h.466a.678.678 0 0 1 .5.205.678.678 0 0 1 .205.5V25l4.217 3.047a.642.642 0 0 1 .264.469.729.729 0 0 1-.146.527z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\nimport { FunctionComponent } from 'react';\n\nexport const DepositIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\">\n\t\t\t<path\n\t\t\t\td=\"M41.625 12a1.8 1.8 0 0 1 1.318.557 1.8 1.8 0 0 1 .557 1.318v22.5a1.8 1.8 0 0 1-.557 1.318 1.8 1.8 0 0 1-1.318.557H7.875a1.8 1.8 0 0 1-1.318-.557A1.8 1.8 0 0 1 6 36.375v-22.5a1.8 1.8 0 0 1 .557-1.318A1.8 1.8 0 0 1 7.875 12zm0 24.375v-22.5H7.875v22.5zm-18.281-7.5a.448.448 0 0 1-.322-.146.448.448 0 0 1-.146-.322v-.937a.448.448 0 0 1 .146-.322.448.448 0 0 1 .322-.146h4.687a.448.448 0 0 1 .322.146.448.448 0 0 1 .146.322v.938a.448.448 0 0 1-.146.322.448.448 0 0 1-.322.146zM37.406 27a.448.448 0 0 1 .322.146.448.448 0 0 1 .146.322v.938a.448.448 0 0 1-.146.322.448.448 0 0 1-.322.146h-4.687a.448.448 0 0 1-.322-.146.448.448 0 0 1-.147-.322v-.937a.448.448 0 0 1 .146-.322.448.448 0 0 1 .322-.146zm-14.062-3.75a.448.448 0 0 1-.322-.146.448.448 0 0 1-.146-.322v-.937a.448.448 0 0 1 .146-.322.448.448 0 0 1 .322-.148h14.062a.448.448 0 0 1 .322.146.448.448 0 0 1 .146.322v.938a.448.448 0 0 1-.146.322.448.448 0 0 1-.322.146zm-9.434 1.992a2.478 2.478 0 0 1-1.318-.879 2.251 2.251 0 0 1-.5-1.406 2.268 2.268 0 0 1 .674-1.67 2.486 2.486 0 0 1 1.67-.732v-.586a.448.448 0 0 1 .146-.322.448.448 0 0 1 .322-.146h.938a.448.448 0 0 1 .322.146.448.448 0 0 1 .146.322v.586a2.981 2.981 0 0 1 1.641.586.435.435 0 0 1 .205.293.4.4 0 0 1-.146.352l-.7.762q-.176.234-.5.059a1.5 1.5 0 0 0-.732-.176H14.55a.621.621 0 0 0-.41.146.472.472 0 0 0-.176.381.475.475 0 0 0 .41.469l2.461.645a2.478 2.478 0 0 1 1.318.879 2.251 2.251 0 0 1 .5 1.406 2.268 2.268 0 0 1-.674 1.67 2.486 2.486 0 0 1-1.67.732v.586a.448.448 0 0 1-.146.322.448.448 0 0 1-.322.146h-.937a.448.448 0 0 1-.322-.146.448.448 0 0 1-.146-.322v-.586a2.981 2.981 0 0 1-1.639-.584.435.435 0 0 1-.205-.293.4.4 0 0 1 .146-.352l.7-.762q.176-.234.5-.059a1.5 1.5 0 0 0 .732.176h1.523a.621.621 0 0 0 .41-.146.472.472 0 0 0 .176-.381.475.475 0 0 0-.41-.469z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\nimport { FunctionComponent } from 'react';\n\nexport const ChatIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\">\n\t\t\t<path\n\t\t\t\td=\"M41.325 33.508a19.419 19.419 0 0 0 1.66 2.59 5.9 5.9 0 0 0 .863 1.063 1.374 1.374 0 0 1 .4.8 1.612 1.612 0 0 1-.1.863 1.475 1.475 0 0 1-.564.664 1.526 1.526 0 0 1-.863.266 15.015 15.015 0 0 1-8.296-2.594 16.922 16.922 0 0 1-3.987.465 16.463 16.463 0 0 1-7.7-1.793 11.631 11.631 0 0 1-5.05-4.715q-.93-.133-1.859-.332a14.8 14.8 0 0 1-8.3 2.59 1.376 1.376 0 0 1-.83-.266 1.814 1.814 0 0 1-.564-.664 1.278 1.278 0 0 1-.1-.863 1.494 1.494 0 0 1 .4-.764 11.436 11.436 0 0 0 .9-1.1 24.154 24.154 0 0 0 1.594-2.59A8.87 8.87 0 0 1 6 20.625a8.628 8.628 0 0 1 1.859-5.312 12.708 12.708 0 0 1 5.014-3.888 16.633 16.633 0 0 1 6.939-1.428 16.463 16.463 0 0 1 7.7 1.793 11.631 11.631 0 0 1 5.047 4.715 16.154 16.154 0 0 1 5.943 1.893 12.017 12.017 0 0 1 4.223 3.754A8.491 8.491 0 0 1 44.252 27a8.87 8.87 0 0 1-2.927 6.508zm-25.9-4.983l.863.2a15.6 15.6 0 0 0 3.52.4 15.032 15.032 0 0 0 5.881-1.129 10.486 10.486 0 0 0 4.25-3.088 6.726 6.726 0 0 0 1.561-4.283 6.726 6.726 0 0 0-1.561-4.283 10.486 10.486 0 0 0-4.25-3.088 15.033 15.033 0 0 0-5.876-1.129 15.033 15.033 0 0 0-5.877 1.129 10.486 10.486 0 0 0-4.25 3.088 6.726 6.726 0 0 0-1.561 4.283 6.688 6.688 0 0 0 2.324 4.98l1.063 1.129-.664 1.391a19.95 19.95 0 0 1-1.993 3.059 12.969 12.969 0 0 0 5.844-2.191zm20.121 6.84a12.969 12.969 0 0 0 5.849 2.194 18.486 18.486 0 0 1-1.992-3.121l-.664-1.328 1.063-1.129A6.688 6.688 0 0 0 42.125 27a6.966 6.966 0 0 0-2.457-5.213 12.357 12.357 0 0 0-6.243-3.021 9.513 9.513 0 0 1 .2 1.859 8.6 8.6 0 0 1-1.793 5.213 12.434 12.434 0 0 1-4.848 3.851 17 17 0 0 1-6.64 1.561 10.625 10.625 0 0 0 4.217 3.088 14.658 14.658 0 0 0 5.877 1.162 15.6 15.6 0 0 0 3.52-.4l.863-.2zm-2.521-17.728h.066z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\nimport { FunctionComponent } from 'react';\n\nexport const BurgerIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 60\">\n\t\t\t<path\n\t\t\t\td=\"M9 43.719v-2.944h41.213v2.944zm0-11.775v-3.169h41.213v3.169zm0-12V17h41.213v2.945z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\nimport { FunctionComponent } from 'react';\n\nexport const BurgerCloseIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 60\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M29.612 31.693l-13.53 13.53L14 43.141l13.53-13.53L14 16.081l2.082-2.082 13.53 13.53 13.53-13.53 2.082 2.082-13.53 13.53 13.53 13.53-2.082 2.082z\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { PureComponent, ReactNode } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport cn from 'classnames';\nimport { Match } from 'fp-ts-routing';\nimport { combineContext, ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { routes } from '../../../../ui-common/routes';\nimport { RouteLink } from '../../../../ui-common/route-link/containers/route-link.container';\nimport { Link } from '../../../../ui-common/link/link.component';\nimport { TradeIcon } from '../../../ui-kit/components/icons/trade.icon';\nimport { PositionsIcon } from '../../../ui-kit/components/icons/positions.icon';\nimport { OrdersIcon } from '../../../ui-kit/components/icons/orders.icon';\nimport { HistoryIcon } from '../../../ui-kit/components/icons/history.icon';\nimport { DepositIcon } from '../../../ui-kit/components/icons/deposit.icon';\nimport { ChatIcon } from '../../../ui-kit/components/icons/chat.icon';\nimport { BurgerIcon } from '../../../ui-kit/components/icons/burger.icon';\nimport { BurgerCloseIcon } from '../../../ui-kit/components/icons/burger-close.icon';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { empty } from 'fp-ts/lib/Record';\nimport { ChatModel } from '../../../chat/chat.model';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\nimport * as css from './theme/aside.module.css';\n\ntype AsideProps = {\n\torderCount: number;\n\tpositionCount: number;\n\tmenuIsOpened: boolean;\n\tisRealAccount: Option<boolean>;\n\tmenuHandler: () => void;\n\tmenuCloser: () => void;\n};\n\ntype AsideComponentContext = {\n\tchat: ChatModel;\n};\n\ntype DyData = {\n\t'data-lng': string;\n\t'data-type'?: 'real' | 'demo';\n};\n\nconst activeLinkTheme = {\n\tcontainer: cn(css.link, css.link_active),\n};\nconst linkTheme = {\n\tcontainer: css.link,\n};\n\nexport const Aside = combineContext(ask<AsideComponentContext>(), RouteLink, ({ chat }, RouteLink) =>\n\twithTranslation()(\n\t\tclass AsideComponent extends PureComponent<AsideProps & WithTranslation> {\n\t\t\trender() {\n\t\t\t\tconst { menuIsOpened, menuHandler, orderCount, positionCount, isRealAccount, i18n } = this.props;\n\t\t\t\tconst { language } = i18n;\n\t\t\t\tconst dyData = pipe(\n\t\t\t\t\tisRealAccount,\n\t\t\t\t\tO.fold<boolean, DyData>(constant({ 'data-lng': language }), isReal => ({\n\t\t\t\t\t\t'data-lng': language,\n\t\t\t\t\t\t'data-type': isReal ? 'real' : 'demo',\n\t\t\t\t\t})),\n\t\t\t\t);\n\t\t\t\treturn (\n\t\t\t\t\t<aside className={css.container}>\n\t\t\t\t\t\t<ul className={css.list}>\n\t\t\t\t\t\t\t<li className={css.item}>\n\t\t\t\t\t\t\t\t<i className={css.menuIcon} onClick={menuHandler}>\n\t\t\t\t\t\t\t\t\t{menuIsOpened ? <BurgerCloseIcon /> : <BurgerIcon />}\n\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{this.renderItem(routes.trade.root, empty, tspan('asideMenuTrade', 'Trade'), <TradeIcon />)}\n\t\t\t\t\t\t\t{this.renderItem(\n\t\t\t\t\t\t\t\troutes.positions.root,\n\t\t\t\t\t\t\t\tempty,\n\t\t\t\t\t\t\t\ttspan('asideMenuPositions', 'Positions'),\n\t\t\t\t\t\t\t\t<PositionsIcon />,\n\t\t\t\t\t\t\t\tpositionCount,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{this.renderItem(\n\t\t\t\t\t\t\t\troutes.orders.root,\n\t\t\t\t\t\t\t\tempty,\n\t\t\t\t\t\t\t\ttspan('asideMenuOrders', 'Orders'),\n\t\t\t\t\t\t\t\t<OrdersIcon />,\n\t\t\t\t\t\t\t\torderCount,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{this.renderItem(\n\t\t\t\t\t\t\t\troutes.history.root,\n\t\t\t\t\t\t\t\tempty,\n\t\t\t\t\t\t\t\ttspan('asideMenuHistory', 'History'),\n\t\t\t\t\t\t\t\t<HistoryIcon />,\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\tisRealAccount,\n\t\t\t\t\t\t\t\tO.map(isReal =>\n\t\t\t\t\t\t\t\t\tisReal\n\t\t\t\t\t\t\t\t\t\t? this.renderItem(\n\t\t\t\t\t\t\t\t\t\t\t\troutes.crm.deposit.root,\n\t\t\t\t\t\t\t\t\t\t\t\tempty,\n\t\t\t\t\t\t\t\t\t\t\t\ttspan('asideMenuDeposit', 'Deposit'),\n\t\t\t\t\t\t\t\t\t\t\t\t<DepositIcon />,\n\t\t\t\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<li className={cn(css.item, css.item_break)}>\n\t\t\t\t\t\t\t\t<div id=\"dy-injected\" {...dyData} />\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li className={css.item} onClick={this.toggleChat}>\n\t\t\t\t\t\t\t\t<div className={css.link}>\n\t\t\t\t\t\t\t\t\t<div className={css.icon}>\n\t\t\t\t\t\t\t\t\t\t<ChatIcon />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<h3 className={css.title}>{tspan('asideMenuLiveChat', 'LiveChat')}</h3>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</aside>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\trenderItem = <A extends object>(\n\t\t\t\tmatch: Match<A>,\n\t\t\t\tvalue: A,\n\t\t\t\tname: ReactNode,\n\t\t\t\ticon: ReactNode,\n\t\t\t\tlabel?: number,\n\t\t\t) => (\n\t\t\t\t<li className={css.item}>\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={match}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\trender={({ href, onNavigate, isActive }) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\ttheme={isActive ? activeLinkTheme : linkTheme}\n\t\t\t\t\t\t\t\t\thref={href}\n\t\t\t\t\t\t\t\t\tonClick={this.handleClick(isActive, onNavigate)}>\n\t\t\t\t\t\t\t\t\t{label ? <div className={css.label}>{label}</div> : null}\n\t\t\t\t\t\t\t\t\t<div className={css.icon}>{icon}</div>\n\t\t\t\t\t\t\t\t\t<h3 className={css.title}>{name}</h3>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</li>\n\t\t\t);\n\n\t\t\thandleClick = (isActive: boolean, onNavigate: () => void) => (e: React.MouseEvent<HTMLAnchorElement>) => {\n\t\t\t\te.preventDefault();\n\t\t\t\t!isActive && onNavigate();\n\t\t\t\tthis.props.menuCloser();\n\t\t\t\tchat.close();\n\t\t\t};\n\n\t\t\tprivate toggleChat = (e: React.MouseEvent<HTMLLIElement>) => {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tthis.props.menuCloser();\n\t\t\t\tchat.toggle();\n\t\t\t};\n\t\t},\n\t),\n);\n","import { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { format } from 'date-fns';\nimport { isProductionBuild } from '../../utils/node-env.utils';\nimport { ChatModel, ChatTags, ChatConfig } from './chat.model';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\n\n// TODO: switch to zE instead of $zopim when the Widget is switched to new version\n// All `this` calls should be left in the upper scope of each function\n// All other `$zopim` calls should be replaced with the nearest `zE` calls\n// All wrapping functions, even `zE(() => {})` should be removed\n\nconst DEFAULT_LOCALE = 'en'; // TODO: use common const with locale-selector component\n\nlet currentTags: Array<string> = [];\nconst tagsObject: ChatTags = {\n\taccountId: O.none,\n\tlocale: O.some(DEFAULT_LOCALE),\n};\n\nconst convertTags = () => {\n\treturn Object.keys(tagsObject).reduce((t: Array<string>, key) => {\n\t\tt.push(`${key}_${tagsObject[key].getOrElse('')}`);\n\t\treturn t;\n\t}, []);\n};\n\nconst convertRegionalLocale = (locale: string) => {\n\treturn locale.replace(/^([a-z]{2})[-_]([a-z]{2})$/, (l, r) => `${l}-${r}`);\n};\n\nconst updateTags = () => {\n\t// The following construction is required to properly call $zopim.\n\t// No wonder Zendesk wanted to migrate to new API\n\tzE(() => {\n\t\t$zopim(() => {\n\t\t\t$zopim.livechat.removeTags(currentTags);\n\t\t\tcurrentTags = convertTags();\n\t\t\t$zopim.livechat.addTags(currentTags);\n\t\t});\n\t});\n\t// zE('webWidget', 'updateSettings', {\n\t// \twebWidget: {\n\t// \t\tchat: {\n\t// \t\t\ttags: this.convertTags(),\n\t// \t\t},\n\t// \t},\n\t// });\n};\n\nconst prefill = (name: Option<string>, email: Option<string>) => {\n\tif (!isProductionBuild) {\n\t\treturn;\n\t}\n\n\t// Should be uncommented during complete migration from $zopim\n\t// const prefill: PrefillData = {};\n\n\t// if (name.isSome()) {\n\t// \tprefill.name = {\n\t// \t\tvalue: name.value,\n\t// \t};\n\t// }\n\n\t// if (email.isSome())) {\n\t// \tprefill.email = {\n\t// \t\tvalue: email.value,\n\t// \t};\n\t// }\n\n\tzE(() => {\n\t\t$zopim(() => {\n\t\t\tif (O.isSome(name)) {\n\t\t\t\t$zopim.livechat.setName(name.value);\n\t\t\t}\n\t\t\tif (O.isSome(email)) {\n\t\t\t\t$zopim.livechat.setEmail(email.value);\n\t\t\t}\n\t\t});\n\t});\n\t// zE('webWidget', 'prefill', prefill);\n};\n\nconst hide = () => {\n\tif (!isProductionBuild) {\n\t\treturn;\n\t}\n\n\tzE(() => {\n\t\t$zopim(() => {\n\t\t\t$zopim.livechat.window.hide();\n\t\t});\n\t});\n\t// zE('webWidget', 'hide');\n};\n\nconst open = () => {\n\tif (!isProductionBuild) {\n\t\treturn;\n\t}\n\n\tzE(() => {\n\t\t$zopim(() => {\n\t\t\t$zopim.livechat.window.show();\n\t\t});\n\t});\n\t// zE('webWidget', 'show');\n\t// zE('webWidget', 'open');\n};\n\nconst close = () => {\n\tif (!isProductionBuild) {\n\t\treturn;\n\t}\n\n\tzE(() => {\n\t\t$zopim(() => {\n\t\t\t$zopim.livechat.window.hide();\n\t\t});\n\t});\n\t// zE('webWidget', 'hide');\n\t// zE('webWidget', 'close');\n};\n\nconst toggle = () => {\n\tconsole.log('toggle', !isProductionBuild);\n\n\t// if (!isProductionBuild) {\n\t// \treturn;\n\t// }\n\n\t// const chatStatus: string = zE('webWidget:get', 'display');\n\tzE(() => {\n\t\t$zopim(() => {\n\t\t\t$zopim.livechat.window.toggle();\n\t\t});\n\t});\n\t// zE('webWidget', chatStatus === 'hidden' ? 'show' : 'hide');\n\t// zE('webWidget', 'toggle');\n};\n\nconst setLocale = (locale: string) => {\n\tif (!isProductionBuild) {\n\t\treturn;\n\t}\n\n\ttagsObject.locale = O.some(locale);\n\tzE(() => {\n\t\t$zopim(() => {\n\t\t\t$zopim.livechat.setLanguage(convertRegionalLocale(locale));\n\t\t\t// zE('webWidget', 'setLocale', convertRegionalLocale(locale));\n\t\t\tupdateTags();\n\t\t});\n\t});\n};\n\nconst setAccountId = (accountId: Option<string>) => {\n\tif (!isProductionBuild) {\n\t\treturn;\n\t}\n\n\ttagsObject.accountId = accountId;\n\tzE(() => {\n\t\t$zopim(() => {\n\t\t\tupdateTags();\n\t\t});\n\t});\n};\n\nconst sendStartingMessage = ({ name, email, accountId, locale }: ChatConfig) => {\n\tif (!isProductionBuild) {\n\t\treturn;\n\t}\n\n\tconst date: string = format(new Date(), 'yyyy-mm-dd hh:mm A UTC Z');\n\tconst msg: string = `\n\t\tMessage sent: ${date}\n\n\t\tName: ${pipe(\n\t\t\tname,\n\t\t\tO.getOrElse(constant('')),\n\t\t)}\n\t\tEmail: ${pipe(\n\t\t\temail,\n\t\t\tO.getOrElse(constant('')),\n\t\t)}\n\t\tAccount ID: ${pipe(\n\t\t\taccountId,\n\t\t\tO.getOrElse(constant('')),\n\t\t)}\n\t\tApplication locale: ${locale}\n\t`; // TODO: change AccountID to TP-number when server number is available\n\n\tzE(() => {\n\t\t$zopim(() => {\n\t\t\t$zopim.livechat.say(msg);\n\t\t\t// zE('webWidget', 'chat:send', msg);\n\t\t});\n\t});\n};\n\nconst init = (config: ChatConfig) => {\n\tif (!isProductionBuild) {\n\t\treturn;\n\t}\n\n\tconst { name, email, accountId, locale } = config;\n\n\tzE(() => {\n\t\t$zopim(() => {\n\t\t\t$zopim.livechat.window.onHide(() => hide());\n\t\t\t$zopim.livechat.setOnChatStart(() => sendStartingMessage(config));\n\t\t\t// zE('webWidget:on', 'close', () => hide());\n\t\t\t// zE('webWidget:on', 'chat:start', () => sendStartingMessage(config));\n\n\t\t\tprefill(name, email);\n\t\t\tsetAccountId(accountId);\n\t\t\tsetLocale(locale);\n\t\t});\n\t});\n};\n\nexport const createChat: () => ChatModel = () => ({\n\tinit,\n\thide,\n\topen,\n\tclose,\n\ttoggle,\n\tprefill,\n\tsetAccountId,\n\tsetLocale,\n});\n","import { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { AsideViewModel, createAsideViewModel } from '../../../../view-model/aside/aside.view-model';\nimport { Aside } from '../../components/aside/aside.component';\nimport { AccountViewModel } from '../../../../view-model/account/account.view-model';\nimport { first, map } from 'rxjs/operators';\nimport { none, some } from 'fp-ts/lib/Option';\nimport { createChat } from '../../../chat/chat.utils';\n\nexport type AsideContainerContext = {\n\tasideViewModel: AsideViewModel;\n\taccountViewModel: AccountViewModel;\n};\n\nexport const Container = combineContext(Aside, ask<AsideContainerContext>(), (Aside, e) =>\n\twithRXWithDefaults(Aside)(() => {\n\t\tconst { asideViewModel, accountViewModel } = e;\n\t\tconst { orderCount$, positionCount$ } = asideViewModel;\n\t\tconst { current$ } = accountViewModel;\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\torderCount: orderCount$,\n\t\t\t\tpositionCount: positionCount$,\n\t\t\t\tisRealAccount: current$.pipe(\n\t\t\t\t\tfirst(),\n\t\t\t\t\tmap(account => some(!account.paperMoney)),\n\t\t\t\t),\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\torderCount: 0,\n\t\t\t\tpositionCount: 0,\n\t\t\t\tisRealAccount: none,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const AsideContainer = combineContext(\n\tdeferContext(Container, 'asideViewModel', 'chat'),\n\tcreateAsideViewModel,\n\t(Container, createAsideViewModel) =>\n\t\trunOnMount(Container, () => () => ({\n\t\t\tasideViewModel: createAsideViewModel(),\n\t\t\tchat: createChat(),\n\t\t})),\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const LogoIcon: React.SFC = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"168\" height=\"24\" viewBox=\"0 0 168 24\">\n\t\t\t<g fill=\"#FFF\" fillRule=\"evenodd\">\n\t\t\t\t<path d=\"M71.854 18.874h-1.713v-.685h4.187v.685h-1.695v4.732h-.779z\" />\n\t\t\t\t<path\n\t\t\t\t\tfillRule=\"nonzero\"\n\t\t\t\t\td=\"M75.107 18.189h1.332c1.09 0 2.128.171 2.128 1.474 0 .651-.502 1.131-1.124 1.234v.017c.242.086.363.206.536.549l1.038 2.16h-.9l-.83-1.886c-.242-.531-.502-.531-.917-.531h-.467v2.417h-.779v-5.434h-.017zm.778 2.331h.675c.744 0 1.177-.326 1.177-.84 0-.48-.38-.806-1.09-.806h-.762v1.646zM82.028 18.189h.83l2.319 5.417h-.848l-.554-1.372h-2.682l-.553 1.372h-.83l2.318-5.417zm.38.737l-1.09 2.674h2.18l-1.09-2.674zM85.938 18.189h1.609c1.626 0 2.924.994 2.924 2.657 0 1.817-1.107 2.76-2.924 2.76h-1.61v-5.417zm.796 4.731h.83c1.35 0 2.094-.651 2.094-2.04 0-1.269-.865-2.006-2.007-2.006h-.917v4.046z\"\n\t\t\t\t/>\n\t\t\t\t<path d=\"M91.578 18.189h3.08v.685h-2.284v1.577h2.076v.686h-2.076v1.783h2.284v.686h-3.08zM97.772 18.189h.865l1.315 4.645h.018l1.159-4.645h1.124l1.177 4.645h.017l1.298-4.645h.848l-1.696 5.417h-1.003l-1.194-4.732h-.018l-1.193 4.732h-1.056zM106.492 18.189h1v5.417h-1zM109.953 18.874h-1.696v-.685h4.187v.685h-1.713v4.732h-.778zM113.465 18.189h.778v2.262h2.613V18.19h.796v5.417h-.796v-2.469h-2.613v2.469h-.778zM125.42 19.08a2.177 2.177 0 0 0-1.124-.309c-1.263 0-2.094.909-2.094 2.126 0 1.269.917 2.126 2.06 2.126.397 0 .916-.103 1.193-.257l.052.754c-.415.171-.934.189-1.246.189-1.73 0-2.89-1.098-2.89-2.829 0-1.663 1.23-2.777 2.89-2.777.433 0 .848.068 1.229.24l-.07.737z\" />\n\t\t\t\t<path\n\t\t\t\t\tfillRule=\"nonzero\"\n\t\t\t\t\td=\"M128.673 18.103c1.661 0 2.63 1.2 2.63 2.811 0 1.646-.969 2.812-2.63 2.812-1.66 0-2.63-1.149-2.63-2.812 0-1.628.97-2.811 2.63-2.811m0 4.92c1.263 0 1.8-1.046 1.8-2.126 0-1.097-.589-2.126-1.8-2.126-1.211-.017-1.8 1.012-1.8 2.126 0 1.08.537 2.126 1.8 2.126\"\n\t\t\t\t/>\n\t\t\t\t<path d=\"M132.462 18.189h1.056l2.422 4.371h.017v-4.371h.779v5.417h-1.004l-2.474-4.457h-.017v4.457h-.779zM138.12 18.189h2.907v.685h-2.129v1.577h2.025v.686h-2.025v2.469h-.778zM142.116 18.189h1v5.417h-1z\" />\n\t\t\t\t<path\n\t\t\t\t\tfillRule=\"nonzero\"\n\t\t\t\t\td=\"M144.28 18.189h1.608c1.627 0 2.907.994 2.907 2.657 0 1.817-1.107 2.76-2.907 2.76h-1.609v-5.417zm.795 4.731h.83c1.35 0 2.094-.651 2.094-2.04 0-1.269-.865-2.006-1.99-2.006h-.917v4.046h-.017z\"\n\t\t\t\t/>\n\t\t\t\t<path d=\"M149.92 18.189h3.062v.685h-2.266v1.577h2.076v.686h-2.076v1.783h2.266v.686h-3.062zM154.262 18.189h1.073l2.405 4.371h.017v-4.371h.796v5.417h-1.003l-2.474-4.457h-.018v4.457h-.796zM163.744 19.08a2.177 2.177 0 0 0-1.125-.309c-1.263 0-2.093.909-2.093 2.126 0 1.269.917 2.126 2.059 2.126.397 0 .917-.103 1.193-.257l.052.754c-.415.171-.934.189-1.245.189-1.73 0-2.89-1.098-2.89-2.829 0-1.663 1.229-2.777 2.89-2.777.432 0 .847.068 1.228.24l-.07.737zM164.834 18.189h3.062v.685h-2.284v1.577h2.077v.686h-2.077v1.783h2.284v.686h-3.062z\" />\n\t\t\t\t<g>\n\t\t\t\t\t<path d=\"M13.807.137L.104 23.657h6.92l6.921-11.863 6.904 11.863h6.92L14.066.137zM48.79.137l-13.702 23.52h6.903l6.921-11.863 6.92 11.863h6.904L49.033.137zM38.34.137l-6.92 11.88L24.517.137h-6.921L31.42 23.88 45.261.137z\" />\n\t\t\t\t</g>\n\t\t\t\t<g>\n\t\t\t\t\t<path\n\t\t\t\t\t\tfillRule=\"nonzero\"\n\t\t\t\t\t\td=\"M127.289 3.857c0-1.286-.606-2.348-1.678-2.966-.9-.514-1.92-.702-3.737-.702h-4.395v14.108h2.388V7.783h1.28l4.395 6.514h2.612l-4.706-6.771c.052-.017.017-.017.017-.017 2.544-.309 3.824-1.663 3.824-3.652m-2.526.086c0 2.006-1.107 3.103-3.132 3.103h-1.764V.909h1.643c.865 0 1.505.12 2.007.394.796.463 1.246 1.406 1.246 2.64\"\n\t\t\t\t\t/>\n\t\t\t\t\t<path d=\"M104.122.206v.771h5.052v13.32h2.388V.977h5.034V.206z\" />\n\t\t\t\t\t<path\n\t\t\t\t\t\tfillRule=\"nonzero\"\n\t\t\t\t\t\td=\"M137.116.069h-1.159l-6.228 14.228h1.574l1.747-4.594h5.589l1.851 4.594h2.647L137.117.07zm-3.754 8.862l2.405-6.342 2.56 6.342h-4.965zM153.726 1.183c-1.384-.789-2.578-.994-5.45-.994h-3.927v14.108h3.477c3.15 0 4.378-.223 5.848-1.063 2.007-1.114 3.08-3.257 3.08-6.137 0-2.674-1.107-4.851-3.028-5.914zm-.865 10.731c-.986 1.183-2.267 1.629-4.74 1.629h-1.385V.96h1.661c1.869 0 3.045.309 3.945 1.08 1.194.994 1.817 2.794 1.817 5.246 0 2.023-.433 3.565-1.298 4.628z\"\n\t\t\t\t\t/>\n\t\t\t\t\t<path d=\"M167.567.206h-8.875v14.091h9.204v-.788h-6.817V7.423h5.78V6.65h-5.78V.977h6.488z\" />\n\t\t\t\t\t<path\n\t\t\t\t\t\tfillRule=\"nonzero\"\n\t\t\t\t\t\td=\"M77.892.069h-1.141l-6.23 14.228h1.575l1.748-4.594h5.588l1.852 4.594h2.647L77.892.07zM74.138 8.93l2.405-6.342 2.56 6.342h-4.965zm13.184 5.52h1.246l5.9-14.245h-1.592L88.74 11.743 84.242.206h-2.63l5.71 14.245zM98.983.07h-1.159l-6.229 14.228h1.575l1.747-4.594h5.606l1.851 4.594h2.648L98.983.07zM95.23 8.93l2.405-6.342 2.56 6.342H95.23z\"\n\t\t\t\t\t/>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { PureComponent, ReactNode } from 'react';\n\nexport type OptionalProps = {\n\tclassName?: string;\n\tvalue: Option<ReactNode>;\n};\n\nconst MDASH = '\\u2014';\n\nexport class Optional extends PureComponent<OptionalProps> {\n\trender() {\n\t\tconst { value, className } = this.props;\n\t\treturn O.isNone(value) ? <span className={className}>{MDASH}</span> : value.value;\n\t}\n}\n","import * as React from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport * as accounting from 'accounting';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { Optional } from '../../../../../ui-common/optional/optional.component';\nimport { tspan } from '../../../../../utils/i18n.utils';\nimport { PureComponent } from 'react';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as css from './theme/header-account-metrics.module.css';\n\ntype THeaderAccountMetricsProps = {\n\tavailable: Option<number>;\n\ttotalAllocated: Option<number>;\n\tprofit: Option<number>;\n\tequity: Option<number>;\n\tcurrencySymbol: string;\n\tpreviewMode: Option<boolean>;\n};\nclass HeaderAccountMetricsRaw extends PureComponent<THeaderAccountMetricsProps & WithTranslation> {\n\trender() {\n\t\tconst { available, totalAllocated, profit, equity } = this.props;\n\n\t\treturn (\n\t\t\t<div className={css.container}>\n\t\t\t\t<div className={css.section}>\n\t\t\t\t\t<header className={css.section__header}>\n\t\t\t\t\t\t{tspan('headerAccountMetricsAvailable', 'Available')}\n\t\t\t\t\t</header>\n\t\t\t\t\t<div className={css.section__value}>{this.withPreview(available)}</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={css.separator} />\n\t\t\t\t<div className={css.section}>\n\t\t\t\t\t<header className={css.section__header}>\n\t\t\t\t\t\t{tspan('headerAccountMetricsTotalAllocated', 'Total Allocated')}\n\t\t\t\t\t</header>\n\t\t\t\t\t<div className={css.section__value}>{this.withPreview(totalAllocated)}</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={css.separator} />\n\t\t\t\t<div className={css.section}>\n\t\t\t\t\t<header className={css.section__header}>{tspan('headerAccountMetricsProfit', 'Profit')}</header>\n\t\t\t\t\t<div className={css.section__value}>{this.withPreview(profit)}</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={css.separator} />\n\t\t\t\t<div className={css.section}>\n\t\t\t\t\t<header className={css.section__header}>{tspan('headerAccountMetricsEquity', 'Equity')}</header>\n\t\t\t\t\t<div className={css.section__value}>{this.withPreview(equity)}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tprivate formatValue = (value: number) =>\n\t\taccounting.formatMoney(value, { symbol: this.props.currencySymbol, format: '%s %v' });\n\n\tprivate withPreview = (value: Option<number>): JSX.Element => {\n\t\tconst { previewMode } = this.props;\n\t\treturn (\n\t\t\t<Optional\n\t\t\t\tvalue={pipe(\n\t\t\t\t\tpreviewMode,\n\t\t\t\t\tO.map(previewMode =>\n\t\t\t\t\t\tpreviewMode ? (\n\t\t\t\t\t\t\t'N/A'\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\tO.map(this.formatValue),\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t)}\n\t\t\t/>\n\t\t);\n\t};\n}\n\nexport const HeaderAccountMetrics = withTranslation()(HeaderAccountMetricsRaw);\n","export function currencyStringToSymbol(currency: string): string {\n\tswitch (currency) {\n\t\tcase 'USD':\n\t\t\treturn '$';\n\t\tcase 'EUR':\n\t\t\treturn '\\u20AC';\n\t\tcase 'GBP':\n\t\t\treturn '\\u00A3';\n\t\tcase 'CHF':\n\t\t\treturn '\\u20A3';\n\t\tcase 'JPY':\n\t\t\treturn '\\u00A5';\n\t\tdefault:\n\t\t\treturn currency;\n\t}\n}\n","import { HeaderAccountMetrics } from '../../components/header/header-account-metrics/header-account-metrics.component';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { none } from 'fp-ts/lib/Option';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { map, distinctUntilChanged } from 'rxjs/operators';\nimport { AccountViewModel } from '../../../../view-model/account/account.view-model';\nimport { currencyStringToSymbol } from '../../../../utils/currency.utils';\nimport { setoidOptionNumber } from '../../../../utils/setoid.utils';\n\nexport type HeaderAccountMetricsContainerContext = {\n\taccountViewModel: AccountViewModel;\n};\n\nexport const HeaderAccountMetricsContainer = combineContext(ask<HeaderAccountMetricsContainerContext>(), e =>\n\twithRXWithDefaults(HeaderAccountMetrics)(() => {\n\t\tconst { accountMetrics$, current$, equity$ } = e.accountViewModel;\n\t\tconst availableFunds$ = accountMetrics$.pipe(\n\t\t\tmap(accountMetrics => accountMetrics.availableFunds),\n\t\t\tdistinctUntilChanged(setoidOptionNumber.equals),\n\t\t);\n\t\tconst margin$ = accountMetrics$.pipe(\n\t\t\tmap(accountMetrics => accountMetrics.margin),\n\t\t\tdistinctUntilChanged(setoidOptionNumber.equals),\n\t\t);\n\t\tconst profitLoss$ = accountMetrics$.pipe(\n\t\t\tmap(accountMetrics => accountMetrics.profitLoss),\n\t\t\tdistinctUntilChanged(setoidOptionNumber.equals),\n\t\t);\n\t\tconst currencySymbol$ = current$.pipe(\n\t\t\tmap(currentAccount => currencyStringToSymbol(currentAccount.baseCurrency)),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tavailable: availableFunds$,\n\t\t\t\ttotalAllocated: margin$,\n\t\t\t\tprofit: profitLoss$,\n\t\t\t\tequity: equity$,\n\t\t\t\tcurrencySymbol: currencySymbol$,\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tavailable: none,\n\t\t\t\ttotalAllocated: none,\n\t\t\t\tprofit: none,\n\t\t\t\tequity: none,\n\t\t\t\tcurrencySymbol: '',\n\t\t\t},\n\t\t};\n\t}),\n);\n","import * as React from 'react';\nimport {\n\tButton as DXCButton,\n\tBUTTON,\n\tTFullButtonProps as TDXCFullButtonProps,\n\tTButtonProps as TDXCButtonProps,\n} from '@devexperts/react-kit/dist/components/Button/Button';\nimport { Component } from 'react';\nimport { Omit } from 'typelevel-ts';\nimport { PartialKeys } from '@devexperts/utils/dist/object/object';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\n\nexport type TFullButtonProps = Omit<TDXCButtonProps, 'theme'> & {\n\tisExtra?: boolean;\n\ttheme: {\n\t\tinner?: string;\n\t\tcontainer_cta?: string;\n\t} & TDXCFullButtonProps['theme'];\n};\n\nclass RawButton extends Component<TFullButtonProps> {\n\trender() {\n\t\tconst { theme, children, ...restProps } = this.props;\n\n\t\treturn (\n\t\t\t<DXCButton {...restProps} theme={theme}>\n\t\t\t\t<span className={theme.inner}>{children}</span>\n\t\t\t</DXCButton>\n\t\t);\n\t}\n}\n\nexport type TButtonProps = PartialKeys<TFullButtonProps, 'theme'>;\nexport const Button = withTheme(BUTTON)(RawButton);\n","import * as React from 'react';\nimport { Button, TButtonProps as DefaultButtonProps } from './button.component';\nimport { BUTTON } from '@devexperts/react-kit/dist/components/Button/Button';\nimport { Component } from 'react';\nimport { Omit } from 'typelevel-ts';\nimport { PartialKeys } from '@devexperts/utils/dist/object/object';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport * as buttonCTATheme from './theme/button-cta.module.css';\n\nexport type FullButtonProps = Omit<DefaultButtonProps, 'theme'> & {\n\ttheme: {\n\t\tcontainer?: string;\n\t} & DefaultButtonProps['theme'];\n};\n\nclass RawButtonCta extends Component<FullButtonProps> {\n\trender() {\n\t\tconst { theme, children, ...restProps } = this.props;\n\n\t\treturn (\n\t\t\t<Button {...restProps} theme={theme}>\n\t\t\t\t{children}\n\t\t\t</Button>\n\t\t);\n\t}\n}\n\nconst wTheme = {\n\t...buttonCTATheme,\n};\n\nexport type ButtonProps = PartialKeys<FullButtonProps, 'theme'>;\nexport const ButtonCta = withTheme(BUTTON, wTheme)(RawButtonCta);\n","import * as React from 'react';\nimport { IconWrapper } from '../icon-wrapper/icon-wrapper.component';\n\nexport const CloseIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-0.2 -0.5 29.8 29.5\">\n\t\t\t<path fill=\"currentColor\" fillRule=\"evenodd\" d=\"M7.11 22.67L22.67 7.1 21.56 6 6 21.56z\" />\n\t\t\t<path fill=\"currentColor\" fillRule=\"evenodd\" d=\"M6.7 7.11l15.56 15.56 1.11-1.11L7.82 6z\" />\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { ButtonIcon, TButtonIconProps } from '@devexperts/react-kit/dist/components/ButtonIcon/ButtonIcon';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { CloseIcon } from '../icons/close.icon';\nimport * as css from './theme/close-button.module.css';\n\nexport type CloseButtonProps = {\n\tonClick: () => void;\n\ttheme: TButtonIconProps['theme'];\n};\n\nexport class RawCloseButton extends PureComponent<CloseButtonProps> {\n\trender() {\n\t\tconst { onClick, theme } = this.props;\n\t\treturn <ButtonIcon icon={<CloseIcon />} onClick={onClick} theme={theme} />;\n\t}\n}\n\nexport const CloseButton = withTheme(Symbol('CloseButton'), css)(RawCloseButton);\n","import * as React from 'react';\nimport { PureComponent, Fragment, ReactNode } from 'react';\nimport {\n\tPopup as DXPopup,\n\tPOPUP,\n\tTPopupProps as DXPopupProps,\n} from '@devexperts/react-kit/dist/components/Popup/Popup';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { Omit } from 'typelevel-ts';\nimport { CloseButton } from '../../../../ui-common/close-button/close-button.component';\nimport * as css from './theme/popup.module.css';\nimport * as closeButtonCss from './theme/close-button.child.module.css';\n\nexport type PopupProps = Omit<DXPopupProps, 'header' | 'theme'> & {\n\ttheme: {\n\t\ttitle?: string;\n\t\tclose?: string;\n\t} & DXPopupProps['theme'];\n\ttitle?: ReactNode;\n\tonClose: () => void;\n};\n\nclass RawPopup extends PureComponent<PopupProps> {\n\trender() {\n\t\treturn <DXPopup {...this.props} header={this.renderHeader()} />;\n\t}\n\n\tprivate renderHeader = () => {\n\t\tconst { theme, title, onClose } = this.props;\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className={theme.title}>{title}</div>\n\t\t\t\t<CloseButton onClick={onClose} theme={closeButtonCss} />\n\t\t\t</Fragment>\n\t\t);\n\t};\n}\n\nexport const Popup = withTheme(POPUP, css)(RawPopup);\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport * as css from './theme/iframe.module.css';\n\nexport type IframeProps = {\n\tsrc: string;\n\tscrolling?: 'auto' | 'yes' | 'no';\n};\n\nexport class Iframe extends PureComponent<IframeProps> {\n\tstatic readonly defaultProps = {\n\t\tscrolling: 'auto',\n\t};\n\n\trender() {\n\t\treturn <iframe src={this.props.src} scrolling={this.props.scrolling} className={css.container} />;\n\t}\n}\n","import { map, pluck } from 'rxjs/internal/operators';\nimport { Observable, combineLatest, of } from 'rxjs';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { AccountViewModel } from '../account/account.view-model';\nimport { AccountTO } from '../../api/socket/to/accounts-message.to';\nimport { chooseMode } from './menu.utils';\nimport { Route } from 'fp-ts-routing';\nimport { fromNullable } from 'fp-ts/lib/Option';\nimport { Router } from '../../utils/router.utils';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport enum Mode {\n\tDemo = '* DEMO *',\n\tReal = '* REAL *',\n\tDemoLive = '* DEMO_LIVE *',\n\tRegular = '* REGULAR *',\n}\n\nexport type MenuViewModel = {\n\tmenuMode$: Observable<Mode>;\n\tcurrentAccount$: Observable<AccountTO>;\n\tavailableAccounts$: Observable<AccountTO[]>;\n\tproTraderAvaliable$: Observable<boolean>;\n};\n\nexport type MenuViewModelContext = {\n\taccountViewModel: AccountViewModel;\n\trouter: Router;\n};\n\nexport type CreateMenuViewModel = () => MenuViewModel;\n\nexport const createMenuViewModel = combineContext(\n\task<MenuViewModelContext>(),\n\t(e): CreateMenuViewModel => {\n\t\tconst { current$, availableAccounts$ } = e.accountViewModel;\n\n\t\tconst menuMode$ = combineLatest(current$, availableAccounts$).pipe(\n\t\t\tmap(([current, available]) => chooseMode(current, available)),\n\t\t);\n\n\t\tconst proTraderAvaliable$ = of(e.router.state.location.search).pipe(\n\t\t\tmap(search => Route.parse(search).query),\n\t\t\tpluck('is_protrader'),\n\t\t\tmap(data =>\n\t\t\t\tpipe(\n\t\t\t\t\tfromNullable(data),\n\t\t\t\t\tO.exists(value => value === 'true'),\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\n\t\treturn () => ({\n\t\t\tmenuMode$,\n\t\t\tcurrentAccount$: current$,\n\t\t\tavailableAccounts$,\n\t\t\tproTraderAvaliable$,\n\t\t});\n\t},\n);\n","import * as React from 'react';\nimport { PureComponent, Fragment } from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { ButtonCta } from '../../ui-common/button/button-cta.component';\nimport { Popup } from '../ui-kit/components/popup/popup.component';\nimport { Iframe } from '../../ui-common/iframe/iframe.component';\nimport { tspan, getLanguageForCRM } from '../../utils/i18n.utils';\nimport * as buttonCss from './theme/button.child.module.css';\nimport * as css from './theme/upgrade-account-button.module.css';\n\ntype UpgradeAccountButtonProps = {};\n\ntype UpgradeAccountButtonState = {\n\tisPopupOpened: boolean;\n};\n\nclass UpgradeAccountButtonRaw extends PureComponent<\n\tUpgradeAccountButtonProps & WithTranslation,\n\tUpgradeAccountButtonState\n> {\n\treadonly state: UpgradeAccountButtonState = {\n\t\tisPopupOpened: false,\n\t};\n\n\trender() {\n\t\tconst { isPopupOpened } = this.state;\n\t\tconst { i18n } = this.props;\n\t\tconst language = getLanguageForCRM(i18n);\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<ButtonCta theme={buttonCss} onClick={this.handleClick}>\n\t\t\t\t\t{tspan('upgradeAccountToRealMoney', 'Upgrade to Real')}\n\t\t\t\t</ButtonCta>\n\t\t\t\t<Popup\n\t\t\t\t\ttitle={tspan('upgradeAccountToRealMoney', 'Upgrade to Real Money')}\n\t\t\t\t\tonClose={this.handleClose}\n\t\t\t\t\tisOpened={isPopupOpened}\n\t\t\t\t\tisModal={true}>\n\t\t\t\t\t<div className={css.iframe}>\n\t\t\t\t\t\t<Iframe src={`/api/avacrm/register?lang=${language}`} />\n\t\t\t\t\t</div>\n\t\t\t\t</Popup>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\tprivate handleClick = () => {\n\t\tthis.setState({ isPopupOpened: true });\n\t};\n\n\tprivate handleClose = () => {\n\t\tthis.setState({ isPopupOpened: false });\n\t};\n}\n\nexport const UpgradeAccountButton = withTranslation()(UpgradeAccountButtonRaw);\n","import * as React from 'react';\nimport { Omit } from 'typelevel-ts';\nimport { Button, TButtonProps as DefaultButtonProps } from '../../../../../ui-common/button/button.component';\nimport { Component } from 'react';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { BUTTON } from '@devexperts/react-kit/dist/components/Button/Button';\nimport { PURE } from '@devexperts/react-kit/dist/utils/pure';\nimport { constUndefined } from 'fp-ts/lib/function';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { tspan } from '../../../../../utils/i18n.utils';\n\nimport * as css from './theme/registration-button.module.css';\n\nexport type FullButtonProps = Omit<DefaultButtonProps, 'theme'> &\n\tWithTranslation & {\n\t\ttheme: {\n\t\t\tcontainer?: string;\n\t\t} & DefaultButtonProps['theme'];\n\t};\n\n@PURE\nclass RawRegistrationButton extends Component<FullButtonProps> {\n\trender() {\n\t\tconst { theme, ...restProps } = this.props;\n\n\t\treturn (\n\t\t\t<Button {...restProps} theme={theme} onClick={constUndefined}>\n\t\t\t\t{tspan('continueRegistrationBtn', 'Continue Registration')}\n\t\t\t</Button>\n\t\t);\n\t}\n}\n\nconst wTheme = {\n\t...css,\n};\n\nexport const RegistrationButton = withTranslation()(withTheme(BUTTON, wTheme)(RawRegistrationButton));\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport cn from 'classnames';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { empty } from 'fp-ts/lib/Record';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { routes } from '../../../../../ui-common/routes';\nimport { LogoIcon } from '../../../../ui-kit/components/icons/logo.icon';\nimport { HeaderAccountMetricsContainer } from '../../../containers/header-account-metrics/header-account-metrics.container';\nimport { RouteLink } from '../../../../../ui-common/route-link/containers/route-link.container';\nimport { Link } from '../../../../../ui-common/link/link.component';\nimport { RouteLinkRenderProps } from '../../../../../ui-common/route-link/components/route-link.component';\nimport { UpgradeAccountButton } from '../../../../upgrade-account-button/upgrade-account-button';\nimport { ButtonCta } from '../../../../../ui-common/button/button-cta.component';\nimport { tspan } from '../../../../../utils/i18n.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constFalse } from 'fp-ts/lib/function';\nimport { RegistrationButton } from '../../../../ui-kit/components/preview-mode/components/registration-button.component';\n\nimport * as css from './theme/header.module.css';\nimport * as linkCss from './theme/link.child.module.css';\nimport * as registrationButtonCss from './theme/registration-button.child.module.css';\n\nexport type HeaderProps = {\n\tshowDemoButton: boolean;\n\tshowDepositButton: boolean;\n\tisRealAccount: Option<boolean>;\n\tpreviewMode: Option<boolean>;\n};\n\nexport const Header = combineContext(\n\tHeaderAccountMetricsContainer,\n\tRouteLink,\n\t(HeaderAccountMetricsContainer, RouteLink) =>\n\t\twithTranslation()(\n\t\t\tclass Header extends PureComponent<HeaderProps & WithTranslation> {\n\t\t\t\tpublic render() {\n\t\t\t\t\tconst { showDemoButton, showDepositButton, isRealAccount, previewMode } = this.props;\n\t\t\t\t\tconst accountLabelClassName = cn(css.accountLabel, {\n\t\t\t\t\t\t[css.accountLabel_real]: pipe(\n\t\t\t\t\t\t\tisRealAccount,\n\t\t\t\t\t\t\tO.getOrElse(constFalse),\n\t\t\t\t\t\t),\n\t\t\t\t\t});\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<header className={css.container}>\n\t\t\t\t\t\t\t<RouteLink render={this.renderLink} to={routes.root} value={empty} />\n\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\tisRealAccount,\n\t\t\t\t\t\t\t\tO.map(isReal => (\n\t\t\t\t\t\t\t\t\t<div className={accountLabelClassName}>\n\t\t\t\t\t\t\t\t\t\t{isReal ? tspan('headerLabelReal', 'real') : tspan('headerLabelDemo', 'demo')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{showDemoButton && <UpgradeAccountButton />}\n\t\t\t\t\t\t\t{showDepositButton && (\n\t\t\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t\t\t\t<ButtonCta onClick={onNavigate}>{tspan('depositButton', 'Deposit')}</ButtonCta>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tto={routes.crm.deposit.root}\n\t\t\t\t\t\t\t\t\tvalue={empty}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\tpreviewMode,\n\t\t\t\t\t\t\t\tO.map(\n\t\t\t\t\t\t\t\t\tpreviewMode => previewMode && <RegistrationButton theme={registrationButtonCss} />,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<HeaderAccountMetricsContainer previewMode={previewMode} />\n\t\t\t\t\t\t</header>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tprivate renderLink = (props: RouteLinkRenderProps) => (\n\t\t\t\t\t<Link href={props.href} onClick={props.onNavigate} theme={linkCss}>\n\t\t\t\t\t\t<LogoIcon />\n\t\t\t\t\t</Link>\n\t\t\t\t);\n\t\t\t},\n\t\t),\n);\n","import { isEmpty } from 'fp-ts/lib/Array';\nimport { AccountTO } from '../../api/socket/to/accounts-message.to';\n\nexport const isDemoMode = (current: AccountTO, available: AccountTO[]): boolean => {\n\tconst accountsExcludingCurrent = available.filter(available => available.id !== current.id);\n\n\treturn isEmpty(accountsExcludingCurrent) ? current.paperMoney : false;\n};\n","import { map, distinctUntilChanged } from 'rxjs/internal/operators';\nimport { Observable, combineLatest } from 'rxjs';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { AccountViewModel } from '../account/account.view-model';\nimport { isDemoMode } from './header.utils';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\n\nexport type HeaderViewModel = {\n\tshowDemoButton$: Observable<boolean>;\n\tshowDepositButton$: Observable<boolean>;\n};\n\nexport type HeaderViewModelContext = {\n\taccountViewModel: AccountViewModel;\n};\n\nexport type CreateHeaderViewModel = () => HeaderViewModel;\n\nexport const createHeaderViewModel = combineContext(\n\task<HeaderViewModelContext>(),\n\t(e): CreateHeaderViewModel => {\n\t\tconst { accountViewModel } = e;\n\t\tconst { current$, availableAccounts$, equity$ } = accountViewModel;\n\n\t\tconst showDemoButton$ = combineLatest(current$, availableAccounts$).pipe(\n\t\t\tmap(([current, available]) => isDemoMode(current, available)),\n\t\t);\n\n\t\tconst showDepositButton$ = combineLatest(current$, availableAccounts$, equity$).pipe(\n\t\t\tmap(\n\t\t\t\t([current, available, equity]) =>\n\t\t\t\t\t!isDemoMode(current, available) &&\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tequity,\n\t\t\t\t\t\tO.getOrElse(constant(0)),\n\t\t\t\t\t) === 0,\n\t\t\t),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\n\t\treturn () => ({\n\t\t\tshowDemoButton$,\n\t\t\tshowDepositButton$,\n\t\t});\n\t},\n);\n","import { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { Header } from '../../components/header/header/header.component';\nimport { HeaderViewModel, createHeaderViewModel } from '../../../../view-model/header/header.view-model';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { AccountViewModel } from '../../../../view-model/account/account.view-model';\nimport { first, map } from 'rxjs/operators';\nimport * as O from 'fp-ts/lib/Option';\nimport { SystemSettingsViewModel } from '../../../../view-model/system-settings/system-settings.view-model';\n\nexport type HeaderContainerContext = {\n\theaderViewModel: HeaderViewModel;\n\taccountViewModel: AccountViewModel;\n\tsystemSettingsViewModel: SystemSettingsViewModel;\n};\n\nconst Container = combineContext(Header, ask<HeaderContainerContext>(), (Header, e) =>\n\twithRXWithDefaults(Header)(() => {\n\t\tconst { headerViewModel, accountViewModel } = e;\n\n\t\treturn {\n\t\t\tdefaultProps: {\n\t\t\t\tshowDemoButton: false,\n\t\t\t\tshowDepositButton: false,\n\t\t\t\tisRealAccount: O.none,\n\t\t\t\tpreviewMode: O.some(false),\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\tshowDemoButton: headerViewModel.showDemoButton$,\n\t\t\t\tshowDepositButton: headerViewModel.showDepositButton$,\n\t\t\t\tisRealAccount: accountViewModel.current$.pipe(\n\t\t\t\t\tfirst(),\n\t\t\t\t\tmap(account => O.some(!account.paperMoney)),\n\t\t\t\t),\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const HeaderContainer = combineContext(\n\tdeferContext(Container, 'headerViewModel'),\n\tcreateHeaderViewModel,\n\t(Container, createHeaderViewModel) =>\n\t\trunOnMount(Container, () => () => ({\n\t\t\theaderViewModel: createHeaderViewModel(),\n\t\t})),\n);\n","import { AccountTO } from '../../api/socket/to/accounts-message.to';\nimport { Mode } from './menu.view-model';\nimport { fromArray, NonEmptyArray } from 'fp-ts/lib/NonEmptyArray';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport const makeAccountUrl = (accountId: string, lang: string) =>\n\t`/api/accounts/switch/redirect?accountid=${accountId}&lang=${lang}`;\n\nconst isTwoAccountsWithDifferentStatus = (current: AccountTO, accounts: NonEmptyArray<AccountTO>): boolean =>\n\taccounts.tail.length === 0 && current.paperMoney !== accounts.head.paperMoney;\n\nconst getCurrentAccountMode = (account: AccountTO): Mode => (account.paperMoney ? Mode.Demo : Mode.Real);\n\nexport const chooseMode = (current: AccountTO, available: AccountTO[]): Mode => {\n\tconst accountsExcludingCurrent = fromArray(available.filter(available => available.id !== current.id));\n\n\treturn pipe(\n\t\taccountsExcludingCurrent,\n\t\tO.fold(\n\t\t\t() => getCurrentAccountMode(current),\n\t\t\taccountsExcludingCurrent => {\n\t\t\t\tif (isTwoAccountsWithDifferentStatus(current, accountsExcludingCurrent)) {\n\t\t\t\t\treturn Mode.DemoLive;\n\t\t\t\t}\n\t\t\t\treturn Mode.Regular;\n\t\t\t},\n\t\t),\n\t);\n};\n","export enum Mode {\n\tDemo = '* DEMO *',\n\tReal = '* REAL *',\n\tDemoLive = '* DEMO_LIVE *',\n\tRegular = '* REGULAR *',\n}\n\nexport type MenuAccountData = {\n\tcurrency: string;\n\taccountId: string;\n\tstatus: Mode;\n};\n\nexport type Accounts = {\n\tcurrentAccount: MenuAccountData;\n\tavailableAccounts: MenuAccountData[];\n};\n","import { Option } from 'fp-ts/lib/Option';\nimport { ReactNode } from 'react';\n\nexport type TableData = {\n\tsymbols: string[];\n\tpositionId: Option<number>;\n};\n\nexport type TableItem = {\n\tsymbol: string;\n\tpositions: Option<number>;\n\tpipsSize: Option<number>;\n\tprecision: Option<number>;\n\tsell: Option<number>;\n\tbuy: Option<number>;\n\tchange: Option<number>;\n\tisFavorite: boolean;\n};\n\nexport type ConfigItem = {\n\twidth: number;\n\tdataKey: keyof TableItem | 'buy-sell-btns' | 'info-fav-icons';\n\tlabel: ReactNode;\n};\n\nexport enum TableSize {\n\tSmall = '* SMALL *',\n\tLarge = '* LARGE *',\n}\n\nexport type WatchlistTableColumnNames = {\n\tsymbol: ReactNode;\n\tsell: ReactNode;\n\tbuy: ReactNode;\n\tchange: ReactNode;\n};\n","import { ReactNode } from 'react';\n\nexport enum TableCellAlign {\n\tLeft = '* LEFT *',\n\tCenter = '* CENTER *',\n\tRight = '* RIGHT *',\n}\n\nexport type Column = {\n\talign: TableCellAlign;\n\twidth: number;\n\tlabel: ReactNode;\n\tkey: string;\n};\n\nexport type TableCellProps<A> = {\n\tdataKey: string;\n\trowData: A;\n\trowIndex: number;\n};\n\nexport type TableConfigItem = {\n\twidth: number;\n\tdataKey: string;\n};\n","import * as React from 'react';\nimport { FunctionComponent } from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const LogoutIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 60\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M16.188 17a3.074 3.074 0 0 0-2.258.93 3.074 3.074 0 0 0-.93 2.258v19.125a3.074 3.074 0 0 0 .93 2.257 3.074 3.074 0 0 0 2.258.93h8.766a.768.768 0 0 0 .564-.232.768.768 0 0 0 .232-.568v-.531a.768.768 0 0 0-.232-.564.768.768 0 0 0-.564-.232h-8.766a1.034 1.034 0 0 1-.764-.3 1.034 1.034 0 0 1-.3-.764V20.188a1.034 1.034 0 0 1 .3-.764 1.034 1.034 0 0 1 .764-.3h8.766a.768.768 0 0 0 .564-.232.768.768 0 0 0 .232-.564V17.8a.768.768 0 0 0-.232-.564.768.768 0 0 0-.564-.232zm18.527 1.262a.925.925 0 0 1 .564-.2.925.925 0 0 1 .564.2L46.8 29.152a.971.971 0 0 1 .2.6.718.718 0 0 1-.2.531L35.844 41.238a.718.718 0 0 1-.531.2.826.826 0 0 1-.6-.266l-.463-.465a.631.631 0 0 1-.266-.531.826.826 0 0 1 .266-.6l8.766-8.7H24.422a.768.768 0 0 1-.564-.232.768.768 0 0 1-.232-.564v-.664a.768.768 0 0 1 .232-.564.768.768 0 0 1 .564-.232h18.594l-8.766-8.7a.826.826 0 0 1-.266-.6.631.631 0 0 1 .266-.531z\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const ArrowIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M1.6-6.25a.9.9 0 0 0-.664.273.9.9 0 0 0-.273.664.9.9 0 0 0 .273.664L5.586 0a.9.9 0 0 0 .664.273A.9.9 0 0 0 6.914 0l4.648-4.648a.9.9 0 0 0 .273-.664.9.9 0 0 0-.273-.664.9.9 0 0 0-.662-.274z\"\n\t\t\t\ttransform=\"translate(2.336 12.25)\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { ArrowIcon } from '../icons/arrow.icon';\nimport { SFC } from 'react';\nimport {\n\tSELECTBOX,\n\tSelectbox as DXCSelectbox,\n\tTSelectboxProps,\n} from '@devexperts/react-kit/dist/components/Selectbox/Selectbox';\nimport { Popover } from '../popover/popover.component';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport * as css from './theme/selectbox.module.css';\n\nconst arrowIcon = <ArrowIcon />;\n\nconst SelectboxWrapper: SFC<TSelectboxProps> = props => (\n\t<DXCSelectbox caretIcon={arrowIcon} Popover={Popover} {...props} />\n);\n\nexport const Selectbox = withTheme(SELECTBOX, css)(SelectboxWrapper);\n","import * as React from 'react';\nimport { IconWrapper } from '../icon-wrapper/icon-wrapper.component';\n\nexport const CheckIcon: React.SFC = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 20 20\">\n\t\t\t<defs>\n\t\t\t\t<path\n\t\t\t\t\tid=\"a-check\"\n\t\t\t\t\td=\"M8.268 14.874l-.025.025L4 10.657l1.414-1.414 2.854 2.853L15.364 5l1.414 1.414L8.293 14.9l-.025-.025z\"\n\t\t\t\t/>\n\t\t\t</defs>\n\t\t\t<g fill=\"none\" fillRule=\"evenodd\">\n\t\t\t\t<mask id=\"b-check\" fill=\"#fff\">\n\t\t\t\t\t<use xlinkHref=\"#a-check\" />\n\t\t\t\t</mask>\n\t\t\t\t<use fill=\"#D8D8D8\" xlinkHref=\"#a-check\" />\n\t\t\t\t<g fill=\"#FFF\" fillRule=\"nonzero\" mask=\"url(#b-check)\">\n\t\t\t\t\t<path d=\"M0 0h20v20H0z\" />\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../icon-wrapper/icon-wrapper.component';\n\nexport const ArrowDownFlatIcon: React.SFC = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 20 20\">\n\t\t\t<defs>\n\t\t\t\t<path\n\t\t\t\t\tid=\"a-arrowDownFlat\"\n\t\t\t\t\td=\"M10.39 13.753l-.026.025L4 7.414 5.414 6l4.975 4.975L15.364 6l1.414 1.414-6.364 6.364-.025-.025z\"\n\t\t\t\t/>\n\t\t\t</defs>\n\t\t\t<g fill=\"none\" fillRule=\"evenodd\">\n\t\t\t\t<mask id=\"b-arrowDownFlat\" fill=\"#fff\">\n\t\t\t\t\t<use xlinkHref=\"#a-arrowDownFlat\" />\n\t\t\t\t</mask>\n\t\t\t\t<use fill=\"#D8D8D8\" xlinkHref=\"#a-arrowDownFlat\" />\n\t\t\t\t<g fill=\"#FFF\" fillRule=\"nonzero\" mask=\"url(#b-arrowDownFlat)\">\n\t\t\t\t\t<path d=\"M0 0h20v20H0z\" />\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport * as theme from './flag-icon-wrapper.module.css';\n\nexport const FlagIconWrapper: React.SFC<JSX.IntrinsicAttributes> = props => (\n\t<i className={theme.container}>{props.children}</i>\n);\n","import * as React from 'react';\nimport { FlagIconWrapper } from '../flag-icon-wrapper/flag-icon-wrapper.component';\n\nexport const FlagUsaIcon = () => (\n\t<FlagIconWrapper>\n\t\t<svg viewBox=\"0 0 21 18\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<mask id=\"flagUsaA\" fill=\"#fff\">\n\t\t\t\t<rect width=\"21\" height=\"18\" rx=\"2\" />\n\t\t\t</mask>\n\t\t\t<g mask=\"url(#flagUsaA)\">\n\t\t\t\t<path fill=\"#0854B8\" d=\"M0 0h10v10H0z\" />\n\t\t\t\t<path fill=\"#FFF\" d=\"M0 14h21v2H0zM0 10h21v2H0zM10 2h11v2H10zM10 6h11v2H10z\" />\n\t\t\t\t<path fill=\"#EC2627\" d=\"M0 16h21v2H0zM0 12h21v2H0zM10 8h11v2H10zM10 0h11v2H10zM10 4h11v2H10z\" />\n\t\t\t</g>\n\t\t</svg>\n\t</FlagIconWrapper>\n);\n","import * as React from 'react';\nimport { FlagIconWrapper } from '../flag-icon-wrapper/flag-icon-wrapper.component';\n\nexport const FlagRussiaIcon = () => (\n\t<FlagIconWrapper>\n\t\t<svg viewBox=\"0 0 21 18\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<mask id=\"flagRussiaB\" fill=\"#fff\">\n\t\t\t\t<rect width=\"21\" height=\"18\" rx=\"2\" />\n\t\t\t</mask>\n\t\t\t<g mask=\"url(#flagRussiaB)\">\n\t\t\t\t<rect x=\"0\" y=\"0\" width=\"21\" height=\"6\" fill=\"#FFFFFF\" />\n\t\t\t\t<rect x=\"0\" y=\"6\" width=\"21\" height=\"6\" fill=\"#0854B8\" />\n\t\t\t\t<rect x=\"0\" y=\"12\" width=\"21\" height=\"6\" fill=\"#EC2627\" />\n\t\t\t</g>\n\t\t</svg>\n\t</FlagIconWrapper>\n);\n","import * as React from 'react';\nimport { FlagIconWrapper } from '../flag-icon-wrapper/flag-icon-wrapper.component';\n\nexport const FlagGermanyIcon = () => (\n\t<FlagIconWrapper>\n\t\t<svg viewBox=\"0 0 21 18\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<mask id=\"flagGermanyB\" fill=\"#fff\">\n\t\t\t\t<rect width=\"21\" height=\"18\" rx=\"2\" />\n\t\t\t</mask>\n\t\t\t<g mask=\"url(#flagGermanyB)\">\n\t\t\t\t<rect width=\"21\" height=\"6\" x=\"0\" y=\"0\" fill=\"#060606\" />\n\t\t\t\t<rect width=\"21\" height=\"6\" x=\"0\" y=\"6\" fill=\"#DA0027\" />\n\t\t\t\t<rect width=\"21\" height=\"6\" x=\"0\" y=\"12\" fill=\"#FFB400\" />\n\t\t\t</g>\n\t\t</svg>\n\t</FlagIconWrapper>\n);\n","import * as React from 'react';\nimport { FlagIconWrapper } from '../flag-icon-wrapper/flag-icon-wrapper.component';\n\nexport const FlagFranceIcon = () => (\n\t<FlagIconWrapper>\n\t\t<svg width=\"21\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 18\">\n\t\t\t<path fill=\"#0854b8\" d=\"M0 19.5v-20h7v20z\" />\n\t\t\t<path fill=\"#fff\" d=\"M7 19.5v-20h7v20z\" />\n\t\t\t<path fill=\"#ec2627\" d=\"M14 19.5v-20h7v20z\" />\n\t\t</svg>\n\t</FlagIconWrapper>\n);\n","import * as React from 'react';\nimport { FlagIconWrapper } from '../flag-icon-wrapper/flag-icon-wrapper.component';\n\nexport const FlagItalyIcon = () => (\n\t<FlagIconWrapper>\n\t\t<svg width=\"21\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 18\">\n\t\t\t<path fill=\"#0db52e\" d=\"M0 19.5v-20h7v20z\" />\n\t\t\t<path fill=\"#fff\" d=\"M7 19.5v-20h7v20z\" />\n\t\t\t<path fill=\"#ec2627\" d=\"M14 19.5v-20h7v20z\" />\n\t\t</svg>\n\t</FlagIconWrapper>\n);\n","import * as React from 'react';\nimport { FlagIconWrapper } from '../flag-icon-wrapper/flag-icon-wrapper.component';\n\nexport const FlagPortugeseIcon = () => (\n\t<FlagIconWrapper>\n\t\t<svg viewBox=\"0 0 21 18\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<mask id=\"flagPortugeseB\" fill=\"#fff\">\n\t\t\t\t<rect width=\"21\" height=\"18\" rx=\"2\" />\n\t\t\t</mask>\n\t\t\t<g mask=\"url(#flagPortugeseB)\">\n\t\t\t\t<rect x=\"0\" y=\"0\" width=\"6\" height=\"18\" fill=\"#2A680B\" />\n\t\t\t\t<rect x=\"6\" y=\"0\" width=\"15\" height=\"18\" fill=\"#EA0020\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M10.19 11.92c-1.35-.03-7.52-3.84-7.57-4.45l.34-.56c.62.88 6.93 4.58 7.55 4.45l-.32.56z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M10.22 11.94c-.02.04-.06.05-.14.04-.5-.06-2.04-.8-3.85-1.86-2.1-1.25-3.84-2.38-3.65-2.68l.05-.09h.01c-.17.5 3.43 2.54 3.64 2.67 2.09 1.28 3.84 2.02 4 1.83l-.06.1zM2.9 6.83c-.12.32 1.62 1.38 3.7 2.63 2.09 1.25 3.88 2.03 4.02 1.92l.05-.11c-.02.03-.08.04-.18.02-.56-.16-2.03-.83-3.85-1.92-1.82-1.09-3.4-2.1-3.65-2.52a.28.28 0 0 1-.02-.12l-.06.09v.01z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M10.56 11.4c-.31 0-2.02-.75-3.98-1.93-2.24-1.35-3.82-2.32-3.7-2.64l.06-.11-.03.1c-.13.34 1.9 1.56 3.69 2.63 1.95 1.18 3.65 1.93 3.96 1.93l.04-.01a.64.64 0 0 1 .03-.06.26.26 0 0 1-.15 0c-.62-.19-2.14-.9-3.85-1.93-1.66-.99-3.4-2.07-3.65-2.52a.28.28 0 0 1-.03-.13l.05.12c.26.45 2.08 1.58 3.64 2.51a21.03 21.03 0 0 0 3.85 1.92c.08.02.14.02.17-.02.02 0 .02.01-.03.1-.03.04-.04.04-.07.04m-.42.6l-.06-.01c-.52-.06-2.06-.8-3.85-1.86-2.39-1.42-3.6-2.27-3.67-2.6a.13.13 0 0 1 0-.1l.06-.08v.02l-.03.08c-.01.02-.02.04 0 .07.07.33 1.27 1.18 3.65 2.59 1.79 1.05 3.33 1.8 3.84 1.85.07.01.11 0 .13-.02l.03-.06a.15.15 0 0 1-.06 0c-.43 0-2-.69-3.9-1.85l-.15-.08c-2.32-1.36-3.5-2.22-3.5-2.56.04.23.58.83 3.52 2.53l.14.09c1.9 1.16 3.47 1.85 3.89 1.85.04 0 .08 0 .09-.02a.03.03 0 0 1-.01.03l-.03.08c-.02.04-.06.04-.1.04\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M6.7 7.83c1.36 0 3.02-.18 3.98-.55l-.2-.34c-.57.31-2.25.52-3.78.55-1.82-.02-3.1-.18-3.74-.61l-.2.35c1.18.5 2.4.6 3.95.6\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M10.55 6.95c-.1.08-.6.26-1.5.4a16.43 16.43 0 0 1-2.34.16c-.92 0-1.67-.06-2.25-.14-.9-.12-1.4-.33-1.57-.4l.06-.08c.13.07.6.25 1.53.38a16.16 16.16 0 0 0 4.55-.02c.9-.13 1.39-.35 1.46-.4l.06.1zm.19.33c-.04.06-.66.27-1.58.43a16.44 16.44 0 0 1-2.46.17 17.43 17.43 0 0 1-2.34-.15c-.97-.15-1.47-.35-1.65-.43l.04-.09c.53.2 1.04.34 1.62.43a17.54 17.54 0 0 0 4.77-.04c.94-.15 1.46-.34 1.53-.43l.07.11z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M2.94 6.9l-.03.08.06.01c.23.09.7.26 1.5.37.64.09 1.42.14 2.23.14v.01l.02-.01a16.44 16.44 0 0 0 2.32-.16c.92-.15 1.4-.32 1.5-.4l-.06-.1c-.05.06-.52.3-1.45.42a16.25 16.25 0 0 1-4.56.03c-1-.14-1.45-.35-1.53-.4zm3.76.62c-.81 0-1.59-.05-2.24-.14a6.16 6.16 0 0 1-1.5-.36l-.07-.03.03-.08.03-.03c.08.04.53.24 1.53.38a16.27 16.27 0 0 0 4.55-.03 4.18 4.18 0 0 0 1.45-.4l.08.11c-.1.1-.6.28-1.51.42-.78.11-1.52.16-2.34.16H6.7zm-3.95-.3l-.03.09c.2.06.7.27 1.64.41.72.1 1.5.15 2.31.15v.01l.03-.01c.87 0 1.7-.06 2.46-.18a5.95 5.95 0 0 0 1.57-.41l-.07-.1c-.05.08-.53.28-1.52.44a17.47 17.47 0 0 1-4.77.03 7.2 7.2 0 0 1-1.62-.43zm3.92.67c-.8 0-1.59-.05-2.32-.14a7.03 7.03 0 0 1-1.63-.43v-.06l.02-.05a8.02 8.02 0 0 0 1.63.41 17.47 17.47 0 0 0 4.76-.03 4.02 4.02 0 0 0 1.53-.43l.09.12a5.1 5.1 0 0 1-1.59.44 16.35 16.35 0 0 1-2.46.17h-.03z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M2.28 9.44c.83.44 2.67.66 4.42.68 1.58 0 3.65-.24 4.42-.65l-.02-.44c-.24.37-2.45.73-4.42.72-1.97-.02-3.8-.32-4.4-.7v.39z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M11.17 9v.1c-.12.15-.85.35-1.76.5-.7.1-1.6.19-2.73.19-1.08 0-1.93-.08-2.6-.18a6.5 6.5 0 0 1-1.85-.5V9c.4.27 1.5.46 1.87.52a18.2 18.2 0 0 0 5.3 0c.65-.1 1.59-.34 1.77-.5m0 .37v.1c-.12.14-.85.35-1.76.5-.7.1-1.6.18-2.73.18-1.08 0-1.93-.08-2.6-.18a6.6 6.6 0 0 1-1.85-.5v-.12c.4.27 1.5.47 1.87.53.66.1 1.5.17 2.58.17 1.12 0 2.02-.08 2.71-.18.66-.1 1.6-.34 1.78-.5\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M2.22 9l.02.11c.1.05.74.33 1.85.49a17.59 17.59 0 0 0 2.59.17c1 0 1.92-.06 2.73-.18a4.97 4.97 0 0 0 1.75-.5V9c-.17.18-1.11.42-1.77.51-.8.13-1.71.19-2.71.19a17.4 17.4 0 0 1-2.58-.18A6.55 6.55 0 0 1 2.22 9m4.46.8c-.95 0-1.82-.06-2.6-.18-1-.15-1.7-.4-1.86-.5V9c.42.26 1.54.45 1.88.5.77.12 1.63.18 2.58.18a18.29 18.29 0 0 0 2.71-.18c.65-.1 1.59-.34 1.77-.5l.02.12a4.7 4.7 0 0 1-1.77.5c-.8.12-1.73.19-2.73.19m-4.46-.43l.02.12c.1.05.75.32 1.84.48.77.11 1.65.17 2.6.17 1 0 1.92-.06 2.73-.18a5 5 0 0 0 1.75-.49v-.1c-.17.18-1.1.42-1.77.52-.8.12-1.72.18-2.71.18-.95 0-1.82-.06-2.58-.17a6.51 6.51 0 0 1-1.88-.52m4.46.79c-.96 0-1.83-.06-2.6-.18-1-.14-1.7-.4-1.86-.5v-.13c.42.26 1.54.46 1.88.51a18.41 18.41 0 0 0 5.3 0c.64-.1 1.58-.34 1.76-.5l.02.11a4.7 4.7 0 0 1-1.77.5c-.81.13-1.73.19-2.73.19\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M6.7 11.85c-1.91-.01-3.55-.51-3.9-.6l.26.4c.6.25 2.2.62 3.65.58 1.45-.04 2.72-.15 3.61-.58l.26-.4c-.61.28-2.68.6-3.89.6\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M10.64 11.2l-.08.14c-.23.08-.84.26-1.73.38-.58.08-.95.16-2.11.18-2.2-.06-3.6-.48-3.94-.58l-.05-.1c1.27.33 2.56.56 3.99.58 1.06-.02 1.52-.1 2.1-.18 1.04-.16 1.56-.33 1.71-.38l.11-.05zm-.22.36l-.12.17a12.39 12.39 0 0 1-3.6.55 10.88 10.88 0 0 1-3.73-.63l-.05-.1.1.03a12.08 12.08 0 0 0 5.88.4c.97-.2 1.37-.34 1.49-.4l.03-.02z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M6.71 11.9c-1.94-.04-3.3-.38-3.94-.57l-.05-.1a18 18 0 0 0 4 .56c.94-.02 1.41-.09 1.9-.16l.2-.02c1-.15 1.52-.32 1.69-.37l.13-.06v.01l-.1.06c-.2.06-.72.23-1.72.38l-.2.03c-.49.07-.96.13-1.9.15a16.9 16.9 0 0 1-4-.58l.07.08c.63.19 1.98.52 3.92.57 1-.02 1.4-.07 1.87-.14l.25-.03c.8-.11 1.42-.28 1.72-.38l.08-.14-.07.16c-.3.1-.93.27-1.73.38l-.25.03c-.47.07-.87.13-1.87.15zm-3.79-.35l.06.09c.69.29 2.1.6 3.72.62a12.36 12.36 0 0 0 3.6-.54l.08-.13c-.1.05-.44.2-1.48.4a12.76 12.76 0 0 1-2.16.2c-1.45-.03-2.7-.24-3.73-.6l-.09-.04zm3.77.74a10.73 10.73 0 0 1-3.72-.63l-.06-.1.02-.03.1.03c1.02.37 2.26.57 3.67.6.89 0 1.68-.1 2.2-.2a6.09 6.09 0 0 0 1.48-.4.06.06 0 0 1 .02 0h.02a6.3 6.3 0 0 1-.1.17 12.5 12.5 0 0 1-3.62.55z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M6.7 4.88c2.4 0 4.35 1.94 4.35 4.31 0 2.37-1.96 4.3-4.36 4.3a4.34 4.34 0 0 1-4.35-4.3c0-2.37 1.95-4.3 4.35-4.3m0 .38c2.2 0 3.97 1.76 3.97 3.93a3.93 3.93 0 0 1-3.97 3.9A3.94 3.94 0 0 1 2.73 9.2a3.94 3.94 0 0 1 3.96-3.92\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M6.7 4.93a4.31 4.31 0 0 1 4.32 4.26 4.31 4.31 0 0 1-4.32 4.27A4.3 4.3 0 0 1 2.38 9.2 4.3 4.3 0 0 1 6.7 4.94m0-.1A4.4 4.4 0 0 1 11.1 9.2a4.4 4.4 0 0 1-4.41 4.37c-2.43 0-4.42-1.96-4.42-4.36S4.27 4.84 6.7 4.84\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M6.7 4.94c-2.38 0-4.3 1.91-4.3 4.26a4.28 4.28 0 0 0 4.3 4.25c2.37 0 4.3-1.91 4.3-4.25a4.28 4.28 0 0 0-4.3-4.26m0 8.53A4.31 4.31 0 0 1 2.37 9.2 4.31 4.31 0 0 1 6.7 4.92a4.31 4.31 0 0 1 4.33 4.28 4.3 4.3 0 0 1-4.33 4.27m0-8.62A4.38 4.38 0 0 0 2.3 9.2c0 2.4 1.97 4.34 4.4 4.34 2.42 0 4.4-1.95 4.4-4.34 0-2.4-1.98-4.35-4.4-4.35m0 8.72A4.4 4.4 0 0 1 2.27 9.2 4.4 4.4 0 0 1 6.7 4.82a4.4 4.4 0 0 1 4.43 4.38 4.4 4.4 0 0 1-4.43 4.37\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M6.7 5.3c2.17 0 3.95 1.75 3.95 3.9s-1.78 3.89-3.95 3.89a3.94 3.94 0 0 1-3.94-3.9c0-2.14 1.78-3.9 3.94-3.9m0-.1c2.22 0 4.05 1.8 4.05 4s-1.83 4-4.05 4a4.04 4.04 0 0 1-4.04-4c0-2.2 1.83-4 4.04-4\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M6.7 5.3a3.92 3.92 0 0 0-3.93 3.9 3.92 3.92 0 0 0 3.93 3.88 3.92 3.92 0 0 0 3.94-3.89A3.92 3.92 0 0 0 6.7 5.3m0 7.8c-2.18 0-3.96-1.75-3.96-3.9S4.52 5.27 6.7 5.27s3.96 1.75 3.96 3.91S8.9 13.1 6.7 13.1m0-7.9c-2.22 0-4.03 1.8-4.03 4s1.81 3.98 4.03 3.98 4.03-1.8 4.03-3.99-1.8-3.98-4.03-3.98m0 7.99a4.04 4.04 0 0 1-4.05-4c0-2.22 1.82-4.01 4.05-4.01s4.06 1.79 4.06 4S8.94 13.2 6.7 13.2\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M6.52 13.59h.39V4.81h-.4z\" />\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M6.46 4.76h.11v8.87h-.1V4.76zm.42 8.87h.1V4.76h-.1v8.87z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M6.56 4.76l-.1.02.02 8.85h.08V4.75zm.02 8.88h-.11l-.02-8.88h.12l.02 8.87-.01.01zm.4-8.88l-.1.02.02 8.85h.07V4.75zm0 8.88h-.1l-.01-8.88h.11L7 13.62a.01.01 0 0 1-.01.01z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M2.27 9.01c.55-.5 2.6-.83 4.4-.82 1.82 0 3.97.37 4.43.81v.37c-.38-.36-2.05-.8-4.42-.8s-4.09.44-4.41.81v-.37z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#000\" d=\"M2.28 9.35l-.03-.32c0-.02.03-.02.03 0v.32zm8.85.02l-.03-.33h.03v.33z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M6.7 8.15a15.55 15.55 0 0 1 2.86.25c.82.16 1.4.37 1.6.6v.1c-.23-.28-1.02-.48-1.62-.6-.8-.16-1.8-.26-2.84-.25a16.1 16.1 0 0 0-2.9.25c-.6.11-1.47.37-1.57.6V9c.06-.17.7-.43 1.56-.6a15.9 15.9 0 0 1 2.91-.25m0 .37c1.04 0 2.06.1 2.86.25.82.17 1.4.37 1.6.6v.11c-.23-.28-1.02-.5-1.62-.61a15.22 15.22 0 0 0-2.84-.25 16.06 16.06 0 0 0-2.9.25c-.63.13-1.47.37-1.57.61v-.11c.06-.17.68-.42 1.56-.6a15.99 15.99 0 0 1 2.91-.25\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M6.7 8.23c1 0 2 .09 2.84.25.5.1 1.38.31 1.64.62l-.03-.1c-.18-.21-.74-.42-1.6-.59a15.43 15.43 0 0 0-2.82-.25c-1.07 0-2.1.1-2.94.25-.9.18-1.5.44-1.55.59v.06c.18-.24 1.02-.47 1.57-.57a16.08 16.08 0 0 1 2.9-.26m-4.48.9l-.01-.02v-.12c.06-.19.74-.44 1.57-.6a16.22 16.22 0 0 1 5.77 0c.86.16 1.42.37 1.62.6v.12c-.28-.3-1.15-.5-1.64-.6a15.49 15.49 0 0 0-2.82-.25c-1.04 0-2.06.09-2.9.25-.7.13-1.5.39-1.58.6l-.01.01m4.47-.51c1 0 2 .08 2.84.25.5.1 1.38.3 1.64.62l-.03-.1c-.18-.22-.74-.43-1.6-.6a15.65 15.65 0 0 0-2.83-.25c-1.05 0-2.09.1-2.93.26-.94.18-1.5.44-1.55.58v.07c.19-.25 1.05-.48 1.56-.58a16.2 16.2 0 0 1 2.9-.25m-4.47.89l-.01-.02v-.11c.06-.19.72-.44 1.57-.6A16.01 16.01 0 0 1 6.7 8.5c1 0 2.01.09 2.86.25.86.17 1.43.38 1.62.6v.13c-.28-.3-1.15-.51-1.65-.6a15.2 15.2 0 0 0-2.8-.26c-1.05 0-2.08.1-2.92.26-.7.13-1.47.38-1.57.6h-.01\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M6.68 6.24a9.6 9.6 0 0 1 3.73.56l.24.4c-.57-.3-2.12-.61-3.97-.57-1.5.01-3.12.17-3.93.6l.28-.48c.67-.34 2.23-.51 3.65-.51\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M6.7 6.2c.9 0 1.78.05 2.47.17a4 4 0 0 1 1.28.41l.1.17c-.17-.2-.83-.38-1.42-.48-.68-.12-1.53-.16-2.43-.17-.94 0-1.81.06-2.49.18-.64.12-1.06.26-1.23.37l.1-.13c.23-.13.63-.24 1.12-.34.68-.12 1.55-.18 2.5-.18m0 .38c.94 0 1.84.05 2.56.17.67.13 1.31.31 1.4.41l.08.12c-.23-.14-.78-.3-1.5-.43-.7-.13-1.6-.18-2.54-.17-1.06 0-1.88.05-2.59.17-.74.14-1.26.33-1.39.43l.07-.13a4.6 4.6 0 0 1 1.3-.4c.73-.13 1.57-.17 2.61-.17\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M6.7 6.29c1.01 0 1.8.06 2.43.17.5.08 1.12.24 1.37.42l-.06-.09c-.18-.13-.69-.3-1.27-.4-.62-.12-1.45-.17-2.4-.17H6.7c-1 0-1.86.06-2.5.17-.5.1-.89.22-1.12.34l-.09.13c.18-.14.65-.28 1.22-.4.65-.11 1.5-.17 2.49-.17m3.86.67h-.01c-.18-.2-.88-.38-1.42-.48-.63-.1-1.42-.16-2.43-.17-.98 0-1.84.07-2.48.18a4.2 4.2 0 0 0-1.23.38l.07-.16c.25-.13.64-.24 1.14-.34.64-.11 1.5-.18 2.5-.18h.07c.95 0 1.78.06 2.4.17a4 4 0 0 1 1.3.42l.1.16v.02h-.01m-3.8-.37H6.7c-1.19 0-1.94.06-2.6.18-.54.1-.97.22-1.3.39l-.06.12c.1-.1.63-.3 1.37-.44a14.8 14.8 0 0 1 2.5-.18h.17c1.02 0 1.85.06 2.47.18.69.13 1.2.28 1.45.41l-.04-.08c-.1-.1-.73-.28-1.4-.4-.65-.12-1.52-.18-2.5-.18m3.98.7h-.01c-.22-.13-.76-.3-1.48-.43-.62-.11-1.45-.17-2.47-.17H6.6c-1.01 0-1.8.05-2.48.17a4.6 4.6 0 0 0-1.39.43l.05-.15c.34-.17.77-.3 1.31-.4.66-.12 1.42-.17 2.61-.18h.06c.98 0 1.85.06 2.5.18.69.13 1.32.31 1.41.42l.08.12v.02a.02.02 0 0 1-.01 0\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M8.9 11.01c-.82-.15-1.63-.17-2.2-.17-2.74.03-3.62.56-3.73.72l-.2-.33c.7-.5 2.18-.78 3.94-.75.92.01 1.71.07 2.37.2L8.9 11z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M6.72 10.42c.79.01 1.6.05 2.4.2l-.06.1c-.72-.14-1.4-.19-2.34-.2-1.01 0-2.09.07-3.06.35-.32.1-.87.29-.88.44l-.05-.09c0-.14.48-.32.9-.45a11.4 11.4 0 0 1 3.09-.35m-.04.38c.77 0 1.51.04 2.23.17l-.05.1c-.67-.13-1.38-.18-2.17-.17-1.02-.01-2.04.08-2.93.34-.28.07-.74.25-.79.4l-.05-.09c.01-.08.3-.26.82-.41 1.02-.29 1.97-.34 2.94-.34\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M6.72 10.43c-1.27 0-2.24.12-3.08.36-.54.15-.9.32-.9.43l.03.06c.1-.19.8-.4.88-.42a11.1 11.1 0 0 1 3.07-.35c.86.01 1.58.05 2.34.2l.04-.09c-.78-.14-1.6-.17-2.38-.19zm-3.94.9a.01.01 0 0 1-.01-.01l-.06-.09c.02-.2.7-.4.92-.47a13.96 13.96 0 0 1 5.49-.15l-.05.11a13.82 13.82 0 0 0-5.41.16c-.4.12-.85.3-.87.43l-.01.02zm3.9-.52c-1.06 0-1.96.07-2.94.34-.53.15-.8.33-.8.4l.03.06c.09-.16.6-.33.8-.39.78-.22 1.73-.33 2.8-.33h.22c.78 0 1.46.05 2.07.16l.04-.08c-.73-.12-1.5-.15-2.22-.16zm-3.71.84a.02.02 0 0 1-.01 0l-.05-.09c.01-.1.31-.29.83-.43a13.37 13.37 0 0 1 5.18-.17l-.05.1c-.62-.1-1.3-.15-2.09-.15h-.2c-1.08 0-2.02.11-2.81.34-.3.08-.74.26-.79.4h-.01z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#EA0020\" d=\"M8.87 11.08h-.01l-.01-.03.24-.43h.03v.02l-.23.43h-.02\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M3 6.75c1.35-.02 7.62 3.78 7.64 4.48l-.4.59C10.08 11 3.73 7.3 2.68 7.38L3 6.75z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#000\" d=\"M10.29 11.79l.3-.52h.02v.01l-.32.5zm-7.6-4.44l.29-.58h.01v.02l-.3.56z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M10.68 11.27c.16-.31-1.56-1.59-3.69-2.83C4.81 7.22 3.25 6.5 2.96 6.72l-.07.11.02-.02c.05-.04.14-.04.18-.04.5 0 1.9.65 3.88 1.77.87.5 3.66 2.27 3.65 2.77l-.01.07.07-.1zM2.63 7.35c.25-.16 2.1.65 4.04 1.8 1.93 1.16 3.77 2.47 3.6 2.71l-.05.09-.02.02s.03-.04 0-.13c-.09-.27-1.4-1.3-3.57-2.6-2.12-1.24-3.88-2-4.06-1.78l.06-.1z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M10.61 11.38l-.01-.02v.01-.01-.04c.01-.5-2.83-2.3-3.64-2.77C5 7.43 3.58 6.79 3.1 6.79c-.05 0-.13 0-.17.03.04-.06.12-.06.16-.06.5 0 1.92.65 3.9 1.77.56.33 3.66 2.23 3.65 2.78l.03-.05c.15-.28-1.47-1.52-3.68-2.8-2.34-1.32-3.76-1.92-4.01-1.73l-.06.1h-.03l.07-.12c.04-.03.09-.04.16-.04.61 0 2.45.95 3.89 1.76 1.92 1.12 3.86 2.5 3.69 2.85l-.07.1zM2.7 7.41c.49 0 2.15.77 3.94 1.82 2.12 1.27 3.48 2.32 3.57 2.6a.24.24 0 0 1 .01.09l.05-.07v-.05c-.08-.35-1.92-1.62-3.6-2.64-1.72-1.02-3.45-1.82-3.94-1.82l-.1.02-.03.07c.02-.02.05-.02.1-.02zm7.5 4.56v-.01h-.01s.03-.03 0-.12c-.1-.27-1.47-1.34-3.56-2.59-1.8-1.05-3.44-1.82-3.94-1.82-.05 0-.09.02-.1.04v-.03l.03-.1a.2.2 0 0 1 .11-.02c.5 0 2.23.8 3.94 1.82 1.74 1.04 3.54 2.29 3.63 2.66l-.01.07-.06.08-.01.01-.01.01z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FFF\"\n\t\t\t\t\td=\"M4.05 9.68c0 .71.3 1.36.78 1.83a2.64 2.64 0 0 0 1.87.78c.73 0 1.39-.3 1.87-.77.48-.47.78-1.12.78-1.84v-3.5h-5.3v3.5z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M9.33 6.19H4.05l.02 3.49c0 .68.27 1.33.77 1.82a2.64 2.64 0 0 0 3.72.01 2.56 2.56 0 0 0 .77-1.83v-3.5zM6.7 12.3a2.66 2.66 0 0 1-1.88-.78 2.58 2.58 0 0 1-.78-1.84v-3.5h5.3l.02 3.5c0 .7-.28 1.36-.78 1.85a2.67 2.67 0 0 1-1.88.77z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#EA0020\"\n\t\t\t\t\td=\"M8.21 7.31V9.7a1.44 1.44 0 0 1-.45 1.05 1.51 1.51 0 0 1-2.13 0 1.49 1.49 0 0 1-.45-1.06V7.3h3.03zM4.15 9.68c0 .69.3 1.31.75 1.77a2.56 2.56 0 0 0 1.8.73 2.55 2.55 0 0 0 2.53-2.5V6.3H4.15v3.38z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M5.2 7.32v2.37c0 .39.16.77.44 1.04a1.5 1.5 0 0 0 2.12.01A1.46 1.46 0 0 0 8.2 9.7V7.3l-3 .01zm1.5 3.88c-.4 0-.78-.16-1.08-.45a1.5 1.5 0 0 1-.45-1.06v-2.4l3.04.01.01 2.17v.23a1.45 1.45 0 0 1-.45 1.06 1.52 1.52 0 0 1-1.08.44zm2.52-4.9l-5.07.01.01 3.37c0 .66.27 1.28.75 1.76a2.53 2.53 0 0 0 1.78.73c.68 0 1.31-.26 1.79-.73a2.45 2.45 0 0 0 .74-1.75V6.3zM6.7 12.2a2.56 2.56 0 0 1-1.8-.75 2.48 2.48 0 0 1-.75-1.77V6.3l5.1-.01v3.4a2.48 2.48 0 0 1-.75 1.77 2.55 2.55 0 0 1-1.8.73z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#1A0095\"\n\t\t\t\t\td=\"M6.37 9.3c0 .1.04.18.1.25a.33.33 0 0 0 .24.1c.1 0 .18-.04.23-.1a.36.36 0 0 0 .1-.25v-.48h-.67v.48z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FFF\"\n\t\t\t\t\td=\"M6.9 8.94a.07.07 0 0 0-.07.06c0 .04.03.07.07.07.03 0 .06-.03.06-.07a.07.07 0 0 0-.06-.06m-.19.17a.07.07 0 0 0-.06.07c0 .04.02.07.06.07.04 0 .07-.04.07-.07a.07.07 0 0 0-.07-.07m.19.19a.07.07 0 0 0-.07.06c0 .04.03.07.07.07a.07.07 0 0 0 .06-.07.07.07 0 0 0-.06-.06m-.37 0a.07.07 0 0 0-.06.06.07.07 0 1 0 .13 0 .07.07 0 0 0-.07-.06m0-.36a.06.06 0 0 0-.06.06c0 .04.03.07.07.07.03 0 .06-.03.06-.07 0-.03-.03-.06-.06-.06\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#1A0095\"\n\t\t\t\t\td=\"M6.37 10.43c0 .1.04.19.1.25a.32.32 0 0 0 .47 0 .36.36 0 0 0 .1-.25v-.47h-.67v.47z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FFF\"\n\t\t\t\t\td=\"M6.9 10.07a.07.07 0 0 0-.07.07c0 .04.03.06.06.06.04 0 .07-.02.07-.06a.07.07 0 0 0-.07-.07m-.18.18a.07.07 0 0 0 0 .13c.03 0 .06-.03.06-.07a.06.06 0 0 0-.06-.06m.18.18a.07.07 0 0 0-.06.07c0 .03.03.06.06.06a.07.07 0 0 0 0-.13m-.36 0a.07.07 0 0 0-.06.07c0 .03.03.06.06.06.04 0 .07-.03.07-.06a.07.07 0 0 0-.07-.07m0-.36a.07.07 0 0 0-.07.07c0 .04.03.06.07.06.04 0 .07-.02.07-.06 0-.04-.03-.07-.07-.07\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#1A0095\"\n\t\t\t\t\td=\"M5.45 9.3c0 .1.04.19.1.25a.32.32 0 0 0 .23.1.3.3 0 0 0 .24-.1.36.36 0 0 0 .1-.25v-.47h-.67v.47z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FFF\"\n\t\t\t\t\td=\"M5.97 8.94a.07.07 0 0 0 0 .13c.04 0 .07-.03.07-.06a.07.07 0 0 0-.07-.07m-.18.18a.07.07 0 0 0-.07.06c0 .04.03.07.07.07.03 0 .06-.03.06-.07a.07.07 0 0 0-.06-.06m.18.18a.07.07 0 0 0-.07.07.07.07 0 0 0 .14 0 .07.07 0 0 0-.07-.07m-.36 0a.07.07 0 0 0-.07.07c0 .03.03.06.07.06a.07.07 0 0 0 .06-.06.07.07 0 0 0-.06-.07m0-.36a.07.07 0 0 0-.07.07c0 .03.03.06.07.06a.07.07 0 1 0 0-.13\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#1A0095\"\n\t\t\t\t\td=\"M7.3 9.3c0 .1.04.19.1.25a.33.33 0 0 0 .23.1.31.31 0 0 0 .24-.1.36.36 0 0 0 .1-.25v-.48H7.3v.48z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FFF\"\n\t\t\t\t\td=\"M7.82 8.94a.06.06 0 0 0-.06.07c0 .03.02.06.06.06.04 0 .07-.03.07-.07a.06.06 0 0 0-.07-.06m-.18.18a.07.07 0 0 0-.07.06c0 .04.03.07.07.07.03 0 .06-.03.06-.07 0-.04-.03-.06-.06-.06m.18.18a.07.07 0 0 0-.06.06c0 .04.03.07.06.07.04 0 .07-.03.07-.07a.07.07 0 0 0-.07-.06m-.36 0a.07.07 0 0 0-.06.07.07.07 0 0 0 .13 0 .07.07 0 0 0-.07-.07m0-.36a.07.07 0 0 0-.07.07c0 .03.03.06.07.06A.07.07 0 0 0 7.53 9a.06.06 0 0 0-.07-.06\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#1A0095\"\n\t\t\t\t\td=\"M6.37 8.15c0 .1.04.19.1.25a.33.33 0 0 0 .24.1c.1 0 .18-.03.23-.1a.37.37 0 0 0 .1-.25v-.47h-.67v.47z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FFF\"\n\t\t\t\t\td=\"M6.9 7.8a.07.07 0 0 0-.07.06c0 .03.03.06.07.06a.07.07 0 0 0 .06-.06.07.07 0 0 0-.06-.07m-.19.18a.06.06 0 0 0-.06.06c0 .04.02.07.06.07.04 0 .07-.03.07-.07a.06.06 0 0 0-.07-.06m.19.18c-.04 0-.07.03-.07.07 0 .03.03.06.07.06.03 0 .06-.03.06-.06 0-.04-.03-.07-.06-.07m-.37 0a.06.06 0 0 0-.06.07.07.07 0 1 0 .13 0 .07.07 0 0 0-.06-.07m0-.36a.07.07 0 0 0-.07.07c0 .03.03.06.07.06a.07.07 0 0 0 .06-.06.07.07 0 0 0-.06-.07\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.48 7.18c0-.24.18-.3.18-.3s.2.06.2.3h-.38z\" />\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.33 6.89l-.03.28h.19c0-.23.17-.27.18-.27 0 0 .17.05.18.27h.18L5 6.88h-.67z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.72 6.9c.05.01.19.08.2.3l.17-.01-.03-.3h-.34zm-.04 0h-.35l-.02.3.2-.01c-.02-.21.12-.28.17-.3zm.44.31H4.9c-.02-.24-.2-.3-.2-.3s-.18.04-.18.29H4.3l.02-.32h.75l.05.33z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M4.29 7.17h.75c.02 0 .03.01.03.03s-.01.04-.03.04H4.3c-.02 0-.03-.02-.03-.04s.01-.03.03-.03\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.3 7.18v.05h.82c.01 0 .02 0 .02-.02l-.85-.03zm.82.08h-.83c-.02 0-.04-.02-.04-.05 0-.03.02-.05.04-.05h.83c.02 0 .04.02.04.05 0 .03-.02.05-.04.05z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.56 7.17c0-.15.1-.2.1-.2s.1.05.1.2h-.2z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.67 7s-.1.04-.1.19l.2-.01c0-.14-.1-.19-.1-.19zm.13.2h-.24c0-.18.1-.23.1-.23.02 0 .14.05.14.22z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M4.3 6.77h.73l.03.03c0 .02-.02.03-.03.03H4.3a.03.03 0 0 1-.02-.03c0-.01 0-.03.02-.03\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.3 6.79v.04h.8l.02-.02-.81-.02zm.8.06h-.8a.04.04 0 0 1-.04-.04c0-.03.02-.05.05-.05h.8c.02 0 .03.02.03.05 0 .02-.02.04-.04.04z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.32 6.83h.7l.02.03c0 .02-.01.04-.03.04h-.7l-.02-.04c0-.01.01-.03.03-.03\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.32 6.84v.05h.76c.01 0 .02 0 .02-.02l-.78-.03zm.76.08h-.76c-.02 0-.04-.03-.04-.05 0-.03.02-.05.04-.05h.76c.03 0 .04.02.04.05 0 .02-.02.05-.04.05z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M4.54 6.37h.06v.03h.04v-.03h.05v.03h.04v-.03h.06v.09s-.01.02-.03.02h-.2l-.02-.02v-.1z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.6 6.37l-.06.01.02.09.23.02.01-.02v-.1l-.05.01.02.03-.06.01-.01-.05-.05.01.01.03-.06.01v-.05zm.19.13h-.23l-.03-.03v-.1l.07-.02.02.06.03-.01-.01-.03.07-.02.01.06.03-.01-.01-.03.07-.02.02.13-.04.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.75 6.49l.01.28h-.2l.02-.29z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M4.75 6.49h-.17v.31h.19l-.02-.31zm.04.32h-.22v-.33h.2l.02.33z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M4.78 6.5h.05v.04h.04v-.03h.06v.03h.04v-.03h.05v.08c0 .02 0 .03-.02.03h-.2a.03.03 0 0 1-.02-.03v-.08z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.83 6.5l-.05.02.01.08.23.03.02-.03v-.1l-.05.02v.03l-.05.01v-.05h-.06l.01.04-.05.01-.01-.05zm.19.14H4.8l-.03-.04v-.1h.07l.01.05.03-.01V6.5l.06-.02.02.06.03-.01-.02-.03.08-.02v.13l-.03.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.99 6.62v.15h-.18v-.15z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M5 6.62h-.18v.17L5 6.78v-.16zm.03.18H4.8v-.18L5 6.6l.02.2z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M4.3 6.5h.06v.04h.04V6.5h.06v.04h.04V6.5h.05v.1s-.01.02-.03.02h-.19s-.02-.01-.02-.03v-.08z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.36 6.5l-.05.02v.08l.24.03.01-.03v-.1l-.05.02.02.03-.06.01-.01-.05H4.4l.01.04-.05.01-.01-.05zm.19.14h-.23L4.3 6.6v-.1h.07l.01.05.03-.01-.01-.03.07-.02.01.06.03-.01V6.5l.06-.02.01.13-.04.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.51 6.62v.15h-.17v-.15z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.52 6.62h-.18v.17l.19-.01-.01-.16zm.03.18h-.21v-.18l.2-.02.01.2zm.1-.22c0-.03.03-.03.03 0v.06h-.03v-.06zm.23.1c0-.03.04-.03.04 0v.05h-.04v-.06z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#000\" d=\"M4.4 6.67c0-.02.05-.02.05 0v.06H4.4v-.06z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M6.58 6.37h.06v.03h.04v-.03h.05v.03h.04v-.03h.06v.09s-.01.02-.03.02h-.2l-.02-.02v-.1z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M6.63 6.37l-.05.01.01.09.24.02.01-.02v-.1l-.05.01.01.03-.05.01-.01-.05-.05.01v.03l-.05.01-.01-.05zm.2.13H6.6l-.03-.03v-.1l.07-.02.01.06.04-.01-.02-.03.08-.02.01.06.03-.01-.01-.03.07-.02.02.13-.04.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M6.79 6.49v.28h-.18l.01-.28z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M6.8 6.49h-.18v.31h.18v-.31zm.03.32H6.6v-.33h.2l.02.33z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M6.82 6.5h.05v.04h.04v-.03h.06v.03H7v-.03h.06v.08c0 .02 0 .03-.02.03h-.2a.03.03 0 0 1-.02-.03v-.08z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M6.87 6.5l-.05.02.01.08.23.03.01-.03v-.1l-.05.02.02.03-.06.01v-.05h-.06l.01.04-.05.01-.01-.05zm.19.14h-.22L6.8 6.6v-.1h.07l.01.05.03-.01-.01-.03.07-.02.01.06.03-.01V6.5l.07-.02v.13l-.03.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M7.03 6.62v.15h-.18v-.15z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M7.03 6.62h-.18l.01.16h.2l-.03-.16zm-.2.18l.01-.18.2-.02.02.19-.22.01z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M6.35 6.5h.05v.04h.04v-.03h.05v.03h.04v-.03h.06v.09s-.01.02-.03.02h-.19a.03.03 0 0 1-.02-.03v-.08z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M6.4 6.5l-.05.02.01.08.23.03V6.51l-.04.01.01.03-.05.01-.01-.05-.05.01.01.03-.05.01-.02-.05zm.19.14h-.23l-.02-.04v-.1h.07v.05l.04-.01-.01-.03.07-.02.01.06.03-.01-.01-.03.07-.02.01.13-.03.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M6.55 6.62v.15h-.18l.01-.15z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M6.56 6.62h-.18v.17l.18-.01v-.16zm.03.18h-.22v-.18l.2-.01.02.2z\" />\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M6.52 7.18c0-.24.18-.3.18-.3s.19.07.19.3h-.37z\" />\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M6.37 6.89l-.03.28h.18c0-.23.18-.27.18-.27s.18.05.19.27h.18l-.03-.29h-.67z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M6.76 6.9c.05.01.19.08.2.3l.17-.01-.04-.3h-.33zm-.04 0h-.35l-.02.3.19-.01c-.01-.21.12-.28.18-.3zm.44.31h-.22c-.02-.24-.2-.3-.2-.3s-.19.04-.19.29l-.21.01.02-.32.75-.02.05.34z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M6.33 7.17h.75c.02 0 .03.01.03.03 0 .02-.01.04-.03.04h-.76L6.3 7.2c0-.02.01-.03.03-.03\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M6.33 7.18v.05h.83s.02 0 .02-.02l-.85-.03zm.83.08h-.83c-.02 0-.04-.02-.04-.05 0-.03.02-.05.04-.05h.83c.02 0 .04.02.04.05 0 .03-.02.05-.04.05z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M6.6 7.17c0-.15.1-.2.1-.2s.1.05.1.2h-.2z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M6.7 7c.01 0-.09.04-.09.19l.2-.01c0-.14-.1-.19-.1-.19zm.14.2H6.6c-.01-.18.1-.23.1-.23.02 0 .14.05.14.22v.01z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M6.34 6.77h.73l.02.03c0 .02 0 .03-.02.03h-.73a.03.03 0 0 1-.03-.03l.03-.03\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M6.35 6.79v.04h.8V6.8l-.8-.03zm.8.06h-.8c-.03 0-.05-.02-.05-.04 0-.03.02-.05.05-.05h.8c.01 0 .03.02.03.05 0 .02-.02.04-.04.04z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M6.36 6.83h.7l.02.04c0 .01-.01.03-.03.03h-.7l-.02-.03c0-.02.01-.04.03-.04\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M6.36 6.85v.04h.76c.01 0 .02 0 .02-.02l-.78-.02zm.76.07h-.76c-.02 0-.04-.03-.04-.05 0-.03.02-.05.04-.05h.76c.02 0 .04.02.04.05 0 .02-.02.05-.04.05zm-.43-.34c0-.03.03-.03.03 0v.06H6.7v-.06zm.23.1c0-.03.04-.03.04 0v.05h-.04v-.06zm-.47 0c0-.03.04-.03.03 0v.05h-.03v-.06z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M8.6 6.37h.05v.04h.04v-.04h.06v.04h.04v-.04h.05v.09c0 .01 0 .02-.02.02h-.2l-.02-.02v-.1z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.65 6.37l-.05.01.01.09.23.02.02-.02v-.1l-.05.01v.03l-.05.02v-.06l-.06.01.01.03-.05.02-.01-.06zm.2.14H8.6l-.02-.04v-.1l.07-.01v.05h.04l-.01-.04.07-.01.02.05h.03l-.02-.04.08-.01v.12l-.03.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M8.8 6.49l.02.28h-.2l.02-.28z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M8.8 6.49l-.16.01v.3h.18l-.01-.31zm.05.33h-.23v-.33l.2-.01.03.34z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M8.83 6.5h.06v.05h.04V6.5h.05v.04h.04V6.5h.06v.09a.02.02 0 0 1-.03.02h-.19l-.02-.02v-.1z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.88 6.51l-.05.01.02.09.23.02V6.51l-.04.01.01.03-.05.01-.02-.05-.04.01v.03l-.04.01-.02-.05zm.2.14h-.23l-.03-.04v-.1l.08-.01v.05l.04-.01-.02-.03.08-.02.01.06.03-.01-.01-.03.07-.02.01.13-.03.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M9.04 6.62v.15h-.18v-.15z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M9.05 6.62l-.18.01v.16l.18-.01v-.16zm.03.18h-.22v-.18l.2-.01.02.2z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M8.36 6.5h.06v.05h.04V6.5h.05v.04h.04V6.5h.05v.09c0 .01 0 .02-.02.02h-.2a.03.03 0 0 1-.02-.02v-.1z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.41 6.51l-.05.01.02.09.22.02.01-.02v-.1l-.04.01.01.03-.06.01v-.05l-.05.01v.03l-.05.01v-.05zm.19.14h-.22l-.03-.04v-.1l.07-.01.01.05.04-.01-.02-.03.07-.01.02.05.03-.01-.01-.03.07-.01v.12l-.03.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M8.57 6.62v.15H8.4v-.15z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M8.57 6.62l-.17.01v.16l.18-.01v-.16zm.04.18h-.22v-.18l.2-.01.02.2z\" />\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M8.54 7.18c0-.24.18-.3.18-.3s.19.06.19.3h-.38z\" />\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M8.38 6.89l-.03.28h.19c0-.23.18-.27.18-.27s.18.05.18.27h.19l-.03-.28h-.68z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.77 6.9c.05.01.2.09.2.3l.17-.01-.03-.3h-.34zm-.04 0H8.4l-.02.3.19-.01c-.01-.21.12-.28.17-.3zm.44.31h-.21c-.02-.24-.2-.3-.2-.3s-.19.04-.2.3h-.2l.02-.32.74-.01.05.33z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M8.34 7.17h.76l.03.03c0 .02-.02.04-.03.04h-.76c-.01 0-.03-.02-.03-.04 0-.01.01-.03.03-.03\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.35 7.18v.06h.83l.02-.03-.85-.03zm.83.08h-.83c-.03 0-.05-.02-.05-.05 0-.03.02-.05.05-.05h.83c.02 0 .04.02.04.05 0 .03-.02.05-.04.05z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M8.62 7.17c0-.15.1-.2.1-.19 0 0 .1.04.1.19h-.2z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.72 7s-.09.04-.1.19l.2-.01c0-.14-.1-.19-.1-.19zm.14.2h-.24c-.01-.18.1-.23.1-.23.02 0 .14.05.14.22v.01z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M8.36 6.77h.72c.02 0 .03.02.03.03s-.01.03-.03.03h-.72a.03.03 0 0 1-.03-.03c0-.01.01-.03.03-.03\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.36 6.79v.04h.8l.01-.02-.8-.02zm.8.06h-.8a.04.04 0 0 1-.04-.04c0-.03.02-.05.04-.05h.8c.02 0 .04.02.04.05 0 .02-.02.04-.04.04z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M8.37 6.83h.7l.02.03-.02.04h-.7l-.02-.04c0-.01 0-.03.02-.03\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.38 6.85v.04h.76l.01-.02-.77-.02zm.76.07h-.76c-.03 0-.04-.03-.04-.05 0-.03.01-.05.04-.05h.76c.02 0 .04.02.04.05 0 .02-.02.05-.04.05zm-.44-.34c0-.03.04-.03.04 0v.07H8.7v-.07zm.24.1c0-.03.04-.03.03 0v.05h-.03v-.06zm-.48 0c0-.03.04-.03.04 0v.05h-.04v-.06z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M4.55 8.4h.05v.05h.04V8.4h.06v.04h.03V8.4h.06v.08c0 .02-.01.03-.03.03h-.2a.02.02 0 0 1-.01-.03v-.08z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.6 8.4l-.05.02v.09l.24.02.01-.02v-.1h-.05l.02.04-.06.01-.01-.05h-.05l.01.04-.06.01v-.05zm.19.14h-.23l-.03-.03v-.1l.07-.02.02.06.03-.01-.01-.03.07-.02.01.06.03-.01v-.03l.07-.02v.13l-.03.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.75 8.53l.01.28h-.19l.01-.28h.17z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M4.76 8.53h-.18v.31h.2l-.02-.31zm.03.32h-.22v-.32l.2-.02.02.34z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M4.78 8.54h.06v.05h.04v-.05h.05v.05h.04v-.05h.05v.1L5 8.64h-.2s-.02 0-.02-.02v-.09z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.83 8.55h-.05l.01.1.23.02.02-.02v-.1h-.05v.04l-.05.01v-.05h-.06l.02.04-.06.01-.01-.05zm.2.13H4.8l-.03-.03v-.1l.07-.02.01.06.03-.01v-.03l.06-.02.02.06.03-.01-.01-.03.07-.02v.13l-.03.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.99 8.65v.16h-.18v-.16z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M5 8.66H4.8l.01.17.18-.01v-.16zm.02.18h-.21v-.18l.2-.02.01.2z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M4.31 8.55h.05v.03h.04v-.04h.06v.04h.04v-.04h.05v.1s-.01.02-.03.02h-.19l-.02-.02v-.1z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.36 8.55H4.3l.01.1.23.02.01-.02v-.1h-.04v.04l-.05.01v-.05H4.4l.01.04-.05.01-.01-.05zm.19.13h-.22l-.03-.03v-.1l.07-.01.01.05.03-.01-.01-.03.07-.01.01.05.04-.01-.02-.03.07-.01.02.12-.04.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.52 8.66v.15h-.18v-.15z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M4.52 8.66l-.18.01.01.16.18-.01v-.16zm.03.18h-.21v-.18l.2-.01.01.19z\" />\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.48 9.22c0-.24.18-.3.18-.3s.2.06.2.3h-.38z\" />\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.33 8.93l-.03.28h.19c0-.23.17-.27.18-.27 0 0 .17.05.18.27h.19L5 8.92h-.67z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.72 8.93c.05.02.2.1.2.3h.17l-.03-.3h-.34zm-.04 0l-.34.01-.03.3.2-.01c-.01-.21.12-.28.17-.3zm.44.32H4.9c-.01-.25-.2-.3-.2-.3s-.18.04-.18.29l-.22.01.02-.32.75-.02.05.34z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M4.29 9.2h.75c.02 0 .03.02.03.04s-.01.04-.03.04H4.3c-.02 0-.03-.02-.03-.04s.01-.03.03-.03\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.3 9.22v.05h.82c.01 0 .02 0 .02-.02l-.85-.03zm.82.08H4.3c-.02 0-.04-.03-.04-.05 0-.03.02-.05.04-.05h.83c.03 0 .05.02.05.05 0 .02-.02.05-.05.05z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.56 9.2c0-.14.1-.18.1-.18s.11.04.11.19h-.2z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.67 9.03s-.1.05-.1.2l.2-.01c0-.14-.1-.19-.1-.19zm.13.21h-.24c0-.18.1-.23.12-.23 0 0 .12.05.12.22v.01z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M4.3 8.81h.73c.01 0 .03.01.03.03 0 .02-.01.03-.03.03H4.3c-.01 0-.02-.01-.02-.03 0-.02 0-.03.02-.03\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.3 8.82v.05h.8c.01 0 .02-.01.02-.03l-.81-.02zm.8.07h-.8c-.02 0-.03-.02-.03-.04 0-.03.01-.05.04-.05h.8c.02 0 .03.02.03.04 0 .03-.01.05-.04.05z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M4.32 8.87h.7l.02.03c0 .02-.01.03-.03.03h-.69c-.02 0-.03 0-.03-.03 0-.01.01-.03.03-.03\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.33 8.89v.04h.75c.01 0 .02 0 .02-.02l-.77-.02zm.75.07h-.75c-.03 0-.05-.02-.05-.05 0-.03.02-.05.04-.05h.76c.03 0 .05.02.05.05 0 .03-.02.05-.05.05zm-.43-.35c0-.02.04-.02.04 0v.07h-.04v-.06zm.23.1c0-.02.04-.02.04 0v.06h-.04V8.7zm-.47 0c0-.02.04-.02.04 0v.06H4.4V8.7z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M8.48 10.56l.04.04-.03.03.03.02.03-.03.03.04-.02.03.03.03.02-.03.04.04-.06.06h-.03l-.14-.14v-.03l.06-.06z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.48 10.57l-.06.07.17.19.01-.02.07-.07-.05-.02v.03l-.05-.03.03-.05-.05-.03-.01.03-.05-.03.03-.05-.04-.02zm.11.27l-.03-.01-.16-.16v-.05l.08-.07.06.04-.03.05.03.01.01-.02.06.04-.03.05.03.01.01-.03.07.04-.1.1z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M8.54 10.79l-.2.2-.13-.13.21-.2z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M8.44 10.68l-.22.21.14.13.2-.23-.12-.11zm-.08.37l-.16-.16.24-.23.14.13-.22.26z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M8.55 10.82l.03.04-.02.03.02.03.03-.03.04.04-.03.03.03.02.03-.03.04.04-.06.06h-.04l-.13-.13v-.03l.06-.07z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.54 10.83l-.04.07.15.19.01-.02.07-.07-.04-.02-.01.03-.05-.03.03-.05-.04-.03-.02.04-.04-.03.03-.05-.05-.03zm.12.27l-.03-.01-.16-.16v-.05l.07-.06.06.04-.03.04.03.02.02-.03.06.04-.03.05.03.01.01-.03.06.04-.1.1z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M8.61 11.05l-.1.1-.13-.12.11-.1z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M8.5 10.94l-.11.11.13.12.1-.12-.13-.12zm.02.26l-.15-.15.12-.13.15.13-.12.15z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M8.21 10.5l.04.03-.03.03.03.03.03-.03.04.03-.03.03.03.03.02-.03.04.04-.06.06h-.03l-.14-.13v-.04l.06-.06z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.21 10.5l-.05.07.16.19v-.02l.08-.07-.04-.02-.02.03-.04-.03.03-.05-.05-.02-.01.03-.05-.03.03-.05-.04-.03zm.11.27l-.03-.01-.15-.16v-.05l.07-.07.06.05-.03.05h.03l.01-.02.06.04-.03.05h.03l.02-.02.06.04-.1.1z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M8.28 10.72l-.1.1-.14-.12.12-.1z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M8.16 10.6l-.1.12.13.12.1-.12-.13-.11zm.03.27l-.15-.15.12-.13.15.13-.12.15z\" />\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M7.85 11.1c.18-.18.34-.1.34-.1s.1.18-.08.35l-.26-.26z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M7.96 10.78l-.23.18.13.13c.17-.17.32-.07.33-.07 0 0 .09.16-.07.32l.13.13.18-.22-.47-.47z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M7.97 10.79l-.23.2.15.12c.09-.11.26-.11.33-.08l-.25-.24zm.28.27l.02.09a.33.33 0 0 1-.1.26l.13.12.2-.24-.25-.23zm.06.5l-.16-.15c.16-.18.07-.35.07-.35s-.05-.03-.12-.03a.31.31 0 0 0-.21.1l-.16-.14.24-.22.54.52-.2.27z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M7.73 10.95l.53.53v.04H8.2L7.68 11c-.02-.01-.01-.03 0-.05a.03.03 0 0 1 .05 0\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M7.68 11l.6.6.02-.02-.58-.62-.04.04zm.6.61l-.03-.01-.58-.59c-.02-.02-.02-.04 0-.06l.04-.02.61.6c.02.01.02.04 0 .06l-.04.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M7.92 11.14c.1-.1.2-.06.2-.06s.05.1-.05.2l-.15-.14z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.09 11.08c-.04 0-.1.02-.16.08l.15.13c.09-.1.06-.19.06-.2h-.05zm0 .24l-.18-.17c.12-.15.24-.08.24-.08.01 0 .05.13-.06.25z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M8.02 10.68l.51.5v.05H8.5l-.51-.5c-.02-.02-.01-.04 0-.05s.03-.01.04 0z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.02 10.69l-.03.03.57.58.02-.02-.56-.6zm.54.62l-.03-.01-.56-.56a.05.05 0 0 1 0-.07h.07l.56.56v.06l-.04.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M7.99 10.73l.49.49v.04h-.05l-.49-.48v-.04c.02-.02.04-.02.05 0\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M7.99 10.74l-.04.03.55.56.02-.02-.53-.57zm.51.6l-.03-.01-.54-.54v-.06H8l.54.53v.06l-.04.02zm-.1-.57c.02-.02.05 0 .03.03l-.05.05-.03-.03.06-.05zm.1.24c.02-.02.04 0 .03.02l-.04.04-.03-.03.04-.03zm-.34-.33c.02-.02.05 0 .03.02l-.04.04-.03-.03.04-.03z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M8.6 8.4h.05v.05h.04V8.4h.06v.04h.03V8.4h.06v.09l-.02.02h-.2L8.6 8.5v-.1z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.64 8.4l-.04.02v.09l.24.02.01-.02v-.1l-.05.01.02.03-.06.01-.01-.05-.05.01.01.03-.05.01-.02-.05zm.2.14H8.6l-.03-.03v-.1l.08-.02v.06l.04-.01-.02-.03.08-.02.01.06.03-.01-.01-.03.08-.02v.13l-.03.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M8.8 8.53l.01.28h-.19l.01-.29z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M8.8 8.53h-.17v.31h.19l-.01-.31zm.04.32h-.22v-.32l.2-.02.02.34z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M8.83 8.55h.06v.03h.03v-.04h.06v.04h.04v-.04h.05v.1s0 .02-.02.02h-.2l-.02-.02v-.1z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.88 8.55h-.05l.01.1.23.02.01-.02v-.1h-.04v.04L9 8.6v-.05h-.06l.02.04-.06.01-.01-.05zm.2.13h-.23l-.03-.03v-.1l.07-.02.02.06.02-.01v-.03l.06-.02.02.06.03-.01-.02-.03.08-.02v.13l-.03.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M9.04 8.66v.15h-.18v-.15z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M9.04 8.66l-.17.01v.16l.18-.01v-.16zm.04.18h-.22v-.18l.2-.02.01.2z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M8.36 8.55h.05v.03h.04v-.04h.05v.04h.05v-.04h.05v.1s-.01.02-.03.02h-.19l-.02-.02v-.1z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.4 8.55h-.04l.01.1.23.02.01-.02v-.1h-.04v.04l-.05.01v-.05h-.06l.01.04-.05.01-.01-.05zm.2.13h-.23l-.02-.03v-.1l.07-.02.01.06.03-.01-.01-.03.07-.02.01.06.04-.01-.02-.03.08-.02v.13l-.03.02z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M8.56 8.66l.01.15H8.4v-.15z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M8.57 8.66l-.18.01.01.15h.2l-.03-.16zm-.2.18l.01-.18.2-.01.02.18-.22.01z\" />\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M8.53 9.22c0-.24.18-.3.18-.3s.2.06.2.3h-.38z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M8.38 8.93l-.03.28h.19c0-.23.17-.27.18-.27 0 0 .17.05.18.27h.18l-.03-.28h-.67z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.77 8.93c.06.02.19.1.2.31l.17-.01-.03-.3h-.34zm-.04 0l-.35.01-.02.3.2-.01c-.01-.21.12-.28.17-.3zm.44.32h-.22c-.01-.25-.2-.3-.2-.3s-.18.04-.18.29l-.22.01.02-.32.75-.02.05.34z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M8.34 9.2h.75c.02 0 .03.02.03.04s0 .04-.03.04h-.75c-.02 0-.03-.02-.03-.04s.01-.03.03-.03\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.34 9.22v.05h.83c.01 0 .02 0 .02-.02l-.85-.03zm.83.08h-.83c-.02 0-.04-.03-.04-.05 0-.03.02-.05.04-.05h.83c.03 0 .05.02.05.05 0 .02-.02.05-.05.05z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M8.61 9.2c0-.14.1-.18.1-.18s.11.04.11.19h-.2z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.72 9.03s-.1.05-.1.2l.2-.01c0-.14-.1-.19-.1-.19zm.13.21h-.24c0-.18.1-.23.11-.23.01 0 .13.05.13.22v.01z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M8.36 8.81h.72c.01 0 .03.01.03.03 0 .02-.01.03-.03.03h-.72c-.02 0-.03-.01-.03-.03 0-.02.01-.03.02-.03\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.36 8.82v.05h.8l.01-.02-.81-.03zm.8.07h-.8c-.02 0-.04-.02-.04-.04 0-.03.02-.05.04-.05h.8c.02 0 .04.02.04.05 0 .02-.02.04-.05.04z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M8.37 8.87h.7l.02.04c0 .01-.01.02-.03.02h-.69c-.01 0-.03 0-.03-.03s.01-.03.03-.03\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M8.37 8.89v.04h.76c.01 0 .02 0 .02-.02l-.78-.02zm.76.07h-.76c-.02 0-.04-.02-.04-.05s.02-.05.04-.05h.76c.03 0 .05.02.05.05 0 .03-.02.05-.05.05zM8.7 8.6c0-.02.04-.02.04 0v.08H8.7v-.07zm.24.1c0-.02.03-.02.03 0v.06h-.03V8.7zm-.48 0c0-.02.04-.02.04 0v.06h-.04V8.7z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M4.74 10.73l.04-.04.03.03.03-.03-.03-.03.04-.04.03.03.03-.03-.03-.03.04-.03.06.06v.03l-.14.14h-.03l-.07-.06z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.78 10.71l-.03.05.08.06.01-.01.16-.16-.07-.08-.03.04.03.01-.03.05-.05-.03-.03.04.04.02-.04.04-.04-.03zm.05.13l-.03-.02-.06-.06.04-.06.04.03.02-.03-.03-.02.04-.06.05.03.01-.03-.03-.01.05-.06.1.07-.02.05-.18.17z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.97 10.67l.22.2-.14.12-.2-.2z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M4.98 10.68l-.11.13.2.2.14-.14-.23-.2zm.1.37l-.23-.25.13-.14.25.21-.16.18z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M5.01 10.66l.04-.04.03.03.03-.03-.04-.02.04-.04.03.02.03-.02-.03-.03.04-.04.07.06v.04l-.14.13h-.04l-.06-.06z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M5.04 10.65l-.02.04.08.07.01-.02.15-.15-.07-.09-.03.04.03.02-.02.04-.05-.03-.03.05h.03l-.03.06-.05-.03zm.06.12l-.03-.01-.07-.07.05-.06.04.03.02-.03-.04-.01.05-.06.05.03v-.03l-.02-.02.04-.06.09.08v.05l-.18.16z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M5.24 10.6l.11.1-.13.13-.1-.11z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M5.24 10.6l-.12.14.11.1.13-.14-.12-.1zm0 .27l-.13-.13.13-.15.14.11-.15.17z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M4.68 10.99l.03-.04.03.03.03-.03-.03-.02.04-.04.03.02.03-.02-.03-.03.04-.04.06.06v.03l-.14.14h-.03L4.68 11z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.71 10.98l-.03.04.09.07v-.02l.16-.15-.07-.09-.03.04.03.02-.03.04-.05-.03-.02.05h.03l-.03.06-.05-.03zm.06.12l-.03-.01-.07-.07.04-.06.05.03.01-.03-.03-.01.04-.06.05.03.02-.03-.04-.02.05-.05.08.07v.04l-.17.17z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.9 10.92l.12.1-.13.14-.1-.12z\" />\n\t\t\t\t<path fill=\"#000\" d=\"M4.91 10.93l-.12.14.1.1.14-.14-.12-.1zm-.01.27l-.13-.13.14-.16.14.12-.15.17z\" />\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M5.29 11.35c-.17-.18-.1-.34-.1-.34s.19-.09.36.08l-.26.26z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M4.97 11.24l.18.22.13-.13c-.17-.16-.07-.31-.07-.31s.16-.1.32.06l.13-.13-.22-.17-.47.46z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M5.36 11c.09 0 .17.04.24.1l.12-.14-.24-.18-.23.25a.3.3 0 0 1 .11-.03zm-.15.06l-.24.25.2.21.13-.13a.28.28 0 0 1-.11-.25.33.33 0 0 1 .02-.08zm-.05.5l-.2-.26.52-.53.26.2-.14.15c-.09-.06-.16-.1-.24-.1-.07 0-.12.04-.12.04s-.1.15.08.33l-.16.17z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M5.14 11.47l.53-.53h.05V11l-.53.53h-.05v-.05\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M5.75 10.95l-.6.6v.03l.02.01.01-.01.59-.59v-.04h-.02zm-.58.66l-.03-.02c-.02-.02-.03-.05-.01-.07l.58-.58c.05-.02.06 0 .07 0 .02.02.02.05 0 .07l-.6.6z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M5.33 11.28c-.1-.1-.06-.2-.06-.2s.1-.05.2.06l-.14.14z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M5.27 11.09s-.03.1.07.2l.15-.16a.26.26 0 0 0-.22-.04zm.07.23h-.01c-.12-.13-.07-.24-.07-.25.01-.01.12-.06.25.07l-.17.18z\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#FCFF2C\"\n\t\t\t\t\td=\"M4.86 11.18l.52-.5c0-.02.03-.02.04 0v.04l-.51.5c-.01.02-.03.01-.04 0-.02-.01-.02-.03 0-.04\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.9 11.28v.01-.01l.56-.56.01-.04h-.02l-.58.57v.03h.02zm0 .03l-.04-.02v-.06l.56-.56h.06c.02.02.02.05 0 .06l-.59.58z\"\n\t\t\t\t/>\n\t\t\t\t<path fill=\"#FCFF2C\" d=\"M4.92 11.21l.49-.48h.04v.04l-.49.49h-.04v-.05\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#000\"\n\t\t\t\t\td=\"M4.95 11.31v.02l.01-.02.54-.54v-.04h-.02l-.55.55v.03h.02zm0 .03l-.04-.02a.04.04 0 0 1 0-.06l.54-.54h.06c.02.02.02.05 0 .07l-.56.55zm.02-.54c-.02-.02 0-.05.02-.03l.05.05-.02.02-.05-.04zm.23-.1c-.02-.02.01-.04.03-.03l.04.04-.03.03-.04-.04zm-.33.33c-.02-.02 0-.04.03-.02l.03.03-.02.03-.04-.04z\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t</FlagIconWrapper>\n);\n","import * as React from 'react';\nimport { FlagIconWrapper } from '../flag-icon-wrapper/flag-icon-wrapper.component';\n\nexport const FlagSpainIcon = () => (\n\t<FlagIconWrapper>\n\t\t<svg viewBox=\"0 0 21 18\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<mask id=\"flagSpainB\" fill=\"#fff\">\n\t\t\t\t<rect width=\"21\" height=\"18\" rx=\"2\" />\n\t\t\t</mask>\n\t\t\t<g mask=\"url(#flagSpainB)\">\n\t\t\t\t<rect x=\"0\" y=\"0\" width=\"21\" height=\"5\" fill=\"#D9000C\" />\n\t\t\t\t<rect x=\"0\" y=\"5\" width=\"21\" height=\"8\" fill=\"#FFC200\" />\n\t\t\t\t<rect x=\"0\" y=\"13\" width=\"21\" height=\"5\" fill=\"#D9000C\" />\n\t\t\t</g>\n\t\t</svg>\n\t</FlagIconWrapper>\n);\n","import * as React from 'react';\nimport { FlagIconWrapper } from '../flag-icon-wrapper/flag-icon-wrapper.component';\n\nexport const FlagIsraelIcon = () => (\n\t<FlagIconWrapper>\n\t\t<svg viewBox=\"0 0 21 18\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<mask id=\"flagIsraelB\" fill=\"#fff\">\n\t\t\t\t<rect width=\"21\" height=\"18\" rx=\"2\" />\n\t\t\t</mask>\n\t\t\t<g mask=\"url(#flagIsraelB)\">\n\t\t\t\t<rect width=\"21\" height=\"18\" fill=\"#FFF\" />\n\t\t\t\t<rect x=\"0\" y=\"2\" width=\"21\" height=\"3\" fill=\"#0854B8\" />\n\t\t\t\t<g stroke=\"#0854B8\" strokeWidth=\".5\" fill=\"none\">\n\t\t\t\t\t<path d=\"M10.44 11.846L8 7.531h4.941z\" />\n\t\t\t\t\t<path d=\"M10.44 6L8 10.513h4.941z\" />\n\t\t\t\t</g>\n\t\t\t\t<rect x=\"0\" y=\"13\" width=\"21\" height=\"3\" fill=\"#0854B8\" />\n\t\t\t</g>\n\t\t</svg>\n\t</FlagIconWrapper>\n);\n","import * as React from 'react';\nimport { FlagIconWrapper } from '../flag-icon-wrapper/flag-icon-wrapper.component';\n\nexport const FlagArabicIcon = () => (\n\t<FlagIconWrapper>\n\t\t<svg width=\"21\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 21 18\">\n\t\t\t<path fill=\"#007d35\" d=\"M0 0h21v18H0z\" />\n\t\t\t<text fill=\"#fff\" fontFamily=\"GeezaPro,Geeza Pro\" fontSize=\"10\" transform=\"translate(10.5 14)\">\n\t\t\t\t<tspan x=\"-4.946\" y=\"0\">\n\t\t\t\t\t\n\t\t\t\t</tspan>\n\t\t\t</text>\n\t\t</svg>\n\t</FlagIconWrapper>\n);\n","import * as React from 'react';\nimport { FlagIconWrapper } from '../flag-icon-wrapper/flag-icon-wrapper.component';\n\nexport const FlagChinaIcon = () => (\n\t<FlagIconWrapper>\n\t\t<svg viewBox=\"0 0 21 18\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<rect fill=\"#F20000\" width=\"21\" height=\"18\" rx=\"2\" />\n\t\t\t<path\n\t\t\t\tfill=\"#FD0\"\n\t\t\t\td=\"M4.5 7.8L3 8.8l.6-1.6L2.1 6H4l.6-1.7.6 1.7h1.8L5.4 7 6 9zM7.8 4.7h-.7l.5-.4-.3-.7.7.4.5-.5-.2.7.7.4h-.7l-.2.8zM10.5 9.1l-.5.6v-.8l-.6-.2.7-.2v-.7l.4.6.7-.2-.5.6.4.6zM10.1 5.9l-.7-.2.6-.3v-.7l.4.5.7-.3-.4.6.6.5h-.8l-.3.6zM7.8 10.7h-.7l.5-.4-.3-.7.7.4.5-.5-.2.7.7.4h-.7l-.2.8z\"\n\t\t\t/>\n\t\t</svg>\n\t</FlagIconWrapper>\n);\n","import * as React from 'react';\nimport { Locales } from './locale-selector.model';\nimport { FlagUsaIcon } from '../icons/flag-usa.icon';\nimport { FlagRussiaIcon } from '../icons/flag-russia.icon';\nimport { FlagGermanyIcon } from '../icons/flag-germany.icon';\nimport { FlagFranceIcon } from '../icons/flag-france.icon';\nimport { FlagItalyIcon } from '../icons/flag-italy.icon';\nimport { FlagPortugeseIcon } from '../icons/flag-portugese.icon';\nimport { FlagSpainIcon } from '../icons/flag-spain.icon';\nimport { FlagIsraelIcon } from '../icons/flag-israel.icon';\nimport { FlagArabicIcon } from '../icons/flag-arabic.icon';\nimport { FlagChinaIcon } from '../icons/flag-china.icon';\nimport { IO } from 'fp-ts/lib/IO';\n\n// It's static. No need to put this inside component\nexport const getFlagIcon = (locale: Locales) => {\n\tswitch (locale) {\n\t\tcase 'en':\n\t\t\treturn <FlagUsaIcon />;\n\t\tcase 'ru':\n\t\t\treturn <FlagRussiaIcon />;\n\t\tcase 'de':\n\t\t\treturn <FlagGermanyIcon />;\n\t\tcase 'fr':\n\t\t\treturn <FlagFranceIcon />;\n\t\tcase 'it':\n\t\t\treturn <FlagItalyIcon />;\n\t\tcase 'pt':\n\t\t\treturn <FlagPortugeseIcon />;\n\t\tcase 'es':\n\t\t\treturn <FlagSpainIcon />;\n\t\tcase 'he':\n\t\t\treturn <FlagIsraelIcon />;\n\t\tcase 'ar':\n\t\t\treturn <FlagArabicIcon />;\n\t\tcase 'zh_CN':\n\t\t\treturn <FlagChinaIcon />;\n\t\tdefault:\n\t\t\treturn <FlagUsaIcon />;\n\t}\n};\n\nexport const dispatchLocaleChangeEvent = (locale: Locales) =>\n\tnew IO<void>(() => document.dispatchEvent(new CustomEvent('lokalise-update-locale', { detail: locale })));\n\nexport const isLocale = (value: unknown): value is Locales =>\n\ttypeof value === 'string' && ['en', 'ru', 'de', 'fr', 'it', 'pt', 'es', 'he', 'ar', 'zh_CN'].includes(value);\n\nexport const getFallbackLanguage = (lng: string) => {\n\tswitch (lng) {\n\t\tcase 'zh-Hans':\n\t\t\treturn 'zh_CN';\n\t\tdefault:\n\t\t\treturn lng;\n\t}\n};\n","import * as React from 'react';\nimport { Component, ComponentClass } from 'react';\nimport * as cn from 'classnames';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { isNotNullable } from '@devexperts/utils/dist/object';\nimport {\n\tTSelectboxAnchorProps,\n\tTFullSelectboxAnchorProps,\n} from '@devexperts/react-kit/dist/components/Selectbox/SelectboxAnchor';\nimport { Button } from '../button/button.component';\nimport { ArrowDownFlatIcon } from '../icons/arrow-down-flat.icon';\nimport { getFlagIcon } from './locale-selector.utils';\nimport { Locales } from './locale-selector.model';\nimport * as css from './theme/locale-selector-anchor.module.css';\n\nclass RawLocaleSelectorAnchor extends Component<TFullSelectboxAnchorProps> {\n\trender() {\n\t\tconst { theme, children, onClick, isOpened, value } = this.props;\n\n\t\tconst buttonTheme = {\n\t\t\tcontainer: cn(theme.container, {\n\t\t\t\t[theme.container_isOpened as string]: isOpened,\n\t\t\t}),\n\t\t};\n\n\t\treturn (\n\t\t\t<Button onClick={onClick} theme={buttonTheme}>\n\t\t\t\t<div className={theme.content}>\n\t\t\t\t\t<div className={theme.text}>{isNotNullable(value) ? getFlagIcon(value as Locales) : null}</div>\n\t\t\t\t\t<div className={cn({ [css.current_opened]: isOpened })}>\n\t\t\t\t\t\t<i className={css.icon}>\n\t\t\t\t\t\t\t<ArrowDownFlatIcon />\n\t\t\t\t\t\t</i>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{children}\n\t\t\t</Button>\n\t\t);\n\t}\n}\n\nexport const LocaleSelectorAnchor: ComponentClass<TSelectboxAnchorProps> = withTheme(Symbol('LocaleSelectorAnchor'))(\n\tRawLocaleSelectorAnchor,\n);\n","export type Locales = 'en' | 'ru' | 'de' | 'fr' | 'it' | 'pt' | 'es' | 'he' | 'ar' | 'zh_CN';\n\nexport const DEFAULT_LOCALE = 'en';\n\nexport const localesOptions: Locales[] = [\n\t'en',\n\t'ru',\n\t'de',\n\t// 'fr',\n\t'it',\n\t'pt',\n\t'es',\n\t// 'he',\n\t// 'ar',\n\t'zh_CN',\n];\n\nexport const localeTitles = {\n\ten: 'English',\n\tru: '',\n\tde: 'Deutsch',\n\tfr: 'Francais',\n\tit: 'Italiano',\n\tpt: 'Portugus',\n\tes: 'Espaol',\n\the: '',\n\tar: '',\n\tzh_CN: '',\n};\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport cn from 'classnames';\nimport { isNotNullable } from '@devexperts/utils/dist/object';\nimport { Selectbox } from '../../ui-desktop/ui-kit/components/selectbox/selectbox.component';\nimport { MenuItem } from '../../ui-desktop/ui-kit/components/menu/menu.component';\nimport { CheckIcon } from '../icons/check.icon';\nimport { LocaleSelectorAnchor } from './locale-selector-anchor.component';\nimport { Locales, localeTitles, localesOptions } from './locale-selector.model';\nimport { getFlagIcon, dispatchLocaleChangeEvent, isLocale, getFallbackLanguage } from './locale-selector.utils';\nimport * as css from './theme/locale-selector.module.css';\nimport * as selectboxCss from './theme/selectbox.child.module.css';\nimport * as menuItemCss from './theme/menu-item.child.module.css';\n\ntype LocaleSelectorState = Readonly<{\n\tisOpened: boolean;\n}>;\n\nclass LocaleSelectorUnwrapped extends PureComponent<WithTranslation, LocaleSelectorState> {\n\treadonly state: LocaleSelectorState = {\n\t\tisOpened: false,\n\t};\n\n\tprivate toggleLocaleSelectorState = (isOpened: boolean | undefined) =>\n\t\tisNotNullable(isOpened) && this.setState({ isOpened });\n\n\tprivate handleLocaleSelect = (locale?: string | number) => {\n\t\tif (isLocale(locale)) {\n\t\t\tthis.changeLocale(locale);\n\t\t\tdispatchLocaleChangeEvent(locale).run();\n\t\t}\n\t};\n\n\tprivate changeLocale(locale: Locales) {\n\t\t// do not destructure 'i18n' prop as it's relays on 'this' keyword under the hood\n\t\tconst { i18n } = this.props;\n\t\tconst currentLocale = i18n.language;\n\n\t\tif (!isNotNullable(locale)) {\n\t\t\ti18n.changeLanguage(currentLocale);\n\t\t\treturn;\n\t\t}\n\n\t\ti18n.changeLanguage(locale).catch(() => i18n.changeLanguage(currentLocale));\n\t}\n\n\trender() {\n\t\tconst { i18n } = this.props;\n\t\tconst { isOpened } = this.state;\n\t\tconst currentLocale = getFallbackLanguage(i18n.language);\n\n\t\treturn (\n\t\t\t<Selectbox\n\t\t\t\tisOpened={isOpened}\n\t\t\t\tonToggle={this.toggleLocaleSelectorState}\n\t\t\t\tvalue={currentLocale}\n\t\t\t\tonValueChange={this.handleLocaleSelect}\n\t\t\t\tAnchor={LocaleSelectorAnchor}\n\t\t\t\ttheme={selectboxCss}>\n\t\t\t\t{localesOptions.map(locale => {\n\t\t\t\t\tconst isActive = locale === currentLocale;\n\t\t\t\t\tconst itemClassName = cn(css.localeInSelector, { [css.isCurrentLocale]: isActive });\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<MenuItem key={locale} theme={menuItemCss} value={locale} isActive={isActive}>\n\t\t\t\t\t\t\t<div className={itemClassName}>\n\t\t\t\t\t\t\t\t<div className={css.flag}>{getFlagIcon(locale)}</div>\n\t\t\t\t\t\t\t\t{localeTitles[locale]}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{isActive && (\n\t\t\t\t\t\t\t\t<i className={css.icon}>\n\t\t\t\t\t\t\t\t\t<CheckIcon />\n\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</Selectbox>\n\t\t);\n\t}\n}\n\nexport const LocaleSelector = withTranslation()(LocaleSelectorUnwrapped);\n","import * as React from 'react';\nimport { PureComponent, ReactNode, MouseEvent } from 'react';\nimport * as cn from 'classnames';\nimport { PartialKeys } from '@devexperts/utils/dist/object';\nimport { Link } from '@devexperts/react-kit/dist/components/Link/Link';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { MakeTheme } from '../../../../utils/theme.utils';\nimport * as css from './theme/menu-list-item.module.css';\n\nexport type RawMenuListItemProps = {\n\ttheme: MakeTheme<'container' | 'icon' | 'container_disabled'>;\n\ttext: ReactNode;\n\thref?: string;\n\ttarget?: string;\n\trel?: string;\n\ticon: ReactNode;\n\tonClick?: () => void;\n\tpreventDefault?: boolean;\n\tisDisabled?: boolean;\n};\n\nexport class RawMenuListItem extends PureComponent<RawMenuListItemProps> {\n\trender() {\n\t\tconst { text, icon, isDisabled, href, target, rel, theme } = this.props;\n\n\t\treturn (\n\t\t\t<Link\n\t\t\t\ttheme={{ container: cn(theme.container, { [theme.container_disabled as string]: isDisabled }) }}\n\t\t\t\thref={href}\n\t\t\t\ttarget={target}\n\t\t\t\trel={rel}\n\t\t\t\tonClick={this.handleClick}>\n\t\t\t\t<i className={theme.icon}>{icon}</i>\n\t\t\t\t<span>{text}</span>\n\t\t\t</Link>\n\t\t);\n\t}\n\thandleClick = (e: MouseEvent<HTMLElement>) => {\n\t\tconst { onClick, isDisabled, preventDefault } = this.props;\n\n\t\tif (isDisabled || preventDefault) {\n\t\t\te.preventDefault();\n\t\t}\n\t\tif (isDisabled || !onClick) {\n\t\t\treturn;\n\t\t}\n\t\tonClick();\n\t};\n}\n\nconst wTheme = {\n\t...css,\n};\n\nexport type MenuListItemProps = PartialKeys<RawMenuListItemProps, 'theme'>;\nexport const MenuListItem = withTheme(Symbol(), wTheme)(RawMenuListItem);\n","import * as React from 'react';\nimport { FunctionComponent } from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const AccountsIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 60\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M35.852 32.125a8.71 8.71 0 0 1 4.449 1.2 8.825 8.825 0 0 1 3.254 3.249 8.71 8.71 0 0 1 1.2 4.449v2.79a3.074 3.074 0 0 1-.93 2.258 3.074 3.074 0 0 1-2.258.93H18.188a3.074 3.074 0 0 1-2.258-.93 3.074 3.074 0 0 1-.93-2.258v-2.79a8.71 8.71 0 0 1 1.2-4.449 8.825 8.825 0 0 1 3.249-3.254 8.71 8.71 0 0 1 4.449-1.2 7.541 7.541 0 0 1 2.258.465q.93.266 1.527.4a11.194 11.194 0 0 0 2.192.203 11.194 11.194 0 0 0 2.191-.2q.6-.133 1.527-.4a7.541 7.541 0 0 1 2.259-.463zm6.773 11.688v-2.79a6.521 6.521 0 0 0-1.992-4.781 6.521 6.521 0 0 0-4.781-1.992 6.652 6.652 0 0 0-1.66.332 14.016 14.016 0 0 1-4.317.731 14.016 14.016 0 0 1-4.316-.73 6.652 6.652 0 0 0-1.661-.333 6.521 6.521 0 0 0-4.781 1.992 6.521 6.521 0 0 0-1.992 4.781v2.79a1.034 1.034 0 0 0 .3.764 1.034 1.034 0 0 0 .764.3h23.374a1.023 1.023 0 0 0 1.062-1.064zM29.875 30a8.428 8.428 0 0 1-4.283-1.129 8.269 8.269 0 0 1-3.088-3.088 8.428 8.428 0 0 1-1.129-4.283 8.428 8.428 0 0 1 1.129-4.283 8.269 8.269 0 0 1 3.088-3.088A8.428 8.428 0 0 1 29.875 13a8.428 8.428 0 0 1 4.283 1.129 8.269 8.269 0 0 1 3.088 3.088 8.428 8.428 0 0 1 1.129 4.283 8.428 8.428 0 0 1-1.129 4.283 8.269 8.269 0 0 1-3.088 3.088A8.428 8.428 0 0 1 29.875 30zm0-14.875a6.148 6.148 0 0 0-4.516 1.859A6.148 6.148 0 0 0 23.5 21.5a6.148 6.148 0 0 0 1.859 4.516 6.148 6.148 0 0 0 4.516 1.859 6.148 6.148 0 0 0 4.516-1.859A6.148 6.148 0 0 0 36.25 21.5a6.148 6.148 0 0 0-1.859-4.516 6.148 6.148 0 0 0-4.516-1.859z\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { FunctionComponent } from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const PersonalDetailsIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 60\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M38.25 13a4.084 4.084 0 0 1 2.988 1.262A4.084 4.084 0 0 1 42.5 17.25v25.5a4.084 4.084 0 0 1-1.262 2.988A4.084 4.084 0 0 1 38.25 47h-17a4.084 4.084 0 0 1-2.988-1.262A4.084 4.084 0 0 1 17 42.75v-25.5a4.084 4.084 0 0 1 1.262-2.988A4.084 4.084 0 0 1 21.25 13zm2.125 29.75v-25.5a2.042 2.042 0 0 0-.631-1.494 2.042 2.042 0 0 0-1.494-.631h-17a2.042 2.042 0 0 0-1.494.631 2.042 2.042 0 0 0-.631 1.494v25.5a2.042 2.042 0 0 0 .631 1.494 2.042 2.042 0 0 0 1.494.631h17a2.042 2.042 0 0 0 1.494-.631 2.042 2.042 0 0 0 .631-1.494zM26.563 19.375a1.034 1.034 0 0 1-.764-.3 1.034 1.034 0 0 1-.3-.764 1.034 1.034 0 0 1 .3-.764 1.034 1.034 0 0 1 .764-.3h6.375a1.034 1.034 0 0 1 .764.3 1.034 1.034 0 0 1 .3.764 1.034 1.034 0 0 1-.3.764 1.034 1.034 0 0 1-.764.3zm3.187 13.813a5.116 5.116 0 0 1-3.752-1.561 5.116 5.116 0 0 1-1.561-3.752 5.116 5.116 0 0 1 1.561-3.752 5.116 5.116 0 0 1 3.752-1.56 5.116 5.116 0 0 1 3.752 1.561 5.116 5.116 0 0 1 1.561 3.752 5.116 5.116 0 0 1-1.561 3.752 5.116 5.116 0 0 1-3.752 1.56zm0-8.5a3.074 3.074 0 0 0-2.258.93 3.074 3.074 0 0 0-.93 2.258 3.074 3.074 0 0 0 .93 2.258 3.074 3.074 0 0 0 2.258.929 3.074 3.074 0 0 0 2.258-.93 3.074 3.074 0 0 0 .93-2.258 3.074 3.074 0 0 0-.93-2.258 3.074 3.074 0 0 0-2.258-.929zm3.121 9.562a4.6 4.6 0 0 1 2.025.465 3.955 3.955 0 0 1 1.561 1.328 4.546 4.546 0 0 1 .73 2.523v2.59a.508.508 0 0 1-.166.365.508.508 0 0 1-.365.166h-1.062a.508.508 0 0 1-.365-.166.508.508 0 0 1-.166-.365v-2.59a2.308 2.308 0 0 0-.465-1.461 2.225 2.225 0 0 0-1.727-.73 3.851 3.851 0 0 0-1 .2 9.3 9.3 0 0 1-2.121.265 9.3 9.3 0 0 1-2.125-.266 3.851 3.851 0 0 0-1-.2 2.027 2.027 0 0 0-1.66.73 2.121 2.121 0 0 0-.531 1.461v2.59a.508.508 0 0 1-.166.365.508.508 0 0 1-.365.166h-1.059a.508.508 0 0 1-.365-.166.508.508 0 0 1-.166-.365v-2.59a4.546 4.546 0 0 1 .73-2.523 3.955 3.955 0 0 1 1.561-1.327 4.6 4.6 0 0 1 2.025-.465 5.6 5.6 0 0 1 1.494.232 6.018 6.018 0 0 0 1.627.233 6.018 6.018 0 0 0 1.627-.232 5.6 5.6 0 0 1 1.494-.233z\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { memo, ReactNode } from 'react';\nimport { PartialKeys } from '@devexperts/utils/dist/object';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { RawMenuListItemProps } from '../menu-list-item/menu-list-item.component';\nimport { MakeTheme } from '../../../../utils/theme.utils';\nimport * as css from './theme/menu-divider.module.css';\n\ntype RawMenuDividerProps = {\n\ttheme: MakeTheme<'container' | 'hr' | 'label'>;\n\tlabel?: ReactNode;\n};\n\nconst RawMenuDivider = memo((props: RawMenuDividerProps) => {\n\tconst { theme } = props;\n\treturn (\n\t\t<div className={theme.container}>\n\t\t\t{props.label && <span className={theme.label}>{props.label}</span>}\n\t\t\t<div className={theme.hr} />\n\t\t</div>\n\t);\n});\n\nconst wTheme = {\n\t...css,\n};\n\nexport type MenuDividerProps = PartialKeys<RawMenuListItemProps, 'theme'>;\nexport const MenuDivider = withTheme(Symbol(), wTheme)(RawMenuDivider);\n","import * as React from 'react';\nimport { FunctionComponent } from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const CalculatorIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 60\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M39.313 13a3.074 3.074 0 0 1 2.258.93 3.074 3.074 0 0 1 .93 2.258v27.625a3.074 3.074 0 0 1-.93 2.258 3.074 3.074 0 0 1-2.258.93H20.188a3.074 3.074 0 0 1-2.258-.93 3.074 3.074 0 0 1-.93-2.258V16.188a3.074 3.074 0 0 1 .93-2.258 3.074 3.074 0 0 1 2.258-.93zm-19.125 2.125a1.034 1.034 0 0 0-.764.3 1.034 1.034 0 0 0-.3.764v5.313h21.25V16.19a1.034 1.034 0 0 0-.3-.764 1.034 1.034 0 0 0-.764-.3zm19.125 29.75a1.023 1.023 0 0 0 1.063-1.062V23.625h-21.25v20.188a1.034 1.034 0 0 0 .3.764 1.034 1.034 0 0 0 .764.3zM25.5 26.55a.768.768 0 0 0-.232-.564.768.768 0 0 0-.565-.236H22.05a.768.768 0 0 0-.564.232.768.768 0 0 0-.236.568v2.656a.768.768 0 0 0 .232.564.768.768 0 0 0 .564.232h2.656a.768.768 0 0 0 .564-.232.768.768 0 0 0 .232-.564zm6.375 0a.768.768 0 0 0-.232-.564.768.768 0 0 0-.565-.236h-2.656a.768.768 0 0 0-.564.232.768.768 0 0 0-.232.564v2.656a.768.768 0 0 0 .232.564.768.768 0 0 0 .564.232h2.656a.768.768 0 0 0 .564-.232.768.768 0 0 0 .232-.564zm6.375 0a.768.768 0 0 0-.232-.564.768.768 0 0 0-.568-.236h-2.653a.768.768 0 0 0-.564.232.768.768 0 0 0-.232.564v2.656a.768.768 0 0 0 .232.564.768.768 0 0 0 .564.232h2.653a.768.768 0 0 0 .564-.232.768.768 0 0 0 .232-.564zM25.5 32.922a.768.768 0 0 0-.232-.564.768.768 0 0 0-.564-.232H22.05a.768.768 0 0 0-.564.232.768.768 0 0 0-.232.564v2.656a.768.768 0 0 0 .232.564.768.768 0 0 0 .564.232h2.656a.768.768 0 0 0 .564-.232.768.768 0 0 0 .232-.564zm6.375 0a.768.768 0 0 0-.232-.564.768.768 0 0 0-.564-.232h-2.657a.768.768 0 0 0-.564.232.768.768 0 0 0-.232.564v2.656a.768.768 0 0 0 .232.564.768.768 0 0 0 .564.232h2.656a.768.768 0 0 0 .564-.232.768.768 0 0 0 .232-.564zm6.375 0a.768.768 0 0 0-.232-.564.768.768 0 0 0-.564-.232h-2.657a.768.768 0 0 0-.564.232.768.768 0 0 0-.232.564v9.028a.768.768 0 0 0 .232.564.768.768 0 0 0 .564.236h2.653a.768.768 0 0 0 .564-.232.768.768 0 0 0 .236-.568zM25.5 39.297a.768.768 0 0 0-.232-.564.768.768 0 0 0-.564-.232H22.05a.768.768 0 0 0-.564.232.768.768 0 0 0-.232.564v2.653a.768.768 0 0 0 .232.564.768.768 0 0 0 .564.236h2.656a.768.768 0 0 0 .564-.232.768.768 0 0 0 .23-.568zm6.375 0a.768.768 0 0 0-.232-.564.768.768 0 0 0-.564-.232h-2.657a.768.768 0 0 0-.564.232.768.768 0 0 0-.232.564v2.653a.768.768 0 0 0 .232.564.768.768 0 0 0 .564.236h2.656a.768.768 0 0 0 .564-.232.768.768 0 0 0 .233-.568z\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\nimport { FunctionComponent } from 'react';\n\nexport const UploadDocsIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 60\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M41.57 19.508a3.074 3.074 0 0 1 .93 2.258v22.047a3.074 3.074 0 0 1-.93 2.258 3.074 3.074 0 0 1-2.258.93H20.188a3.074 3.074 0 0 1-2.258-.93 3.074 3.074 0 0 1-.93-2.258V16.188a3.074 3.074 0 0 1 .93-2.258 3.074 3.074 0 0 1 2.258-.93h13.546a3.074 3.074 0 0 1 2.258.93zm-1.527 1.527l-5.578-5.578a1.773 1.773 0 0 0-.465-.332V21.5h6.375a1.773 1.773 0 0 0-.332-.465zm-.73 23.84a1.023 1.023 0 0 0 1.063-1.062V23.625h-6.907a1.537 1.537 0 0 1-1.129-.465 1.537 1.537 0 0 1-.465-1.129v-6.906H20.188a1.034 1.034 0 0 0-.764.3 1.034 1.034 0 0 0-.3.764v27.624a1.034 1.034 0 0 0 .3.764 1.034 1.034 0 0 0 .764.3z\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { FunctionComponent } from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const WithdrawIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 60\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M38.5 29.875a2.042 2.042 0 0 1 1.494.631A2.042 2.042 0 0 1 40.625 32a2.042 2.042 0 0 1-.631 1.494 2.042 2.042 0 0 1-1.494.631 2.042 2.042 0 0 1-1.494-.631A2.042 2.042 0 0 1 36.375 32a2.042 2.042 0 0 1 .631-1.494 2.042 2.042 0 0 1 1.494-.631zm5.313-10.625a3.074 3.074 0 0 1 2.258.93A3.074 3.074 0 0 1 47 22.438V40.5a4.107 4.107 0 0 1-1.229 3.025 4.107 4.107 0 0 1-3.021 1.225H19.375a6.148 6.148 0 0 1-4.516-1.859A6.148 6.148 0 0 1 13 38.375v-17a6.148 6.148 0 0 1 1.859-4.516A6.148 6.148 0 0 1 19.375 15h20.188a3.074 3.074 0 0 1 2.258.93 3.074 3.074 0 0 1 .93 2.258v1.063zm1.063 21.25V22.438a1.034 1.034 0 0 0-.3-.764 1.034 1.034 0 0 0-.764-.3H20.438a1.034 1.034 0 0 1-.764-.3 1.034 1.034 0 0 1-.3-.764 1.034 1.034 0 0 1 .3-.764 1.034 1.034 0 0 1 .764-.3h20.187v-1.062a1.034 1.034 0 0 0-.3-.764 1.034 1.034 0 0 0-.764-.3H19.375a4.084 4.084 0 0 0-2.988 1.262 4.084 4.084 0 0 0-1.262 2.988v17a4.084 4.084 0 0 0 1.262 2.988 4.084 4.084 0 0 0 2.988 1.267H42.75a2.042 2.042 0 0 0 1.494-.631 2.042 2.042 0 0 0 .631-1.494z\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { Component, ReactNode } from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport * as cn from 'classnames';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { PURE } from '@devexperts/react-kit/dist/utils/pure';\nimport { Button } from '@devexperts/react-kit/dist/components/Button/Button';\nimport { tspan } from '../../utils/i18n.utils';\nimport * as notNowButtonCss from './theme/not-now-button.module.css';\nimport * as css from './theme/info-box.module.css';\n\nexport type InfoBoxProps = {\n\ttext: ReactNode;\n\tbutton: ReactNode;\n\ttheme: {\n\t\tcontainer?: string;\n\t\ttext?: string;\n\t};\n\thides: boolean;\n} & WithTranslation;\n\ntype InfoBoxState = {\n\tisHidden: boolean;\n};\n\n@PURE\nclass RawInfoBox extends Component<InfoBoxProps, InfoBoxState> {\n\treadonly state = {\n\t\tisHidden: false,\n\t};\n\n\thandleToggle = () => {\n\t\tthis.setState({\n\t\t\tisHidden: !this.state.isHidden,\n\t\t});\n\t};\n\n\trender() {\n\t\tconst { text, button, theme, hides } = this.props;\n\t\tconst { isHidden } = this.state;\n\n\t\treturn (\n\t\t\t<div className={isHidden ? cn(theme.container, css.container_isHidden) : theme.container}>\n\t\t\t\t<div className={theme.text}>{text}</div>\n\t\t\t\t{button}\n\t\t\t\t{hides && (\n\t\t\t\t\t<Button theme={notNowButtonCss} onClick={this.handleToggle}>\n\t\t\t\t\t\t{tspan('infoBoxCancelButton', 'Not Now')}\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport const InfoBox = withTheme(Symbol(), css)(withTranslation()(RawInfoBox));\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { routes } from '../../../../../../ui-common/routes';\nimport { MenuListItem } from '../../../../../../ui-common/layout/components/menu-list-item/menu-list-item.component';\nimport { AccountsIcon } from '../../../../../../ui-mobile/ui-kit/components/icons/accounts.icon';\nimport { PersonalDetailsIcon } from '../../../../../ui-kit/components/icons/personal-details.icon';\nimport { MenuDivider } from '../../../../../../ui-common/layout/components/menu-divider/menu-divider.component';\nimport { CalculatorIcon } from '../../../../../ui-kit/components/icons/calculator.icon';\nimport { UploadDocsIcon } from '../../../../../ui-kit/components/icons/upload-docs.icon';\nimport { WithdrawIcon } from '../../../../../ui-kit/components/icons/withdraw.icon';\nimport { UpgradeAccountButton } from '../../../../../upgrade-account-button/upgrade-account-button';\nimport { InfoBox } from '../../../../../../ui-common/info-box/info-box.component';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { RouteLink } from '../../../../../../ui-common/route-link/containers/route-link.container';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { tspan } from '../../../../../../utils/i18n.utils';\nimport { empty } from 'fp-ts/lib/Record';\nimport * as infoBoxCss from './theme/info-box.child.module.css';\n\nconst AVATRADE_CALC_URL = '//www.avatrade.com/trading-info/trading-calculator';\n\nexport type MenuDemoProps = {\n\tonClose: () => void;\n};\nexport const MenuDemo = combineContext(RouteLink, RouteLink =>\n\twithTranslation()(\n\t\tclass MenuDemo extends PureComponent<MenuDemoProps & WithTranslation> {\n\t\t\trender() {\n\t\t\t\treturn (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\tto={routes.crm.accounts.root}\n\t\t\t\t\t\t\tvalue={empty}\n\t\t\t\t\t\t\trender={({ href, onNavigate }) => (\n\t\t\t\t\t\t\t\t<MenuListItem\n\t\t\t\t\t\t\t\t\ticon={<AccountsIcon />}\n\t\t\t\t\t\t\t\t\ttext={tspan('menuMyAccounts', 'My Accounts')}\n\t\t\t\t\t\t\t\t\thref={href}\n\t\t\t\t\t\t\t\t\tpreventDefault={true}\n\t\t\t\t\t\t\t\t\tonClick={this.handleRoute(onNavigate)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\tto={routes.crm.personal.root}\n\t\t\t\t\t\t\tvalue={empty}\n\t\t\t\t\t\t\trender={({ href, onNavigate }) => (\n\t\t\t\t\t\t\t\t<MenuListItem\n\t\t\t\t\t\t\t\t\ticon={<PersonalDetailsIcon />}\n\t\t\t\t\t\t\t\t\ttext={tspan('menuPersonalDetails', 'Personal Details')}\n\t\t\t\t\t\t\t\t\thref={href}\n\t\t\t\t\t\t\t\t\tpreventDefault={true}\n\t\t\t\t\t\t\t\t\tonClick={this.handleRoute(onNavigate)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<MenuDivider />\n\n\t\t\t\t\t\t<MenuListItem\n\t\t\t\t\t\t\ticon={<CalculatorIcon />}\n\t\t\t\t\t\t\ttext={tspan('menuTradingCalculator', 'Trading Calculator')}\n\t\t\t\t\t\t\thref={AVATRADE_CALC_URL}\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<InfoBox\n\t\t\t\t\t\t\ttext={tspan(\n\t\t\t\t\t\t\t\t'menuDemoNeedUpgrade',\n\t\t\t\t\t\t\t\t'You need to upgrade your account to start trading with real money',\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tbutton={<UpgradeAccountButton />}\n\t\t\t\t\t\t\ttheme={infoBoxCss}\n\t\t\t\t\t\t\thides\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<MenuListItem\n\t\t\t\t\t\t\ticon={<UploadDocsIcon />}\n\t\t\t\t\t\t\ttext={tspan('menuUploadDocs', 'Upload Docs')}\n\t\t\t\t\t\t\tisDisabled\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<MenuListItem icon={<WithdrawIcon />} text={tspan('menuWithdraw', 'Withdraw')} isDisabled />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\thandleRoute = (onNavigate: () => void) => () => {\n\t\t\t\tonNavigate();\n\t\t\t\tthis.props.onClose();\n\t\t\t};\n\t\t},\n\t),\n);\n","import * as React from 'react';\nimport { FunctionComponent } from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const TraderIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 60\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M30.062 30.214a8.607 8.607 0 1 0-8.607-8.607 8.606 8.606 0 0 0 8.607 8.607zm0-15.062a6.455 6.455 0 1 1-6.455 6.455 6.466 6.466 0 0 1 6.455-6.455zm6.18 18.3l-2.67 9.266-2.28-6.839 1.682-1.679a1.075 1.075 0 0 0-.76-1.836h-4.3a1.074 1.074 0 0 0-.76 1.836l1.681 1.681-2.28 6.839-2.67-9.259A9.021 9.021 0 0 0 15 42.479V44.2a3.229 3.229 0 0 0 3.228 3.228H41.9a3.229 3.229 0 0 0 3.225-3.228v-1.721a9.031 9.031 0 0 0-8.883-9.024zM18.228 45.277a1.079 1.079 0 0 1-1.076-1.077v-1.721a6.91 6.91 0 0 1 5.171-6.65l2.73 9.448zm9.744 0L30.062 39l2.091 6.281zm15-1.076a1.079 1.079 0 0 1-1.072 1.076h-6.828l2.728-9.448a6.91 6.91 0 0 1 5.171 6.65V44.2z\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { FunctionComponent } from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const SwitchIcon: FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 60\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M16.586 34.781a.818.818 0 0 1 .133.465.637.637 0 0 1-.2.465l-.4.4a.589.589 0 0 1-.6.3.728.728 0 0 1-.6-.365A10.227 10.227 0 0 1 13 30a10.393 10.393 0 0 1 1.428-5.312 10.549 10.549 0 0 1 3.885-3.885 10.393 10.393 0 0 1 5.313-1.428H34.25v-4.25a1.963 1.963 0 0 1 .664-1.527 2.216 2.216 0 0 1 1.527-.6 2.014 2.014 0 0 1 1.527.73l4.781 5.313a2.033 2.033 0 0 1 .531 1.395 2.033 2.033 0 0 1-.531 1.395l-4.78 5.314a2.014 2.014 0 0 1-1.527.73 2.216 2.216 0 0 1-1.527-.6 1.963 1.963 0 0 1-.665-1.525V21.5H23.625a8.428 8.428 0 0 0-4.283 1.129 8.269 8.269 0 0 0-3.088 3.088A8.428 8.428 0 0 0 15.125 30a8.446 8.446 0 0 0 1.461 4.781zm19.789-19.656V25.75l4.781-5.312zm8.7 8.832A10.227 10.227 0 0 1 47 30a10.393 10.393 0 0 1-1.428 5.313 10.549 10.549 0 0 1-3.885 3.885 10.393 10.393 0 0 1-5.312 1.427H25.75v4.25a1.963 1.963 0 0 1-.664 1.527 2.216 2.216 0 0 1-1.527.6 2.014 2.014 0 0 1-1.527-.73l-4.782-5.315a2.033 2.033 0 0 1-.531-1.395 2.033 2.033 0 0 1 .531-1.395l4.781-5.312a2.014 2.014 0 0 1 1.527-.73 2.216 2.216 0 0 1 1.527.6 1.963 1.963 0 0 1 .665 1.525v4.25h10.625a8.428 8.428 0 0 0 4.283-1.129 8.269 8.269 0 0 0 3.088-3.088A8.428 8.428 0 0 0 44.875 30a8.446 8.446 0 0 0-1.461-4.781.818.818 0 0 1-.133-.469.637.637 0 0 1 .2-.465l.4-.4a.589.589 0 0 1 .6-.3.728.728 0 0 1 .593.372zm-21.45 20.918V34.25l-4.781 5.313z\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport * as cn from 'classnames';\nimport { CheckIcon } from '../../../icons/check.icon';\nimport { Mode, MenuAccountData } from '../../../../ui-desktop/layout/components/menu/components/menu/menu.model';\nimport { PartialKeys } from '@devexperts/utils/dist/object';\nimport { RawMenuListItemProps } from '../menu-list-item/menu-list-item.component';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { MakeTheme } from '../../../../utils/theme.utils';\nimport * as css from './theme/menu-account.module.css';\n\nexport type RawMenuAccountProps = {\n\ttheme: MakeTheme<'container' | 'container_selected' | 'status' | 'status_demo' | 'currency' | 'id' | 'icon'>;\n\tdata: MenuAccountData;\n\tisSelected: boolean;\n};\n\nclass MenuAccountRaw extends PureComponent<RawMenuAccountProps & WithTranslation> {\n\trender() {\n\t\tconst { isSelected, data, theme } = this.props;\n\t\tconst { currency, accountId, status } = data;\n\n\t\tconst statusTheme = cn(theme.status, { [css.status_demo]: status === Mode.Demo });\n\t\tconst containerTheme = cn(theme.container, { [css.container_selected]: isSelected });\n\n\t\treturn (\n\t\t\t<div className={containerTheme}>\n\t\t\t\t<div className={theme.currency}>{currency}</div>\n\t\t\t\t<div className={theme.id}>{accountId}</div>\n\t\t\t\t<div className={statusTheme}>{this.getText(status)}</div>\n\t\t\t\t{isSelected && (\n\t\t\t\t\t<i className={theme.icon}>\n\t\t\t\t\t\t<CheckIcon />\n\t\t\t\t\t</i>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tgetText = (status: Mode): string => {\n\t\tconst { t } = this.props;\n\t\tswitch (status) {\n\t\t\tcase Mode.DemoLive:\n\t\t\tcase Mode.Demo: {\n\t\t\t\treturn t('menuAccountDemo', 'DEMO');\n\t\t\t}\n\t\t\tcase Mode.Regular:\n\t\t\tcase Mode.Real: {\n\t\t\t\treturn t('menuAccountReal', 'REAL');\n\t\t\t}\n\t\t}\n\t};\n}\n\nconst wTheme = {\n\t...css,\n};\n\nexport type MenuAccountProps = PartialKeys<RawMenuListItemProps, 'theme'>;\nexport const MenuAccount = withTranslation()(withTheme(Symbol(), wTheme)(MenuAccountRaw));\n","import * as React from 'react';\nimport { Fragment, PureComponent, ReactNode } from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport * as cn from 'classnames';\nimport { Accounts } from '../../../../ui-desktop/layout/components/menu/components/menu/menu.model';\nimport { makeAccountUrl } from '../../../../view-model/menu/menu.utils';\nimport { Link } from '@devexperts/react-kit/dist/components/Link/Link';\nimport { MenuAccount } from '../menu-account/menu-account.component';\nimport { PartialKeys } from '@devexperts/utils/dist/object';\nimport { RawMenuListItemProps } from '../menu-list-item/menu-list-item.component';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { MakeTheme } from '../../../../utils/theme.utils';\nimport * as css from './theme/menu-accounts.module.css';\n\nexport type RawMenuAccountsProps = {\n\ttheme: MakeTheme<\n\t\t| 'current'\n\t\t| 'current_opened'\n\t\t| 'icon'\n\t\t| 'list'\n\t\t| 'accountContainers'\n\t\t| 'accountContainers_last'\n\t\t| 'accountCurrentContainer'\n\t\t| 'accountCurrentContainer_isOpened'\n\t\t| 'accountStatus'\n\t\t| 'accountId'\n\t\t| 'accountCurrency'\n\t\t| 'accountIcon'\n\t>;\n\taccounts: Accounts;\n\tarrowIcon: ReactNode;\n\thandleSwitch: () => void;\n};\n\ntype MenuAccountsState = {\n\tisOpened: boolean;\n};\n\nclass RawMenuAccounts extends PureComponent<RawMenuAccountsProps & WithTranslation, MenuAccountsState> {\n\treadonly state: MenuAccountsState = {\n\t\tisOpened: false,\n\t};\n\n\trender() {\n\t\tconst { accounts, theme, arrowIcon, i18n } = this.props;\n\t\tconst { language } = i18n;\n\t\tconst { isOpened } = this.state;\n\t\tconst { currentAccount, availableAccounts } = accounts;\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div\n\t\t\t\t\tclassName={cn(theme.current, { [theme.current_opened as string]: isOpened })}\n\t\t\t\t\tonClick={this.toggleList}>\n\t\t\t\t\t<i className={theme.icon}>{arrowIcon}</i>\n\t\t\t\t\t<MenuAccount\n\t\t\t\t\t\ttheme={{\n\t\t\t\t\t\t\tcontainer: cn(theme.accountCurrentContainer, {\n\t\t\t\t\t\t\t\t[theme.accountCurrentContainer_isOpened as string]: isOpened,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tstatus: theme.accountStatus,\n\t\t\t\t\t\t\tid: theme.accountId,\n\t\t\t\t\t\t\ticon: theme.accountIcon,\n\t\t\t\t\t\t\tcurrency: theme.accountCurrency,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdata={{\n\t\t\t\t\t\t\tcurrency: currentAccount.currency,\n\t\t\t\t\t\t\taccountId: currentAccount.accountId,\n\t\t\t\t\t\t\tstatus: currentAccount.status,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tisSelected={false}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{isOpened && (\n\t\t\t\t\t<div className={theme.list}>\n\t\t\t\t\t\t{availableAccounts.map((account, index) => {\n\t\t\t\t\t\t\tconst isLast = availableAccounts.length - 1 === index;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\thref={makeAccountUrl(account.accountId, language)}\n\t\t\t\t\t\t\t\t\tkey={account.accountId}\n\t\t\t\t\t\t\t\t\tonClick={this.props.handleSwitch}>\n\t\t\t\t\t\t\t\t\t<MenuAccount\n\t\t\t\t\t\t\t\t\t\ttheme={{\n\t\t\t\t\t\t\t\t\t\t\tcontainer: cn(theme.accountContainers, {\n\t\t\t\t\t\t\t\t\t\t\t\t[theme.accountContainers_last as string]: isLast,\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tstatus: theme.accountStatus,\n\t\t\t\t\t\t\t\t\t\t\tid: theme.accountId,\n\t\t\t\t\t\t\t\t\t\t\ticon: theme.accountIcon,\n\t\t\t\t\t\t\t\t\t\t\tcurrency: theme.accountCurrency,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tdata={{\n\t\t\t\t\t\t\t\t\t\t\tcurrency: account.currency,\n\t\t\t\t\t\t\t\t\t\t\taccountId: account.accountId,\n\t\t\t\t\t\t\t\t\t\t\tstatus: account.status,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tisSelected={account.accountId === currentAccount.accountId}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\ttoggleList = () => {\n\t\tthis.setState({ isOpened: !this.state.isOpened });\n\t};\n}\n\nconst wTheme = {\n\t...css,\n};\n\nexport type MenuAccountsProps = PartialKeys<RawMenuListItemProps, 'theme'>;\nexport const MenuAccounts = withTranslation()(withTheme(Symbol(), wTheme)(RawMenuAccounts));\n","import * as React from 'react';\nimport { Fragment, PureComponent, ReactNode } from 'react';\nimport { findFirst } from 'fp-ts/lib/Array';\nimport { empty } from 'fp-ts/lib/Record';\nimport * as O from 'fp-ts/lib/Option';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { AVATRADE_CALC_URL, routes } from '../../../../../../ui-common/routes';\nimport { RouteLink } from '../../../../../../ui-common/route-link/containers/route-link.container';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { href } from '../../../../../../utils/router.utils';\nimport { makeAccountUrl } from '../../../../../../view-model/menu/menu.utils';\nimport { AccountsIcon } from '../../../../../../ui-mobile/ui-kit/components/icons/accounts.icon';\nimport { UploadDocsIcon } from '../../../../../ui-kit/components/icons/upload-docs.icon';\nimport { PersonalDetailsIcon } from '../../../../../ui-kit/components/icons/personal-details.icon';\nimport { CalculatorIcon } from '../../../../../ui-kit/components/icons/calculator.icon';\nimport { TraderIcon } from '../../../../../ui-kit/components/icons/trader.icon';\nimport { WithdrawIcon } from '../../../../../ui-kit/components/icons/withdraw.icon';\nimport { SwitchIcon } from '../../../../../ui-kit/components/icons/switch.icon';\nimport { MenuDivider } from '../../../../../../ui-common/layout/components/menu-divider/menu-divider.component';\nimport { MenuListItem } from '../../../../../../ui-common/layout/components/menu-list-item/menu-list-item.component';\nimport { Accounts, Mode } from './menu.model';\nimport { MenuAccounts } from '../../../../../../ui-common/layout/components/menu-accounts/menu-accounts.component';\nimport { ArrowDownFlatIcon } from '../../../../../../ui-common/icons/arrow-down-flat.icon';\nimport { tspan } from '../../../../../../utils/i18n.utils';\nimport * as css from './theme/menu-live.module.css';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type MenuLiveProps = {\n\tonClose: () => void;\n\tonPreloaderChange: (state: boolean) => void;\n\taccounts: Accounts;\n\tmode: Mode;\n\tproTraderAvaliable: boolean;\n};\n\nexport const MenuLive = combineContext(RouteLink, RouteLink =>\n\twithTranslation()(\n\t\tclass MenuLive extends PureComponent<MenuLiveProps & WithTranslation> {\n\t\t\trender() {\n\t\t\t\tconst {\n\t\t\t\t\tmode,\n\t\t\t\t\taccounts: { currentAccount },\n\t\t\t\t\tproTraderAvaliable,\n\t\t\t\t} = this.props;\n\n\t\t\t\tconst isDemo = currentAccount.status === Mode.Demo;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div className={css.container}>\n\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\tto={routes.crm.accounts.root}\n\t\t\t\t\t\t\tvalue={empty}\n\t\t\t\t\t\t\trender={({ href, onNavigate }) => (\n\t\t\t\t\t\t\t\t<MenuListItem\n\t\t\t\t\t\t\t\t\ticon={<AccountsIcon />}\n\t\t\t\t\t\t\t\t\ttext={tspan('menuMyAccounts', 'My Accounts')}\n\t\t\t\t\t\t\t\t\thref={href}\n\t\t\t\t\t\t\t\t\tpreventDefault={true}\n\t\t\t\t\t\t\t\t\tonClick={this.handleRoute(onNavigate)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\tto={routes.crm.uploaddocs.root}\n\t\t\t\t\t\t\tvalue={empty}\n\t\t\t\t\t\t\trender={({ href, onNavigate }) => (\n\t\t\t\t\t\t\t\t<MenuListItem\n\t\t\t\t\t\t\t\t\ticon={<UploadDocsIcon />}\n\t\t\t\t\t\t\t\t\ttext={tspan('menuUploadDocs', 'Upload Docs')}\n\t\t\t\t\t\t\t\t\thref={href}\n\t\t\t\t\t\t\t\t\tisDisabled={isDemo}\n\t\t\t\t\t\t\t\t\tpreventDefault={true}\n\t\t\t\t\t\t\t\t\tonClick={this.handleRoute(onNavigate)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\tto={routes.crm.personal.root}\n\t\t\t\t\t\t\tvalue={empty}\n\t\t\t\t\t\t\trender={({ href, onNavigate }) => (\n\t\t\t\t\t\t\t\t<MenuListItem\n\t\t\t\t\t\t\t\t\ticon={<PersonalDetailsIcon />}\n\t\t\t\t\t\t\t\t\ttext={tspan('menuPersonalDetails', 'Personal Details')}\n\t\t\t\t\t\t\t\t\thref={href}\n\t\t\t\t\t\t\t\t\tpreventDefault={true}\n\t\t\t\t\t\t\t\t\tonClick={this.handleRoute(onNavigate)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\tto={routes.crm.withdraw.root}\n\t\t\t\t\t\t\tvalue={empty}\n\t\t\t\t\t\t\trender={({ href, onNavigate }) => (\n\t\t\t\t\t\t\t\t<MenuListItem\n\t\t\t\t\t\t\t\t\ticon={<WithdrawIcon />}\n\t\t\t\t\t\t\t\t\ttext={tspan('menuWithdraw', 'Withdraw')}\n\t\t\t\t\t\t\t\t\thref={href}\n\t\t\t\t\t\t\t\t\tisDisabled={isDemo}\n\t\t\t\t\t\t\t\t\tpreventDefault={true}\n\t\t\t\t\t\t\t\t\tonClick={this.handleRoute(onNavigate)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<MenuDivider />\n\n\t\t\t\t\t\t{mode !== Mode.Demo && proTraderAvaliable && (\n\t\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\t\tto={routes.crm.becomeTrader.root}\n\t\t\t\t\t\t\t\tvalue={empty}\n\t\t\t\t\t\t\t\trender={({ href, onNavigate }) => (\n\t\t\t\t\t\t\t\t\t<MenuListItem\n\t\t\t\t\t\t\t\t\t\ticon={<TraderIcon />}\n\t\t\t\t\t\t\t\t\t\ttext={tspan('menuProfessionalTrader', 'Professional Trader')}\n\t\t\t\t\t\t\t\t\t\thref={href}\n\t\t\t\t\t\t\t\t\t\tisDisabled={isDemo}\n\t\t\t\t\t\t\t\t\t\tonClick={this.handleRoute(onNavigate)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<MenuListItem\n\t\t\t\t\t\t\ticon={<CalculatorIcon />}\n\t\t\t\t\t\t\ttext={tspan('menuTradingCalculator', 'Trading Calculator')}\n\t\t\t\t\t\t\thref={AVATRADE_CALC_URL}\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{this.renderAccounts(mode)}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tprivate getSwitchModeText = (status: Mode) => {\n\t\t\t\tswitch (status) {\n\t\t\t\t\tcase Mode.Regular:\n\t\t\t\t\tcase Mode.Real: {\n\t\t\t\t\t\treturn tspan('menuSwitchToDemo', 'Switch to Demo');\n\t\t\t\t\t}\n\t\t\t\t\tcase Mode.DemoLive:\n\t\t\t\t\tcase Mode.Demo: {\n\t\t\t\t\t\treturn tspan('menuSwitchToReal', 'Switch to Real');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\thandleRoute = (onNavigate: () => void) => () => {\n\t\t\t\tonNavigate();\n\t\t\t\tthis.props.onClose();\n\t\t\t};\n\n\t\t\thandleSwitch = () => {\n\t\t\t\tthis.props.onClose();\n\t\t\t\tthis.props.onPreloaderChange(true);\n\t\t\t};\n\n\t\t\trenderAccounts = (mode: Mode): ReactNode => {\n\t\t\t\tconst { accounts, i18n } = this.props;\n\t\t\t\tconst { language } = i18n;\n\t\t\t\tswitch (mode) {\n\t\t\t\t\tcase Mode.Demo:\n\t\t\t\t\tcase Mode.Real: {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<MenuDivider label={tspan('menuAccounts', 'Accounts')} />\n\t\t\t\t\t\t\t\t<MenuListItem\n\t\t\t\t\t\t\t\t\ticon={<SwitchIcon />}\n\t\t\t\t\t\t\t\t\ttext={tspan('menuSwitchToDemo', 'Switch to Demo')}\n\t\t\t\t\t\t\t\t\thref={href(routes.api.avarcm.create_demo_account, empty)}\n\t\t\t\t\t\t\t\t\tonClick={this.handleSwitch}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tcase Mode.DemoLive: {\n\t\t\t\t\t\tconst secondAccount = findFirst(\n\t\t\t\t\t\t\taccounts.availableAccounts,\n\t\t\t\t\t\t\taccount => account.accountId !== accounts.currentAccount.accountId,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst switchModeText = this.getSwitchModeText(accounts.currentAccount.status);\n\t\t\t\t\t\tconst accountId = pipe(\n\t\t\t\t\t\t\tsecondAccount,\n\t\t\t\t\t\t\tO.map(account => account.accountId),\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn pipe(\n\t\t\t\t\t\t\taccountId,\n\t\t\t\t\t\t\tO.map(id => (\n\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t<MenuDivider label={tspan('menuAccounts', 'Accounts')} />\n\t\t\t\t\t\t\t\t\t<MenuListItem\n\t\t\t\t\t\t\t\t\t\ticon={<SwitchIcon />}\n\t\t\t\t\t\t\t\t\t\ttext={switchModeText}\n\t\t\t\t\t\t\t\t\t\thref={makeAccountUrl(id, language)}\n\t\t\t\t\t\t\t\t\t\tonClick={this.handleSwitch}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tcase Mode.Regular: {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<MenuDivider label={tspan('menuAccounts', 'Accounts')} />\n\t\t\t\t\t\t\t\t<MenuAccounts\n\t\t\t\t\t\t\t\t\taccounts={accounts}\n\t\t\t\t\t\t\t\t\tarrowIcon={<ArrowDownFlatIcon />}\n\t\t\t\t\t\t\t\t\thandleSwitch={this.handleSwitch}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t),\n);\n","import * as React from 'react';\nimport * as css from './theme/disable-overlay.module.css';\n\nexport const DisableOverlay = () => <div className={css.container} />;\n","import * as React from 'react';\nimport { Component } from 'react';\nimport { RegistrationButton } from './registration-button.component';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { PURE } from '@devexperts/react-kit/dist/utils/pure';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { InfoBox, InfoBoxProps } from '../../../../../ui-common/info-box/info-box.component';\n\nimport * as registrationButtonCss from './theme/registration-button.module.css';\nimport * as css from './theme/info-box-registration.module.css';\n\nexport type RegistrationInfoBoxProps = WithTranslation & Pick<InfoBoxProps, 'theme' | 'text'>;\n\n@PURE\nclass RegistrationInfoBoxRaw extends Component<RegistrationInfoBoxProps> {\n\trender() {\n\t\tconst { theme, text } = this.props;\n\t\treturn (\n\t\t\t<InfoBox\n\t\t\t\ttext={text}\n\t\t\t\tbutton={<RegistrationButton theme={registrationButtonCss} />}\n\t\t\t\ttheme={theme}\n\t\t\t\thides={false}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport const RegistrationInfoBox = withTheme(Symbol(), css)(withTranslation()(RegistrationInfoBoxRaw));\n","import * as React from 'react';\nimport { PureComponent, ReactNode, Fragment } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport cn from 'classnames';\nimport { empty } from 'fp-ts/lib/Record';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { Scrollable } from '@devexperts/react-kit/dist/components/Scrollable/Scrollable';\nimport { Link } from '@devexperts/react-kit/dist/components/Link/Link';\nimport { LogoutIcon } from '../../../../../ui-kit/components/icons/logout.icon';\nimport { LocaleSelector } from '../../../../../../ui-common/locale-selector/locale-selector.component';\nimport { MenuDemo } from './menu-demo.component';\nimport { MenuLive } from './menu-live.component';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { Accounts, Mode } from './menu.model';\nimport { tspan } from '../../../../../../utils/i18n.utils';\nimport { href } from '../../../../../../utils/router.utils';\nimport { routes } from '../../../../../../ui-common/routes';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\nimport { DisableOverlay } from '../../../../../ui-kit/components/preview-mode/components/disable-overlay.component';\nimport { RegistrationInfoBox } from '../../../../../ui-kit/components/preview-mode/components/registration-info-box.component';\n\nimport * as css from './theme/menu.module.css';\n\nexport type MenuProps = {\n\temail: Option<string>;\n\tmode: Mode;\n\taccounts: Accounts;\n\tname: Option<string>;\n\tisRealAccount: Option<boolean>;\n\tonClose: () => void;\n\tonPreloaderChange: (state: boolean) => void;\n\tproTraderAvaliable: boolean;\n\tpreviewMode: Option<boolean>;\n};\n\nconst logoutLinkTheme = { container: css.logout };\n\nexport const Menu = combineContext(MenuDemo, MenuLive, (MenuDemo, MenuLive) =>\n\twithTranslation()(\n\t\tclass Menu extends PureComponent<MenuProps & WithTranslation> {\n\t\t\trender() {\n\t\t\t\tconst { name, isRealAccount, email, mode, previewMode } = this.props;\n\t\t\t\treturn (\n\t\t\t\t\t<div className={css.container} onClick={this.onContainerClick}>\n\t\t\t\t\t\t<div className={css.panel}>\n\t\t\t\t\t\t\t<div className={css.wrapper}>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div className={css.header}>\n\t\t\t\t\t\t\t\t\t\t<h3 className={css.account}>\n\t\t\t\t\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\t\t\tO.getOrElse(constant('')),\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\t\t\t\tpreviewMode,\n\t\t\t\t\t\t\t\t\t\t\tO.fold(\n\t\t\t\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisRealAccount,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tO.map(isReal => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(css.accountLabel, {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[css.accountLabel_real]: isReal,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{isReal\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? tspan('asideMenuReal', 'Real Account')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: tspan('asideMenuDemo', 'Demo Account')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\tpreviewMode =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewMode ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className={cn(css.accountLabel, css.accountLabel_preview)}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tspan('asideMenuPreview', 'Preview Account')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null,\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Scrollable>\n\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\t\t\t\tpreviewMode,\n\t\t\t\t\t\t\t\t\t\t\tO.map(\n\t\t\t\t\t\t\t\t\t\t\t\tpreviewMode =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewMode && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RegistrationInfoBox\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext={tspan(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'menuRegistrationDescription',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Continue registration in order to view full menu',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t<div className={css.menuContainer}>\n\t\t\t\t\t\t\t\t\t\t\t{this.renderContent(mode)}\n\t\t\t\t\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\t\t\t\t\tpreviewMode,\n\t\t\t\t\t\t\t\t\t\t\t\tO.map(previewMode => previewMode && <DisableOverlay />),\n\t\t\t\t\t\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t</Scrollable>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={css.footer}>\n\t\t\t\t\t\t\t\t<Link href={href(routes.api.auth.logout.redirect, empty)} theme={logoutLinkTheme}>\n\t\t\t\t\t\t\t\t\t<div className={css.logoutLinkEmailWrapper}>\n\t\t\t\t\t\t\t\t\t\t<div className={css.logoutIconWrapper}>\n\t\t\t\t\t\t\t\t\t\t\t<i className={css.logoutIcon}>\n\t\t\t\t\t\t\t\t\t\t\t\t<LogoutIcon />\n\t\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t\t\t{tspan('menuLogout', 'Log Out')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\t\t\t\t\tO.map(email => <div className={css.email}>{email}</div>),\n\t\t\t\t\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t<div className={css.localeSelectorWrapper}>\n\t\t\t\t\t\t\t\t\t<LocaleSelector />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tprivate onContainerClick = (e: React.MouseEvent<HTMLDivElement>) => {\n\t\t\t\tif (e.target === e.currentTarget) {\n\t\t\t\t\tthis.props.onClose();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\trenderContent = (mode: Mode): ReactNode => {\n\t\t\t\tconst { onClose, onPreloaderChange, accounts, proTraderAvaliable } = this.props;\n\t\t\t\tswitch (mode) {\n\t\t\t\t\tcase Mode.Demo: {\n\t\t\t\t\t\treturn <MenuDemo onClose={onClose} />;\n\t\t\t\t\t}\n\t\t\t\t\tcase Mode.Real:\n\t\t\t\t\tcase Mode.DemoLive:\n\t\t\t\t\tcase Mode.Regular: {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<MenuLive\n\t\t\t\t\t\t\t\tonClose={onClose}\n\t\t\t\t\t\t\t\tonPreloaderChange={onPreloaderChange}\n\t\t\t\t\t\t\t\taccounts={accounts}\n\t\t\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\t\t\tproTraderAvaliable={proTraderAvaliable}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t),\n);\n","import { combineLatest } from 'rxjs';\nimport { first, map } from 'rxjs/internal/operators';\nimport * as O from 'fp-ts/lib/Option';\nimport { withRXWithDefaults } from '../../../../../utils/withRXWithDefaults';\nimport { AccountTO } from '../../../../../api/socket/to/accounts-message.to';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { createMenuViewModel, MenuViewModel } from '../../../../../view-model/menu/menu.view-model';\nimport { AccountViewModel } from '../../../../../view-model/account/account.view-model';\nimport { runOnMount } from '../../../../../utils/react.utils';\nimport { Mode, MenuAccountData } from '../components/menu/menu.model';\nimport { Menu } from '../components/menu/menu.component';\nimport { currencyStringToSymbol } from '../../../../../utils/currency.utils';\n\nconst fromModelToData = (data: AccountTO): MenuAccountData => {\n\treturn {\n\t\tcurrency: currencyStringToSymbol(data.baseCurrency),\n\t\taccountId: data.id,\n\t\tstatus: data.paperMoney ? Mode.Demo : Mode.Real,\n\t};\n};\n\nexport type MenuContainerContext = {\n\tmenuViewModel: MenuViewModel;\n\taccountViewModel: AccountViewModel;\n};\n\nexport const Container = combineContext(Menu, ask<MenuContainerContext>(), (Menu, e) =>\n\twithRXWithDefaults(Menu)(() => {\n\t\tconst { menuViewModel, accountViewModel } = e;\n\t\tconst { menuMode$, currentAccount$, availableAccounts$, proTraderAvaliable$ } = menuViewModel;\n\t\tconst { accountInfo$, onPreloaderChange } = accountViewModel;\n\t\tconst email$ = accountInfo$.pipe(map(info => info.email));\n\t\tconst accounts$ = combineLatest(currentAccount$, availableAccounts$).pipe(\n\t\t\tmap(([current, available]) => ({\n\t\t\t\tcurrentAccount: fromModelToData(current),\n\t\t\t\tavailableAccounts: available.map(fromModelToData),\n\t\t\t})),\n\t\t);\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tmode: menuMode$,\n\t\t\t\taccounts: accounts$,\n\t\t\t\tname: accountInfo$.pipe(map(account => account.fullName)),\n\t\t\t\tisRealAccount: currentAccount$.pipe(\n\t\t\t\t\tfirst(),\n\t\t\t\t\tmap(account => O.some(!account.paperMoney)),\n\t\t\t\t),\n\t\t\t\temail: email$,\n\t\t\t\tproTraderAvaliable: proTraderAvaliable$,\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tmode: Mode.Demo,\n\t\t\t\temail: O.none,\n\t\t\t\tname: O.none,\n\t\t\t\tisRealAccount: O.none,\n\t\t\t\taccounts: {\n\t\t\t\t\tcurrentAccount: {\n\t\t\t\t\t\tcurrency: '',\n\t\t\t\t\t\taccountId: '',\n\t\t\t\t\t\tstatus: Mode.Demo,\n\t\t\t\t\t},\n\t\t\t\t\tavailableAccounts: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcurrency: '',\n\t\t\t\t\t\t\taccountId: '',\n\t\t\t\t\t\t\tstatus: Mode.Demo,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tonPreloaderChange,\n\t\t\t\tproTraderAvaliable: false,\n\t\t\t\tpreviewMode: O.some(false),\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const MenuContainer = combineContext(\n\tdeferContext(Container, 'menuViewModel'),\n\tcreateMenuViewModel,\n\t(Container, createMenuViewModel) =>\n\t\trunOnMount(Container, () => () => ({\n\t\t\tmenuViewModel: createMenuViewModel(),\n\t\t})),\n);\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { Popup } from '../../../ui-kit/components/popup/popup.component';\nimport { Iframe } from '../../../../ui-common/iframe/iframe.component';\nimport { POPUP_CONTENT_URL } from '../../../../ui-common/routes';\nimport * as css from './theme/welcome-popup.module.css';\n\ntype WelcomePopupProps = {\n\tisPopupOpened: boolean;\n\tonClose: () => void;\n};\n\nexport class WelcomePopup extends PureComponent<WelcomePopupProps> {\n\trender() {\n\t\tconst { isPopupOpened, onClose } = this.props;\n\n\t\treturn (\n\t\t\t<Popup onClose={onClose} isOpened={isPopupOpened} isModal>\n\t\t\t\t<div className={css.iframe}>\n\t\t\t\t\t<Iframe src={POPUP_CONTENT_URL} scrolling={'no'} />\n\t\t\t\t</div>\n\t\t\t</Popup>\n\t\t);\n\t}\n}\n","import { Observable, of } from 'rxjs';\nimport { asks } from '@devexperts/rx-utils/dist/context.utils';\nimport { Router } from '../../utils/router.utils';\nimport { merge } from 'rxjs';\nimport { map, mapTo, filter, first } from 'rxjs/operators';\nimport { Route } from 'fp-ts-routing';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { PostMessageClient } from '../../api/post-message.client';\nimport { isClosePopup, isRedirectToCRMDeposit } from '../../api/post-message/post-message.to';\nimport { or } from 'fp-ts/lib/function';\n\nexport type WelcomeViewModel = {\n\tshouldOpenPopup$: Observable<boolean>;\n\tonClose: () => void;\n};\n\ntype WelcomeViewModelContext = {\n\trouter: Router;\n\tpostMessageClient: PostMessageClient;\n};\n\ntype CreateWelcomeViewModel = () => WelcomeViewModel;\n\nexport const createWelcomeViewModel = asks(\n\t(ctx: WelcomeViewModelContext): CreateWelcomeViewModel => {\n\t\tconst { router, postMessageClient } = ctx;\n\n\t\tconst openCloseHandler = createHandler();\n\n\t\tconst initState$ = of(router.state.location.search).pipe(\n\t\t\tmap(locationSearch => Route.parse(locationSearch)),\n\t\t\tmap(({ query }) => query.show_as_popup === 'true'),\n\t\t);\n\n\t\tconst closePopupFromPostMessage$ = postMessageClient.postMessage$.pipe(\n\t\t\tfilter(or(isClosePopup, isRedirectToCRMDeposit)),\n\t\t);\n\n\t\tconst handledState$ = merge(openCloseHandler.value$, closePopupFromPostMessage$).pipe(\n\t\t\tmapTo(false),\n\t\t\tfirst(),\n\t\t);\n\n\t\treturn () => ({\n\t\t\tshouldOpenPopup$: merge(initState$, handledState$),\n\t\t\tonClose: () => openCloseHandler.handle(undefined),\n\t\t});\n\t},\n);\n","import { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { WelcomePopup } from '../../components/welcome-popup/welcome-popup.component';\nimport { WelcomeViewModel, createWelcomeViewModel } from '../../../../view-model/welcome/welcome.view-model';\nimport { runOnMount } from '../../../../utils/react.utils';\n\ntype WelcomePopupContainerContext = {\n\twelcomeViewModel: WelcomeViewModel;\n};\n\nconst Container = combineContext(ask<WelcomePopupContainerContext>(), ctx =>\n\twithRXWithDefaults(WelcomePopup)(() => {\n\t\tconst { shouldOpenPopup$, onClose } = ctx.welcomeViewModel;\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tisPopupOpened: shouldOpenPopup$,\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tisPopupOpened: false,\n\t\t\t\tonClose,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const WelcomePopupContainer = combineContext(\n\tdeferContext(Container, 'welcomeViewModel'),\n\tcreateWelcomeViewModel,\n\t(Container, createWelcomeViewModel) =>\n\t\trunOnMount(Container, () => () => ({\n\t\t\twelcomeViewModel: createWelcomeViewModel(),\n\t\t})),\n);\n","import * as React from 'react';\nimport { memo } from 'react';\nimport { Popup } from '../../../ui-kit/components/popup/popup.component';\nimport { Button } from '../../../../ui-common/button/button.component';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport { redirectToRelogin } from '../../../../utils/route.utils';\nimport * as css from './theme/connection-lost-popup.module.css';\nimport * as buttonCss from './theme/button.child.module.css';\nimport * as popupCss from './theme/popup.child.module.css';\n\ntype ConnectionLostPopupProps = {\n\tisPopupOpened: boolean;\n};\n\nconst ConnectionLostPopupRaw = memo<ConnectionLostPopupProps & WithTranslation>(props => {\n\tconst { isPopupOpened } = props;\n\n\treturn (\n\t\t<Popup\n\t\t\tisModal\n\t\t\tonClose={redirectToRelogin}\n\t\t\tisOpened={isPopupOpened}\n\t\t\ttheme={popupCss}\n\t\t\ttitle={tspan('connectionLostPopupConnectionLost', 'Connection Lost')}>\n\t\t\t<div className={css.textBody}>\n\t\t\t\t<div>\n\t\t\t\t\t{tspan('connectionLostPopupConnectionToPlatformLost', 'Connection to trading platform lost.')}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{tspan(\n\t\t\t\t\t\t'connectionLostPopupCheckConnection',\n\t\t\t\t\t\t'Please check your internet connection and login again',\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className={css.buttonWrapper}>\n\t\t\t\t<Button isPrimary theme={buttonCss} onClick={redirectToRelogin}>\n\t\t\t\t\t{tspan('connectionLostPopupGoToLogin', 'Go to Login Page')}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</Popup>\n\t);\n});\n\nexport const ConnectionLostPopup = withTranslation()(ConnectionLostPopupRaw);\n","import { Observable } from 'rxjs';\nimport { asks } from '@devexperts/rx-utils/dist/context.utils';\nimport { map } from 'rxjs/operators';\nimport { SocketClient, ConnectionStatus } from '../../api/socket-client';\nimport { constant } from 'fp-ts/lib/function';\n\nexport type ConnectionStatusViewModel = {\n\tisConnectionError$: Observable<boolean>;\n};\n\ntype ConnectionStatusViewModelContext = {\n\tsocketClient: SocketClient;\n};\n\ntype CreateConnectionLostViewModel = () => ConnectionStatusViewModel;\n\nconst ErrorStatuses: ConnectionStatus[] = ['ERROR', 'TIMEDOUT'];\n\nexport const createConnectionLostViewModel = asks(\n\t(ctx: ConnectionStatusViewModelContext): CreateConnectionLostViewModel => {\n\t\tconst {\n\t\t\tsocketClient: { connectionStatus$ },\n\t\t} = ctx;\n\n\t\tconst isConnectionError$ = connectionStatus$.pipe(map(status => ErrorStatuses.includes(status)));\n\n\t\treturn constant({\n\t\t\tisConnectionError$,\n\t\t});\n\t},\n);\n","import { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { combineContext, deferContext, asks } from '@devexperts/rx-utils/dist/context.utils';\nimport { ConnectionLostPopup } from '../../components/connection-lost-popup/connection-lost-popup.component';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport {\n\tcreateConnectionLostViewModel,\n\tConnectionStatusViewModel,\n} from '../../../../view-model/connection-status/connection-status.view-model';\nimport { constant } from 'fp-ts/lib/function';\n\nconst connectionStatusViewModel = 'connectionStatusViewModel';\n\ntype ConectionLostPopupContainerContext = {\n\tconnectionStatusViewModel: ConnectionStatusViewModel;\n};\n\nconst Container = asks((ctx: ConectionLostPopupContainerContext) =>\n\twithRXWithDefaults(ConnectionLostPopup)(() => {\n\t\tconst {\n\t\t\tconnectionStatusViewModel: { isConnectionError$ },\n\t\t} = ctx;\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tisPopupOpened: isConnectionError$,\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tisPopupOpened: false,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const ConnectionLostPopupContainer = combineContext(\n\tdeferContext(Container, connectionStatusViewModel),\n\tcreateConnectionLostViewModel,\n\t(Container, createConnectionLostViewModel) =>\n\t\trunOnMount(Container, () =>\n\t\t\tconstant({\n\t\t\t\t[connectionStatusViewModel]: createConnectionLostViewModel(),\n\t\t\t}),\n\t\t),\n);\n","import * as React from 'react';\nimport { memo } from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport * as cn from 'classnames';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { Popup } from '../../../ui-kit/components/popup/popup.component';\nimport { Link } from '../../../../ui-common/link/link.component';\nimport { routes } from '../../../../ui-common/routes';\nimport { RouteLink } from '../../../../ui-common/route-link/containers/route-link.container';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport { ButtonCta } from '../../../../ui-common/button/button-cta.component';\nimport { Button } from '../../../../ui-common/button/button.component';\nimport { empty } from 'fp-ts/lib/Record';\nimport * as css from './theme/margin-popup.module.css';\nimport * as popupTheme from './theme/popup.child.module.css';\nimport * as buttonTheme from './theme/button.child.module.css';\n\ntype MarginPopupProps = {\n\tisPopupOpened: boolean;\n\tonClose: () => void;\n};\n\nconst linkCN = {\n\tcontainer: cn(css.text, css.link),\n};\n\nexport const MarginPopup = combineContext(RouteLink, RouteLink =>\n\twithTranslation()(\n\t\tmemo((props: MarginPopupProps & WithTranslation) => {\n\t\t\tconst { isPopupOpened, onClose, t } = props;\n\t\t\tconst marginCallHelpLink = t(\n\t\t\t\t'marginCallLink',\n\t\t\t\t`https://support.avatrade.com/hc/en-us/articles/360001782791-What-is-a-Margin-Call-`,\n\t\t\t);\n\n\t\t\treturn (\n\t\t\t\t<Popup\n\t\t\t\t\tonClose={onClose}\n\t\t\t\t\tisOpened={isPopupOpened}\n\t\t\t\t\tisModal\n\t\t\t\t\ttitle={tspan('marginCallTitle', 'Margin Call Warning')}\n\t\t\t\t\ttheme={popupTheme}>\n\t\t\t\t\t<div className={css.content}>\n\t\t\t\t\t\t<p className={css.text}>\n\t\t\t\t\t\t\t{tspan(\n\t\t\t\t\t\t\t\t'marginAlertText',\n\t\t\t\t\t\t\t\t`Your account balance is insufficient to hold your open positions. To avoid automatic\n\t\t\t\t\t\t\t\tposition liquidation, please manually close some of your positions or fund your account.`,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<Link href={marginCallHelpLink} theme={linkCN}>\n\t\t\t\t\t\t\t{tspan('learnMoreMarginCall', 'Learn more about Margin Call')}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<div className={css.buttons}>\n\t\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\t\tto={routes.trade.root}\n\t\t\t\t\t\t\t\tvalue={empty}\n\t\t\t\t\t\t\t\trender={() => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Button onClick={onClose} isPrimary theme={buttonTheme}>\n\t\t\t\t\t\t\t\t\t\t\t{tspan('toTrade', 'Back to Trade')}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\t\tto={routes.crm.deposit.root}\n\t\t\t\t\t\t\t\tvalue={empty}\n\t\t\t\t\t\t\t\trender={({ onNavigate }) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<ButtonCta\n\t\t\t\t\t\t\t\t\t\t\ttheme={buttonTheme}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t\t\tonNavigate();\n\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t{tspan('depositButton', 'Deposit')}\n\t\t\t\t\t\t\t\t\t\t</ButtonCta>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Popup>\n\t\t\t);\n\t\t}),\n\t),\n);\n","import { Observable, merge, combineLatest } from 'rxjs';\nimport { map, mapTo, filter, first, distinctUntilChanged, pluck } from 'rxjs/operators';\nimport { or, constFalse } from 'fp-ts/lib/function';\nimport * as O from 'fp-ts/lib/Option';\nimport { asks } from '@devexperts/rx-utils/dist/context.utils';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { PostMessageClient } from '../../api/post-message.client';\nimport { isClosePopup, isRedirectToCRMDeposit } from '../../api/post-message/post-message.to';\nimport { SocketClient } from '../../api/socket-client';\nimport { isAccountSettingsTO } from '../../api/socket/socket-message.to';\nimport { AccountViewModel } from '../account/account.view-model';\nimport { number } from 'io-ts';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type MarginViewModel = {\n\tshouldOpenPopup$: Observable<boolean>;\n\tonClose: () => void;\n};\n\ntype MarginViewModelContext = {\n\tsocketClient: SocketClient;\n\taccountViewModel: AccountViewModel;\n\tpostMessageClient: PostMessageClient;\n};\n\ntype CreateMarginViewModel = () => MarginViewModel;\n\nexport const createMarginViewModel = asks(\n\t(e: MarginViewModelContext): CreateMarginViewModel => {\n\t\tconst { socketClient, accountViewModel, postMessageClient } = e;\n\t\tconst { accountMetrics$ } = accountViewModel;\n\n\t\tconst accountMetricsWithMargin$ = accountMetrics$.pipe(\n\t\t\tfilter(accountMetrics => O.isSome(accountMetrics.margin)),\n\t\t);\n\t\tconst accountMargin$ = accountMetricsWithMargin$.pipe(map(accountMetrics => accountMetrics.margin));\n\t\tconst reverseRiskLevel$ = accountMetricsWithMargin$.pipe(\n\t\t\tmap(accountMetrics => accountMetrics.allMetrics),\n\t\t\tpluck('reverseRiskLevel'),\n\t\t\tfilter(number.is),\n\t\t);\n\n\t\tconst toggleHandler = createHandler();\n\n\t\tconst marginAlertLevel$ = socketClient.message$.pipe(\n\t\t\tfilter(isAccountSettingsTO),\n\t\t\tmap(data => data.body.marginAlertLevel1),\n\t\t\tfilter(marginAlert => O.isSome(marginAlert)),\n\t\t);\n\t\tconst initState$ = combineLatest(marginAlertLevel$, accountMargin$, reverseRiskLevel$).pipe(\n\t\t\tmap(([marginAlert, margin, reverseRiskLevel]) =>\n\t\t\t\tpipe(\n\t\t\t\t\tmargin,\n\t\t\t\t\tO.chain(margin =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\tmarginAlert,\n\t\t\t\t\t\t\tO.map(alert => {\n\t\t\t\t\t\t\t\tconst marginAlertPercent = alert * 100;\n\t\t\t\t\t\t\t\tconst isMarginCallCase = reverseRiskLevel < marginAlertPercent;\n\t\t\t\t\t\t\t\tconst haveOpenedPositions = margin > 0;\n\t\t\t\t\t\t\t\treturn haveOpenedPositions ? isMarginCallCase : false;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t\tO.getOrElse(constFalse),\n\t\t\t\t),\n\t\t\t),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst closePopupFromPostMessage$ = postMessageClient.postMessage$.pipe(\n\t\t\tfilter(or(isClosePopup, isRedirectToCRMDeposit)),\n\t\t);\n\n\t\tconst handledState$ = merge(toggleHandler.value$, closePopupFromPostMessage$).pipe(\n\t\t\tmapTo(false),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\n\t\treturn () => ({\n\t\t\tshouldOpenPopup$: merge(initState$, handledState$),\n\t\t\tonClose: () => toggleHandler.handle(undefined),\n\t\t});\n\t},\n);\n","import { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { MarginPopup } from '../../components/margin-popup/margin-popup.component';\nimport { MarginViewModel, createMarginViewModel } from '../../../../view-model/margin/margin.view-model';\nimport { runOnMount } from '../../../../utils/react.utils';\n\ntype MarginPopupContainerContext = {\n\tmarginViewModel: MarginViewModel;\n};\n\nconst Container = combineContext(MarginPopup, ask<MarginPopupContainerContext>(), (MarginPopup, e) =>\n\twithRXWithDefaults(MarginPopup)(() => {\n\t\tconst { shouldOpenPopup$, onClose } = e.marginViewModel;\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tisPopupOpened: shouldOpenPopup$,\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tisPopupOpened: false,\n\t\t\t\tonClose,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const MarginPopupContainer = combineContext(\n\tdeferContext(Container, 'marginViewModel'),\n\tcreateMarginViewModel,\n\t(Container, createMarginViewModel) =>\n\t\trunOnMount(Container, () => () => ({\n\t\t\tmarginViewModel: createMarginViewModel(),\n\t\t})),\n);\n","import { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { asks } from '@devexperts/rx-utils/dist/context.utils';\nimport { AccountViewModel } from '../account/account.view-model';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type ReloginViewModel = {\n\tshouldOpenPopup$: Observable<boolean>;\n};\n\ntype ReloginViewModelContext = {\n\taccountViewModel: AccountViewModel;\n};\n\ntype CreateReloginViewModel = () => ReloginViewModel;\n\nexport const createReloginViewModel = asks(\n\t(e: ReloginViewModelContext): CreateReloginViewModel => {\n\t\tconst { logoutEvent$ } = e.accountViewModel;\n\n\t\tconst handledState$ = logoutEvent$.pipe(\n\t\t\tmap(logoutEvent =>\n\t\t\t\tpipe(\n\t\t\t\t\tlogoutEvent.reasonTO,\n\t\t\t\t\tO.exists(reason =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\treason.reasonType,\n\t\t\t\t\t\t\tO.exists(type => type === 'SESSION_EXPIRED'),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\n\t\treturn () => ({\n\t\t\tshouldOpenPopup$: handledState$,\n\t\t});\n\t},\n);\n","import * as React from 'react';\nimport { memo } from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { Popup } from '../../../ui-kit/components/popup/popup.component';\nimport { Button } from '../../../../ui-common/button/button.component';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport { redirectToRelogin } from '../../../../utils/route.utils';\nimport * as css from './theme/relogin-popup.module.css';\nimport * as popupTheme from './theme/popup.child.module.css';\nimport * as buttonTheme from './theme/button.child.module.css';\n\ntype ReloginPopupProps = {\n\tisPopupOpened: boolean;\n};\n\nconst ReloginPopupRaw = memo<ReloginPopupProps & WithTranslation>(props => {\n\tconst { isPopupOpened } = props;\n\n\treturn (\n\t\t<Popup\n\t\t\tonClose={redirectToRelogin}\n\t\t\tisOpened={isPopupOpened}\n\t\t\tisModal\n\t\t\ttitle={tspan('reloginPopupTitle', 'Session Expired')}\n\t\t\ttheme={popupTheme}>\n\t\t\t<div className={css.content}>\n\t\t\t\t<p className={css.text}>{tspan('reloginPopupText', `Your session is expired. Please login again`)}</p>\n\t\t\t\t<div className={css.buttons}>\n\t\t\t\t\t<Button onClick={redirectToRelogin} isPrimary theme={buttonTheme}>\n\t\t\t\t\t\t{tspan('loginButtonText', 'Login')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t);\n});\n\nexport const ReloginPopup = withTranslation()(ReloginPopupRaw);\n","import { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { ReloginViewModel, createReloginViewModel } from '../../../../view-model/relogin/relogin.view-model';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { ReloginPopup } from '../../components/relogin-popup/relogin-popup.component';\nimport { runOnMount } from '../../../../utils/react.utils';\n\ntype ReloginPopupContainerContext = {\n\treloginViewModel: ReloginViewModel;\n};\n\nconst Container = combineContext(ask<ReloginPopupContainerContext>(), e =>\n\twithRXWithDefaults(ReloginPopup)(() => {\n\t\tconst { shouldOpenPopup$ } = e.reloginViewModel;\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tisPopupOpened: shouldOpenPopup$,\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tisPopupOpened: false,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const ReloginPopupContainer = combineContext(\n\tdeferContext(Container, 'reloginViewModel'),\n\tcreateReloginViewModel,\n\t(Container, createReloginViewModel) =>\n\t\trunOnMount(Container, () => () => ({\n\t\t\treloginViewModel: createReloginViewModel(),\n\t\t})),\n);\n","import { Component } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { isNotNullable } from '@devexperts/utils/dist/object';\nimport { ChatModel } from '../chat.model';\nimport { combineContext, ask } from '@devexperts/rx-utils/dist/context.utils';\n\nexport type ChatProps = {\n\tchatConfig: {\n\t\tname: Option<string>;\n\t\temail: Option<string>;\n\t\taccountId: Option<string>;\n\t};\n};\n\nexport type ChatContext = {\n\tchat: ChatModel;\n};\n\nexport const Chat = combineContext(ask<ChatContext>(), ({ chat }) =>\n\twithTranslation()(\n\t\tclass Chat extends Component<WithTranslation & ChatProps> {\n\t\t\tprivate readonly changeChatLocale = (locale: string) => chat.setLocale(locale);\n\n\t\t\tcomponentDidMount() {\n\t\t\t\t// The i18n.language field is mutated on `changeLanguage`\n\t\t\t\t// and previous value doesn't store anywhere, so in shouldComponentUpdate\n\t\t\t\t// `this.props.i18n.language` and `nextProps.i18n.language` values are equal.\n\t\t\t\tthis.props.i18n.on('languageChanged', this.changeChatLocale);\n\t\t\t}\n\n\t\t\tshouldComponentUpdate(nextProps: WithTranslation & ChatProps) {\n\t\t\t\tconst {\n\t\t\t\t\tchatConfig,\n\t\t\t\t\ti18n: { language: locale },\n\t\t\t\t} = nextProps;\n\t\t\t\tconst { accountId, name, email } = chatConfig;\n\t\t\t\tconst {\n\t\t\t\t\tchatConfig: { accountId: currentAccountId, name: currentName, email: currentEmail },\n\t\t\t\t} = this.props;\n\n\t\t\t\tif (O.isSome(accountId)) {\n\t\t\t\t\tif (O.isSome(currentAccountId)) {\n\t\t\t\t\t\tconst hasNameChanged =\n\t\t\t\t\t\t\tO.isSome(name) &&\n\t\t\t\t\t\t\t(O.isNone(currentName) || (O.isSome(currentName) && name.value !== currentName.value));\n\t\t\t\t\t\tconst hasEmailChanged =\n\t\t\t\t\t\t\tO.isSome(email) &&\n\t\t\t\t\t\t\t(O.isNone(currentEmail) || (O.isSome(currentEmail) && email.value !== currentEmail.value));\n\t\t\t\t\t\tconst hasAccountIdChanged = accountId.value !== currentAccountId.value;\n\n\t\t\t\t\t\tif (hasNameChanged || hasEmailChanged) {\n\t\t\t\t\t\t\t// In case this ever change in SPA mode\n\t\t\t\t\t\t\t// we need to update this fields in chat\n\t\t\t\t\t\t\tchat.prefill(name, email);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (hasAccountIdChanged) {\n\t\t\t\t\t\t\tchat.setAccountId(accountId);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (isNotNullable(locale)) {\n\t\t\t\t\t\t// Execute only once when the first data has arrived\n\t\t\t\t\t\tchat.init({ ...chatConfig, locale });\n\t\t\t\t\t\tchat.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tcomponentWillUnmount() {\n\t\t\t\tthis.props.i18n.off('languageChanged', this.changeChatLocale);\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t),\n);\n","import { map } from 'rxjs/operators';\nimport { none } from 'fp-ts/lib/Option';\nimport { withRXWithDefaults } from '../../../utils/withRXWithDefaults';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { AccountViewModel } from '../../../view-model/account/account.view-model';\nimport { createChat } from '../chat.utils';\nimport { Chat } from '../components/chat.component';\nimport { runOnMount } from '../../../utils/react.utils';\n\nexport type ChatContainerContext = {\n\taccountViewModel: AccountViewModel;\n};\n\nexport const Container = combineContext(ask<ChatContainerContext>(), Chat, ({ accountViewModel }, Chat) => {\n\tconst chatConfig$ = accountViewModel.accountInfo$.pipe(\n\t\tmap(info => {\n\t\t\treturn {\n\t\t\t\tname: info.fullName,\n\t\t\t\temail: info.email,\n\t\t\t\taccountId: info.accountId,\n\t\t\t};\n\t\t}),\n\t);\n\n\treturn withRXWithDefaults(Chat)(() => ({\n\t\tprops: {\n\t\t\tchatConfig: chatConfig$,\n\t\t},\n\t\tdefaultProps: {\n\t\t\tchatConfig: {\n\t\t\t\tname: none,\n\t\t\t\temail: none,\n\t\t\t\taccountId: none,\n\t\t\t},\n\t\t},\n\t}));\n});\n\nexport const ChatContainer = combineContext(deferContext(Container, 'chat'), Container =>\n\trunOnMount(Container, () => () => ({\n\t\tchat: createChat(),\n\t})),\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const MinimizeIcon = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M11.13 16.456H1.9a.377.377 0 01-.354-.338v-1.354a.37.37 0 01.354-.338h16.287a.37.37 0 01.354.341v1.354a.37.37 0 01-.354.338z\"\n\t\t\t/>\n\t\t\t<g fill=\"none\">\n\t\t\t\t<rect width=\"15.2\" height=\"8.2\" x=\"2.434\" y=\"3.9\" stroke=\"currentColor\" strokeWidth=\"1.8\" rx=\"0.1\" />\n\t\t\t\t<path stroke=\"rgba(112,112,112,0)\" d=\"M.5.5h19v19H.5z\" />\n\t\t\t</g>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const CloseContinueRegistrationIcon = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\td=\"M15.3 4.215c.137-.12.34-.12.478 0l.957.958c.12.137.12.342 0 .48l-4.785 4.79 4.785 4.79c.12.137.12.342 0 .48l-.957.958a.362.362 0 01-.478 0l-4.785-4.79-4.785 4.79a.365.365 0 01-.48 0l-.957-.958a.365.365 0 010-.48l4.785-4.79-4.785-4.79a.365.365 0 010-.48l.957-.958a.365.365 0 01.48 0l4.785 4.8z\"\n\t\t\t/>\n\t\t\t<path fill=\"none\" stroke=\"rgba(112,112,112,0)\" d=\"M.5.5h19v19H.5z\" />\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { memo, useCallback, useState } from 'react';\nimport { MinimizeIcon } from '../../icons/minimize.icon';\nimport { CloseContinueRegistrationIcon } from '../../icons/continue-registration-close.icon';\nimport { constVoid } from 'fp-ts/lib/function';\nimport { tspan } from '../../../../../utils/i18n.utils';\nimport { WithTranslation, withTranslation } from 'react-i18next';\n\nimport * as css from './theme/registration-open-button.module.css';\n\nconst RegistrationContinueButtonRaw = memo<WithTranslation>(() => {\n\tconst [isShow, setShow] = useState(true);\n\tconst toggleHandle = useCallback(() => setShow(!isShow), [isShow]);\n\n\treturn isShow ? (\n\t\t<div className={css.container}>\n\t\t\t<span className={css.title}>{tspan('ContinueRegistrationButtonShowPopup', 'Continue Registration')}</span>\n\t\t\t<button className={css.btn} onClick={constVoid}>\n\t\t\t\t<MinimizeIcon />\n\t\t\t</button>\n\t\t\t<button className={css.btn} onClick={toggleHandle}>\n\t\t\t\t<CloseContinueRegistrationIcon />\n\t\t\t</button>\n\t\t</div>\n\t) : null;\n});\n\nexport const RegistrationContinueButton = withTranslation()(RegistrationContinueButtonRaw);\n","import * as React from 'react';\nimport { Component, ReactNode, Fragment } from 'react';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { AsideContainer } from '../../containers/aside/aside.container';\nimport { HeaderContainer } from '../../containers/header/header.container';\nimport { MenuContainer } from '../menu/containers/menu.container';\nimport { WelcomePopupContainer } from '../../../popup/containers/welcome-popup/welcome-popup.container';\nimport { ConnectionLostPopupContainer } from '../../../popup/containers/connection-lost-popup/connection-lost-popup.container';\nimport { MarginPopupContainer } from '../../../popup/containers/margin-popup/margin-popup.container';\nimport { ReloginPopupContainer } from '../../../popup/containers/relogin-popup/relogin-popup.container';\nimport { Preloader } from '../../../ui-kit/components/preloader/preloader.component';\nimport { ChatContainer } from '../../../chat/containers/chat.container';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { RegistrationContinueButton } from '../../../ui-kit/components/preview-mode/components/registration-open-button.component';\n\nimport * as css from './theme/layout.module.css';\n\ntype LayoutState = {\n\tmenuIsOpened: boolean;\n};\n\ntype LayoutProps = {\n\tchildren: ReactNode;\n\tloader: boolean;\n\tpreviewMode: Option<boolean>;\n};\n\nconst combinedPopupContexts = combineContext(\n\tWelcomePopupContainer,\n\tMarginPopupContainer,\n\tConnectionLostPopupContainer,\n\tReloginPopupContainer,\n\t(WelcomePopupContainer, MarginPopupContainer, ConnectionLostPopupContainer, ReloginPopupContainer) => [\n\t\tWelcomePopupContainer,\n\t\tMarginPopupContainer,\n\t\tConnectionLostPopupContainer,\n\t\tReloginPopupContainer,\n\t],\n);\n\nexport const Layout = combineContext(\n\tHeaderContainer,\n\tAsideContainer,\n\tMenuContainer,\n\tChatContainer,\n\tcombinedPopupContexts,\n\t(\n\t\tHeaderContainer,\n\t\tAsideContainer,\n\t\tMenuContainer,\n\t\tChatContainer,\n\t\t[WelcomePopupContainer, MarginPopupContainer, ConnectionLostPopupContainer, ReloginPopupContainer],\n\t) =>\n\t\tclass Layout extends Component<LayoutProps, LayoutState> {\n\t\t\treadonly state = {\n\t\t\t\tmenuIsOpened: false,\n\t\t\t};\n\n\t\t\tpublic render() {\n\t\t\t\tconst { children, previewMode } = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div className={css.container}>\n\t\t\t\t\t\t{this.props.loader ? (\n\t\t\t\t\t\t\t<Preloader />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<AsideContainer\n\t\t\t\t\t\t\t\t\tmenuHandler={this.toggleMenu}\n\t\t\t\t\t\t\t\t\tmenuCloser={this.closeMenu}\n\t\t\t\t\t\t\t\t\tmenuIsOpened={this.state.menuIsOpened}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className={css.content}>\n\t\t\t\t\t\t\t\t\t<div className={css.header}>\n\t\t\t\t\t\t\t\t\t\t<HeaderContainer />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<main className={css.main}>{children}</main>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<WelcomePopupContainer />\n\t\t\t\t\t\t\t\t<ConnectionLostPopupContainer />\n\t\t\t\t\t\t\t\t<MarginPopupContainer />\n\t\t\t\t\t\t\t\t<ReloginPopupContainer />\n\t\t\t\t\t\t\t\t<ChatContainer />\n\t\t\t\t\t\t\t\t{this.state.menuIsOpened && <MenuContainer onClose={this.toggleMenu} />}\n\t\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\t\tpreviewMode,\n\t\t\t\t\t\t\t\t\tO.map(previewMode => previewMode && <RegistrationContinueButton />),\n\t\t\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\ttoggleMenu = () => {\n\t\t\t\tthis.setState({ menuIsOpened: !this.state.menuIsOpened });\n\t\t\t};\n\n\t\t\tcloseMenu = () => {\n\t\t\t\tthis.setState({ menuIsOpened: false });\n\t\t\t};\n\t\t},\n);\n","import { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { AvaSystemSettingsTO } from '../../../../api/generated/swagger/definitions/AvaSystemSettingsTO';\nimport { Layout } from '../../components/layout/layout.component';\nimport { AccountViewModel } from '../../../../view-model/account/account.view-model';\nimport { SystemSettingsViewModel } from '../../../../view-model/system-settings/system-settings.view-model';\nimport { Router } from '../../../../utils/router.utils';\nimport { combineLatest, merge, of } from 'rxjs';\nimport { distinctUntilChanged, filter, map, pluck, tap, mapTo, switchMap } from 'rxjs/operators';\nimport { Route } from 'fp-ts-routing';\nimport * as O from 'fp-ts/lib/Option';\nimport { Pushwoosh } from 'web-push-notifications';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { string } from 'io-ts';\nimport i18next from 'i18next';\nimport { loadScript } from '../../../../utils/load-script.utils';\n\nexport type LayoutContainerContext = {\n\taccountViewModel: AccountViewModel;\n\tsystemSettingsViewModel: SystemSettingsViewModel;\n\trouter: Router;\n};\n\nconst PushwooshInstance = new Pushwoosh();\n\nexport const LayoutContainer = combineContext(Layout, ask<LayoutContainerContext>(), (Layout, e) => {\n\tconst availableAccounts$ = e.systemSettingsViewModel.availableAccounts$;\n\tconst platformType$ = e.systemSettingsViewModel.platformType$;\n\n\tconst query$ = of(e.router.state).pipe(\n\t\tmap(state => Route.parse(state.location.search)),\n\t\tmap(({ query }) => query),\n\t);\n\n\tconst enableLokaliseTranslation$ = query$.pipe(\n\t\tpluck('translate'),\n\t\tfilter(value => string.is(value) && value.toLowerCase() === 'true'),\n\t\ttap(() => {\n\t\t\tObject.assign(window, {\n\t\t\t\tLOKALISE_CONFIG: {\n\t\t\t\t\tprojectId: String(process.env.REACT_APP_LOKALISE_PROJECT_ID),\n\t\t\t\t\tlocale: i18next.language,\n\t\t\t\t\tdisableAdvancedHtml: true,\n\t\t\t\t},\n\t\t\t});\n\t\t}),\n\t\tmapTo(`https://lokalise.co/live-js/script.min.js?${new Date().getTime()}`),\n\t\tswitchMap(loadScript),\n\t);\n\n\tconst customerId$ = query$.pipe(\n\t\tpluck('customer_id'),\n\t\tfilter(string.is),\n\t\tdistinctUntilChanged(),\n\t);\n\n\tconst pushWooshInfo$ = combineLatest(availableAccounts$, customerId$, platformType$).pipe(\n\t\ttap(([availableAccounts, customerId, platformType]) => {\n\t\t\tconst codes: { [k in AvaSystemSettingsTO['platformType']]: string | undefined } = {\n\t\t\t\tPROD: process.env.REACT_APP_PUSHWOOSH_APPLICATION_CODE_PROD,\n\t\t\t\tDEV: process.env.REACT_APP_PUSHWOOSH_APPLICATION_CODE_QA,\n\t\t\t};\n\t\t\tconst applicationCode = O.fromNullable(codes[platformType]);\n\n\t\t\tif (O.isSome(applicationCode)) {\n\t\t\t\tPushwooshInstance.push([\n\t\t\t\t\t'init',\n\t\t\t\t\t{\n\t\t\t\t\t\tapplicationCode: applicationCode.value,\n\t\t\t\t\t\tlogLevel: 'error',\n\t\t\t\t\t\tsafariWebsitePushID: 'web.com.example.domain', //TODO after settings pushwoosh crm add id\n\t\t\t\t\t\tdefaultNotificationTitle: 'Ava-trade',\n\t\t\t\t\t\tautoSubscribe: true,\n\t\t\t\t\t\tuserId: customerId,\n\t\t\t\t\t\ttags: {\n\t\t\t\t\t\t\tAccountID: availableAccounts.map(data => `${data.serverName}:${data.accountId}`),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t}),\n\t);\n\n\t// this effects for different custom api libs for register data\n\tconst effects$ = merge(pushWooshInfo$, enableLokaliseTranslation$);\n\n\treturn new Sink(\n\t\twithRXWithDefaults(Layout)(() => {\n\t\t\tconst { accountViewModel } = e;\n\t\t\tconst { preloader$ } = accountViewModel;\n\n\t\t\treturn {\n\t\t\t\tdefaultProps: {\n\t\t\t\t\tloader: false,\n\t\t\t\t\tpreviewMode: O.some(false),\n\t\t\t\t},\n\t\t\t\tprops: {\n\t\t\t\t\tloader: preloader$,\n\t\t\t\t},\n\t\t\t};\n\t\t}),\n\t\teffects$,\n\t);\n});\n","import { Match } from 'fp-ts-routing';\nimport { PureComponent, ReactNode } from 'react';\nimport { exact, parse } from '../../../../utils/router.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as O from 'fp-ts/lib/Option';\n\nexport type RouteComponentProps<A extends object> = {\n\tmatch: Match<A>;\n\trender: (a: A) => ReactNode;\n\texact?: true;\n\tpath: string;\n};\n\nexport class RouteComponent<A extends object> extends PureComponent<RouteComponentProps<A>> {\n\trender() {\n\t\tconst { render, path } = this.props;\n\t\tconst match = Boolean(this.props.exact) ? exact(this.props.match) : this.props.match;\n\t\treturn pipe(\n\t\t\tparse(match, path),\n\t\t\tO.map(([a, _]) => render(a)),\n\t\t\tO.toNullable,\n\t\t);\n\t}\n}\n","import { RouteComponent } from '../../../ui-desktop/ui-kit/components/route/route.component';\nimport { createElement, PureComponent, ReactNode } from 'react';\nimport { Match } from 'fp-ts-routing';\nimport { Router } from '../../../utils/router.utils';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\nimport { ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../utils/withRXWithDefaults';\n\nexport type RouteContainerContext = {\n\trouter: Router;\n};\n\nexport type RouteProps<A extends object> = {\n\tmatch: Match<A>;\n\trender: (a: A) => ReactNode;\n\texact?: true;\n\tchildren?: never;\n};\n\nexport const Route = ask<RouteContainerContext>().map(e => {\n\tconst Intermediate = withRXWithDefaults(RouteComponent)(props => ({\n\t\tprops: {\n\t\t\tpath: e.router.state$.pipe(\n\t\t\t\tmap(state => state.location.pathname),\n\t\t\t\tdistinctUntilChanged(),\n\t\t\t),\n\t\t},\n\t\tdefaultProps: {\n\t\t\tpath: e.router.state.location.pathname,\n\t\t},\n\t}));\n\n\t// dedicated class for type inference of type argument A\n\treturn class RouteContainer<A extends object> extends PureComponent<RouteProps<A>> {\n\t\tstatic displayName = `RouteContainer(${Intermediate.displayName})`;\n\n\t\trender() {\n\t\t\treturn createElement(Intermediate, this.props as any);\n\t\t}\n\t};\n});\n","import * as React from 'react';\nimport { Component, ReactNode } from 'react';\nimport { TableCellAlign } from './table.model';\nimport * as cn from 'classnames';\nimport * as css from './theme/table-cell.module.css';\n\nexport type TTableCellProps = {\n\talign: TableCellAlign;\n\tvalue?: string | number;\n\tchildren?: ReactNode;\n};\n\nexport class TableCell extends Component<TTableCellProps> {\n\trender() {\n\t\tconst { align, value, children } = this.props;\n\t\tconst className = cn(css.cell, {\n\t\t\t[css.cell_leftAligned]: align === TableCellAlign.Left,\n\t\t\t[css.cell_centerAligned]: align === TableCellAlign.Center,\n\t\t\t[css.cell_rightAligned]: align === TableCellAlign.Right,\n\t\t});\n\n\t\treturn (\n\t\t\t<span className={className}>\n\t\t\t\t{value}\n\t\t\t\t{children}\n\t\t\t</span>\n\t\t);\n\t}\n}\n","import * as React from 'react';\nimport { TableCellAlign, TableCellProps, TableConfigItem } from './table.model';\nimport { TableCell } from './table-cell.component';\nimport { findFirst } from 'fp-ts/lib/Array';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\n\nconst defaultColumnWidth = 150;\nconst TABLE_HEADER_HEIGHT = 24;\n\nexport function renderCell(align: TableCellAlign) {\n\treturn function renderCell<A>(props: TableCellProps<A>) {\n\t\tconst row = props.rowData[props.dataKey];\n\t\treturn <TableCell align={align}>{row}</TableCell>;\n\t};\n}\n\nexport const getWidthFromConfig = (config: TableConfigItem[], dataKey: string): number =>\n\tpipe(\n\t\tconfig,\n\t\tfindFirst(item => item.dataKey === dataKey),\n\t\tO.fold(constant(defaultColumnWidth), value => value.width),\n\t);\n\nexport const getVerticalOffset = (itemIndex: number, itemSize: number, parentElem: HTMLDivElement) => {\n\tconst verticalOffset = itemIndex * itemSize;\n\tconst parentOffset = parentElem.scrollTop + parentElem.offsetHeight;\n\tconst offsetToLastWholeItem = parentOffset - (parentOffset % itemSize);\n\t// if the user selects a row that does not completely fit into the table\n\tif (verticalOffset >= offsetToLastWholeItem && verticalOffset <= offsetToLastWholeItem + itemSize) {\n\t\tconst elementsOnScreen = Math.trunc(parentElem.offsetHeight / itemSize);\n\t\tconst elementsOnScreenHeight = elementsOnScreen * itemSize;\n\t\tconst gap = parentElem.offsetHeight - elementsOnScreenHeight;\n\t\treturn O.some(parentElem.scrollTop + gap + TABLE_HEADER_HEIGHT);\n\t}\n\t// works for search\n\tif (verticalOffset > parentOffset || verticalOffset < parentElem.scrollTop) {\n\t\treturn O.some(verticalOffset);\n\t}\n\t// if the user selects a row that fits entirely into the table\n\treturn O.none;\n};\n","import { ConfigItem, WatchlistTableColumnNames } from './watchlist-table.model';\nimport { Column, TableCellAlign } from '../../../../ui-common/table-ava/table.model';\nimport { getWidthFromConfig } from '../../../../ui-common/table-ava/table.utils';\n\nexport const WatchlistLargeTableConfig: ConfigItem[] = [\n\t{\n\t\twidth: 235,\n\t\tdataKey: 'symbol',\n\t\tlabel: 'Symbol',\n\t},\n\t{\n\t\twidth: 170,\n\t\tdataKey: 'sell',\n\t\tlabel: 'Sell',\n\t},\n\t{\n\t\twidth: 285,\n\t\tdataKey: 'buy-sell-btns',\n\t\tlabel: '',\n\t},\n\t{\n\t\twidth: 170,\n\t\tdataKey: 'buy',\n\t\tlabel: 'Buy',\n\t},\n\t{\n\t\twidth: 97,\n\t\tdataKey: 'change',\n\t\tlabel: 'Change, %',\n\t},\n\t{\n\t\twidth: 120,\n\t\tdataKey: 'info-fav-icons',\n\t\tlabel: '',\n\t},\n];\n\nexport const WatchlistSmallTableConfig: Array<ConfigItem> = [\n\t{\n\t\twidth: 150,\n\t\tdataKey: 'symbol',\n\t\tlabel: 'Symbol',\n\t},\n\t{\n\t\twidth: 77,\n\t\tdataKey: 'sell',\n\t\tlabel: 'Sell',\n\t},\n\t{\n\t\twidth: 220,\n\t\tdataKey: 'buy-sell-btns',\n\t\tlabel: '',\n\t},\n\t{\n\t\twidth: 77,\n\t\tdataKey: 'buy',\n\t\tlabel: 'Buy',\n\t},\n\t{\n\t\twidth: 96,\n\t\tdataKey: 'change',\n\t\tlabel: 'Change, %',\n\t},\n\t{\n\t\twidth: 120,\n\t\tdataKey: 'info-fav-icons',\n\t\tlabel: '',\n\t},\n];\n\nexport const getColumnsConfig = (config: ConfigItem[], translatedColumnNames: WatchlistTableColumnNames): Column[] => [\n\t{\n\t\tlabel: translatedColumnNames.symbol,\n\t\twidth: getWidthFromConfig(config, 'symbol'),\n\t\talign: TableCellAlign.Left,\n\t\tkey: 'symbol',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.sell,\n\t\twidth: getWidthFromConfig(config, 'sell'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'sell',\n\t},\n\t{\n\t\tlabel: '',\n\t\twidth: getWidthFromConfig(config, 'buy-sell-btns'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'buy-sell-btns',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.buy,\n\t\twidth: getWidthFromConfig(config, 'buy'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'buy',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.change,\n\t\twidth: getWidthFromConfig(config, 'change'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'change',\n\t},\n\t{\n\t\tlabel: '',\n\t\twidth: getWidthFromConfig(config, 'info-fav-icons'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'info-fav-icons',\n\t},\n];\n","import { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { SocketClient } from '../../api/socket-client';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { WatchlistStore } from '../../store/watchlist/watchlist.store';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { merge, Observable, of } from 'rxjs';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { MarketDataStore } from '../../store/market-data/market-data.store';\nimport { map, switchMap, filter, startWith } from 'rxjs/operators';\nimport { Router, parse } from '../../utils/router.utils';\nimport { TableSize, ConfigItem } from '../../ui-desktop/watchlist/components/watchlist-table/watchlist-table.model';\nimport {\n\tWatchlistLargeTableConfig,\n\tWatchlistSmallTableConfig,\n} from '../../ui-desktop/watchlist/components/watchlist-table/watchlist-table.utils';\nimport { isSome } from 'fp-ts/lib/Option';\nimport { success } from '@devexperts/remote-data-ts';\nimport { routes } from '../../ui-common/routes';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { findIndex } from 'fp-ts/lib/Array';\nimport * as O from 'fp-ts/lib/Option';\nimport { Option } from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { shareReplayWithDefaults } from '../../utils/rxjs/shareReplayWithDefaults';\n\nconst empty = '';\n\nexport type WatchlistViewModel = {\n\treadonly data$: LiveData<Error, TableData>;\n\ttableSize$: Observable<TableSize>;\n\ttableSizeConfig$: Observable<ConfigItem[]>;\n};\n\nexport type WatchlistViewModelContext = {\n\tsocketClient: SocketClient;\n\twatchlistStore: WatchlistStore;\n\tmarketDataStore: MarketDataStore;\n\trouter: Router;\n};\n\nexport type TableData = {\n\tsymbols: string[];\n\tpositionId: Option<number>;\n};\n\nexport type CreateWatchlistViewModel = (categoryId: string) => Sink<WatchlistViewModel>;\n\nexport const createWatchlistViewModel = combineContext(\n\task<WatchlistViewModelContext>(),\n\t(e): CreateWatchlistViewModel => categoryId => {\n\t\tconst { watchlistStore, router } = e;\n\n\t\tconst data$ = watchlistStore.getById(categoryId).pipe(\n\t\t\tmapRD(wl => wl.symbols),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\t\tconst subscribeAllWlInstrumentsEffect$ = data$.pipe(\n\t\t\tswitchMapRD(data => merge(...data.map(symbol => e.marketDataStore.getDataBySymbol(symbol)))),\n\t\t);\n\n\t\tconst routeState$ = merge(of(router.state), router.state$);\n\n\t\tconst tableSize$: Observable<TableSize> = routeState$.pipe(\n\t\t\tmap(({ location: { pathname } }) => {\n\t\t\t\tconst isContainsBuy = pathname.includes('buy');\n\t\t\t\tconst isContainsSell = pathname.includes('sell');\n\t\t\t\tconst isContainsInfo = pathname.includes('info');\n\n\t\t\t\treturn isContainsBuy || isContainsSell || isContainsInfo ? TableSize.Small : TableSize.Large;\n\t\t\t}),\n\t\t);\n\n\t\tconst tableSizeConfig$: Observable<Array<ConfigItem>> = tableSize$.pipe(\n\t\t\tswitchMap(tableSize =>\n\t\t\t\tof(tableSize === TableSize.Large ? WatchlistLargeTableConfig : WatchlistSmallTableConfig),\n\t\t\t),\n\t\t);\n\n\t\tconst instrumentFromURL$ = routeState$.pipe(\n\t\t\tmap(({ location: { pathname } }) => parse(routes.trade.category.symbol.root, pathname)),\n\t\t\tmap(parsedURL =>\n\t\t\t\tpipe(\n\t\t\t\t\tparsedURL,\n\t\t\t\t\tO.map(([{ symbol }]) => symbol),\n\t\t\t\t),\n\t\t\t),\n\t\t\tfilter(isSome),\n\t\t\tmap(symbol => success<Error, string>(symbol.value)),\n\t\t\tstartWith(success<Error, string>(empty)),\n\t\t);\n\n\t\tconst dataAndInstrumentPositionId$ = combineLatestRD(data$, instrumentFromURL$).pipe(\n\t\t\tmapRD(([symbols, symbol]) => {\n\t\t\t\tconst positionId = findIndex(symbols, s => s === symbol);\n\t\t\t\treturn { symbols, positionId };\n\t\t\t}),\n\t\t);\n\n\t\treturn new Sink(\n\t\t\t{\n\t\t\t\tdata$: dataAndInstrumentPositionId$,\n\t\t\t\ttableSizeConfig$,\n\t\t\t\ttableSize$,\n\t\t\t},\n\t\t\tsubscribeAllWlInstrumentsEffect$,\n\t\t);\n\t},\n);\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport * as cn from 'classnames';\nimport { TableCell } from './table-cell.component';\nimport { Column } from './table.model';\nimport * as css from './theme/table.module.css';\n\ntype TableHeaderProps = {\n\tcolumns: Array<Column>;\n\tclassName?: string;\n};\n\nexport class TableHeader extends PureComponent<TableHeaderProps> {\n\tprivate rendeHeaderCell = ({ align, label, width, key }: Column) => (\n\t\t<div key={key} className={css.headCell} style={{ flexBasis: width }}>\n\t\t\t<TableCell align={align}>{label}</TableCell>\n\t\t</div>\n\t);\n\n\tprivate renderHeaderRow = () => {\n\t\tconst { columns } = this.props;\n\n\t\treturn columns.map(this.rendeHeaderCell);\n\t};\n\n\trender() {\n\t\treturn <div className={cn(css.row, css.head, this.props.className)}>{this.renderHeaderRow()}</div>;\n\t}\n}\n","import * as React from 'react';\nimport { Component, SyntheticEvent, CSSProperties, ReactNode, forwardRef, Ref } from 'react';\nimport Scrollbars from 'react-custom-scrollbars';\nimport throttle from '@devexperts/utils/dist/function/throttle';\nimport * as cn from 'classnames';\nimport * as scrollbarsCss from './theme/scrollbars.module.css';\n\n// need to adjust table's viewport\nconst TABLE_HEADER_HEIGHT = 43;\nconst THROTTLE_DELAY = 100;\n\ntype ForwardedTableProps = {\n\tclassName: string;\n\tstyle: CSSProperties;\n\tchildren: ReactNode;\n\tforwardedRef: (ref: Ref<HTMLDivElement>) => void;\n\tonScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\n};\n\ntype CustomScrollbarsState = {\n\tisEndOfScroll: boolean;\n};\n\nclass CustomScrollbars extends Component<ForwardedTableProps, CustomScrollbarsState> {\n\treadonly state = {\n\t\tisEndOfScroll: false,\n\t};\n\n\tprivate refSetter = (scrollbarsRef: any) => {\n\t\tconst { forwardedRef } = this.props;\n\n\t\tif (scrollbarsRef) {\n\t\t\tforwardedRef(scrollbarsRef.view);\n\t\t} else {\n\t\t\tforwardedRef(null);\n\t\t}\n\t};\n\n\tprivate checkEndOfScroll = throttle((target: HTMLDivElement) => {\n\t\tconst { isEndOfScroll: stateIsEndOfScroll } = this.state;\n\n\t\tif (target) {\n\t\t\tconst { scrollTop, clientHeight, scrollHeight } = target;\n\t\t\tconst isEndOfScroll: boolean = clientHeight + scrollTop >= scrollHeight;\n\n\t\t\tif (stateIsEndOfScroll !== isEndOfScroll) {\n\t\t\t\tthis.setState({ isEndOfScroll });\n\t\t\t}\n\t\t}\n\t}, THROTTLE_DELAY);\n\n\tprivate renderScrollbarElements = (className: string) => (props: any) => <div {...props} className={className} />;\n\n\tprivate getStyles = () => {\n\t\tconst { style } = this.props;\n\n\t\treturn {\n\t\t\t...style,\n\t\t\theight: Number(style.height) - TABLE_HEADER_HEIGHT,\n\t\t\toverflow: 'hidden',\n\t\t};\n\t};\n\n\tprivate handleScroll = (e: SyntheticEvent<HTMLDivElement>): void => {\n\t\tthis.checkEndOfScroll(e.target as HTMLDivElement);\n\n\t\te.currentTarget && this.props.onScroll(e);\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Scrollbars\n\t\t\t\tref={this.refSetter}\n\t\t\t\tclassName={cn(scrollbarsCss.container, {\n\t\t\t\t\t[scrollbarsCss.container_hasShadow]: !this.state.isEndOfScroll,\n\t\t\t\t})}\n\t\t\t\tstyle={this.getStyles()}\n\t\t\t\tonScroll={this.handleScroll}\n\t\t\t\trenderThumbVertical={this.renderScrollbarElements(scrollbarsCss.scrollbar)}\n\t\t\t\trenderTrackVertical={this.renderScrollbarElements(scrollbarsCss.track)}>\n\t\t\t\t{this.props.children}\n\t\t\t</Scrollbars>\n\t\t);\n\t}\n}\n\nexport const CustomScrollbarsVirtualList = forwardRef((props: ForwardedTableProps, ref) => (\n\t<CustomScrollbars {...props} forwardedRef={ref as (ref: Ref<HTMLDivElement>) => void} />\n));\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { FixedSizeList, FixedSizeListProps } from 'react-window';\nimport { raf } from '@devexperts/utils/dist/function/raf';\nimport { isNotNullable } from '@devexperts/utils/dist/object';\nimport { TableHeader } from './table-header.component';\nimport { CustomScrollbarsVirtualList } from './table-scrollbars.component';\nimport { Column } from './table.model';\nimport { getVerticalOffset } from './table.utils';\nimport { isMobileBuild } from '../../utils/node-env.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as O from 'fp-ts/lib/Option';\nimport * as css from './theme/table.module.css';\n\nexport type TableProps = {\n\tcolumns: Array<Column>;\n\ttableHeadClassname?: string;\n\tscrollToItem?: number;\n} & FixedSizeListProps;\n\nexport class Table extends PureComponent<TableProps> {\n\touterRef!: HTMLDivElement | null;\n\n\tscheduleScroll = (scrollToItem: number, itemSize: number) =>\n\t\traf(\n\t\t\t() =>\n\t\t\t\tthis.outerRef &&\n\t\t\t\tpipe(\n\t\t\t\t\tgetVerticalOffset(scrollToItem, itemSize, this.outerRef),\n\t\t\t\t\tO.map(value => (this.outerRef ? (this.outerRef.scrollTop = value) : null)),\n\t\t\t\t\tO.toNullable,\n\t\t\t\t),\n\t\t);\n\n\tcomponentDidMount() {\n\t\tconst { scrollToItem, itemSize } = this.props;\n\t\tisNotNullable(scrollToItem) && this.scheduleScroll(scrollToItem, itemSize)();\n\t}\n\n\tcomponentDidUpdate() {\n\t\tconst { scrollToItem, itemSize } = this.props;\n\t\tisNotNullable(scrollToItem) && this.scheduleScroll(scrollToItem, itemSize)();\n\t}\n\n\trender() {\n\t\tconst { width, height, columns, tableHeadClassname } = this.props;\n\t\tconst outerElementType = isMobileBuild ? undefined : CustomScrollbarsVirtualList;\n\n\t\treturn (\n\t\t\t<div className={css.container} style={{ width, height }}>\n\t\t\t\t<TableHeader columns={columns} className={tableHeadClassname} />\n\t\t\t\t<FixedSizeList\n\t\t\t\t\touterRef={ref => (this.outerRef = ref)}\n\t\t\t\t\tclassName={css.body}\n\t\t\t\t\touterElementType={outerElementType}\n\t\t\t\t\t{...this.props}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { Table, TableProps } from '../table-ava/table-list.component';\nimport { Omit } from 'typelevel-ts';\nimport AutoSizer, { Size } from 'react-virtualized-auto-sizer';\n\nexport type TAutosizedTableProps = Omit<TableProps, 'width' | 'height'>;\n\nexport class AutosizedTable extends PureComponent<TAutosizedTableProps> {\n\tpublic render() {\n\t\treturn (\n\t\t\t<AutoSizer>{(size: Size) => <Table height={size.height} width={size.width} {...this.props} />}</AutoSizer>\n\t\t);\n\t}\n}\n","export const putDot = (dotIndex: number, startIndex: number, value: string) => {\n\tif (startIndex <= dotIndex && dotIndex < startIndex + value.length) {\n\t\treturn value.slice(0, dotIndex - startIndex) + '.' + value.slice(dotIndex - startIndex, value.length);\n\t}\n\treturn value;\n};\n","import * as React from 'react';\nimport { Component } from 'react';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { PartialKeys } from '@devexperts/utils/dist/object';\nimport { putDot } from './pip-rate.model';\nimport { formatNumber } from 'accounting';\nimport * as css from './theme/pip-rate.module.css';\n\nexport type TPipSettings = {\n\tstart: number;\n\tlength: number;\n};\n\nexport type TRawPipRateProps = {\n\ttheme: {\n\t\tcontainer?: string;\n\t\tpip?: string;\n\t};\n\tvalue: number;\n\trise: TPipSettings;\n\tdigits: number;\n};\n\nclass RawPipRate extends Component<TRawPipRateProps> {\n\trender() {\n\t\tconst { value, rise, theme, digits } = this.props;\n\n\t\tconst stringValue = formatNumber(value, digits);\n\t\tconst dotIndex = stringValue.indexOf('.');\n\t\tconst commaIndex = stringValue.indexOf(',');\n\t\tconst start = rise.start >= commaIndex && commaIndex > -1 ? rise.start + 1 : rise.start;\n\t\tconst length = rise.start + 1 === commaIndex && commaIndex > -1 ? rise.length + 1 : rise.length;\n\n\t\tif (dotIndex === -1) {\n\t\t\treturn (\n\t\t\t\t<span className={theme.container}>\n\t\t\t\t\t{stringValue.slice(0, start)}\n\t\t\t\t\t<span className={theme.pip}>{stringValue.slice(start, start + length)}</span>\n\t\t\t\t\t{stringValue.slice(start + length, stringValue.length)}\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\n\t\tconst valueNoDot = stringValue.slice(0, dotIndex) + stringValue.slice(dotIndex + 1, stringValue.length);\n\n\t\treturn (\n\t\t\t<span className={theme.container}>\n\t\t\t\t{putDot(dotIndex, 0, valueNoDot.slice(0, start))}\n\t\t\t\t<span className={theme.pip}>{putDot(dotIndex, start, valueNoDot.slice(start, start + length))}</span>\n\t\t\t\t{putDot(dotIndex, start + length, valueNoDot.slice(start + length, valueNoDot.length))}\n\t\t\t</span>\n\t\t);\n\t}\n}\n\nconst wTheme = {\n\t...css,\n};\n\nexport type TPipRateProps = PartialKeys<TRawPipRateProps, 'theme'>;\nexport const PipRate = withTheme(Symbol(), wTheme)(RawPipRate);\n","import * as React from 'react';\nimport { IconWrapper } from '../icon-wrapper/icon-wrapper.component';\n\nexport const InfoIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 40 40\">\n\t\t\t<g fillRule=\"evenodd\" strokeLinejoin=\"bevel\">\n\t\t\t\t<path fill=\"none\" d=\"M7.3 20.5A12.5 12.5 0 1 1 19.8 33 12.5 12.5 0 0 1 7.3 20.5z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\td=\"M19.8 9a11.4 11.4 0 0 0-8.2 3.4 11.4 11.4 0 0 0-3.3 8.1c0 3 1.2 6 3.3 8.1a11.4 11.4 0 0 0 8.2 3.4c3 0 6-1.2 8.1-3.4a11.4 11.4 0 0 0 3.4-8c0-3.2-1.2-6-3.4-8.2A11.4 11.4 0 0 0 19.8 9m0-1a12.5 12.5 0 1 1 0 25 12.5 12.5 0 0 1 0-25z\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t\t<path fill=\"currentColor\" d=\"M18.5 19.3H21v7.5h-2.5zM18.5 14.3H21v2.5h-2.5z\" />\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const StarOnIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 40 40\">\n\t\t\t<path fill=\"currentColor\" d=\"M19.6 26.3L12.2 31l2-8.4-6.5-5.6 8.6-.7 3.3-8 3.3 8 8.6.7-6.6 5.6 2 8.4z\" />\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const StarOffIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 40 40\">\n\t\t\t<g fillRule=\"evenodd\">\n\t\t\t\t<path fill=\"none\" d=\"M19.9 27l-7.4 4.6 2-8.4L8 17.6l8.6-.6L20 9l3.3 8 8.6.6-6.6 5.6 2 8.4z\" />\n\t\t\t\t<path\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\td=\"M25.7 29.5l-1.5-6-.1-.6.5-.4 4.7-4L23 18h-.6l-.3-.6-2.3-5.8-2.4 5.8-.2.5h-.6l-6.2.6 4.7 4 .5.4-.1.6-1.5 6 5.3-3.3.5-.3.5.3 5.3 3.3m1.6 2.1l-7.4-4.5-7.4 4.5 2-8.4L8 17.6l8.6-.6L20 9l3.3 8 8.6.6-6.6 5.6 2 8.4z\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import { TPipSettings } from './pip-rate.component';\n\nexport const definePipSettings = (value: number, pipSize: number): TPipSettings => {\n\tconst valueString = value.toString();\n\tconst pipString = pipSize.toString();\n\tconst valueDotIndex = valueString.indexOf('.');\n\tconst pipDotIndex = pipString.indexOf('.');\n\tconst valueInteger = valueDotIndex > -1 ? valueString.slice(0, valueDotIndex) : valueString;\n\n\tif (pipSize < 1) {\n\t\tconst pipDecimal = pipSize <= 1 ? pipString.slice(pipDotIndex + 1, pipString.length) : '';\n\t\tconst pipStart = pipDecimal.length + valueInteger.length - 2;\n\t\treturn { start: pipStart, length: 2 };\n\t} else if (pipString.length === valueInteger.length) {\n\t\treturn { start: 0, length: 1 };\n\t} else {\n\t\tconst pipStart = valueInteger.length - pipString.length - 1;\n\t\treturn { start: pipStart, length: 2 };\n\t}\n};\n","import * as React from 'react';\nimport { IconWrapper } from '../icon-wrapper/icon-wrapper.component';\n\nexport const ArrowUpIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 18 18\">\n\t\t\t<path fill=\"currentColor\" d=\"M3 12l6-6 6 6-1 1-5-5-5 5z\" />\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../icon-wrapper/icon-wrapper.component';\n\nexport const ArrowDownIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 18 18\">\n\t\t\t<path fill=\"currentColor\" d=\"M15 7l-6 6-6-6 1-1 5 5 5-5z\" />\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { Component } from 'react';\nimport { ArrowUpIcon } from '../icons/arrow-up.icon';\nimport { ArrowDownIcon } from '../icons/arrow-down.icon';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { MakeTheme } from '../../utils/theme.utils';\nimport * as css from './theme/price-direction.module.css';\n\ntype RawPriceDirectionProps = {\n\ttheme: MakeTheme<'icon' | 'arrowUp' | 'arrowDown'>;\n\tdirection: number;\n};\n\nclass RawPriceDirection extends Component<RawPriceDirectionProps> {\n\tshouldComponentUpdate(nextProps: Readonly<RawPriceDirectionProps>): boolean {\n\t\treturn nextProps.direction !== 0;\n\t}\n\n\trender() {\n\t\tconst { theme, direction } = this.props;\n\t\tif (direction > 0) {\n\t\t\treturn (\n\t\t\t\t<div className={theme.icon}>\n\t\t\t\t\t<i className={theme.arrowUp}>\n\t\t\t\t\t\t<ArrowUpIcon />\n\t\t\t\t\t</i>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\tif (direction < 0) {\n\t\t\treturn (\n\t\t\t\t<div className={theme.icon}>\n\t\t\t\t\t<i className={theme.arrowDown}>\n\t\t\t\t\t\t<ArrowDownIcon />\n\t\t\t\t\t</i>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn <div className={theme.icon} />;\n\t}\n}\n\nconst wTheme = {\n\t...css,\n};\n\nexport const PriceDirection = withTheme(Symbol(), wTheme)(RawPriceDirection);\n","import { sequenceT } from 'fp-ts/lib/Apply';\nimport { Option, option } from 'fp-ts/lib/Option';\n\nexport const sequenceTOption = sequenceT(option);\n\nexport type OptionType<FA extends Option<any>> = FA extends Option<infer A> ? A : never;\n","import * as React from 'react';\nimport { Fragment, PureComponent } from 'react';\nimport { formatNumber } from 'accounting';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { ConfigItem, TableItem, TableSize } from '../watchlist-table/watchlist-table.model';\nimport * as cn from 'classnames';\nimport { findFirst } from 'fp-ts/lib/Array';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { Optional } from '../../../../ui-common/optional/optional.component';\nimport { PipRate } from '../../../../ui-common/pip-rate/pip-rate.component';\nimport * as O from 'fp-ts/lib/Option';\nimport { RouteLink } from '../../../../ui-common/route-link/containers/route-link.container';\nimport { routes } from '../../../../ui-common/routes';\nimport { InfoIcon } from '../../../../ui-common/icons/info.icon';\nimport { StarOnIcon } from '../../../ui-kit/components/icons/star-on.icon';\nimport { StarOffIcon } from '../../../ui-kit/components/icons/star-off.icon';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { definePipSettings } from '../../../../ui-common/pip-rate/pip-settings.utils';\nimport { PriceDirection } from '../../../../ui-common/price-direction/price-direction.component';\nimport { ListChildComponentProps } from 'react-window';\nimport { tspan, TRANSLATION_PLACEHOLDER } from '../../../../utils/i18n.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\nimport { sequenceTOption } from '../../../../utils/option.utils';\nimport { empty } from 'fp-ts/lib/Record';\nimport * as css from './theme/watchlist-entity.component.module.css';\nimport * as buttonSellCss from './theme/button-sell.child.module.css';\nimport * as buttonBuyCss from './theme/button-buy.child.module.css';\nimport * as priceDirectionCss from './theme/price-direction.child.module.css';\nimport * as pipRateCss from './theme/pip-rate.child.module.css';\nimport * as optionalCss from './theme/optional.module.css';\n\nexport type WatchlistEntityProps = ListChildComponentProps & {\n\trowData: string;\n\tremoteData: RemoteData<Error, TableItem>;\n\tconfig: Array<ConfigItem>;\n\tcategoryId: string;\n\ttoggleFavorite: (data: TableItem) => void;\n\ttableSize: TableSize;\n};\n\nconst defaultColumnWidth = 180;\n\nconst accentIconClassName = cn(css.icon, css.icon_accent);\n\nexport const WatchlistEntity = combineContext(RouteLink, RouteLink =>\n\twithTranslation()(\n\t\tclass WatchlistEntity extends PureComponent<WatchlistEntityProps & WithTranslation> {\n\t\t\trender() {\n\t\t\t\tconst { remoteData } = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<RemoteDataState data={remoteData} success={this.renderSuccess} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tprivate renderSuccess = (data: TableItem): JSX.Element => {\n\t\t\t\tconst { index, style, config, categoryId } = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={routes.trade.category.symbol.root}\n\t\t\t\t\t\tvalue={{ categoryId, symbol: data.symbol }}\n\t\t\t\t\t\trender={({ onNavigate, isActive }) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tonClick={onNavigate}\n\t\t\t\t\t\t\t\tclassName={cn(css.row, { [css.rowSelected]: isActive })}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tstyle={style}>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={css.rowColumn}\n\t\t\t\t\t\t\t\t\tstyle={{ flexBasis: this.getWidthFromConfig(config, 'symbol') }}>\n\t\t\t\t\t\t\t\t\t{this.renderSymbolCell(data)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={css.rowColumn}\n\t\t\t\t\t\t\t\t\tstyle={{ flexBasis: this.getWidthFromConfig(config, 'sell') }}>\n\t\t\t\t\t\t\t\t\t{this.renderSellCell(data)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={css.rowColumn}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tflexBasis: this.getWidthFromConfig(config, 'buy-sell-btns'),\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t{this.renderSellButton(data)}\n\t\t\t\t\t\t\t\t\t{this.renderBuyButton(data)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={css.rowColumn}\n\t\t\t\t\t\t\t\t\tstyle={{ flexBasis: this.getWidthFromConfig(config, 'buy') }}>\n\t\t\t\t\t\t\t\t\t{this.renderBuyCell(data)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={css.rowColumn}\n\t\t\t\t\t\t\t\t\tstyle={{ flexBasis: this.getWidthFromConfig(config, 'change') }}>\n\t\t\t\t\t\t\t\t\t{this.renderChangeCell(data)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={css.rowColumn}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tflexBasis: this.getWidthFromConfig(config, 'info-fav-icons'),\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t{this.renderInfoIcon(data)}\n\t\t\t\t\t\t\t\t\t{this.renderFavIcon(data)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderSymbolCell = (item: TableItem) => {\n\t\t\t\tconst { symbol, positions } = item;\n\t\t\t\tconst { tableSize } = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<span className={css.symbolCell}>\n\t\t\t\t\t\t<span>{symbol}</span>\n\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\tpositions,\n\t\t\t\t\t\t\tO.fold(constant(<span />), data => (\n\t\t\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\t\t\tto={routes.positions.root}\n\t\t\t\t\t\t\t\t\tvalue={empty}\n\t\t\t\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tclassName={css.positions}\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleClickWithStopPropagation(onNavigate)}>\n\t\t\t\t\t\t\t\t\t\t\t{data}\n\t\t\t\t\t\t\t\t\t\t\t{tableSize === TableSize.Large &&\n\t\t\t\t\t\t\t\t\t\t\t\t(data === 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t? tspan(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'tradeSymbolOnePositionIndicator',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'position',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t` ${TRANSLATION_PLACEHOLDER}`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t\t: tspan(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'tradeSymbolPositionsIndicator',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'positions',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t` ${TRANSLATION_PLACEHOLDER}`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ))}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t)}\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderSellCell = (item: TableItem) => {\n\t\t\t\tconst { sell, pipsSize, precision } = item;\n\n\t\t\t\tconst value = sequenceTOption(sell, pipsSize, precision);\n\t\t\t\tconst pipRendered = pipe(\n\t\t\t\t\tvalue,\n\t\t\t\t\tO.map(([sell, pipsSize, precision]) => (\n\t\t\t\t\t\t<PipRate\n\t\t\t\t\t\t\tvalue={sell}\n\t\t\t\t\t\t\trise={definePipSettings(sell, pipsSize)}\n\t\t\t\t\t\t\tdigits={precision}\n\t\t\t\t\t\t\ttheme={pipRateCss}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)),\n\t\t\t\t);\n\n\t\t\t\treturn <Optional className={optionalCss.noValue} value={pipRendered} />;\n\t\t\t};\n\n\t\t\tprivate renderSellButton = (item: TableItem) => {\n\t\t\t\tconst { categoryId } = this.props;\n\t\t\t\tconst { symbol } = item;\n\n\t\t\t\treturn (\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={routes.trade.category.symbol.action.root}\n\t\t\t\t\t\tvalue={{ categoryId, symbol, action: 'sell' }}\n\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={buttonSellCss.container}\n\t\t\t\t\t\t\t\tonClick={this.handleClickWithStopPropagation(onNavigate)}>\n\t\t\t\t\t\t\t\t{tspan('watchlistEntitySell', 'Sell')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderBuyButton = (item: TableItem) => {\n\t\t\t\tconst { categoryId } = this.props;\n\t\t\t\tconst { symbol } = item;\n\n\t\t\t\treturn (\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={routes.trade.category.symbol.action.root}\n\t\t\t\t\t\tvalue={{ categoryId, symbol, action: 'buy' }}\n\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={buttonBuyCss.container}\n\t\t\t\t\t\t\t\tonClick={this.handleClickWithStopPropagation(onNavigate)}>\n\t\t\t\t\t\t\t\t{tspan('watchlistEntityBuy', 'Buy')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate handleClickWithStopPropagation = (onNavigate: () => void) => (\n\t\t\t\te: React.MouseEvent<HTMLDivElement>,\n\t\t\t) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tonNavigate();\n\t\t\t};\n\n\t\t\tprivate renderBuyCell = (item: TableItem) => {\n\t\t\t\tconst { buy, pipsSize, precision } = item;\n\n\t\t\t\tconst value = sequenceTOption(buy, pipsSize, precision);\n\t\t\t\tconst pipRendered = pipe(\n\t\t\t\t\tvalue,\n\t\t\t\t\tO.map(([buy, pipsSize, precision]) => (\n\t\t\t\t\t\t<PipRate\n\t\t\t\t\t\t\tvalue={buy}\n\t\t\t\t\t\t\trise={definePipSettings(buy, pipsSize)}\n\t\t\t\t\t\t\tdigits={precision}\n\t\t\t\t\t\t\ttheme={pipRateCss}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)),\n\t\t\t\t);\n\n\t\t\t\treturn <Optional className={optionalCss.noValue} value={pipRendered} />;\n\t\t\t};\n\n\t\t\tprivate renderChangeCell = (item: TableItem) => {\n\t\t\t\tconst { change } = item;\n\t\t\t\tconst cellTheme = pipe(\n\t\t\t\t\tchange,\n\t\t\t\t\tO.fold(constant(css.changeCell_empty), constant(css.changeCell)),\n\t\t\t\t);\n\n\t\t\t\treturn (\n\t\t\t\t\t<span className={cellTheme}>\n\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\tchange,\n\t\t\t\t\t\t\t\tO.map(value => (\n\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t<PriceDirection direction={value} theme={priceDirectionCss} />\n\t\t\t\t\t\t\t\t\t\t{formatNumber(value, 2)}\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderInfoIcon = (item: TableItem) => {\n\t\t\t\tconst { categoryId } = this.props;\n\t\t\t\tconst { symbol } = item;\n\n\t\t\t\treturn (\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={routes.trade.category.symbol.info.root}\n\t\t\t\t\t\tvalue={{ categoryId, symbol }}\n\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t<div className={css.infoCell}>\n\t\t\t\t\t\t\t\t<i className={css.icon} onClick={this.handleClickWithStopPropagation(onNavigate)}>\n\t\t\t\t\t\t\t\t\t<InfoIcon />\n\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderFavIcon = (item: TableItem) =>\n\t\t\t\titem.isFavorite ? (\n\t\t\t\t\t<div className={css.favCell}>\n\t\t\t\t\t\t<i className={accentIconClassName} onClick={this.handleFavoriteIcon(item)}>\n\t\t\t\t\t\t\t<StarOnIcon />\n\t\t\t\t\t\t</i>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className={css.favCell}>\n\t\t\t\t\t\t<i className={css.icon} onClick={this.handleFavoriteIcon(item)}>\n\t\t\t\t\t\t\t<StarOffIcon />\n\t\t\t\t\t\t</i>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\n\t\t\tprivate handleFavoriteIcon = (props: TableItem) => () => this.props.toggleFavorite(props);\n\n\t\t\tprivate getWidthFromConfig = (config: ConfigItem[], dataKey: string): number => {\n\t\t\t\tconst currentColumn = findFirst(config, item => {\n\t\t\t\t\treturn item['dataKey'] === dataKey;\n\t\t\t\t});\n\n\t\t\t\treturn pipe(\n\t\t\t\t\tcurrentColumn,\n\t\t\t\t\tO.fold(constant(defaultColumnWidth), value => value.width),\n\t\t\t\t);\n\t\t\t};\n\t\t},\n\t),\n);\n","import { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { Errors, mixed } from 'io-ts';\nimport { report } from '../utils/utils';\nimport { left } from 'fp-ts/lib/Either';\n\nexport type TAPIRequest = {\n\turl: string;\n\tquery?: object;\n\tbody?: unknown;\n};\n\nexport type TFullAPIRequest = TAPIRequest & {\n\tmethod: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH' | 'HEAD' | 'OPTIONS';\n};\n\nexport type TAPIClient = {\n\treadonly request: (request: TFullAPIRequest) => LiveData<Error, mixed>;\n};\n\nexport class ResponseValidationError extends Error {\n\tstatic create(errors: Errors): ResponseValidationError {\n\t\treturn new ResponseValidationError(errors);\n\t}\n\n\tconstructor(readonly errors: Errors) {\n\t\tsuper(report(left(errors)).toString());\n\t\tthis.name = 'ResponseValidationError';\n\t\tObject.setPrototypeOf(this, ResponseValidationError);\n\t}\n}\n","import { Option } from 'fp-ts/lib/Option';\nimport { string, array, boolean, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type CreateWatchlistTO = {\n\tname: Option<string>;\n\tdescription: Option<string>;\n\tsymbols: Option<Array<string>>;\n\tfutures: Option<boolean>;\n};\nexport const CreateWatchlistTOIO = type({\n\tname: createOptionFromNullable(string),\n\tdescription: createOptionFromNullable(string),\n\tsymbols: createOptionFromNullable(array(string)),\n\tfutures: createOptionFromNullable(boolean),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { boolean, string, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type ResponseResultTO = { success: boolean; errorMessage: Option<string> };\nexport const ResponseResultTOIO = type({ success: boolean, errorMessage: createOptionFromNullable(string) });\n","import { string, array, type } from 'io-ts';\n\nexport type UpdateWatchlistSubscriptionTO = { watchlistIdsToAdd: Array<string>; watchlistIdsToRemove: Array<string> };\nexport const UpdateWatchlistSubscriptionTOIO = type({\n\twatchlistIdsToAdd: array(string),\n\twatchlistIdsToRemove: array(string),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { number, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type WatchlistCreationTO = { watchlistId: Option<number> };\nexport const WatchlistCreationTOIO = type({ watchlistId: createOptionFromNullable(number) });\n","import { ResponseValidationError, TAPIClient } from '../client/client';\nimport { CreateWatchlistTO, CreateWatchlistTOIO } from '../definitions/CreateWatchlistTO';\nimport { ResponseResultTO, ResponseResultTOIO } from '../definitions/ResponseResultTO';\nimport {\n\tUpdateWatchlistSubscriptionTO,\n\tUpdateWatchlistSubscriptionTOIO,\n} from '../definitions/UpdateWatchlistSubscriptionTO';\nimport { WatchlistContentTO, WatchlistContentTOIO } from '../definitions/WatchlistContentTO';\nimport { WatchlistCreationTO, WatchlistCreationTOIO } from '../definitions/WatchlistCreationTO';\nimport { WatchlistsTO, WatchlistsTOIO } from '../definitions/WatchlistsTO';\nimport { fromEither } from '@devexperts/remote-data-ts';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { asks } from 'fp-ts/lib/Reader';\nimport { partial, void as tvoid, string, type, array } from 'io-ts';\nimport { map } from 'rxjs/operators';\n\nexport type WatchlistsController = {\n\t/**\n\t * Create watchlist\n\t * @param { object } [parameters]\n\t */\n\treadonly createWatchlist: (parameters: { body?: CreateWatchlistTO }) => LiveData<Error, WatchlistCreationTO>;\n\n\t/**\n\t * Update watchlists content subscription. Subscribes on changes in watchlist's content\n\t * @param { object } [parameters]\n\t */\n\treadonly changeWatchlistContentSubscription: (parameters: {\n\t\tbody?: UpdateWatchlistSubscriptionTO;\n\t}) => LiveData<Error, void>;\n\n\t/**\n\t * Rename watchlist\n\t * @param { string } watchlistId - Watchlist's id\n\t * @param { object } parameters\n\t */\n\treadonly renameWatchlist: (\n\t\twatchlistId: string,\n\t\tparameters: { query: { newName: string } },\n\t) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Delete watchlist\n\t * @param { string } watchlistId - Watchlist's id\n\t */\n\treadonly deleteWatchlist: (watchlistId: string) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Update watchlist\n\t * @param { string } watchlistId - Watchlist's id\n\t * @param { object } [parameters]\n\t */\n\treadonly updateWatchlistCondition: (\n\t\twatchlistId: string,\n\t\tparameters: { body?: Array<string> },\n\t) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Duplicate watchlist\n\t * @param { string } watchlistId - Watchlist's id\n\t * @param { object } parameters\n\t */\n\treadonly duplicateWatchlist: (\n\t\twatchlistId: string,\n\t\tparameters: { query: { name: string } },\n\t) => LiveData<Error, WatchlistCreationTO>;\n\n\t/**\n\t * Get list of available watchtlists\n\t */\n\treadonly getWatchlists: () => LiveData<Error, Array<WatchlistsTO>>;\n\n\t/**\n\t * Get watchlist content\n\t * @param { object } parameters\n\t */\n\treadonly getWatchlistsContent: (parameters: {\n\t\tquery: { watchlistIds: Array<string> };\n\t}) => LiveData<Error, Array<WatchlistContentTO>>;\n};\n\nexport const watchlistsController = asks(\n\t(e: { apiClient: TAPIClient }): WatchlistsController => ({\n\t\tcreateWatchlist: parameters => {\n\t\t\tconst encoded = partial({ body: CreateWatchlistTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/watchlist`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(WatchlistCreationTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tchangeWatchlistContentSubscription: parameters => {\n\t\t\tconst encoded = partial({ body: UpdateWatchlistSubscriptionTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/watchlist/updateWatchlistContentSubscription`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\trenameWatchlist: (watchlistId, parameters) => {\n\t\t\tconst encoded = partial({ query: type({ newName: string }) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/watchlist/${encodeURIComponent(string.encode(watchlistId).toString())}`,\n\t\t\t\t\tmethod: 'PUT',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tdeleteWatchlist: watchlistId => {\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/watchlist/${encodeURIComponent(string.encode(watchlistId).toString())}`,\n\t\t\t\t\tmethod: 'DELETE',\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tupdateWatchlistCondition: (watchlistId, parameters) => {\n\t\t\tconst encoded = partial({ body: array(string) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/watchlist/${encodeURIComponent(string.encode(watchlistId).toString())}/content`,\n\t\t\t\t\tmethod: 'PUT',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tduplicateWatchlist: (watchlistId, parameters) => {\n\t\t\tconst encoded = partial({ query: type({ name: string }) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/watchlist/${encodeURIComponent(string.encode(watchlistId).toString())}/duplicate`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(WatchlistCreationTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tgetWatchlists: () => {\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/watchlists`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(WatchlistsTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tgetWatchlistsContent: parameters => {\n\t\t\tconst encoded = partial({ query: type({ watchlistIds: array(string) }) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/watchlists/content`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(WatchlistContentTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\t}),\n);\n","import { TableItem } from '../watchlist/watchlist-table.view-model';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { MarketDataStore } from '../../store/market-data/market-data.store';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport * as O from 'fp-ts/lib/Option';\nimport { Option } from 'fp-ts/lib/Option';\nimport { identity } from 'fp-ts/lib/function';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { ask, combineContext, fromReader } from '@devexperts/rx-utils/dist/context.utils';\nimport { PositionsStore } from '../../store/positions/positions.store';\nimport { WatchlistStore } from '../../store/watchlist/watchlist.store';\nimport { InstrumentStore } from '../../store/instrument/instrument.store';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { map, startWith, filter, withLatestFrom, switchMap, distinctUntilChanged } from 'rxjs/operators';\nimport { combineLatest, merge } from 'rxjs';\nimport { success, isSuccess } from '@devexperts/remote-data-ts';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { filter as filterArray, snoc, head } from 'fp-ts/lib/Array';\nimport { watchlistsController } from '../../api/generated/swagger/controllers/WatchlistsController';\nimport { distinctRDOptionNumber, distinctRDNumber } from '../../utils/setoid.utils';\n\nexport type WatchlistEntityViewModel = {\n\tdata$: LiveData<Error, TableItem>;\n\ttoggleFavorite: (data: TableItem) => void;\n};\n\nexport type WatchlistEntityViewModelContext = {\n\tmarketDataStore: MarketDataStore;\n\tpositionsStore: PositionsStore;\n\tinstrumentStore: InstrumentStore;\n\twatchlistStore: WatchlistStore;\n};\n\nexport type CreateWatchlistEntityViewModel = (symbol: string) => Sink<WatchlistEntityViewModel>;\n\nexport const createWatchlistEntityViewModel = combineContext(\n\tfromReader(watchlistsController),\n\task<WatchlistEntityViewModelContext>(),\n\t(watchlistsController, e): CreateWatchlistEntityViewModel => symbol => {\n\t\tconst { marketDataStore, positionsStore, instrumentStore, watchlistStore } = e;\n\n\t\tconst toggleFavorite = createHandler<TableItem>();\n\t\tconst instrument$ = instrumentStore.getBySymbol(symbol);\n\n\t\tconst positions$ = instrumentStore.getBySymbol(symbol).pipe(\n\t\t\tswitchMapRD(instrument =>\n\t\t\t\tpositionsStore.getAllByInstrumentId(instrument.id).pipe(mapRD(positions => positions.length)),\n\t\t\t),\n\t\t\tstartWith(success<Error, number>(0)),\n\t\t\tdistinctRDNumber,\n\t\t);\n\n\t\tconst symbolData$ = marketDataStore.getDataBySymbol(symbol);\n\n\t\tconst bid$ = symbolData$.pipe(\n\t\t\tmapRD(data =>\n\t\t\t\tpipe(\n\t\t\t\t\tdata.lastQuote,\n\t\t\t\t\tO.chain(quote => quote.bid),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\t\tconst ask$ = symbolData$.pipe(\n\t\t\tmapRD(data =>\n\t\t\t\tpipe(\n\t\t\t\t\tdata.lastQuote,\n\t\t\t\t\tO.chain(quote => quote.ask),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\t\tconst pipsSize$ = instrument$.pipe(\n\t\t\tmapRD(instrument => instrument.pipsSize),\n\t\t\tdistinctRDNumber,\n\t\t);\n\t\tconst precision$ = instrument$.pipe(\n\t\t\tmapRD(instrument => instrument.precision),\n\t\t\tdistinctRDNumber,\n\t\t);\n\n\t\tconst change$ = symbolData$.pipe(\n\t\t\tmapRD(data => data.dayChange),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\t// first private watchlist is favorite list\n\t\tconst favoriteWatchlist$ = watchlistStore.private$.pipe(\n\t\t\tfilter(isSuccess),\n\t\t\tmap(watchListsRD => watchListsRD.value),\n\t\t\tmap(head),\n\t\t\tfilter(O.isSome),\n\t\t\tmap(favWatchList => favWatchList.value),\n\t\t);\n\n\t\tconst symbolsOfFavoriteWatchlist$ = favoriteWatchlist$.pipe(map(watchList => watchList.symbols));\n\n\t\tconst favoriteListId$ = favoriteWatchlist$.pipe(map(watchList => watchList.id));\n\n\t\tconst hasThisSymbolInFavorites$ = symbolsOfFavoriteWatchlist$.pipe(\n\t\t\tmap(symbols => symbols.includes(symbol)),\n\t\t\tstartWith(false),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\n\t\tconst bidAsk$ = combineLatest(bid$, ask$);\n\n\t\tconst data$: LiveData<Error, TableItem> = combineLatest(\n\t\t\tbidAsk$,\n\t\t\tchange$,\n\t\t\tpositions$,\n\t\t\tpipsSize$,\n\t\t\tprecision$,\n\t\t\thasThisSymbolInFavorites$,\n\t\t).pipe(\n\t\t\tmap(([bidAskTuple, change, positions, pipsSize, precision, hasThisSymbolInFavorites]) => {\n\t\t\t\tconst [bid, ask] = bidAskTuple;\n\n\t\t\t\treturn success(\n\t\t\t\t\ttoTableItem(\n\t\t\t\t\t\tsymbol,\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\tbid.toOption(),\n\t\t\t\t\t\t\tO.chain(identity),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\task.toOption(),\n\t\t\t\t\t\t\tO.chain(identity),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\tchange.toOption(),\n\t\t\t\t\t\t\tO.chain(identity),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tpositions.toOption(),\n\t\t\t\t\t\tpipsSize.toOption(),\n\t\t\t\t\t\tprecision.toOption(),\n\t\t\t\t\t\thasThisSymbolInFavorites,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\n\t\tconst toggleFavoriteEffect$ = toggleFavorite.value$.pipe(\n\t\t\twithLatestFrom(symbolsOfFavoriteWatchlist$),\n\t\t\tmap(([tableItem, symbols]) =>\n\t\t\t\ttableItem.isFavorite\n\t\t\t\t\t? filterArray(symbols, watchListSymbol => watchListSymbol !== symbol)\n\t\t\t\t\t: snoc(symbols, symbol),\n\t\t\t),\n\t\t\twithLatestFrom(favoriteListId$),\n\t\t\tswitchMap(([favoriteSymbols, favListId]) =>\n\t\t\t\twatchlistsController.updateWatchlistCondition(favListId, { body: favoriteSymbols }),\n\t\t\t),\n\t\t);\n\n\t\treturn new Sink(\n\t\t\t{\n\t\t\t\tdata$,\n\t\t\t\ttoggleFavorite: toggleFavorite.handle,\n\t\t\t},\n\t\t\tmerge(toggleFavoriteEffect$),\n\t\t);\n\t},\n);\n\nconst toTableItem = (\n\tsymbol: string,\n\tbid: Option<number>,\n\task: Option<number>,\n\tchange: Option<number>,\n\tpositions: Option<number>,\n\tpipsSize: Option<number>,\n\tprecision: Option<number>,\n\tisFavorite: boolean,\n): TableItem => ({\n\tsymbol,\n\tchange,\n\tpositions: positions.filter(positions => positions !== 0),\n\tpipsSize,\n\tprecision,\n\tsell: bid,\n\tbuy: ask,\n\tisFavorite,\n});\n","import { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { WatchlistEntity } from '../../components/watchlist-entity/watchlist-entity.component';\nimport {\n\tcreateWatchlistEntityViewModel,\n\tWatchlistEntityViewModel,\n} from '../../../../view-model/watchlist-entity/watchlist-entity.view-model';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { createSelector } from 'reselect';\n\nexport type WatchlistEntityContainerContext = {\n\twatchlistEntityViewModel: WatchlistEntityViewModel;\n};\n\nconst Container = combineContext(WatchlistEntity, ask<WatchlistEntityContainerContext>(), (WatchlistEntity, e) =>\n\twithRXWithDefaults(WatchlistEntity)(() => {\n\t\tconst { watchlistEntityViewModel } = e;\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tremoteData: watchlistEntityViewModel.data$,\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tremoteData: pending,\n\t\t\t\ttoggleFavorite: watchlistEntityViewModel.toggleFavorite,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const WatchlistEntityContainer = combineContext(\n\tdeferContext(Container, 'watchlistEntityViewModel'),\n\tcreateWatchlistEntityViewModel,\n\t(Container, createWatchlistEntityViewModel) =>\n\t\trunOnMount(Container, props => {\n\t\t\tconst data = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.rowData,\n\t\t\t);\n\t\t\tconst vm = createSelector(\n\t\t\t\tdata,\n\t\t\t\tcreateWatchlistEntityViewModel,\n\t\t\t);\n\t\t\treturn createSelector(\n\t\t\t\tvm,\n\t\t\t\tcreateVM => createVM.map(watchlistEntityViewModel => ({ watchlistEntityViewModel })),\n\t\t\t);\n\t\t}),\n);\n","import { href, Router } from '../../../utils/router.utils';\nimport { Component } from 'react';\nimport { Match } from 'fp-ts-routing';\nimport { asks } from '@devexperts/rx-utils/dist/context.utils';\n\nexport type RedirectContainerContext = {\n\trouter: Router;\n};\n\nexport type RedirectContainerProps<A extends object> = {\n\tto: Match<A>;\n\tvalue: A;\n};\n\nexport const Redirect = asks(\n\t(e: RedirectContainerContext) =>\n\t\tclass Redirect<A extends object> extends Component<RedirectContainerProps<A>> {\n\t\t\tcomponentDidMount() {\n\t\t\t\te.router.replace(href(this.props.to, this.props.value));\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n);\n","import * as React from 'react';\nimport { PureComponent, Fragment } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { head } from 'fp-ts/lib/Array';\nimport * as O from 'fp-ts/lib/Option';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { ListChildComponentProps } from 'react-window';\nimport { AutosizedTable as Table } from '../../../../ui-common/autosized-table-ava/autosized-table.component';\nimport { ConfigItem, TableSize, TableData, WatchlistTableColumnNames } from './watchlist-table.model';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { WatchlistEntityContainer } from '../../containers/watchlist-entity/watchlist-entity.container';\nimport { routes } from '../../../../ui-common/routes';\nimport { Redirect } from '../../../../ui-common/redirect/containers/redirect.container';\nimport { Route } from '../../../../ui-common/route/containers/route.container';\nimport { getColumnsConfig } from './watchlist-table.utils';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type TWatchlistTableProps = {\n\tdata: RemoteData<Error, TableData>;\n\tconfig: ConfigItem[];\n\tcategoryId: string;\n\ttableSize: TableSize;\n};\n\nexport const WatchlistTable = combineContext(\n\tRoute,\n\tRedirect,\n\tWatchlistEntityContainer,\n\t(Route, Redirect, WatchlistEntityContainer) =>\n\t\twithTranslation()(\n\t\t\tclass WatchlistTable extends PureComponent<TWatchlistTableProps & WithTranslation> {\n\t\t\t\tprivate getTranslatedColumnNames = (): WatchlistTableColumnNames => ({\n\t\t\t\t\tsymbol: tspan('watchlistTableSymbol', 'Symbol'),\n\t\t\t\t\tsell: tspan('watchlistTableSell', 'Sell'),\n\t\t\t\t\tbuy: tspan('watchlistTableBuy', 'Buy'),\n\t\t\t\t\tchange: tspan('watchlistTableChange', 'Change, %'),\n\t\t\t\t});\n\n\t\t\t\trender() {\n\t\t\t\t\tconst { data } = this.props;\n\n\t\t\t\t\treturn <RemoteDataState data={data} success={this.renderSuccess} />;\n\t\t\t\t}\n\n\t\t\t\tprivate renderSuccess = (data: TableData): JSX.Element => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<Route match={routes.trade.category.symbol.root} render={this.renderTable(data)} />\n\t\t\t\t\t\t\t<Route exact match={routes.trade.category.root} render={this.redirectToInstrument(data)} />\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tprivate getItemKey = (rowIndex: number, data: string[]) => data[rowIndex];\n\n\t\t\t\tprivate renderTable = ({ symbols, positionId }: TableData) => () => {\n\t\t\t\t\tconst { config } = this.props;\n\n\t\t\t\t\tconst columnNames = this.getTranslatedColumnNames();\n\n\t\t\t\t\t// TODO: Use constant for itemSize\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\titemCount={symbols.length}\n\t\t\t\t\t\t\titemSize={60}\n\t\t\t\t\t\t\titemData={symbols}\n\t\t\t\t\t\t\titemKey={this.getItemKey}\n\t\t\t\t\t\t\tscrollToItem={O.toUndefined(positionId)}\n\t\t\t\t\t\t\tcolumns={getColumnsConfig(config, columnNames)}>\n\t\t\t\t\t\t\t{this.renderRow}\n\t\t\t\t\t\t</Table>\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tprivate renderRow = (props: ListChildComponentProps) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<WatchlistEntityContainer\n\t\t\t\t\t\t\tconfig={this.props.config}\n\t\t\t\t\t\t\tcategoryId={this.props.categoryId}\n\t\t\t\t\t\t\ttableSize={this.props.tableSize}\n\t\t\t\t\t\t\trowData={props.data[props.index]}\n\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tprivate redirectToInstrument = (data: TableData) => () => {\n\t\t\t\t\tconst { categoryId } = this.props;\n\t\t\t\t\tconst firstSymbol = head(data.symbols);\n\t\t\t\t\treturn pipe(\n\t\t\t\t\t\tfirstSymbol,\n\t\t\t\t\t\tO.fold(\n\t\t\t\t\t\t\t() => this.renderTable(data),\n\t\t\t\t\t\t\tsymbol => () => (\n\t\t\t\t\t\t\t\t<Redirect to={routes.trade.category.symbol.root} value={{ categoryId, symbol }} />\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t)();\n\t\t\t\t};\n\t\t\t},\n\t\t),\n);\n","import { createWatchlistViewModel, WatchlistViewModel } from '../../../../view-model/watchlist/watchlist.view-model';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { WatchlistTable } from '../../components/watchlist-table/watchlist-table.component';\nimport { WatchlistLargeTableConfig } from '../../components/watchlist-table/watchlist-table.utils';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { Router } from '../../../../utils/router.utils';\nimport { TableSize } from '../../components/watchlist-table/watchlist-table.model';\nimport { createSelector } from 'reselect';\n\nexport type WatchlistContainerContext = {\n\twatchlistViewModel: WatchlistViewModel;\n\trouter: Router;\n};\n\nconst Container = combineContext(WatchlistTable, ask<WatchlistContainerContext>(), (WatchlistTable, e) =>\n\twithRXWithDefaults(WatchlistTable)(() => {\n\t\tconst { watchlistViewModel } = e;\n\t\tconst { data$, tableSize$, tableSizeConfig$ } = watchlistViewModel;\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tdata: data$,\n\t\t\t\ttableSize: tableSize$,\n\t\t\t\tconfig: tableSizeConfig$,\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tdata: pending,\n\t\t\t\tconfig: WatchlistLargeTableConfig,\n\t\t\t\ttableSize: TableSize.Large,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const WatchlistContainer = combineContext(\n\tdeferContext(Container, 'watchlistViewModel'),\n\tcreateWatchlistViewModel,\n\t(Container, createWatchlistViewModel) =>\n\t\trunOnMount(Container, props => {\n\t\t\tconst categoryId = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.categoryId,\n\t\t\t);\n\t\t\treturn createSelector(\n\t\t\t\tcategoryId,\n\t\t\t\tcategoryId =>\n\t\t\t\t\tcreateWatchlistViewModel(categoryId).map(watchlistViewModel => ({\n\t\t\t\t\t\twatchlistViewModel,\n\t\t\t\t\t})),\n\t\t\t);\n\t\t}),\n);\n","import { Observable, Operator, OperatorFunction, Subscriber } from 'rxjs';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\n\nclass FilterMapSubscriber<T, R> extends Subscriber<T> {\n\tcount: number = 0;\n\n\tconstructor(\n\t\tdestination: Subscriber<R>,\n\t\tprivate filterMap: (value: T, index: number) => Option<R>,\n\t\tprivate thisArg: any,\n\t) {\n\t\tsuper(destination);\n\t}\n\n\tprotected _next = (value: T) => {\n\t\tlet result: Option<R> | undefined = undefined;\n\t\ttry {\n\t\t\tresult = this.filterMap.call(this.thisArg, value, this.count++);\n\t\t} catch (e) {\n\t\t\tthis.destination.error && this.destination.error(e);\n\t\t\treturn;\n\t\t}\n\n\t\tif (result && O.isSome(result)) {\n\t\t\tthis.destination.next && this.destination.next(result.value);\n\t\t}\n\t};\n}\n\nclass FilterMapOperator<T, R> implements Operator<T, R> {\n\tconstructor(private filterMap: (value: T, index: number) => Option<R>, private thisArg: any) {}\n\n\tcall(subscriber: Subscriber<R>, source: any): any {\n\t\treturn source.subscribe(new FilterMapSubscriber(subscriber, this.filterMap, this.thisArg));\n\t}\n}\n\nexport function filterMap<T, R>(\n\tfilterMap: (value: T, index: number) => Option<R>,\n\tthisArg?: any,\n): OperatorFunction<T, R> {\n\treturn function mapOperation(source: Observable<T>): Observable<R> {\n\t\treturn source.lift(new FilterMapOperator(filterMap, thisArg));\n\t};\n}\n","import { Either } from 'fp-ts/lib/Either';\nimport { Option } from 'fp-ts/lib/Option';\nimport { OrderEntrySide } from '../order-entry/order-entry.model';\nimport { OrderTO } from '../../api/generated/swagger/definitions/OrderTO';\n\nexport type OrderType = OrderTO['type'];\n\nexport enum ProfitLossKind {\n\tProfit = '* PROFIT *',\n\tLoss = '* LOSS *',\n}\n\nexport enum ProvidedLabelType {\n\tMin = '* MIN *',\n\tMax = '* MAX *',\n}\n\nexport enum PriceValidationErrorMessages {\n\tMoreOrEqual = '* MORE_OR_EQUAL *',\n\tLessOrEqual = '* LESS_OR_EQUAL *',\n}\n\nexport type PriceValidationError = {\n\tmessage: PriceValidationErrorMessages;\n\tvalue: string;\n};\n\nexport type TakeProfitStopLossData = {\n\tkind: ProfitLossKind;\n\tisSelected: boolean;\n\tisDisabled: boolean;\n\trawPrice: number;\n\tvalidatedPrice: Either<PriceValidationError, number>;\n\tminLimit: number;\n\tmaxLimit: number;\n\tstep: number;\n\tvalue: number;\n\tpossiblePL: number;\n\tprovidedLabel: ProvidedLabelType;\n\tprovidedLimit: number;\n\tisValueManuallyChanged: boolean;\n\tinstrumentPrecision: number;\n};\n\nexport type OrderEntryTakeProfitStopLossData = {\n\ttakeProfitData: TakeProfitStopLossData;\n\tstopLossData: TakeProfitStopLossData;\n};\n\nexport enum OrderKind {\n\tOrder = '* ORDER *',\n\tPosition = '* POSITION *',\n}\n\nexport type TakeProfitStopLossOptions = {\n\tcurrentTakeProfitData: TakeProfitStopLossData;\n\tcurrentStopLossData: TakeProfitStopLossData;\n\tprevTakeProfitFixedPrice: Option<number>;\n\tprevStopLossFixedPrice: Option<number>;\n\tparentOrderPrice: number;\n\tbid: number;\n\task: number;\n\torderType: OrderType;\n\tamount: number;\n\tside: OrderEntrySide;\n\tpriceIncrement: number;\n\tprecision: number;\n\trate: number;\n\tdistance: number;\n\torderKind: OrderKind;\n\tcostBasis?: number;\n};\n","import { TDateInputValue } from '@devexperts/react-kit/dist/components/DateInput/DateInput.model';\nimport { Either } from 'fp-ts/lib/Either';\nimport { Option } from 'fp-ts/lib/Option';\n\nexport enum OrderEntrySide {\n\tBuy = '* BUY *',\n\tSell = '* SELL *',\n}\n\nexport type OrderEntryExecutionStatusFlags = {\n\texecutePriceOpened: boolean;\n\texpireAtActive: boolean;\n};\n\nexport type OrderEntryExecutionPrice = {\n\tpriceValue: Option<number>;\n\texecutionPriceValidated: Either<ExecutionPriceValidationError, number>;\n};\n\nexport type OrderEntryExecutionDate = {\n\texpireAt: TDateInputValue;\n\tdisabledDaysMin: Date;\n};\n\nexport enum AmountValidationErrorMessages {\n\tMax = '* MAX *',\n\tMin = '* MIN *',\n\tMultiple = '* MULTIPLE *',\n}\n\nexport type AmountValidationError = {\n\tmessage: AmountValidationErrorMessages;\n\tmaxOrderSize: number;\n\tminOrderSize: number;\n\tminOrderIncrement: number;\n};\n\nexport enum ExecutionPriceValidationErrorMessages {\n\tGeneral = '* GENERAL *',\n\tNotInRange = '* NOT_IN_RANGE *',\n\tOverRange = '* HI_RANGE *',\n\tBelowRange = '* BELOW_RANGE *',\n\tWrongStepping = '* WRONG_STEPPING *',\n}\n\nexport type ExecutionPriceValidationError = {\n\tmessage: ExecutionPriceValidationErrorMessages;\n\thiRange: string;\n\tloRange: string;\n\tstep: string;\n};\n","import { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { ProtectionOrderTO } from '../../api/generated/swagger/definitions/ProtectionOrderTO';\nimport {\n\tOrderEntryTakeProfitStopLossData,\n\tProfitLossKind,\n\tProvidedLabelType,\n\tTakeProfitStopLossData,\n\tTakeProfitStopLossOptions,\n\tOrderKind,\n\tPriceValidationError,\n\tPriceValidationErrorMessages,\n} from './takeprofit-stoploss.model';\nimport { OrderEntrySide } from '../order-entry/order-entry.model';\nimport { MarketDataEntity } from '../../store/market-data/market-data.store';\nimport { formatNumber } from 'accounting';\nimport { left, right, Either } from 'fp-ts/lib/Either';\nimport { OrderTO } from '../../api/generated/swagger/definitions/OrderTO';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\n\nconst preseededTPSLData = {\n\tisSelected: false,\n\tisDisabled: false,\n\trawPrice: 0,\n\tvalidatedPrice: right<PriceValidationError, number>(0),\n\tminLimit: -Infinity,\n\tmaxLimit: Infinity,\n\tstep: 0,\n\tvalue: 0,\n\tpossiblePL: 0,\n\tisValueManuallyChanged: false,\n\tprovidedLabel: ProvidedLabelType.Max,\n\tprovidedLimit: Infinity,\n\tinstrumentPrecision: 5,\n};\n\nexport const getDefaultTakeProfitStopLossData = (data: {\n\thasTP: Option<number>;\n\thasSL: Option<number>;\n}): OrderEntryTakeProfitStopLossData => ({\n\ttakeProfitData: {\n\t\t...preseededTPSLData,\n\t\tkind: ProfitLossKind.Profit,\n\t\tisSelected: O.isSome(data.hasTP),\n\t},\n\tstopLossData: {\n\t\t...preseededTPSLData,\n\t\tkind: ProfitLossKind.Loss,\n\t\tisSelected: O.isSome(data.hasSL),\n\t},\n});\n\nexport const calcTakeProfitStopLossPrice = (symbolPrice: number, enteredPrice: number): number => {\n\tif (symbolPrice === 0) {\n\t\treturn 0;\n\t}\n\n\treturn (enteredPrice / symbolPrice - 1) * 100;\n};\n\nexport const calcPossiblePL = (symbolPrice: number, enteredPrice: number, amount: number, rate: number): number => {\n\treturn Math.abs(enteredPrice - symbolPrice) * amount * rate;\n};\n\nexport const roundPriceWithPrecision = (price: number, precision: number): number => Number(price.toFixed(precision));\n\nconst getOrderType = (plKind: ProfitLossKind): string => {\n\tswitch (plKind) {\n\t\tcase ProfitLossKind.Profit:\n\t\t\treturn 'LIMIT';\n\t\tcase ProfitLossKind.Loss:\n\t\t\treturn 'STOP';\n\t}\n};\n\nexport const mapTakeProfitStopLossPayload = (\n\tdata: TakeProfitStopLossData,\n\tprecision: number,\n): Option<ProtectionOrderTO> => {\n\tif (!data.isSelected) {\n\t\treturn O.none;\n\t}\n\n\tconst priceRounded = roundPriceWithPrecision(data.value, precision);\n\n\tconst preliminaryValue = {\n\t\tfixedPrice: O.some(priceRounded),\n\t\tfixedOffset: O.none,\n\t\tpriceFixed: true,\n\t\trefOrderChainId: O.none,\n\t\trequestId: O.none,\n\t};\n\n\tconst orderType = getOrderType(data.kind);\n\n\treturn O.some({\n\t\t...preliminaryValue,\n\t\torderType,\n\t});\n};\n\nconst calcDefaultTakeProfitValue = (\n\tside: OrderEntrySide,\n\tprice: number,\n\tdistance: number,\n\tbid: number,\n\task: number,\n\torderType: OrderTO['type'],\n): number => {\n\tconst multiplier = 4 * distance;\n\n\tswitch (side) {\n\t\tcase OrderEntrySide.Buy:\n\t\t\tif (orderType === 'MARKET') {\n\t\t\t\treturn ask + multiplier;\n\t\t\t}\n\t\t\treturn price + multiplier;\n\n\t\tcase OrderEntrySide.Sell:\n\t\t\tif (orderType === 'MARKET') {\n\t\t\t\treturn bid - multiplier;\n\t\t\t}\n\t\t\treturn price - multiplier;\n\t}\n};\n\nconst calcDefaultStopLossValue = (\n\tside: OrderEntrySide,\n\tprice: number,\n\tdistance: number,\n\tbid: number,\n\task: number,\n\torderType: OrderTO['type'],\n): number => {\n\tconst multiplier = 4 * distance;\n\n\tswitch (side) {\n\t\tcase OrderEntrySide.Buy:\n\t\t\tif (orderType === 'MARKET') {\n\t\t\t\treturn bid - multiplier;\n\t\t\t}\n\t\t\treturn price - multiplier;\n\n\t\tcase OrderEntrySide.Sell:\n\t\t\tif (orderType === 'MARKET') {\n\t\t\t\treturn ask + multiplier;\n\t\t\t}\n\t\t\treturn price + multiplier;\n\t}\n};\n\nexport const getDefaultValueForTakeProfitStopLoss = (\n\tside: OrderEntrySide,\n\tPLKind: ProfitLossKind,\n\tprice: number,\n\tdistance: number,\n\tbid: number,\n\task: number,\n\torderType: OrderTO['type'],\n\tstep: number,\n): number => {\n\tswitch (PLKind) {\n\t\tcase ProfitLossKind.Profit: {\n\t\t\tconst calculated = calcDefaultTakeProfitValue(side, price, distance, bid, ask, orderType);\n\t\t\treturn calculated < step ? step : calculated;\n\t\t}\n\n\t\tcase ProfitLossKind.Loss: {\n\t\t\tconst calculated = calcDefaultStopLossValue(side, price, distance, bid, ask, orderType);\n\t\t\treturn calculated < step ? step : calculated;\n\t\t}\n\t}\n};\n\nconst calcTakeProfitMinMaxValues = (\n\tside: OrderEntrySide,\n\tprice: number,\n\tbid: number,\n\task: number,\n\tdistance: number,\n\torderType: OrderTO['type'],\n): [ProvidedLabelType, number] => {\n\tswitch (side) {\n\t\tcase OrderEntrySide.Buy:\n\t\t\tif (orderType === 'MARKET') {\n\t\t\t\treturn [ProvidedLabelType.Min, ask + distance];\n\t\t\t}\n\n\t\t\treturn [ProvidedLabelType.Min, price + distance];\n\n\t\tcase OrderEntrySide.Sell:\n\t\t\tif (orderType === 'MARKET') {\n\t\t\t\treturn [ProvidedLabelType.Max, bid - distance];\n\t\t\t}\n\n\t\t\treturn [ProvidedLabelType.Max, price - distance];\n\t}\n};\n\nconst calcStopLossMinMaxValues = (\n\tside: OrderEntrySide,\n\tprice: number,\n\tbid: number,\n\task: number,\n\tdistance: number,\n\torderType: OrderTO['type'],\n): [ProvidedLabelType, number] => {\n\tswitch (side) {\n\t\tcase OrderEntrySide.Buy: {\n\t\t\tif (orderType === 'MARKET') {\n\t\t\t\treturn [ProvidedLabelType.Max, bid - distance];\n\t\t\t}\n\n\t\t\treturn [ProvidedLabelType.Max, price - distance];\n\t\t}\n\n\t\tcase OrderEntrySide.Sell: {\n\t\t\tif (orderType === 'MARKET') {\n\t\t\t\treturn [ProvidedLabelType.Min, ask + distance];\n\t\t\t}\n\n\t\t\treturn [ProvidedLabelType.Min, price + distance];\n\t\t}\n\t}\n};\n\nexport const getLabelAndMinMaxValuesForTakeProfitStopLoss = (\n\tside: OrderEntrySide,\n\tPLKind: ProfitLossKind,\n\tprice: number,\n\tbid: number,\n\task: number,\n\tdistance: number,\n\torderType: OrderTO['type'],\n): [ProvidedLabelType, number] => {\n\tswitch (PLKind) {\n\t\tcase ProfitLossKind.Profit:\n\t\t\treturn calcTakeProfitMinMaxValues(side, price, bid, ask, distance, orderType);\n\n\t\tcase ProfitLossKind.Loss:\n\t\t\treturn calcStopLossMinMaxValues(side, price, bid, ask, distance, orderType);\n\t}\n};\n\nexport const getCurrentPrice = (isQuantityPositive: boolean) => (marketData: MarketDataEntity): Option<number> => {\n\treturn isQuantityPositive\n\t\t? pipe(\n\t\t\t\tmarketData.lastQuote,\n\t\t\t\tO.chain(quote => quote.ask),\n\t\t  )\n\t\t: pipe(\n\t\t\t\tmarketData.lastQuote,\n\t\t\t\tO.chain(quote => quote.bid),\n\t\t  );\n};\n\nexport const getUpdatedProtectionOrderOption = (\n\tprotection: Option<ProtectionOrderTO>,\n\ttakeProfitStopLossData: TakeProfitStopLossData,\n\tprecision: number,\n): Option<ProtectionOrderTO> => {\n\tif (takeProfitStopLossData.isSelected) {\n\t\tconst fixedPrice = O.some(roundPriceWithPrecision(takeProfitStopLossData.value, precision));\n\t\tconst orderType = getOrderType(takeProfitStopLossData.kind);\n\n\t\tconst defaultProtection = O.some({\n\t\t\torderType,\n\t\t\tfixedPrice,\n\t\t\tfixedOffset: O.none,\n\t\t\tpriceFixed: true,\n\t\t\trefOrderChainId: O.none,\n\t\t\trequestId: O.none,\n\t\t});\n\n\t\treturn pipe(\n\t\t\tprotection,\n\t\t\tO.fold(constant(defaultProtection), possibleProtection =>\n\t\t\t\tO.some({\n\t\t\t\t\t...possibleProtection,\n\t\t\t\t\tfixedPrice,\n\t\t\t\t}),\n\t\t\t),\n\t\t);\n\t}\n\n\treturn O.none;\n};\n\nexport const getMinMaxLimit = (\n\tprovidedLabel: ProvidedLabelType,\n\tprovidedLimit: number,\n\tstep: number,\n): [number, number] => {\n\tswitch (providedLabel) {\n\t\tcase ProvidedLabelType.Min:\n\t\t\treturn [providedLimit, Infinity];\n\t\tcase ProvidedLabelType.Max:\n\t\t\treturn [step, providedLimit];\n\t}\n};\n\nconst getValidatedPrice = (\n\tvalue: number,\n\tminLimit: number,\n\tmaxLimit: number,\n\tinstrumentPrecision: number,\n\tisEnabled: boolean = true,\n): Either<PriceValidationError, number> => {\n\t// pass validation if no protection is selected, for example\n\tif (!isEnabled) {\n\t\treturn right(value);\n\t}\n\n\tif (value < minLimit) {\n\t\treturn left({\n\t\t\tmessage: PriceValidationErrorMessages.MoreOrEqual,\n\t\t\tvalue: formatNumber(minLimit, instrumentPrecision),\n\t\t});\n\t}\n\tif (value > maxLimit) {\n\t\treturn left({\n\t\t\tmessage: PriceValidationErrorMessages.LessOrEqual,\n\t\t\tvalue: formatNumber(maxLimit, instrumentPrecision),\n\t\t});\n\t}\n\treturn right(value);\n};\n\nconst getRefPriceForPossiblePL = (\n\torderKind: OrderKind,\n\t{ costBasis, parentPrice }: { costBasis: number; parentPrice: number },\n): number => {\n\tswitch (orderKind) {\n\t\tcase OrderKind.Order:\n\t\t\treturn parentPrice;\n\t\tcase OrderKind.Position:\n\t\t\treturn costBasis;\n\t}\n};\n\nexport const getTakeProfitStopLossValue = ({\n\tcurrentTakeProfitData: takeProfitData,\n\tcurrentStopLossData: stopLossData,\n\tprevTakeProfitFixedPrice: prevTakeProfitValue,\n\tprevStopLossFixedPrice: prevStopLossValue,\n\tparentOrderPrice: parentPrice,\n\tbid,\n\task,\n\torderType,\n\tside,\n\tpriceIncrement: step,\n\tprecision: instrumentPrecision,\n\trate,\n\tdistance,\n\tamount,\n\torderKind,\n\tcostBasis,\n}: TakeProfitStopLossOptions): OrderEntryTakeProfitStopLossData => {\n\t// recalc preentered value\n\tconst preenteredTPValue = pipe(\n\t\tprevTakeProfitValue,\n\t\tO.getOrElse(() =>\n\t\t\tgetDefaultValueForTakeProfitStopLoss(\n\t\t\t\tside,\n\t\t\t\ttakeProfitData.kind,\n\t\t\t\tparentPrice,\n\t\t\t\tdistance,\n\t\t\t\tbid,\n\t\t\t\task,\n\t\t\t\torderType,\n\t\t\t\tstep,\n\t\t\t),\n\t\t),\n\t);\n\n\tconst preenteredSLValue = pipe(\n\t\tprevStopLossValue,\n\t\tO.getOrElse(() =>\n\t\t\tgetDefaultValueForTakeProfitStopLoss(\n\t\t\t\tside,\n\t\t\t\tstopLossData.kind,\n\t\t\t\tparentPrice,\n\t\t\t\tdistance,\n\t\t\t\tbid,\n\t\t\t\task,\n\t\t\t\torderType,\n\t\t\t\tstep,\n\t\t\t),\n\t\t),\n\t);\n\n\tconst propTPValue = takeProfitData.isValueManuallyChanged ? takeProfitData.value : preenteredTPValue;\n\tconst propSLValue = stopLossData.isValueManuallyChanged ? stopLossData.value : preenteredSLValue;\n\n\tconst recalculatedPriceTP = calcTakeProfitStopLossPrice(parentPrice, propTPValue);\n\tconst recalculatedPriceSL = calcTakeProfitStopLossPrice(parentPrice, propSLValue);\n\n\t// recalc possible p/l\n\tconst refPrice = getRefPriceForPossiblePL(orderKind, { costBasis: costBasis!, parentPrice });\n\n\tconst possibleProfit = calcPossiblePL(refPrice, propTPValue, Number(amount), rate);\n\tconst possibleLoss = calcPossiblePL(refPrice, propSLValue, Number(amount), rate);\n\n\t// recalc min/max values\n\tconst [labelTakeProfit, minMaxTPValue] = getLabelAndMinMaxValuesForTakeProfitStopLoss(\n\t\tside,\n\t\ttakeProfitData.kind,\n\t\tparentPrice,\n\t\tbid,\n\t\task,\n\t\tdistance,\n\t\torderType,\n\t);\n\n\tconst [labelStopLoss, minMaxSLValue] = getLabelAndMinMaxValuesForTakeProfitStopLoss(\n\t\tside,\n\t\tstopLossData.kind,\n\t\tparentPrice,\n\t\tbid,\n\t\task,\n\t\tdistance,\n\t\torderType,\n\t);\n\n\t// round final value\n\tconst tpPriceRounded = roundPriceWithPrecision(propTPValue, instrumentPrecision);\n\tconst slPriceRounded = roundPriceWithPrecision(propSLValue, instrumentPrecision);\n\n\tconst [minLimitTP, maxLimitTP] = getMinMaxLimit(labelTakeProfit, minMaxTPValue, step);\n\tconst [minLimitSL, maxLimitSL] = getMinMaxLimit(labelStopLoss, minMaxSLValue, step);\n\n\tconst validatedPriceTP = getValidatedPrice(\n\t\ttpPriceRounded,\n\t\tminLimitTP,\n\t\tmaxLimitTP,\n\t\tinstrumentPrecision,\n\t\ttakeProfitData.isSelected,\n\t);\n\tconst validatedPriceSL = getValidatedPrice(\n\t\tslPriceRounded,\n\t\tminLimitSL,\n\t\tmaxLimitSL,\n\t\tinstrumentPrecision,\n\t\tstopLossData.isSelected,\n\t);\n\n\treturn {\n\t\ttakeProfitData: {\n\t\t\t...takeProfitData,\n\t\t\tstep,\n\t\t\tinstrumentPrecision,\n\t\t\tvalue: tpPriceRounded,\n\t\t\trawPrice: recalculatedPriceTP,\n\t\t\tpossiblePL: possibleProfit,\n\t\t\tprovidedLabel: labelTakeProfit,\n\t\t\tprovidedLimit: minMaxTPValue,\n\t\t\tminLimit: minLimitTP,\n\t\t\tmaxLimit: maxLimitTP,\n\t\t\tvalidatedPrice: validatedPriceTP,\n\t\t},\n\t\tstopLossData: {\n\t\t\t...stopLossData,\n\t\t\tstep,\n\t\t\tinstrumentPrecision,\n\t\t\tvalue: slPriceRounded,\n\t\t\trawPrice: recalculatedPriceSL,\n\t\t\tpossiblePL: possibleLoss,\n\t\t\tprovidedLabel: labelStopLoss,\n\t\t\tprovidedLimit: minMaxSLValue,\n\t\t\tminLimit: minLimitSL,\n\t\t\tmaxLimit: maxLimitSL,\n\t\t\tvalidatedPrice: validatedPriceSL,\n\t\t},\n\t};\n};\n","import { LimitsDomainTO } from '../../api/generated/swagger/definitions/LimitsDomainTO';\n\nexport function countDistance(\n\tlimitStopDistanceType: LimitsDomainTO['limitStopDistanceType'],\n\tlimitStopDistance: number,\n\tlimitStopDistanceInPercentOfSpread: number,\n\tspread: number,\n\tpipsSize: number,\n): number {\n\tswitch (limitStopDistanceType) {\n\t\tcase 'PIPS': {\n\t\t\treturn limitStopDistance * pipsSize;\n\t\t}\n\t\tcase 'PERCENT_OF_SPREAD': {\n\t\t\treturn (spread * limitStopDistanceInPercentOfSpread) / 100 / pipsSize;\n\t\t}\n\t}\n}\n","import { TDateInputValue } from '@devexperts/react-kit/dist/components/DateInput/DateInput.model';\nimport { RemoteData, getSetoid as getSetoidRD } from '@devexperts/remote-data-ts';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { Either } from 'fp-ts/lib/Either';\nimport * as E from 'fp-ts/lib/Either';\nimport { Eq, getStructEq, eqString, eqNumber, eqBoolean, eqDate, strictEqual } from 'fp-ts/lib/Eq';\nimport { getDate, getMonth, getYear, endOfDay } from 'date-fns';\nimport { formatNumber } from 'accounting';\nimport { Big } from 'big.js';\nimport { OrderEntryValues, OrderEntryData } from './order-entry.view-model';\nimport { sequenceTOption, OptionType } from '../../utils/option.utils';\nimport { setoidStrict, setoidOptionNumber } from '../../utils/setoid.utils';\nimport {\n\tOrderEntrySide,\n\tOrderEntryExecutionDate,\n\tOrderEntryExecutionStatusFlags,\n\tOrderEntryExecutionPrice,\n\tAmountValidationError,\n\tAmountValidationErrorMessages,\n\tExecutionPriceValidationErrorMessages,\n\tExecutionPriceValidationError,\n} from '../../model/order-entry/order-entry.model';\nimport { OrderTO } from '../../api/generated/swagger/definitions/OrderTO';\nimport { OrderTemplateTO } from '../../api/generated/swagger/definitions/OrderTemplateTO';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\n\nexport const getExpireAt = (): TDateInputValue => {\n\tconst today = new Date();\n\treturn {\n\t\tday: O.some(getDate(today)),\n\t\tmonth: O.some(getMonth(today)),\n\t\tyear: O.some(getYear(today)),\n\t};\n};\n\nexport const validateExecutionPrice = (\n\texecutionPrice: Option<number>,\n\tbidOrAskPrice: number,\n\tallowedDistance: number,\n\tprecision: number,\n\tpriceIncrement: number,\n): Either<ExecutionPriceValidationError, number> => {\n\tconst commonErrorFields = {\n\t\thiRange: formatNumber(bidOrAskPrice + allowedDistance, precision),\n\t\tloRange: formatNumber(bidOrAskPrice - allowedDistance, precision),\n\t\tstep: String(priceIncrement),\n\t};\n\n\tif (O.isNone(executionPrice)) {\n\t\treturn E.left({ ...commonErrorFields, message: ExecutionPriceValidationErrorMessages.General });\n\t}\n\n\tconst price = executionPrice.value;\n\tif (price > bidOrAskPrice - allowedDistance && price < bidOrAskPrice + allowedDistance) {\n\t\treturn E.left({ ...commonErrorFields, message: ExecutionPriceValidationErrorMessages.NotInRange });\n\t}\n\tif (isMultiple(price, priceIncrement)) {\n\t\treturn E.left({ ...commonErrorFields, message: ExecutionPriceValidationErrorMessages.WrongStepping });\n\t}\n\n\treturn E.right(price);\n};\n\nexport const validateOrderEditPrice = (\n\texecutionPrice: Option<number>,\n\torderType: Option<OrderTO['type']>,\n\tside: OrderEntrySide,\n\tbidOrAskPrice: number,\n\tallowedDistance: number,\n\tprecision: number,\n): Either<ExecutionPriceValidationError, number> => {\n\tconst priceAndType = pipe(\n\t\tsequenceTOption(executionPrice, orderType),\n\t\tO.map(([price, type]) => ({\n\t\t\tprice,\n\t\t\ttype,\n\t\t})),\n\t);\n\n\tconst commonErrorFields = {\n\t\thiRange: formatNumber(bidOrAskPrice + allowedDistance, precision),\n\t\tloRange: formatNumber(bidOrAskPrice - allowedDistance, precision),\n\t\tstep: '',\n\t};\n\n\tif (O.isNone(priceAndType)) {\n\t\treturn E.left({ ...commonErrorFields, message: ExecutionPriceValidationErrorMessages.General });\n\t}\n\n\tconst { price, type } = priceAndType.value;\n\n\tif (side === OrderEntrySide.Sell) {\n\t\tif (type === 'LIMIT' && price < bidOrAskPrice + allowedDistance) {\n\t\t\treturn E.left({ ...commonErrorFields, message: ExecutionPriceValidationErrorMessages.OverRange });\n\t\t}\n\n\t\tif (type === 'STOP' && price > bidOrAskPrice - allowedDistance) {\n\t\t\treturn E.left({ ...commonErrorFields, message: ExecutionPriceValidationErrorMessages.BelowRange });\n\t\t}\n\t}\n\n\tif (side === OrderEntrySide.Buy) {\n\t\tif (type === 'LIMIT' && price > bidOrAskPrice - allowedDistance) {\n\t\t\treturn E.left({ ...commonErrorFields, message: ExecutionPriceValidationErrorMessages.BelowRange });\n\t\t}\n\n\t\tif (type === 'STOP' && price < bidOrAskPrice + allowedDistance) {\n\t\t\treturn E.left({ ...commonErrorFields, message: ExecutionPriceValidationErrorMessages.OverRange });\n\t\t}\n\t}\n\n\treturn E.right(price);\n};\n\nconst isMultiple = (dividend: number, divisor: number): boolean =>\n\t!Big(dividend)\n\t\t.mod(divisor)\n\t\t.eq(0);\n\nexport const validateAmount = (\n\tinputValue: string,\n\tminOrderSize: number,\n\tmaxOrderSize: number,\n\tminOrderIncrement: number,\n): Either<AmountValidationError, string> => {\n\tconst value = Number(inputValue);\n\n\tconst commonFailureFields = {\n\t\tmaxOrderSize,\n\t\tminOrderSize,\n\t\tminOrderIncrement,\n\t};\n\n\tif (value > maxOrderSize) {\n\t\treturn E.left({\n\t\t\t...commonFailureFields,\n\t\t\tmessage: AmountValidationErrorMessages.Max,\n\t\t});\n\t}\n\n\tif (value < minOrderSize) {\n\t\treturn E.left({ ...commonFailureFields, message: AmountValidationErrorMessages.Min });\n\t}\n\n\tif (isMultiple(value, minOrderIncrement)) {\n\t\treturn E.left({ ...commonFailureFields, message: AmountValidationErrorMessages.Multiple });\n\t}\n\n\treturn E.right(inputValue);\n};\n\nexport const convertDateInputValueToDate = ({ year, month, day }: TDateInputValue): Option<Date> =>\n\tpipe(\n\t\tsequenceTOption(year, month, day),\n\t\tO.map(([year, month, day]) => new Date(year, month, day)),\n\t);\n\nexport const setoidOEValues: Eq<OrderEntryValues> = getStructEq({\n\tvalue: eqString,\n\texecFormValue: O.getEq(eqNumber),\n\tisExecEnabled: eqBoolean,\n\tisExpireChecked: eqBoolean,\n\texpireAtDate: O.getEq(eqDate),\n\tisTPEnabled: eqBoolean,\n\ttakeProfitValue: eqNumber,\n\tisSLEnabled: eqBoolean,\n\tstopLossValue: eqNumber,\n});\n\nexport const setoidBooleanRD: Eq<RemoteData<Error, boolean>> = getSetoidRD(setoidStrict, eqBoolean);\n\nconst executionPriceValidationSetoid = getStructEq<ExecutionPriceValidationError>({\n\tmessage: setoidStrict,\n\thiRange: eqString,\n\tloRange: eqString,\n\tstep: eqString,\n});\n\nexport const setoidOrderEntryExecutionPrice = getStructEq<OrderEntryExecutionPrice>({\n\tpriceValue: setoidOptionNumber,\n\texecutionPriceValidated: E.getEq<ExecutionPriceValidationError, number>(executionPriceValidationSetoid, eqNumber),\n});\n\nexport const setoidOrderType = O.getEq<OrderTO['type']>({ equals: strictEqual });\n\nexport const toOrderTOSide = (operation: OrderEntrySide): OptionType<OrderTemplateTO['orderSide']> => {\n\tswitch (operation) {\n\t\tcase OrderEntrySide.Buy: {\n\t\t\treturn 'BUY';\n\t\t}\n\t\tcase OrderEntrySide.Sell: {\n\t\t\treturn 'SELL';\n\t\t}\n\t}\n};\n\nexport const toOrderEntryData = (\n\tbid: Option<number>,\n\task: Option<number>,\n\tpipsSize: number,\n\tprecision: number,\n\tdescription: Option<string>,\n\tstep: number,\n\tmarginImpact: Either<Error, number>,\n): OrderEntryData => ({\n\tbid,\n\task,\n\tpipsSize,\n\tprecision,\n\tdescription,\n\tstep,\n\tmarginImpact,\n});\n\nexport const toExpireAt = (\n\tvalues: OrderEntryExecutionDate,\n\tcheckboxValues: OrderEntryExecutionStatusFlags,\n): Option<Date> => {\n\tconst { expireAt } = values;\n\tconst date = new Date(\n\t\tpipe(\n\t\t\texpireAt.year,\n\t\t\tO.getOrElse(constant(0)),\n\t\t),\n\t\tpipe(\n\t\t\texpireAt.month,\n\t\t\tO.getOrElse(constant(0)),\n\t\t),\n\t\tpipe(\n\t\t\texpireAt.day,\n\t\t\tO.getOrElse(constant(0)),\n\t\t),\n\t);\n\treturn checkboxValues.expireAtActive ? O.some(endOfDay(date)) : O.none;\n};\n\nexport const getAmount = (side: OrderEntrySide, bid: number, ask: number): number => {\n\tswitch (side) {\n\t\tcase OrderEntrySide.Buy: {\n\t\t\treturn ask;\n\t\t}\n\t\tcase OrderEntrySide.Sell: {\n\t\t\treturn bid;\n\t\t}\n\t}\n};\n\nexport function getOrderType(\n\texecutionPrice: Option<number>,\n\tcurrentPrice: Option<number>,\n\tdistance: number,\n\tside: OrderEntrySide,\n): OrderTemplateTO['orderType'] {\n\treturn pipe(\n\t\tsequenceTOption(executionPrice, currentPrice),\n\t\tO.map(([price, currentPrice]) => {\n\t\t\t// please refer to https://jira.in.devexperts.com/browse/DXREQ-10550?focusedCommentId=1956701&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-1956701\n\t\t\tswitch (side) {\n\t\t\t\tcase OrderEntrySide.Buy: {\n\t\t\t\t\tif (price >= currentPrice + distance) {\n\t\t\t\t\t\treturn 'STOP';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (price <= currentPrice - distance) {\n\t\t\t\t\t\treturn 'LIMIT';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcase OrderEntrySide.Sell: {\n\t\t\t\t\tif (price >= currentPrice + distance) {\n\t\t\t\t\t\treturn 'LIMIT';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (price <= currentPrice - distance) {\n\t\t\t\t\t\treturn 'STOP';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'MARKET';\n\t\t\t}\n\t\t}),\n\t\tO.getOrElse<OrderTemplateTO['orderType']>(constant('MARKET')),\n\t);\n}\n","import { Option } from 'fp-ts/lib/Option';\n\nexport enum OrdersSide {\n\tBuy = '* BUY *',\n\tSell = '* SELL *',\n}\n\nexport type OrdersTableItem = {\n\torderId: number;\n\tsymbol: string;\n\tprecision: number;\n\tside: OrdersSide;\n\tquantity: Option<number>;\n\ttriggerPrice: Option<number>;\n\tdistance: Option<number>;\n\tstopLoss: Option<number>;\n\ttakeProfit: Option<number>;\n\tvalidUntil: Option<Date>;\n};\n","import { OrderTO } from '../../api/generated/swagger/definitions/OrderTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { OrderEntrySide } from '../../model/order-entry/order-entry.model';\nimport { some } from 'fp-ts/lib/Option';\nimport { OrdersSide, OrdersTableItem } from '../../model/orders/orders.model';\nimport { OrderTOFull } from './orders.view-model';\nimport { sequenceTOption } from '../../utils/option.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport function getTriggerPrice(\n\ttype: OrderTO['type'],\n\tamount: Option<number>,\n\tlimitPrice: Option<number>,\n\tstopPrice: Option<number>,\n): Option<number> {\n\tif (type === 'LIMIT') {\n\t\treturn limitPrice;\n\t}\n\tif (type === 'STOP') {\n\t\treturn stopPrice;\n\t}\n\tif (type === 'MARKET') {\n\t\treturn amount;\n\t}\n\treturn O.none;\n}\n\nexport function getCurrentPrice(bid: Option<number>, ask: Option<number>, quantity: number): Option<number> {\n\treturn pipe(\n\t\tsequenceTOption(bid, ask),\n\t\tO.map(([bid, ask]) => (quantity < 0 ? bid : ask)),\n\t);\n}\n\nexport function getOrderSideByQuantity(quantity: number): OrderEntrySide {\n\treturn quantity > 0 ? OrderEntrySide.Buy : OrderEntrySide.Sell;\n}\n\nexport function getAmount(side: OrderEntrySide, bid: Option<number>, ask: Option<number>): Option<number> {\n\tswitch (side) {\n\t\tcase OrderEntrySide.Buy: {\n\t\t\treturn bid;\n\t\t}\n\t\tcase OrderEntrySide.Sell: {\n\t\t\treturn ask;\n\t\t}\n\t}\n}\n\nexport function getSignBySide(side: OrderEntrySide): -1 | 1 {\n\tswitch (side) {\n\t\tcase OrderEntrySide.Buy: {\n\t\t\treturn 1;\n\t\t}\n\t\tcase OrderEntrySide.Sell: {\n\t\t\treturn -1;\n\t\t}\n\t}\n}\n\nexport function getDistance(triggerPrice: number, currentPrice: number): number {\n\treturn Math.abs(triggerPrice - currentPrice);\n}\n\nexport const toOrderItem = (order: OrderTOFull): OrdersTableItem => {\n\tconst { expireAt, orderId, quantity, stopLoss, symbol, takeProfit, triggerPrice, precision, currentPrice } = order;\n\n\treturn {\n\t\torderId,\n\t\tquantity: some(Math.abs(quantity)),\n\t\tdistance: pipe(\n\t\t\tcurrentPrice,\n\t\t\tO.chain(currentPrice =>\n\t\t\t\tpipe(\n\t\t\t\t\torder.triggerPrice,\n\t\t\t\t\tO.map(triggerPrice => getDistance(triggerPrice, currentPrice)),\n\t\t\t\t),\n\t\t\t),\n\t\t),\n\t\tside: quantity > 0 ? OrdersSide.Buy : OrdersSide.Sell,\n\t\tstopLoss: pipe(\n\t\t\tstopLoss,\n\t\t\tO.chain(stopLoss => stopLoss.fixedPrice),\n\t\t),\n\t\tsymbol,\n\t\tprecision,\n\t\ttakeProfit: pipe(\n\t\t\ttakeProfit,\n\t\t\tO.chain(takeProfit => takeProfit.fixedPrice),\n\t\t),\n\t\ttriggerPrice,\n\t\tvalidUntil: expireAt,\n\t};\n};\n","export enum OrderEntrySide {\n\tBuy = '* BUY *',\n\tSell = '* SELL *',\n}\n","import { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { filterMap } from '../../utils/rxjs/filtermap';\nimport { OrderStore } from '../../store/order/order.store';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { LiveDataOption, LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { fromOption, success, isSuccess, failure } from '@devexperts/remote-data-ts';\nimport { merge, Observable, combineLatest, race } from 'rxjs';\nimport {\n\tdistinctUntilChanged,\n\tfilter,\n\tmap,\n\tshare,\n\tswitchMap,\n\ttakeUntil,\n\ttap,\n\twithLatestFrom,\n\tfirst,\n\tstartWith,\n\tmapTo,\n\tdelay,\n} from 'rxjs/operators';\nimport { endOfYesterday, isSameDay } from 'date-fns';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport {\n\tOrderEntryTakeProfitStopLossData,\n\tTakeProfitStopLossOptions,\n\tOrderKind,\n} from '../../model/takeprofit-stoploss/takeprofit-stoploss.model';\nimport {\n\tOrderEntrySide,\n\tOrderEntryExecutionStatusFlags,\n\tOrderEntryExecutionPrice,\n\tOrderEntryExecutionDate,\n\tAmountValidationError,\n} from '../../model/order-entry/order-entry.model';\nimport {\n\tgetDefaultTakeProfitStopLossData,\n\tmapTakeProfitStopLossPayload,\n\troundPriceWithPrecision,\n\tgetTakeProfitStopLossValue,\n} from '../../model/takeprofit-stoploss/takeprofit-stoploss.utils';\nimport { countDistance } from '../../model/limits/limits.utils';\nimport {\n\tgetExpireAt,\n\tvalidateExecutionPrice,\n\tvalidateAmount,\n\tconvertDateInputValueToDate,\n\tsetoidOEValues,\n\tsetoidBooleanRD,\n\tvalidateOrderEditPrice,\n\ttoExpireAt,\n\ttoOrderTOSide,\n\ttoOrderEntryData,\n\tgetAmount,\n\tsetoidOrderType,\n\tsetoidOrderEntryExecutionPrice,\n\tgetOrderType,\n} from './order-entry.utils';\nimport { InstrumentStore } from '../../store/instrument/instrument.store';\nimport { MarketDataStore } from '../../store/market-data/market-data.store';\nimport { ConversionRateStore } from '../../store/conversion-rate/conversion-rate.store';\nimport { AccountViewModel } from '../account/account.view-model';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { of } from 'rxjs/internal/observable/of';\nimport { routes } from '../../ui-common/routes';\nimport { href, Router } from '../../utils/router.utils';\nimport { LimitsStore } from '../../store/limits/limits.store';\nimport { Either } from 'fp-ts/lib/Either';\nimport * as E from 'fp-ts/lib/Either';\nimport { interval } from 'rxjs/internal/observable/interval';\nimport { currencyStringToSymbol } from '../../utils/currency.utils';\nimport { eqNumber, strictEqual } from 'fp-ts/lib/Eq';\nimport { getSignBySide } from '../orders/orders.utils';\nimport { Big } from 'big.js';\nimport { MarginImpactStore } from '../../store/margin-impact/margin-impact.store';\nimport { OrderTO } from '../../api/generated/swagger/definitions/OrderTO';\nimport {\n\tdistinctRDNumber,\n\tsetoidOptionDate,\n\tsetoidOptionNumber,\n\tdistinctRDOptionString,\n\tdistinctRDString,\n\tsetoidOptionString,\n\tdistinctRDOptionNumber,\n} from '../../utils/setoid.utils';\nimport { identity, constant, constTrue, constFalse } from 'fp-ts/lib/function';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { shareReplayWithDefaults } from '../../utils/rxjs/shareReplayWithDefaults';\n\nconst DEFAULT_DELTA_IN_PIPS = 2;\n// please, refer to https://jira.in.devexperts.com/browse/DXTF-10193 for delay duration and explanation\nconst DELAY_BEFORE_NEXT_SUBMIT_ATTEMPT = 5000;\n\nexport type OrderEntryValues = {\n\tvalue: string;\n\texecFormValue: Option<number>;\n\tisExecEnabled: boolean;\n\tisExpireChecked: boolean;\n\texpireAtDate: Option<Date>;\n\tisTPEnabled: boolean;\n\ttakeProfitValue: number;\n\tisSLEnabled: boolean;\n\tstopLossValue: number;\n};\n\nexport type OrderValue = {\n\tamount: string;\n\tside: OrderEntrySide;\n};\n\nexport type OrderEntryData = {\n\tbid: Option<number>;\n\task: Option<number>;\n\tpipsSize: number;\n\tprecision: number;\n\tdescription: Option<string>;\n\tmarginImpact: Either<Error, number>;\n\tstep: number;\n};\n\nexport type OrderEntryViewModel = Readonly<{\n\tsymbol: string;\n\tdescription$: LiveDataOption<Error, string>;\n\tbid$: LiveDataOption<Error, number>;\n\task$: LiveDataOption<Error, number>;\n\tlot$: Observable<Option<number>>;\n\tquantityIncrement$: LiveData<Error, number>;\n\tquantity$: LiveDataOption<Error, number>;\n\taccountBalance$: Observable<Option<number>>;\n\tvalueSum$: Observable<number>;\n\tdata$: LiveData<Error, OrderEntryData>;\n\tvalue$: LiveData<Error, OrderValue>;\n\tamountPrecision$: LiveData<Error, number>;\n\tonValueChange: (value: OrderValue) => void;\n\tonSend: (isValid: boolean) => () => void;\n\tmoreOptionsOpened$: Observable<boolean>;\n\tprecision$: LiveData<Error, number>;\n\tonToggleMoreOptions: (value: boolean) => void;\n\texecutionCheckboxes$: Observable<OrderEntryExecutionStatusFlags>;\n\tonToggleExecutionCheckboxes: (value: OrderEntryExecutionStatusFlags) => void;\n\tamountValidated$: LiveData<Error, Either<AmountValidationError, string>>;\n\tamountMinOrderSize$: LiveData<Error, number>;\n\tamountMaxOrderSize$: LiveData<Error, number>;\n\texecutionPrice$: Observable<OrderEntryExecutionPrice>;\n\tonChangeExecutionPrice: (value: OrderEntryExecutionPrice) => void;\n\texecutionDates$: Observable<OrderEntryExecutionDate>;\n\tinitExecutionDates: OrderEntryExecutionDate;\n\tonChangeExecutionDates: (value: OrderEntryExecutionDate) => void;\n\ttakeProfitStopLossValue$: LiveData<Error, OrderEntryTakeProfitStopLossData>;\n\tonTakeProfitStopLossValueChange: (value: OrderEntryTakeProfitStopLossData) => void;\n\terror$: Observable<Option<Error>>;\n\tisValid$: Observable<boolean>;\n\tisShownValidErrors$: Observable<boolean>;\n\tisFundsEnough$: LiveData<Error, boolean>;\n\tisEmitingOrdersAllowed$: LiveData<Error, boolean>;\n\tisOrderEntryValuesChanged$: LiveData<Error, boolean>;\n\tcurrencySymbol$: Observable<string>;\n\tpriceIncrement$: LiveData<Error, number>;\n\tunitName$: LiveDataOption<Error, string>;\n}>;\n\ntype OrderEntryViewModelContext = {\n\tinstrumentStore: InstrumentStore;\n\tmarketDataStore: MarketDataStore;\n\tmarginImpactStore: MarginImpactStore;\n\tconversionRateStore: ConversionRateStore;\n\torderStore: OrderStore;\n\taccountViewModel: AccountViewModel;\n\tlimitsStore: LimitsStore;\n\trouter: Router;\n};\n\ntype OrderId = string;\ntype CategoryId = string;\n\ntype CreateOrderEntryViewModel = (\n\tsymbol: string,\n\tside: OrderEntrySide,\n\telementId: Either<OrderId, CategoryId>,\n\tplKind: string,\n) => Sink<OrderEntryViewModel>;\n\nexport const createOrderEntryViewModel = combineContext(\n\task<OrderEntryViewModelContext>(),\n\t(e: OrderEntryViewModelContext): CreateOrderEntryViewModel => {\n\t\treturn (symbol, side, elementId, plKind) => {\n\t\t\tconst {\n\t\t\t\taccountViewModel: { current$, accountMetrics$ },\n\t\t\t\tinstrumentStore,\n\t\t\t\tmarketDataStore,\n\t\t\t\tmarginImpactStore,\n\t\t\t\torderStore,\n\t\t\t\tconversionRateStore: { getRateBySymbol },\n\t\t\t\tlimitsStore: { getLimitsByInstrumentId },\n\t\t\t} = e;\n\n\t\t\t// account sources\n\t\t\tconst accountId$ = current$.pipe(\n\t\t\t\tmap(current => current.id),\n\t\t\t\tdistinctUntilChanged(),\n\t\t\t);\n\t\t\tconst baseCurrency$ = current$.pipe(\n\t\t\t\tmap(current => current.baseCurrency),\n\t\t\t\tdistinctUntilChanged(),\n\t\t\t);\n\t\t\tconst accountBalance$ = accountMetrics$.pipe(\n\t\t\t\tmap(metrics => metrics.balance),\n\t\t\t\tdistinctUntilChanged(),\n\t\t\t);\n\t\t\tconst availableFunds$ = accountMetrics$.pipe(\n\t\t\t\tmap(({ availableFunds }) => availableFunds),\n\t\t\t\tdistinctUntilChanged(O.getEq(eqNumber).equals),\n\t\t\t);\n\n\t\t\t// instrument sources\n\t\t\tconst instrument$ = instrumentStore.getBySymbol(symbol);\n\t\t\tconst instrumentId$ = instrument$.pipe(\n\t\t\t\tfilter(isSuccess),\n\t\t\t\tmap(instrument => instrument.value.id),\n\t\t\t\tdistinctUntilChanged(),\n\t\t\t);\n\t\t\tconst instrumentBaseCurrency$ = instrument$.pipe(\n\t\t\t\tfilter(isSuccess),\n\t\t\t\tmap(({ value }) => value.baseCurrency),\n\t\t\t\tdistinctUntilChanged(setoidOptionString.equals),\n\t\t\t);\n\t\t\tconst currency$ = instrument$.pipe(\n\t\t\t\tmap(instrumentRD =>\n\t\t\t\t\tinstrumentRD.chain(instrument =>\n\t\t\t\t\t\tfromOption(instrument.currency, constant(new Error('There is no currency in this instrument'))),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tdistinctRDString,\n\t\t\t);\n\t\t\tconst description$ = instrument$.pipe(\n\t\t\t\tmapRD(instrument => instrument.description),\n\t\t\t\tdistinctRDOptionString,\n\t\t\t);\n\t\t\tconst pipsSize$ = instrument$.pipe(\n\t\t\t\tmapRD(instrument => instrument.pipsSize),\n\t\t\t\tdistinctRDNumber,\n\t\t\t);\n\t\t\tconst lotSize$ = instrument$.pipe(\n\t\t\t\tmapRD(instrument => instrument.lotSize),\n\t\t\t\tdistinctRDNumber,\n\t\t\t);\n\t\t\tconst quantityIncrement$ = instrument$.pipe(\n\t\t\t\tmapRD(instrument => instrument.quantityIncrement),\n\t\t\t\tdistinctRDNumber,\n\t\t\t);\n\t\t\tconst priceIncrement$ = instrument$.pipe(\n\t\t\t\tmapRD(instrument => instrument.priceIncrement),\n\t\t\t\tdistinctRDNumber,\n\t\t\t);\n\t\t\tconst precision$ = instrument$.pipe(\n\t\t\t\tmapRD(instrument => instrument.precision),\n\t\t\t\tdistinctRDNumber,\n\t\t\t);\n\t\t\tconst unitName$ = instrument$.pipe(\n\t\t\t\tmapRD(instrument => instrument.unitName),\n\t\t\t\tfirst(),\n\t\t\t);\n\n\t\t\t// order sources\n\t\t\tconst order$ = pipe(\n\t\t\t\telementId,\n\t\t\t\tE.fold(\n\t\t\t\t\torderId => O.some(orderStore.getById(Number(orderId)).pipe(shareReplayWithDefaults())),\n\t\t\t\t\tconstant(O.none),\n\t\t\t\t),\n\t\t\t\tO.map(data => data.pipe(filter(isSuccess))),\n\t\t\t);\n\t\t\tconst orderAmount$ = pipe(\n\t\t\t\torder$,\n\t\t\t\tO.fold(constant(of(failure<Error, number>(new Error('No order were found')))), order =>\n\t\t\t\t\torder.pipe(\n\t\t\t\t\t\tmapRD(order => Math.abs(order.quantity)),\n\t\t\t\t\t\tdistinctRDNumber,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t\tconst expireOrder$ = pipe(\n\t\t\t\torder$,\n\t\t\t\tO.fold(constant(of(O.none)), order =>\n\t\t\t\t\torder.pipe(\n\t\t\t\t\t\tmapRD(order => order.expireAt),\n\t\t\t\t\t\tfilter(isSuccess),\n\t\t\t\t\t\tmap(data => data.value),\n\t\t\t\t\t\tdistinctUntilChanged(setoidOptionDate.equals),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t\tconst stopPrice$ = pipe(\n\t\t\t\torder$,\n\t\t\t\tO.fold(constant(of(O.none)), order =>\n\t\t\t\t\torder.pipe(\n\t\t\t\t\t\tmapRD(order => order.stopPrice),\n\t\t\t\t\t\tfilter(isSuccess),\n\t\t\t\t\t\tmap(data => data.value),\n\t\t\t\t\t\tdistinctUntilChanged(setoidOptionNumber.equals),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t\tconst requestId$ = pipe(\n\t\t\t\torder$,\n\t\t\t\tO.fold(constant(of(O.none)), order =>\n\t\t\t\t\torder.pipe(\n\t\t\t\t\t\tmapRD(order => order.requestId),\n\t\t\t\t\t\tfilter(isSuccess),\n\t\t\t\t\t\tmap(data => data.value),\n\t\t\t\t\t\tdistinctUntilChanged(setoidOptionString.equals),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t\tconst orderChainId$ = pipe(\n\t\t\t\torder$,\n\t\t\t\tO.fold(constant(of(O.none)), order =>\n\t\t\t\t\torder.pipe(\n\t\t\t\t\t\tmapRD(order => order.orderChainId),\n\t\t\t\t\t\tfilter(isSuccess),\n\t\t\t\t\t\tmap(data => O.some(data.value)),\n\t\t\t\t\t\tdistinctUntilChanged(setoidOptionString.equals),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t\tconst orderTypeDefault$ = pipe(\n\t\t\t\torder$,\n\t\t\t\tO.fold(constant(of<Option<OrderTO['type']>>(O.none)), order =>\n\t\t\t\t\torder.pipe(\n\t\t\t\t\t\tmapRD(order => order.type),\n\t\t\t\t\t\tfilter(isSuccess),\n\t\t\t\t\t\tmap(data => O.some(data.value)),\n\t\t\t\t\t\tdistinctUntilChanged(setoidOrderType.equals),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t\tconst expireAt$ = pipe(\n\t\t\t\torder$,\n\t\t\t\tO.fold(constant(of(O.none)), order =>\n\t\t\t\t\torder.pipe(\n\t\t\t\t\t\tmapRD(order => order.expireAt),\n\t\t\t\t\t\tfilter(isSuccess),\n\t\t\t\t\t\tmap(data => data.value),\n\t\t\t\t\t\tdistinctUntilChanged(setoidOptionDate.equals),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t\tconst limitPrice$ = pipe(\n\t\t\t\torder$,\n\t\t\t\tO.fold(constant(of(O.none)), order =>\n\t\t\t\t\torder.pipe(\n\t\t\t\t\t\tmapRD(order => order.limitPrice),\n\t\t\t\t\t\tfilter(isSuccess),\n\t\t\t\t\t\tmap(data => data.value),\n\t\t\t\t\t\tdistinctUntilChanged(setoidOptionNumber.equals),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t\tconst takeProfitFixedPrice$ = pipe(\n\t\t\t\torder$,\n\t\t\t\tO.fold(constant(of(O.none)), order =>\n\t\t\t\t\torder.pipe(\n\t\t\t\t\t\tmapRD(order =>\n\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\torder.takeProfit,\n\t\t\t\t\t\t\t\tO.chain(takeProfit => takeProfit.fixedPrice),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfilter(isSuccess),\n\t\t\t\t\t\tmap(data => data.value),\n\t\t\t\t\t\tdistinctUntilChanged(setoidOptionNumber.equals),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t\tconst stopLossFixedPrice$ = pipe(\n\t\t\t\torder$,\n\t\t\t\tO.fold(constant(of(O.none)), order =>\n\t\t\t\t\torder.pipe(\n\t\t\t\t\t\tmapRD(order =>\n\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\torder.stopLoss,\n\t\t\t\t\t\t\t\tO.chain(stopLoss => stopLoss.fixedPrice),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfilter(isSuccess),\n\t\t\t\t\t\tmap(data => data.value),\n\t\t\t\t\t\tdistinctUntilChanged(setoidOptionNumber.equals),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\t// market data sources\n\t\t\tconst marketData$ = marketDataStore.getDataBySymbol(symbol);\n\t\t\tconst marginImpactData$ = marginImpactStore.getMarginImpactBySymbol(symbol);\n\t\t\tconst formulaMarginImpact$ = marginImpactData$.pipe(\n\t\t\t\tmapRD(data => data.formula),\n\t\t\t\tdistinctRDOptionString,\n\t\t\t);\n\t\t\tconst argumentsMarginImpact$ = marginImpactData$.pipe(\n\t\t\t\tmapRD(data => data.arguments),\n\t\t\t\tdistinctRDOptionString,\n\t\t\t);\n\t\t\tconst quantity$ = marketData$.pipe(\n\t\t\t\tmapRD(data =>\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tdata.lastQuote,\n\t\t\t\t\t\tO.chain(quote => quote.quantity),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tdistinctRDOptionNumber,\n\t\t\t);\n\t\t\tconst bid$ = marketData$.pipe(\n\t\t\t\tmapRD(data =>\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tdata.lastQuote,\n\t\t\t\t\t\tO.chain(quote => quote.bid),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tdistinctRDOptionNumber,\n\t\t\t);\n\t\t\tconst ask$ = marketData$.pipe(\n\t\t\t\tmapRD(data =>\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tdata.lastQuote,\n\t\t\t\t\t\tO.chain(quote => quote.ask),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tdistinctRDOptionNumber,\n\t\t\t);\n\n\t\t\t// conversion rate sources\n\t\t\tconst currencies$ = combineLatest(currency$, baseCurrency$).pipe(\n\t\t\t\tmap(([currency, baseCurrency]) => currency.map(currency => ({ currency, baseCurrency }))),\n\t\t\t);\n\t\t\tconst conversionRate$ = currencies$.pipe(\n\t\t\t\tswitchMapRD(({ currency, baseCurrency }) => getRateBySymbol(currency, baseCurrency)),\n\t\t\t);\n\t\t\tconst rate$ = conversionRate$.pipe(\n\t\t\t\tmap(rates =>\n\t\t\t\t\tpipe(\n\t\t\t\t\t\trates.toOption(),\n\t\t\t\t\t\tO.chain(rate =>\n\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\trate.conversionRate,\n\t\t\t\t\t\t\t\tO.chain(conversionRate => conversionRate.value),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tdistinctUntilChanged(setoidOptionNumber.equals),\n\t\t\t);\n\n\t\t\t// limits sources\n\t\t\tconst limit$ = instrument$.pipe(switchMapRD(instrument => getLimitsByInstrumentId(instrument.id)));\n\t\t\tconst minOrderIncrement$ = limit$.pipe(\n\t\t\t\tmapRD(limit => limit.minOrderIncrement),\n\t\t\t\tdistinctRDNumber,\n\t\t\t);\n\t\t\tconst defaultOrderSize$ = limit$.pipe(\n\t\t\t\tmapRD(limit => limit.defaultOrderSize),\n\t\t\t\tdistinctRDNumber,\n\t\t\t);\n\t\t\tconst minOrderSize$ = limit$.pipe(\n\t\t\t\tmapRD(limit => limit.minOrderSize),\n\t\t\t\tdistinctRDNumber,\n\t\t\t);\n\t\t\tconst maxOrderSize$ = limit$.pipe(\n\t\t\t\tmapRD(limit => limit.maxOrderSize),\n\t\t\t\tdistinctRDNumber,\n\t\t\t);\n\t\t\tconst successfulLimit$ = limit$.pipe(\n\t\t\t\tfilter(isSuccess),\n\t\t\t\tmap(data => data.value),\n\t\t\t);\n\t\t\tconst limitStopDistanceType$ = successfulLimit$.pipe(\n\t\t\t\tmap(limit => limit.limitStopDistanceType),\n\t\t\t\tdistinctUntilChanged(strictEqual),\n\t\t\t);\n\t\t\tconst limitStopDistance$ = successfulLimit$.pipe(\n\t\t\t\tmap(limit => limit.limitStopDistance),\n\t\t\t\tdistinctUntilChanged(eqNumber.equals),\n\t\t\t);\n\t\t\tconst limitStopDistanceInPercentOfSpread$ = successfulLimit$.pipe(\n\t\t\t\tmap(limit => limit.limitStopDistanceInPercentOfSpread),\n\t\t\t\tdistinctUntilChanged(eqNumber.equals),\n\t\t\t);\n\t\t\tconst limits$ = combineLatest(\n\t\t\t\tlimitStopDistanceType$,\n\t\t\t\tlimitStopDistance$,\n\t\t\t\tlimitStopDistanceInPercentOfSpread$,\n\t\t\t).pipe(\n\t\t\t\tmap(([limitStopDistanceType, limitStopDistance, limitStopDistanceInPercentOfSpread]) => ({\n\t\t\t\t\tlimitStopDistanceType,\n\t\t\t\t\tlimitStopDistance,\n\t\t\t\t\tlimitStopDistanceInPercentOfSpread,\n\t\t\t\t})),\n\t\t\t);\n\t\t\tconst amountDefaultOrderSize$ = combineLatestRD(defaultOrderSize$, lotSize$).pipe(\n\t\t\t\tmapRD(([defaultOrderSize, lotSize]) => defaultOrderSize * lotSize),\n\t\t\t);\n\t\t\tconst amountMinOrderSize$ = combineLatestRD(minOrderSize$, lotSize$).pipe(\n\t\t\t\tmapRD(([minOrderSize, lotSize]) => minOrderSize * lotSize),\n\t\t\t);\n\t\t\tconst amountMaxOrderSize$ = combineLatestRD(maxOrderSize$, lotSize$).pipe(\n\t\t\t\tmapRD(([maxOrderSize, lotSize]) => maxOrderSize * lotSize),\n\t\t\t);\n\n\t\t\tconst amountInput = createHandler<OrderValue>();\n\t\t\tconst send = createHandler<void>();\n\t\t\tconst moreOptionsHandle = createHandler<boolean>();\n\t\t\tconst executionCheckboxes = createHandler<OrderEntryExecutionStatusFlags>();\n\t\t\tconst executionPrice = createHandler<OrderEntryExecutionPrice>();\n\t\t\tconst executionDates = createHandler<OrderEntryExecutionDate>();\n\t\t\t// take profit / stop loss\n\t\t\tconst takeProfitStopLossValueHandler = createHandler<OrderEntryTakeProfitStopLossData>();\n\t\t\tconst isValidHandler = createHandler<boolean>();\n\t\t\tconst isShownValidErrorsHandler = createHandler<boolean>();\n\n\t\t\tconst onChangeExecutionPrice = (values: OrderEntryExecutionPrice) => executionPrice.handle(values);\n\t\t\tconst onChangeExecutionDates = (values: OrderEntryExecutionDate) => executionDates.handle(values);\n\t\t\tconst onToggleExecutionCheckboxes = (values: OrderEntryExecutionStatusFlags) => {\n\t\t\t\texecutionCheckboxes.handle(values);\n\t\t\t};\n\n\t\t\tconst moreOptions$ = moreOptionsHandle.value$.pipe(\n\t\t\t\tstartWith(\n\t\t\t\t\tpipe(\n\t\t\t\t\t\telementId,\n\t\t\t\t\t\tE.fold(constTrue, constFalse),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t\tconst executionCheckboxes$ = expireOrder$.pipe(\n\t\t\t\tswitchMap(expireAt =>\n\t\t\t\t\texecutionCheckboxes.value$.pipe(\n\t\t\t\t\t\tstartWith({\n\t\t\t\t\t\t\texecutePriceOpened: pipe(\n\t\t\t\t\t\t\t\telementId,\n\t\t\t\t\t\t\t\tE.fold(constTrue, constFalse),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\texpireAtActive: pipe(\n\t\t\t\t\t\t\t\texpireAt,\n\t\t\t\t\t\t\t\tO.fold(constFalse, constTrue),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tconst lotSize = lotSize$.pipe(\n\t\t\t\tfilter(isSuccess),\n\t\t\t\tmap(data => data.value),\n\t\t\t);\n\n\t\t\tconst successfulBid$ = bid$.pipe(\n\t\t\t\tfilter(isSuccess),\n\t\t\t\tfilterMap(data => data.value),\n\t\t\t);\n\n\t\t\tconst successfulAsk$ = ask$.pipe(\n\t\t\t\tfilter(isSuccess),\n\t\t\t\tfilterMap(data => data.value),\n\t\t\t);\n\n\t\t\tconst step$ = combineLatestRD(minOrderIncrement$, lotSize$).pipe(\n\t\t\t\tmapRD(([minOrderIncrement, lotSize]) => minOrderIncrement * lotSize),\n\t\t\t);\n\t\t\tconst amountPrecision$ = step$.pipe(\n\t\t\t\tmapRD(step => {\n\t\t\t\t\tconst stepString = step.toString();\n\t\t\t\t\treturn step < 1 ? stepString.slice(stepString.indexOf('.') + 1).length : 0;\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tconst valueInit$: LiveData<Error, OrderValue> = pipe(\n\t\t\t\telementId,\n\t\t\t\tE.fold(\n\t\t\t\t\t() =>\n\t\t\t\t\t\torderAmount$.pipe(\n\t\t\t\t\t\t\tmapRD(value => ({ amount: value.toString(), side })),\n\t\t\t\t\t\t\tfirst(),\n\t\t\t\t\t\t),\n\t\t\t\t\t() =>\n\t\t\t\t\t\tamountDefaultOrderSize$.pipe(\n\t\t\t\t\t\t\tmapRD(minOrderSize => ({\n\t\t\t\t\t\t\t\tamount: minOrderSize.toString(),\n\t\t\t\t\t\t\t\tside,\n\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\ttakeUntil(amountInput.value$),\n\t\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tconst valueManuallyEntered$ = amountInput.value$.pipe(map(data => success<Error, OrderValue>(data)));\n\n\t\t\tconst value$ = merge(valueInit$, valueManuallyEntered$);\n\n\t\t\tconst successfulValue$ = value$.pipe(\n\t\t\t\tfilter(isSuccess),\n\t\t\t\tmap(data => data.value),\n\t\t\t);\n\n\t\t\tconst amount$ = successfulValue$.pipe(map(data => data.amount));\n\n\t\t\tconst lot$ = combineLatest(amount$, lotSize).pipe(\n\t\t\t\tmap(([amount, lotSize]) => (amount.length === 0 ? O.none : O.some(Number(Big(amount).div(lotSize))))),\n\t\t\t);\n\n\t\t\tconst spot$ = combineLatest(successfulValue$, successfulBid$, successfulAsk$).pipe(\n\t\t\t\tmap(([{ side }, bid, ask]) => getAmount(side, bid, ask)),\n\t\t\t\tdistinctUntilChanged(),\n\t\t\t);\n\n\t\t\tconst valueSum$ = combineLatest(amount$, spot$, rate$, baseCurrency$, instrumentBaseCurrency$).pipe(\n\t\t\t\tmap(([amount, spot, rate, accountBaseCurrency, instrumentBaseCurrency]) =>\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tinstrumentBaseCurrency,\n\t\t\t\t\t\tO.filter(baseCurrency => accountBaseCurrency === baseCurrency),\n\t\t\t\t\t\tO.fold(\n\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\tNumber(amount) *\n\t\t\t\t\t\t\t\tspot *\n\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\trate,\n\t\t\t\t\t\t\t\t\tO.getOrElse(constant(1)),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t() => Number(amount),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tconst marginImpactQuantity$ = value$.pipe(mapRD(value => Number(value.amount) * getSignBySide(value.side)));\n\n\t\t\tconst marginImpact$ = combineLatestRD(\n\t\t\t\tmarginImpactQuantity$,\n\t\t\t\tformulaMarginImpact$,\n\t\t\t\targumentsMarginImpact$,\n\t\t\t).pipe(\n\t\t\t\tmapRD(([quantity, formula, args]) =>\n\t\t\t\t\tE.tryCatch2v(\n\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\targs,\n\t\t\t\t\t\t\t\tO.chain(value =>\n\t\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\t\tformula,\n\t\t\t\t\t\t\t\t\t\tO.map(data => new Function(value, data)),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tO.fold(\n\t\t\t\t\t\t\t\t\tconstant(new Error('Something went wrong during margin impact counting')),\n\t\t\t\t\t\t\t\t\tdata => data(quantity),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tNumber,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\tconstant(new Error('Something went wrong during margin impact counting')),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tconst valueSettings$ = combineLatestRD(pipsSize$, precision$).pipe(\n\t\t\t\tmapRD(([pipsSize, precision]) => ({ pipsSize, precision })),\n\t\t\t);\n\n\t\t\tconst currencySymbol$ = baseCurrency$.pipe(map(baseCurrency => currencyStringToSymbol(baseCurrency)));\n\n\t\t\tconst baseData$ = combineLatestRD(bid$, ask$, valueSettings$, description$, step$, marginImpact$).pipe(\n\t\t\t\tmapRD(([bid, ask, valueSettings, description, step, marginImpact]) =>\n\t\t\t\t\ttoOrderEntryData(\n\t\t\t\t\t\tbid,\n\t\t\t\t\t\task,\n\t\t\t\t\t\tvalueSettings.pipsSize,\n\t\t\t\t\t\tvalueSettings.precision,\n\t\t\t\t\t\tdescription,\n\t\t\t\t\t\tstep,\n\t\t\t\t\t\tmarginImpact,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tconst isShownValidErrors$ = isShownValidErrorsHandler.value$.pipe(\n\t\t\t\tstartWith(false),\n\t\t\t\tdistinctUntilChanged(),\n\t\t\t\tshareReplayWithDefaults(),\n\t\t\t);\n\n\t\t\tconst successfulPipsSize$ = pipsSize$.pipe(\n\t\t\t\tfilter(isSuccess),\n\t\t\t\tmap(data => data.value),\n\t\t\t);\n\n\t\t\tconst distance$ = combineLatest(limits$, successfulPipsSize$, successfulBid$, successfulAsk$).pipe(\n\t\t\t\tmap(([limit, pipsSize, bid, ask]) =>\n\t\t\t\t\tcountDistance(\n\t\t\t\t\t\tlimit.limitStopDistanceType,\n\t\t\t\t\t\tlimit.limitStopDistance,\n\t\t\t\t\t\tlimit.limitStopDistanceInPercentOfSpread,\n\t\t\t\t\t\tMath.abs(bid - ask),\n\t\t\t\t\t\tpipsSize,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tdistinctUntilChanged(),\n\t\t\t);\n\n\t\t\tconst defaultDistance$ = combineLatest(limits$, successfulPipsSize$, successfulBid$, successfulAsk$).pipe(\n\t\t\t\tmap(([limit, pipsSize, bid, ask]) =>\n\t\t\t\t\tcountDistance(\n\t\t\t\t\t\tlimit.limitStopDistanceType,\n\t\t\t\t\t\tlimit.limitStopDistance * DEFAULT_DELTA_IN_PIPS,\n\t\t\t\t\t\tlimit.limitStopDistanceInPercentOfSpread,\n\t\t\t\t\t\tMath.abs(bid - ask),\n\t\t\t\t\t\tpipsSize,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tdistinctUntilChanged(),\n\t\t\t);\n\n\t\t\tconst bidAskPrecision$ = combineLatest(successfulBid$, successfulAsk$, precision$);\n\n\t\t\tconst precisionRaw$ = precision$.pipe(\n\t\t\t\tfilter(isSuccess),\n\t\t\t\tmap(precision => precision.value),\n\t\t\t\tstartWith(0),\n\t\t\t);\n\n\t\t\tconst defaultExecutionPrice$ = combineLatestRD(bid$, ask$).pipe(\n\t\t\t\tswitchMap(bidAsk =>\n\t\t\t\t\tdefaultDistance$.pipe(\n\t\t\t\t\t\tmap(distance =>\n\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\tbidAsk.map(([bid, ask]) => ({ bid, ask })).toOption(),\n\t\t\t\t\t\t\t\tO.chain(data =>\n\t\t\t\t\t\t\t\t\tside === OrderEntrySide.Buy\n\t\t\t\t\t\t\t\t\t\t? pipe(\n\t\t\t\t\t\t\t\t\t\t\t\tdata.ask,\n\t\t\t\t\t\t\t\t\t\t\t\tO.map(ask => ask + distance),\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: pipe(\n\t\t\t\t\t\t\t\t\t\t\t\tdata.bid,\n\t\t\t\t\t\t\t\t\t\t\t\tO.map(bid => bid - distance),\n\t\t\t\t\t\t\t\t\t\t  ),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t\twithLatestFrom(precisionRaw$),\n\t\t\t\t\t\tmap(([value, precision]) =>\n\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\tO.map(val => roundPriceWithPrecision(val, precision)),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tconst defaultExecutionPriceWithOrder$ = combineLatest(stopPrice$, limitPrice$, defaultExecutionPrice$).pipe(\n\t\t\t\tmap(([stopPrice, limitPrice, defaultPrice]) =>\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tstopPrice,\n\t\t\t\t\t\tO.alt(() => limitPrice),\n\t\t\t\t\t\tO.alt(() => defaultPrice),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tdistinctUntilChanged(setoidOptionNumber.equals),\n\t\t\t);\n\n\t\t\tconst priceIncrementRaw$ = priceIncrement$.pipe(\n\t\t\t\tfilter(isSuccess),\n\t\t\t\tmap(priceIncrement => priceIncrement.value),\n\t\t\t);\n\n\t\t\tconst validatedDefaultExecutionPrice$ = combineLatest(\n\t\t\t\tdefaultExecutionPriceWithOrder$,\n\t\t\t\tbidAskPrecision$,\n\t\t\t\tdistance$,\n\t\t\t\tprecisionRaw$,\n\t\t\t\tpriceIncrementRaw$,\n\t\t\t\torderTypeDefault$,\n\t\t\t).pipe(\n\t\t\t\tmap(([defaultExecutionPrice, [bid, ask], distance, precision, priceIncrement, orderType]) => {\n\t\t\t\t\t// need for correct type inference in initExecutionPrice$\n\t\t\t\t\tconst validatedDefaultExecutionPrice: OrderEntryExecutionPrice = {\n\t\t\t\t\t\tpriceValue: defaultExecutionPrice,\n\t\t\t\t\t\texecutionPriceValidated: pipe(\n\t\t\t\t\t\t\telementId,\n\t\t\t\t\t\t\tE.fold(\n\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\tvalidateOrderEditPrice(\n\t\t\t\t\t\t\t\t\t\tdefaultExecutionPrice,\n\t\t\t\t\t\t\t\t\t\torderType,\n\t\t\t\t\t\t\t\t\t\tside,\n\t\t\t\t\t\t\t\t\t\tgetAmount(side, bid, ask),\n\t\t\t\t\t\t\t\t\t\tdistance,\n\t\t\t\t\t\t\t\t\t\tprecision,\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\tvalidateExecutionPrice(\n\t\t\t\t\t\t\t\t\t\tdefaultExecutionPrice,\n\t\t\t\t\t\t\t\t\t\tgetAmount(side, bid, ask),\n\t\t\t\t\t\t\t\t\t\tdistance,\n\t\t\t\t\t\t\t\t\t\tprecision,\n\t\t\t\t\t\t\t\t\t\tpriceIncrement,\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t};\n\n\t\t\t\t\treturn validatedDefaultExecutionPrice;\n\t\t\t\t}),\n\t\t\t\tdistinctUntilChanged(setoidOrderEntryExecutionPrice.equals),\n\t\t\t);\n\n\t\t\tconst initExecutionPrice$ = validatedDefaultExecutionPrice$.pipe(\n\t\t\t\tswitchMap(validatedDefaultExecutionPrice =>\n\t\t\t\t\texecutionPrice.value$.pipe(startWith(validatedDefaultExecutionPrice)),\n\t\t\t\t),\n\t\t\t\ttakeUntil(executionPrice.value$),\n\t\t\t);\n\n\t\t\tconst disabledDaysMin$ = interval(1000).pipe(\n\t\t\t\tmap(() => endOfYesterday()),\n\t\t\t\tstartWith(endOfYesterday()),\n\t\t\t\tdistinctUntilChanged((a, b) => isSameDay(a, b)),\n\t\t\t);\n\n\t\t\tconst initExecutionDates = {\n\t\t\t\texpireAt: getExpireAt(),\n\t\t\t\tdisabledDaysMin: endOfYesterday(),\n\t\t\t};\n\n\t\t\tconst executionDatesValues$ = combineLatest(expireAt$, disabledDaysMin$).pipe(\n\t\t\t\tswitchMap(([date, disabledDaysMin]) =>\n\t\t\t\t\texecutionDates.value$.pipe(\n\t\t\t\t\t\tstartWith({\n\t\t\t\t\t\t\texpireAt: pipe(\n\t\t\t\t\t\t\t\tdate,\n\t\t\t\t\t\t\t\tO.fold(\n\t\t\t\t\t\t\t\t\t() => getExpireAt(),\n\t\t\t\t\t\t\t\t\texpireAt => ({\n\t\t\t\t\t\t\t\t\t\tday: O.some(expireAt.getDate()),\n\t\t\t\t\t\t\t\t\t\tmonth: O.some(expireAt.getMonth()),\n\t\t\t\t\t\t\t\t\t\tyear: O.some(expireAt.getFullYear()),\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tdisabledDaysMin,\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\ttakeUntil(executionDates.value$),\n\t\t\t);\n\n\t\t\tconst executionFormValues$ = merge(initExecutionPrice$, executionPrice.value$);\n\t\t\tconst executionDates$ = merge(executionDatesValues$, executionDates.value$);\n\t\t\tconst orderTypeAndCheckboxes$ = combineLatest(orderTypeDefault$, executionCheckboxes$);\n\n\t\t\tconst executionPrice$ = combineLatest(\n\t\t\t\torderTypeAndCheckboxes$,\n\t\t\t\texecutionFormValues$,\n\t\t\t\tbidAskPrecision$,\n\t\t\t\tdistance$,\n\t\t\t\tprecisionRaw$,\n\t\t\t\tpriceIncrementRaw$,\n\t\t\t).pipe(\n\t\t\t\tfilter(([[_, { executePriceOpened }]]) => executePriceOpened),\n\t\t\t\tmap(([[orderType], executionData, [bid, ask], distance, precision, priceIncrement]) => ({\n\t\t\t\t\t...executionData,\n\t\t\t\t\texecutionPriceValidated: pipe(\n\t\t\t\t\t\telementId,\n\t\t\t\t\t\tE.fold(\n\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\tvalidateOrderEditPrice(\n\t\t\t\t\t\t\t\t\texecutionData.priceValue,\n\t\t\t\t\t\t\t\t\torderType,\n\t\t\t\t\t\t\t\t\tside,\n\t\t\t\t\t\t\t\t\tgetAmount(side, bid, ask),\n\t\t\t\t\t\t\t\t\tdistance,\n\t\t\t\t\t\t\t\t\tprecision,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\tvalidateExecutionPrice(\n\t\t\t\t\t\t\t\t\texecutionData.priceValue,\n\t\t\t\t\t\t\t\t\tgetAmount(side, bid, ask),\n\t\t\t\t\t\t\t\t\tdistance,\n\t\t\t\t\t\t\t\t\tprecision,\n\t\t\t\t\t\t\t\t\tpriceIncrement,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t})),\n\t\t\t\tdistinctUntilChanged(setoidOrderEntryExecutionPrice.equals),\n\t\t\t\t//shareReplayWithDefaults() prevents from unsubscribing, TODO: fix it\n\t\t\t);\n\n\t\t\tconst executionPriceValue$ = executionPrice$.pipe(\n\t\t\t\tmap(({ priceValue }) => priceValue),\n\t\t\t\tstartWith(O.none),\n\t\t\t);\n\n\t\t\t// take profit / stop loss\n\n\t\t\tconst orderPrice$ = combineLatest(executionCheckboxes$, executionPrice$).pipe(\n\t\t\t\tmap(([checkboxes, form]) => (checkboxes.executePriceOpened ? form.priceValue : O.none)),\n\t\t\t\tstartWith(O.none),\n\t\t\t\tdistinctUntilChanged(setoidOptionNumber.equals),\n\t\t\t);\n\n\t\t\tconst orderType$ = combineLatest(\n\t\t\t\texecutionCheckboxes$,\n\t\t\t\tmerge(initExecutionPrice$, executionPrice$),\n\t\t\t\tsuccessfulValue$,\n\t\t\t\tsuccessfulBid$,\n\t\t\t\tsuccessfulAsk$,\n\t\t\t\tdistance$,\n\t\t\t).pipe(\n\t\t\t\tmap(([checkboxes, form, { side }, bid, ask, distance]) => {\n\t\t\t\t\tconst currentPrice = getAmount(side, bid, ask);\n\t\t\t\t\treturn checkboxes.executePriceOpened\n\t\t\t\t\t\t? getOrderType(form.priceValue, O.some(currentPrice), distance, side)\n\t\t\t\t\t\t: 'MARKET';\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tconst spotAmountOrderPriceCombined$ = combineLatest(spot$, amount$, orderPrice$);\n\n\t\t\tconst initTakeProfitStopLossValue$ = combineLatest(takeProfitFixedPrice$, stopLossFixedPrice$).pipe(\n\t\t\t\tswitchMap(([takeProfitFixedPrice, stopLossFixedPrice]) =>\n\t\t\t\t\ttakeProfitStopLossValueHandler.value$.pipe(\n\t\t\t\t\t\tstartWith(\n\t\t\t\t\t\t\tgetDefaultTakeProfitStopLossData({\n\t\t\t\t\t\t\t\thasTP: pipe(\n\t\t\t\t\t\t\t\t\ttakeProfitFixedPrice,\n\t\t\t\t\t\t\t\t\tO.fold(() => (plKind === 'profit' ? O.some(0) : O.none), data => O.some(data)),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\thasSL: pipe(\n\t\t\t\t\t\t\t\t\tstopLossFixedPrice,\n\t\t\t\t\t\t\t\t\tO.fold(() => (plKind === 'loss' ? O.some(0) : O.none), data => O.some(data)),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tconst currentAndPreviousTakeProfitStopLoss$ = combineLatest(\n\t\t\t\tinitTakeProfitStopLossValue$,\n\t\t\t\ttakeProfitFixedPrice$,\n\t\t\t\tstopLossFixedPrice$,\n\t\t\t);\n\n\t\t\tconst takeProfitStopLossPreCombineData1$ = combineLatest(\n\t\t\t\tcurrentAndPreviousTakeProfitStopLoss$,\n\t\t\t\tdistance$,\n\t\t\t\trate$,\n\t\t\t);\n\n\t\t\tconst takeProfitStopLossPreCombineData2$ = combineLatest(\n\t\t\t\tpriceIncrement$,\n\t\t\t\tspotAmountOrderPriceCombined$,\n\t\t\t\tsuccessfulValue$,\n\t\t\t\tbidAskPrecision$,\n\t\t\t\torderType$,\n\t\t\t);\n\n\t\t\tconst takeProfitStopLossCalculatedData$ = combineLatest(\n\t\t\t\ttakeProfitStopLossPreCombineData1$,\n\t\t\t\ttakeProfitStopLossPreCombineData2$,\n\t\t\t).pipe(\n\t\t\t\tfilter(\n\t\t\t\t\t([[[{ takeProfitData, stopLossData }]]]) => takeProfitData.isSelected || stopLossData.isSelected,\n\t\t\t\t),\n\t\t\t\t// prepare options for getTakeProfitStopLossValue\n\t\t\t\tmap(\n\t\t\t\t\t([\n\t\t\t\t\t\t[[{ takeProfitData, stopLossData }, prevTakeProfitValue, prevStopLossValue], distance, rate],\n\t\t\t\t\t\t[priceIncrement, [spotValue, amount, orderPrice], { side }, [bid, ask, precision], orderType],\n\t\t\t\t\t]): TakeProfitStopLossOptions => ({\n\t\t\t\t\t\tcurrentTakeProfitData: takeProfitData,\n\t\t\t\t\t\tcurrentStopLossData: stopLossData,\n\t\t\t\t\t\tprevTakeProfitFixedPrice: prevTakeProfitValue,\n\t\t\t\t\t\tprevStopLossFixedPrice: prevStopLossValue,\n\t\t\t\t\t\tparentOrderPrice: pipe(\n\t\t\t\t\t\t\torderPrice,\n\t\t\t\t\t\t\tO.getOrElse(() => spotValue),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tbid,\n\t\t\t\t\t\task,\n\t\t\t\t\t\torderType,\n\t\t\t\t\t\tamount: Number(amount),\n\t\t\t\t\t\tside,\n\t\t\t\t\t\tpriceIncrement: priceIncrement.getOrElse(0),\n\t\t\t\t\t\tprecision: precision.getOrElse(5),\n\t\t\t\t\t\trate: pipe(\n\t\t\t\t\t\t\trate,\n\t\t\t\t\t\t\tO.getOrElse(constant(1)),\n\t\t\t\t\t\t),\n\t\t\t\t\t\torderKind: OrderKind.Order,\n\t\t\t\t\t\tdistance,\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t\t\tmap(data => getTakeProfitStopLossValue(data)),\n\t\t\t);\n\n\t\t\tconst takeProfitStopLossData$ = merge(initTakeProfitStopLossValue$, takeProfitStopLossCalculatedData$);\n\t\t\tconst amountValidated$ = combineLatestRD(\n\t\t\t\tvalue$,\n\t\t\t\tminOrderSize$,\n\t\t\t\tmaxOrderSize$,\n\t\t\t\tminOrderIncrement$,\n\t\t\t\tlotSize$,\n\t\t\t).pipe(\n\t\t\t\tmapRD(([value, minOrderSize, maxOrderSize, minOrderIncrement, lotSize]) =>\n\t\t\t\t\tvalidateAmount(\n\t\t\t\t\t\tvalue.amount,\n\t\t\t\t\t\tminOrderSize * lotSize,\n\t\t\t\t\t\tmaxOrderSize * lotSize,\n\t\t\t\t\t\tminOrderIncrement * lotSize,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tconst successfulAmountValidated$ = amountValidated$.pipe(\n\t\t\t\tfilter(isSuccess),\n\t\t\t\tmap(data => data.value),\n\t\t\t);\n\n\t\t\tconst validationStatus$ = combineLatest(\n\t\t\t\ttakeProfitStopLossData$,\n\t\t\t\texecutionCheckboxes$,\n\t\t\t\tmerge(initExecutionPrice$, executionPrice$),\n\t\t\t\tsuccessfulAmountValidated$,\n\t\t\t).pipe(\n\t\t\t\ttap(([takeProfitStopLossData, { executePriceOpened }, executionPrice, amountValidated]) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\ttakeProfitData: { isSelected: isSelectedTP, validatedPrice: validatedPriceTP },\n\t\t\t\t\t\tstopLossData: { isSelected: isSelectedSL, validatedPrice: validatedPriceSL },\n\t\t\t\t\t} = takeProfitStopLossData;\n\n\t\t\t\t\tconst { executionPriceValidated } = executionPrice;\n\t\t\t\t\tconst isTPPriceValid = isSelectedTP ? E.isRight(validatedPriceTP) : true;\n\t\t\t\t\tconst isSLPriceValid = isSelectedSL ? E.isRight(validatedPriceSL) : true;\n\t\t\t\t\tconst isExecPriceValid = executePriceOpened ? E.isRight(executionPriceValidated) : true;\n\n\t\t\t\t\tisValidHandler.handle(\n\t\t\t\t\t\tisTPPriceValid && isSLPriceValid && isExecPriceValid && E.isRight(amountValidated),\n\t\t\t\t\t);\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tconst sendData$ = combineLatest(\n\t\t\t\tsuccessfulValue$,\n\t\t\t\texecutionPriceValue$,\n\t\t\t\texecutionDates$,\n\t\t\t\texecutionCheckboxes$,\n\t\t\t).pipe(\n\t\t\t\tmap(([value, priceValue, executionDates, executionCheckboxes]) => ({\n\t\t\t\t\t...value,\n\t\t\t\t\texpireAt: toExpireAt(executionDates, executionCheckboxes),\n\t\t\t\t\texecutionPrice: executionCheckboxes.executePriceOpened ? priceValue : O.none,\n\t\t\t\t})),\n\t\t\t);\n\n\t\t\tconst takeProfitStopLossLiveData$ = takeProfitStopLossData$.pipe(\n\t\t\t\tmap(value => success<Error, OrderEntryTakeProfitStopLossData>(value)),\n\t\t\t\tshareReplayWithDefaults(),\n\t\t\t);\n\n\t\t\tconst onToggleMoreOptions = (value: boolean) => moreOptionsHandle.handle(value);\n\n\t\t\tconst isValid$ = isValidHandler.value$.pipe(\n\t\t\t\tstartWith(true),\n\t\t\t\tdistinctUntilChanged(),\n\t\t\t\tshareReplayWithDefaults(),\n\t\t\t);\n\n\t\t\tconst onSend = (isValid: boolean) => () => {\n\t\t\t\tisShownValidErrorsHandler.handle(!isValid);\n\t\t\t\tisValid && send.handle(undefined);\n\t\t\t};\n\n\t\t\tconst sendEffect$ = send.value$.pipe(\n\t\t\t\twithLatestFrom(instrumentId$, sendData$, bidAskPrecision$, accountId$, takeProfitStopLossData$),\n\t\t\t\twithLatestFrom(requestId$, orderChainId$, distance$),\n\t\t\t\tmap(\n\t\t\t\t\t([\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t_,\n\t\t\t\t\t\t\tinstrumentId,\n\t\t\t\t\t\t\t{ amount, expireAt, executionPrice, side: orderEntrySide },\n\t\t\t\t\t\t\t[bid, ask, precision],\n\t\t\t\t\t\t\taccountId,\n\t\t\t\t\t\t\t{ takeProfitData, stopLossData },\n\t\t\t\t\t\t],\n\t\t\t\t\t\trequestId,\n\t\t\t\t\t\torderChainId,\n\t\t\t\t\t\tdistance,\n\t\t\t\t\t]) => {\n\t\t\t\t\t\tconst takeProfitPayload = mapTakeProfitStopLossPayload(takeProfitData, precision.getOrElse(0));\n\t\t\t\t\t\tconst stopLossPayload = mapTakeProfitStopLossPayload(stopLossData, precision.getOrElse(0));\n\t\t\t\t\t\tconst side = toOrderTOSide(orderEntrySide);\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tbid,\n\t\t\t\t\t\t\task,\n\t\t\t\t\t\t\trequestId,\n\t\t\t\t\t\t\torderChainId,\n\t\t\t\t\t\t\tdistance,\n\t\t\t\t\t\t\ttakeProfitPayload,\n\t\t\t\t\t\t\tstopLossPayload,\n\t\t\t\t\t\t\tside,\n\t\t\t\t\t\t\tinstrumentId,\n\t\t\t\t\t\t\taccountId,\n\t\t\t\t\t\t\texpireAt,\n\t\t\t\t\t\t\texecutionPrice,\n\t\t\t\t\t\t\tamount,\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t\tshare(),\n\t\t\t);\n\n\t\t\tconst sendUpdateOrder$ = sendEffect$.pipe(\n\t\t\t\tfilter(() => E.isLeft(elementId)),\n\t\t\t\ttap(data =>\n\t\t\t\t\torderStore.updateOrder({\n\t\t\t\t\t\torderId: elementId.value,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\trequestId: data.requestId,\n\t\t\t\t\t\t\taccountId: data.accountId,\n\t\t\t\t\t\t\tinstrumentId: data.instrumentId,\n\t\t\t\t\t\t\tbid: data.bid,\n\t\t\t\t\t\t\task: data.ask,\n\t\t\t\t\t\t\tquantity: Number(data.amount),\n\t\t\t\t\t\t\tside: O.some(data.side),\n\t\t\t\t\t\t\texpireAt: data.expireAt,\n\t\t\t\t\t\t\texecutionPrice: data.executionPrice,\n\t\t\t\t\t\t\ttakeProfit: data.takeProfitPayload,\n\t\t\t\t\t\t\tstopLoss: data.stopLossPayload,\n\t\t\t\t\t\t\torderChainId: data.orderChainId,\n\t\t\t\t\t\t\tdistance: data.distance,\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tconst sendCreateOrder$ = sendEffect$.pipe(\n\t\t\t\tfilter(() => E.isRight(elementId)),\n\t\t\t\tswitchMap(data =>\n\t\t\t\t\torderStore.place(\n\t\t\t\t\t\tdata.accountId,\n\t\t\t\t\t\tdata.instrumentId,\n\t\t\t\t\t\tdata.bid,\n\t\t\t\t\t\tdata.ask,\n\t\t\t\t\t\tNumber(data.amount),\n\t\t\t\t\t\tO.some(data.side),\n\t\t\t\t\t\tdata.expireAt,\n\t\t\t\t\t\tdata.executionPrice,\n\t\t\t\t\t\tdata.takeProfitPayload,\n\t\t\t\t\t\tdata.stopLossPayload,\n\t\t\t\t\t\tdata.distance,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tconst isEmitingOrdersAllowedRaw$ = merge(\n\t\t\t\tsend.value$.pipe(mapTo(false)),\n\t\t\t\torderStore.error$.pipe(map(O.isSome)),\n\t\t\t\tsend.value$.pipe(\n\t\t\t\t\tmapTo(true),\n\t\t\t\t\tdelay(DELAY_BEFORE_NEXT_SUBMIT_ATTEMPT),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tconst isEmitingOrdersAllowed$ = isEmitingOrdersAllowedRaw$.pipe(map(v => success<Error, boolean>(v)));\n\n\t\t\tconst isFundsEnough$ = combineLatestRD(\n\t\t\t\tmarginImpact$,\n\t\t\t\tavailableFunds$.pipe(map(val => success<Error, Option<number>>(val))),\n\t\t\t).pipe(\n\t\t\t\tmapRD(\n\t\t\t\t\t([marginImpact, availableFunds]) =>\n\t\t\t\t\t\tE.isRight(marginImpact) &&\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\tavailableFunds,\n\t\t\t\t\t\t\tO.fold(constFalse, availableFunds => availableFunds > marginImpact.value),\n\t\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\ttakeUntil(isEmitingOrdersAllowedRaw$),\n\t\t\t);\n\n\t\t\tconst errorEffect$ = race(\n\t\t\t\torderStore.error$.pipe(map(O.isNone)),\n\t\t\t\tisEmitingOrdersAllowedRaw$.pipe(filter(identity)),\n\t\t\t).pipe(\n\t\t\t\ttap(isSuccess => {\n\t\t\t\t\tif (isSuccess) {\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\telementId,\n\t\t\t\t\t\t\tE.fold(\n\t\t\t\t\t\t\t\torderId => e.router.push(href(routes.orders.order.root, { orderId: Number(orderId) })),\n\t\t\t\t\t\t\t\tcategoryId =>\n\t\t\t\t\t\t\t\t\te.router.push(href(routes.trade.category.symbol.root, { categoryId, symbol })),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tconst orderEntryValues$: LiveData<Error, OrderEntryValues> = combineLatestRD(\n\t\t\t\tvalue$,\n\t\t\t\texecutionFormValues$.pipe(map(val => success<Error, OrderEntryExecutionPrice>(val))),\n\t\t\t\texecutionCheckboxes$.pipe(map(val => success<Error, OrderEntryExecutionStatusFlags>(val))),\n\t\t\t\texecutionDates$.pipe(map(val => success<Error, OrderEntryExecutionDate>(val))),\n\t\t\t\ttakeProfitStopLossLiveData$,\n\t\t\t).pipe(\n\t\t\t\tmapRD(\n\t\t\t\t\t([\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\texecFormValue,\n\t\t\t\t\t\texecutionCheckboxes,\n\t\t\t\t\t\texecutionDates,\n\t\t\t\t\t\t{ takeProfitData, stopLossData },\n\t\t\t\t\t]) => ({\n\t\t\t\t\t\tvalue: value.amount,\n\t\t\t\t\t\texecFormValue: execFormValue.priceValue,\n\t\t\t\t\t\tisExecEnabled: executionCheckboxes.executePriceOpened,\n\t\t\t\t\t\tisExpireChecked: executionCheckboxes.expireAtActive,\n\t\t\t\t\t\texpireAtDate: convertDateInputValueToDate(executionDates.expireAt),\n\t\t\t\t\t\tisTPEnabled: takeProfitData.isSelected,\n\t\t\t\t\t\ttakeProfitValue: takeProfitData.isSelected ? takeProfitData.value : 0,\n\t\t\t\t\t\tisSLEnabled: stopLossData.isSelected,\n\t\t\t\t\t\tstopLossValue: stopLossData.isSelected ? stopLossData.value : 0,\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t\t\tshare(),\n\t\t\t);\n\n\t\t\tconst takeProfitStopLossPrices$ = combineLatestRD(\n\t\t\t\ttakeProfitFixedPrice$.pipe(map(value => success<Error, Option<number>>(value))),\n\t\t\t\tstopLossFixedPrice$.pipe(map(value => success<Error, Option<number>>(value))),\n\t\t\t);\n\n\t\t\tconst initOrderEntryValues$ = combineLatestRD(orderEntryValues$, takeProfitStopLossPrices$).pipe(\n\t\t\t\tmapRD(([oeValues, [takeProfit, stopLoss]]) => ({\n\t\t\t\t\t...oeValues,\n\t\t\t\t\tisTPEnabled: O.isSome(takeProfit),\n\t\t\t\t\ttakeProfitValue: pipe(\n\t\t\t\t\t\ttakeProfit,\n\t\t\t\t\t\tO.getOrElse(constant(0)),\n\t\t\t\t\t),\n\t\t\t\t\tisSLEnabled: O.isSome(stopLoss),\n\t\t\t\t\tstopLossValue: pipe(\n\t\t\t\t\t\tstopLoss,\n\t\t\t\t\t\tO.getOrElse(constant(0)),\n\t\t\t\t\t),\n\t\t\t\t})),\n\t\t\t\tfirst(),\n\t\t\t);\n\n\t\t\tconst isOrderEntryValuesChanged$ = combineLatestRD(initOrderEntryValues$, orderEntryValues$).pipe(\n\t\t\t\tmapRD(([initVal, currVal]) => !setoidOEValues.equals(initVal, currVal)),\n\t\t\t\tdistinctUntilChanged((a, b) => setoidBooleanRD.equals(a, b)),\n\t\t\t);\n\n\t\t\treturn new Sink<OrderEntryViewModel>(\n\t\t\t\t{\n\t\t\t\t\tsymbol,\n\t\t\t\t\tbid$,\n\t\t\t\t\task$,\n\t\t\t\t\tlot$,\n\t\t\t\t\tpriceIncrement$,\n\t\t\t\t\tdescription$,\n\t\t\t\t\tquantity$,\n\t\t\t\t\taccountBalance$,\n\t\t\t\t\tvalueSum$,\n\t\t\t\t\tquantityIncrement$,\n\t\t\t\t\tvalue$,\n\t\t\t\t\tamountPrecision$,\n\t\t\t\t\tdata$: baseData$,\n\t\t\t\t\tonValueChange: amountInput.handle,\n\t\t\t\t\tonSend,\n\t\t\t\t\tmoreOptionsOpened$: moreOptions$,\n\t\t\t\t\tprecision$,\n\t\t\t\t\tonToggleMoreOptions,\n\t\t\t\t\texecutionCheckboxes$,\n\t\t\t\t\tonToggleExecutionCheckboxes,\n\t\t\t\t\tamountValidated$,\n\t\t\t\t\tamountMinOrderSize$,\n\t\t\t\t\tamountMaxOrderSize$,\n\t\t\t\t\texecutionPrice$,\n\t\t\t\t\tinitExecutionDates,\n\t\t\t\t\texecutionDates$,\n\t\t\t\t\tonChangeExecutionPrice,\n\t\t\t\t\tonChangeExecutionDates,\n\t\t\t\t\tcurrencySymbol$,\n\t\t\t\t\ttakeProfitStopLossValue$: takeProfitStopLossLiveData$,\n\t\t\t\t\tonTakeProfitStopLossValueChange: takeProfitStopLossValueHandler.handle,\n\t\t\t\t\terror$: orderStore.error$,\n\t\t\t\t\tisValid$,\n\t\t\t\t\tisShownValidErrors$,\n\t\t\t\t\tisFundsEnough$,\n\t\t\t\t\tisEmitingOrdersAllowed$,\n\t\t\t\t\tisOrderEntryValuesChanged$,\n\t\t\t\t\tunitName$,\n\t\t\t\t},\n\t\t\t\tmerge(sendEffect$, sendUpdateOrder$, sendCreateOrder$, validationStatus$, errorEffect$),\n\t\t\t);\n\t\t};\n\t},\n);\n","import * as React from 'react';\nimport { Component, ReactNode } from 'react';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { MakeTheme } from '../../utils/theme.utils';\nimport { Scrollable as ScrollableComponent } from '../scrollable/scrollable.component';\nimport * as css from './theme/side-panel.module.css';\nimport * as scrollableCss from './theme/scrollable.child.module.css';\n\nexport type TSidePanelProps = {\n\theader?: ReactNode;\n\tfooter?: ReactNode;\n\tchildren: ReactNode;\n\ttheme: {\n\t\tSidePanel: MakeTheme<'container' | 'content' | 'header' | 'footer' | 'body'>;\n\t\tScrollable?: {\n\t\t\tscrollable?: string;\n\t\t\twithHorizontalScrollbar?: string;\n\t\t\twithVerticalScrollbar?: string;\n\t\t\tscrollbar?: string;\n\t\t\tcontainer: string;\n\t\t\twrapper?: string;\n\t\t\tcontent?: string;\n\t\t\tresizeDetector?: string;\n\t\t\thorizontal_scrollbar__bar?: string;\n\t\t\tvertical_scrollbar__bar?: string;\n\t\t\toverlayContent?: string;\n\t\t};\n\t};\n\tscrollable?: boolean;\n};\n\nclass RawSidePanel extends Component<TSidePanelProps> {\n\trender() {\n\t\tconst {\n\t\t\ttheme: { SidePanel },\n\t\t\theader,\n\t\t\tfooter,\n\t\t} = this.props;\n\t\treturn (\n\t\t\t<div className={SidePanel.container}>\n\t\t\t\t{header && <div className={SidePanel.header}>{header}</div>}\n\t\t\t\t<div className={SidePanel.content}>{this.renderBody()}</div>\n\t\t\t\t{footer && <div className={SidePanel.footer}>{footer}</div>}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tprivate renderBody() {\n\t\tconst {\n\t\t\ttheme: { SidePanel, Scrollable },\n\t\t\tscrollable,\n\t\t\tchildren,\n\t\t} = this.props;\n\t\tif (scrollable) {\n\t\t\treturn (\n\t\t\t\t<ScrollableComponent theme={Scrollable}>\n\t\t\t\t\t<div className={SidePanel.body}>{children}</div>\n\t\t\t\t</ScrollableComponent>\n\t\t\t);\n\t\t}\n\t\treturn <div className={SidePanel.body}>{children}</div>;\n\t}\n}\n\nconst wTheme = { SidePanel: css, Scrollable: scrollableCss };\n\nexport const SidePanel = withTheme(Symbol(), wTheme)(RawSidePanel);\n","import { TPipSettings } from '../../../../ui-common/pip-rate/pip-rate.component';\nimport { Option } from 'fp-ts/lib/Option';\nimport { Either } from 'fp-ts/lib/Either';\n\nexport enum OrderEntrySide {\n\tBuy = '* BUY *',\n\tSell = '* SELL *',\n}\n\nexport type OrderEntryValue = {\n\tamount: string;\n\tside: OrderEntrySide;\n};\n\nexport type OrderEntrySideValue = {\n\tamount: Option<number>;\n\tpipSettings: TPipSettings;\n};\n\nexport enum AmountValidationErrorMessages {\n\tMax = '* MAX *',\n\tMin = '* MIN *',\n\tMultiple = '* MULTIPLE *',\n}\n\nexport type AmountValidationError = {\n\tmessage: AmountValidationErrorMessages;\n\tmaxOrderSize: number;\n\tminOrderSize: number;\n\tminOrderIncrement: number;\n};\n\nexport type OrderEntryPanelData = {\n\tbuy: OrderEntrySideValue;\n\tsell: OrderEntrySideValue;\n\tprecision: number;\n\tamountPrecision: number;\n\tdescription: Option<string>;\n\tmarginImpact: Either<Error, number>;\n\tstep: number;\n\tamountValidated: Either<AmountValidationError, string>;\n\tminOrderSize: number;\n\tmaxOrderSize: number;\n\tvalue: OrderEntryValue;\n\tunitName: Option<string>;\n};\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { PipRate, TPipSettings } from '../../../../ui-common/pip-rate/pip-rate.component';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { Optional } from '../../../../ui-common/optional/optional.component';\nimport { OrderEntrySide } from './order-entry-panel-side.model';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as cn from 'classnames';\nimport * as css from './theme/order-entry-panel-side.module.css';\nimport * as pipCss from './theme/pip-rate.child.module.css';\n\nexport type OrderEntryPanelSideProps = {\n\tamount: Option<number>;\n\tpipSettings: TPipSettings;\n\tside: OrderEntrySide;\n\tisActive: boolean;\n\tisDisabled?: boolean;\n\tprecision: number;\n\tonClick: (data: OrderEntrySide) => void;\n};\n\nclass OrderEntryPanelSideUnwrapped extends PureComponent<OrderEntryPanelSideProps & WithTranslation> {\n\trender() {\n\t\tconst { amount, side, isActive, isDisabled, pipSettings, precision } = this.props;\n\n\t\tconst containerTheme = cn(css.container, {\n\t\t\t[css.container_sell]: isActive && side === OrderEntrySide.Sell,\n\t\t\t[css.container_buy]: isActive && side === OrderEntrySide.Buy,\n\t\t\t[css.container_disabled]: isDisabled,\n\t\t});\n\n\t\treturn (\n\t\t\t<div className={containerTheme} onClick={this.handleClick}>\n\t\t\t\t<Optional\n\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\tamount,\n\t\t\t\t\t\tO.map(amount => (\n\t\t\t\t\t\t\t<PipRate value={amount} rise={pipSettings} digits={precision} theme={pipCss} />\n\t\t\t\t\t\t)),\n\t\t\t\t\t)}\n\t\t\t\t/>\n\n\t\t\t\t<div className={css.text}>{this.getText(side)}</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tprivate handleClick = () => {\n\t\tconst { onClick, side, isDisabled } = this.props;\n\t\t!isDisabled && onClick(side);\n\t};\n\n\tprivate getText = (value: OrderEntrySide) => {\n\t\tswitch (value) {\n\t\t\tcase OrderEntrySide.Sell: {\n\t\t\t\treturn tspan('orderEntryPanelSideSell', 'Sell');\n\t\t\t}\n\t\t\tcase OrderEntrySide.Buy: {\n\t\t\t\treturn tspan('orderEntryPanelSideBuy', 'Buy');\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport const OrderEntryPanelSide = withTranslation()(OrderEntryPanelSideUnwrapped);\n","import { Option } from 'fp-ts/lib/Option';\nimport { TDateInputValue } from '@devexperts/react-kit/dist/components/DateInput/DateInput.model';\nimport { Either } from 'fp-ts/lib/Either';\n\nexport type OrderEntryExecutionCheckboxes = {\n\texecutePriceOpened: boolean;\n\texpireAtActive: boolean;\n};\n\nexport enum ExecutionPriceValidationErrorMessages {\n\tGeneral = '* GENERAL *',\n\tNotInRange = '* NOT_IN_RANGE *',\n\tOverRange = '* HI_RANGE *',\n\tBelowRange = '* BELOW_RANGE *',\n\tWrongStepping = '* WRONG_STEPPING *',\n}\n\nexport type ExecutionPriceValidationError = {\n\tmessage: ExecutionPriceValidationErrorMessages;\n\thiRange: string;\n\tloRange: string;\n\tstep: string;\n};\n\nexport type OrderEntryExecutionVisibleFormPrice = {\n\tpriceValue: Option<number>;\n\texecutionPriceValidated: Either<ExecutionPriceValidationError, number>;\n};\n\nexport type OrderEntryExecutionVisibleFormDates = {\n\texpireAt: TDateInputValue;\n\tdisabledDaysMin: Date;\n};\n\nexport type StepperData = {\n\tpriceIncrement: number;\n\tprecision: number;\n};\n","import * as React from 'react';\nimport { ReactNode } from 'react';\nimport { PURE } from '@devexperts/react-kit/dist/utils/pure';\nimport * as classnames from 'classnames';\nimport { ButtonIcon, TButtonIconProps } from '@devexperts/react-kit/dist/components/ButtonIcon/ButtonIcon';\nimport { Button } from '@devexperts/react-kit/dist/components/Button/Button';\nimport {\n\tstartOfMonth,\n\tstartOfWeek,\n\tdifferenceInCalendarWeeks,\n\taddWeeks,\n\taddMonths,\n\tsubMonths,\n\tisSameDay,\n\tisValid,\n\tisAfter,\n\tisBefore,\n\taddDays,\n} from 'date-fns';\nimport { Holdable } from '@devexperts/react-kit/dist/components/Holdable/Holdable';\nimport { TCalendarProps as TBaseCalendarProps } from '@devexperts/react-kit/dist/components/DateInput/DateInput';\nimport { MoveLeftIcon } from '../icons/move-left.icon';\nimport { MoveRightIcon } from '../icons/move-right.icon';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { MakeTheme } from '../../../../utils/theme.utils';\nimport { isUndefined } from 'util';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport * as css from './theme/calendar.module.css';\nimport * as buttonIconCss from './theme/button-icon.module.css';\n\nexport type TCalendarOwnProps = TBaseCalendarProps;\n\nconst iconMoveLeft = <MoveLeftIcon />;\nconst iconMoveRight = <MoveRightIcon />;\n\nexport type TCalendarInjectedProps = {\n\ttheme: MakeTheme<\n\t\t| 'container'\n\t\t| 'calendar'\n\t\t| 'calendar__header'\n\t\t| 'calendar__body'\n\t\t| 'calendar__day'\n\t\t| 'calendar__day_isCurrent'\n\t\t| 'calendar__day_isSelected'\n\t\t| 'calendar__day_isHidden'\n\t\t| 'calendar__row'\n\t\t| 'calendar__monthName'\n\t\t| 'calendar__yearsText'\n\t\t| 'button_icon__wrapper'\n\t> & { ButtonIcon?: TButtonIconProps['theme'] };\n\tdisabledDates?: Date[];\n\tselectedDate: Date;\n};\n\nexport type TCalendarFullProps = TCalendarOwnProps & TCalendarInjectedProps & WithTranslation;\n\ntype TCalendarState = {\n\tselectedDate: Date;\n};\n\n@PURE\nclass RawCalendar extends React.Component<TCalendarFullProps, TCalendarState> {\n\tstate: TCalendarState = {\n\t\tselectedDate: this.props.value || new Date(),\n\t};\n\n\tprivate getTranslatedMonthNames = () => {\n\t\treturn [\n\t\t\ttspan('calendarJanuary', 'January'),\n\t\t\ttspan('calendarFebruary', 'February'),\n\t\t\ttspan('calendarMarch', 'March'),\n\t\t\ttspan('calendarApril', 'April'),\n\t\t\ttspan('calendarMay', 'May'),\n\t\t\ttspan('calendarJune', 'June'),\n\t\t\ttspan('calendarJuly', 'July'),\n\t\t\ttspan('calendarAugust', 'August'),\n\t\t\ttspan('calendarSeptember', 'September'),\n\t\t\ttspan('calendarOctober', 'October'),\n\t\t\ttspan('calendarNovember', 'November'),\n\t\t\ttspan('calendarDecember', 'December'),\n\t\t];\n\t};\n\n\tcomponentDidUpdate(prevProps: TCalendarFullProps) {\n\t\tconst { props } = this;\n\n\t\tif (props.value !== prevProps.value) {\n\t\t\tif (props.value && isValid(props.value)) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tselectedDate: props.value,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\tselectedDate: new Date(),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { theme, value, onMouseDown } = this.props;\n\t\tconst { selectedDate } = this.state;\n\n\t\tconst currentMonthIndex = selectedDate.getMonth();\n\n\t\tconst nextMonth = addMonths(selectedDate, 1);\n\n\t\tconst startOfCurrentMonth = startOfMonth(selectedDate);\n\t\tconst startOfCurrentMonthWeek = startOfWeek(startOfCurrentMonth, {\n\t\t\tweekStartsOn: 1,\n\t\t});\n\n\t\tconst startOfNextMonth = startOfMonth(nextMonth);\n\t\tconst startOfNextMonthWeek = startOfWeek(startOfNextMonth, {\n\t\t\tweekStartsOn: 1,\n\t\t});\n\t\tlet startOfNextFullMonthWeek = startOfNextMonthWeek;\n\t\tif (startOfNextMonthWeek.getMonth() === currentMonthIndex) {\n\t\t\tstartOfNextFullMonthWeek = addWeeks(startOfNextMonthWeek, 1);\n\t\t}\n\t\tconst diffInCalendarWeeks = differenceInCalendarWeeks(startOfNextFullMonthWeek, startOfCurrentMonthWeek, {\n\t\t\tweekStartsOn: 1,\n\t\t});\n\n\t\tconst monthNames = this.getTranslatedMonthNames();\n\n\t\treturn (\n\t\t\t<div className={theme.container} onMouseDown={onMouseDown}>\n\t\t\t\t<div className={theme.calendar}>\n\t\t\t\t\t<div className={theme.calendar__monthName}>\n\t\t\t\t\t\t<Holdable onHold={this.onPrevMonthClick}>\n\t\t\t\t\t\t\t<div className={theme.button_icon__wrapper}>\n\t\t\t\t\t\t\t\t<ButtonIcon\n\t\t\t\t\t\t\t\t\ticon={iconMoveLeft}\n\t\t\t\t\t\t\t\t\ttheme={theme.ButtonIcon}\n\t\t\t\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t\t\t\t\tonClick={this.onPrevMonthClick}\n\t\t\t\t\t\t\t\t\tisFlat={true}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Holdable>\n\t\t\t\t\t\t<div className={theme.calendar__yearsText}>\n\t\t\t\t\t\t\t{monthNames[currentMonthIndex]} {selectedDate.getFullYear()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Holdable onHold={this.onNextMonthClick}>\n\t\t\t\t\t\t\t<div className={theme.button_icon__wrapper}>\n\t\t\t\t\t\t\t\t<ButtonIcon\n\t\t\t\t\t\t\t\t\ticon={iconMoveRight}\n\t\t\t\t\t\t\t\t\ttheme={theme.ButtonIcon}\n\t\t\t\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t\t\t\t\tonClick={this.onNextMonthClick}\n\t\t\t\t\t\t\t\t\tisFlat={true}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Holdable>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={theme.calendar__header}>\n\t\t\t\t\t\t<div className={theme.calendar__row}>\n\t\t\t\t\t\t\t<div className={theme.calendar__day}>{tspan('calendarMonday', 'MON')}</div>\n\t\t\t\t\t\t\t<div className={theme.calendar__day}>{tspan('calendarTuesday', 'TUE')}</div>\n\t\t\t\t\t\t\t<div className={theme.calendar__day}>{tspan('calendarWednesday', 'WED')}</div>\n\t\t\t\t\t\t\t<div className={theme.calendar__day}>{tspan('calendarThursday', 'THU')}</div>\n\t\t\t\t\t\t\t<div className={theme.calendar__day}>{tspan('calendarFriday', 'FRI')}</div>\n\t\t\t\t\t\t\t<div className={theme.calendar__day}>{tspan('calendarSaturday', 'SAT')}</div>\n\t\t\t\t\t\t\t<div className={theme.calendar__day}>{tspan('calendarSunday', 'SUN')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={theme.calendar__body}>\n\t\t\t\t\t\t{Array.from(new Array(diffInCalendarWeeks).keys()).map(i => {\n\t\t\t\t\t\t\treturn this.renderWeek(\n\t\t\t\t\t\t\t\taddWeeks(startOfCurrentMonthWeek, i),\n\t\t\t\t\t\t\t\tcurrentMonthIndex,\n\t\t\t\t\t\t\t\tselectedDate,\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t`current_${i}`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tprivate renderWeek(\n\t\tfrom: Date,\n\t\tforMonth: number,\n\t\tcurrentDate: Date,\n\t\tselectedDate: TCalendarProps['value'],\n\t\tkey?: number | string,\n\t): ReactNode {\n\t\tconst { theme, min, max, disabledDates } = this.props;\n\n\t\treturn (\n\t\t\t<div key={key} className={theme.calendar__row}>\n\t\t\t\t{Array.from(new Array(7).keys()).map(i => {\n\t\t\t\t\tconst day = addDays(from, i);\n\t\t\t\t\tconst dayMonthIndex = day.getMonth();\n\t\t\t\t\tconst isHidden = dayMonthIndex !== forMonth;\n\t\t\t\t\tconst className = classnames(theme.calendar__day, {\n\t\t\t\t\t\t[theme.calendar__day_isCurrent as string]: !isHidden && isSameDay(day, currentDate),\n\t\t\t\t\t\t[theme.calendar__day_isSelected as string]:\n\t\t\t\t\t\t\t!isHidden && selectedDate && isSameDay(day, selectedDate),\n\t\t\t\t\t\t[theme.calendar__day_isHidden as string]: isHidden,\n\t\t\t\t\t});\n\t\t\t\t\tconst dayTheme = {\n\t\t\t\t\t\tcontainer: className,\n\t\t\t\t\t};\n\t\t\t\t\tconst isDayOff =\n\t\t\t\t\t\tdisabledDates && !isUndefined(disabledDates.find(disabledDay => isSameDay(disabledDay, day)));\n\n\t\t\t\t\tconst isDisabled =\n\t\t\t\t\t\tisHidden || isDayOff || (min && isBefore(day, min)) || (max && isAfter(day, max));\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttheme={dayTheme}\n\t\t\t\t\t\t\tisDisabled={isDisabled}\n\t\t\t\t\t\t\tisFlat={true}\n\t\t\t\t\t\t\tonClick={this.onDayClick(day)}\n\t\t\t\t\t\t\tkey={i}>\n\t\t\t\t\t\t\t{day.getDate()}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tprivate onPrevMonthClick = () => {\n\t\tconst { selectedDate } = this.state;\n\n\t\tthis.setState({ selectedDate: subMonths(selectedDate, 1) });\n\t};\n\n\tprivate onNextMonthClick = () => {\n\t\tconst { selectedDate } = this.state;\n\n\t\tthis.setState({ selectedDate: addMonths(selectedDate, 1) });\n\t};\n\n\tprivate onDayClick = (day: Date) => () => {\n\t\tconst { onValueChange } = this.props;\n\t\tonValueChange && onValueChange(day);\n\t};\n}\n\nconst theme = {\n\t...css,\n\tButtonIcon: buttonIconCss,\n};\n\nexport type TCalendarProps = TCalendarOwnProps & Partial<TCalendarInjectedProps>;\nexport const Calendar = withTheme(Symbol(), theme)(withTranslation()(RawCalendar)) as React.ComponentClass<\n\tTCalendarProps\n>;\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const MoveLeftIcon: React.SFC = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 6 11\">\n\t\t\t<polygon points=\"0 5.84 5.28 11 6 10.3 1.09 5.5 6 0.7 5.28 0 0 5.16 0 5.84\" />\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const MoveRightIcon: React.SFC = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 6 11\">\n\t\t\t<polygon points=\"6 5.84 0.72 11 0 10.3 4.91 5.5 0 0.7 0.72 0 6 5.16 6 5.84\" />\n\t\t</svg>\n\t</IconWrapper>\n);\n","import { Either } from 'fp-ts/lib/Either';\n\nexport enum ProfitLossKind {\n\tProfit = '* PROFIT *',\n\tLoss = '* LOSS *',\n}\n\nexport enum ProvidedLabelType {\n\tMin = '* MIN *',\n\tMax = '* MAX *',\n}\n\nexport enum PriceValidationErrorMessages {\n\tMoreOrEqual = '* MORE_OR_EQUAL *',\n\tLessOrEqual = '* LESS_OR_EQUAL *',\n}\n\nexport type PriceValidationError = {\n\tmessage: PriceValidationErrorMessages;\n\tvalue: string;\n};\n\nexport type TakeProfitStopLossComponentData = {\n\tkind: ProfitLossKind;\n\tisSelected: boolean;\n\tisDisabled: boolean;\n\trawPrice: number;\n\tvalidatedPrice: Either<PriceValidationError, number>;\n\tminLimit: number;\n\tmaxLimit: number;\n\tstep: number;\n\tvalue: number;\n\tpossiblePL: number;\n\tprovidedLabel: ProvidedLabelType;\n\tprovidedLimit: number;\n\tinstrumentPrecision: number;\n\tisValueManuallyChanged: boolean;\n};\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { formatNumber } from 'accounting';\nimport { Checkbox } from '../../../../ui-common/checkbox/checkbox.component';\nimport { NumericStepper } from '../../../../ui-common/numeric-stepper-ava/numeric-stepper.component';\nimport { DateInput } from '../../../ui-kit/components/date-input/date-input';\nimport { Calendar } from '../../../ui-kit/components/calendar/calendar.component';\nimport * as O from 'fp-ts/lib/Option';\nimport * as E from 'fp-ts/lib/Either';\nimport { constNull, constFalse } from 'fp-ts/lib/function';\nimport { empty } from 'fp-ts/lib/Record';\nimport { TDateInputValue } from '@devexperts/react-kit/dist/components/DateInput/DateInput.model';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport {\n\tOrderEntryExecutionCheckboxes,\n\tOrderEntryExecutionVisibleFormDates,\n\tOrderEntryExecutionVisibleFormPrice,\n\tStepperData,\n\tExecutionPriceValidationError,\n\tExecutionPriceValidationErrorMessages,\n} from './order-entry-execution.model';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as css from '../order-entry-panel/theme/order-entry-panel.module.css';\nimport * as stepperCss from '../order-entry-panel/theme/numeric-stepper.child.module.css';\nimport * as steppableButtonCss from '../order-entry-panel/theme/numeric-stepper.button.module.css';\nimport * as stepperErrorCss from '../order-entry-panel/theme/numeric-stepper-error.child.module.css';\n\nconst dateInputTheme = {\n\tInput: stepperCss,\n\tSteppableInput: {\n\t\tButtonIcon: steppableButtonCss,\n\t},\n};\n\nexport type OrderEntryExecutionComponentProps = {\n\tisShownValidErrors: boolean;\n\tvisibleValues: OrderEntryExecutionCheckboxes;\n\tonToggleCheckbox: (values: OrderEntryExecutionCheckboxes) => void;\n\tisChangeable: boolean;\n\tformValues: OrderEntryExecutionVisibleFormPrice;\n\tformDate: OrderEntryExecutionVisibleFormDates;\n\tonChangeExecutionPrice: (values: OrderEntryExecutionVisibleFormPrice) => void;\n\tonChangeExecutionDates: (values: OrderEntryExecutionVisibleFormDates) => void;\n\tstepperData: RemoteData<Error, StepperData>;\n};\n\nclass OrderEntryExecutionComponentUnwrapped extends PureComponent<OrderEntryExecutionComponentProps & WithTranslation> {\n\trender() {\n\t\tconst { visibleValues, formDate, isChangeable, isShownValidErrors, formValues, stepperData } = this.props;\n\n\t\treturn (\n\t\t\t<div className={css.optionsItem}>\n\t\t\t\t<Checkbox\n\t\t\t\t\tonValueChange={this.handleToggleCheckbox('executePriceOpened')}\n\t\t\t\t\tisDisabled={isChangeable}\n\t\t\t\t\tvalue={visibleValues.executePriceOpened}>\n\t\t\t\t\t{tspan('oeExecutionExecTitle', 'Execute When Price Hits')}\n\t\t\t\t</Checkbox>\n\t\t\t\t{visibleValues.executePriceOpened && (\n\t\t\t\t\t<div className={css.info}>\n\t\t\t\t\t\t<div className={css.priceHits}>\n\t\t\t\t\t\t\t<div className={css.label}>{tspan('oeExecutionPrice', 'Price')}</div>\n\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\tformValues.priceValue,\n\t\t\t\t\t\t\t\tO.map(price => (\n\t\t\t\t\t\t\t\t\t<RemoteDataState\n\t\t\t\t\t\t\t\t\t\tdata={stepperData}\n\t\t\t\t\t\t\t\t\t\tsuccess={stepperData => this.renderStepper(price, stepperData)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{isShownValidErrors && this.renderError()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={css.cancelOnDateCheckbox}>\n\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\tonValueChange={this.handleToggleCheckbox('expireAtActive')}\n\t\t\t\t\t\t\t\tvalue={visibleValues.expireAtActive}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={css.cancelOnDate}>\n\t\t\t\t\t\t\t<div className={css.label}>{tspan('oeExecutionCoD', 'Cancel on Date')}</div>\n\t\t\t\t\t\t\t<DateInput\n\t\t\t\t\t\t\t\tvalue={formDate.expireAt}\n\t\t\t\t\t\t\t\tonValueChange={this.handleDateInput}\n\t\t\t\t\t\t\t\tCalendar={Calendar}\n\t\t\t\t\t\t\t\tmin={formDate.disabledDaysMin}\n\t\t\t\t\t\t\t\tisDisabled={!visibleValues.expireAtActive}\n\t\t\t\t\t\t\t\ttheme={dateInputTheme}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderStepper = (price: number, { priceIncrement, precision }: StepperData) => {\n\t\tconst {\n\t\t\tformValues: { executionPriceValidated },\n\t\t\tisShownValidErrors,\n\t\t} = this.props;\n\n\t\tconst theme = {\n\t\t\tInput: stepperCss,\n\t\t\tSteppableInput: {\n\t\t\t\tInput: {\n\t\t\t\t\t...(E.isLeft(executionPriceValidated) && isShownValidErrors ? stepperErrorCss : empty),\n\t\t\t\t},\n\t\t\t\tButtonIcon: steppableButtonCss,\n\t\t\t},\n\t\t};\n\n\t\treturn (\n\t\t\t<NumericStepper\n\t\t\t\tvalue={price}\n\t\t\t\tmin={priceIncrement}\n\t\t\t\tmax={1000000}\n\t\t\t\tstep={priceIncrement}\n\t\t\t\tformatter={(inputValue: number) => formatNumber(inputValue, precision)}\n\t\t\t\tonIncrement={this.handlePriceInput}\n\t\t\t\tonDecrement={this.handlePriceInput}\n\t\t\t\tonValueChange={this.handlePriceInput}\n\t\t\t\ttheme={theme}\n\t\t\t/>\n\t\t);\n\t};\n\n\trenderError = () =>\n\t\tpipe(\n\t\t\tthis.props.formValues.executionPriceValidated,\n\t\t\tE.fold(error => <div className={css.validationError}>{this.stringifyPriceErrors(error)}</div>, constNull),\n\t\t);\n\n\tprivate stringifyPriceErrors = ({ message, hiRange, loRange, step }: ExecutionPriceValidationError) => {\n\t\tswitch (message) {\n\t\t\tcase ExecutionPriceValidationErrorMessages.General:\n\t\t\t\treturn tspan('oeExecutionValidationErrorInvalidValue', { defaultValue: 'Invalid value' });\n\t\t\tcase ExecutionPriceValidationErrorMessages.OverRange:\n\t\t\t\treturn tspan('oeExecutionValidationErrorOverRange', {\n\t\t\t\t\tdefaultValue: 'You can issue order starting from {{hiRange}}',\n\t\t\t\t\thiRange,\n\t\t\t\t});\n\t\t\tcase ExecutionPriceValidationErrorMessages.BelowRange:\n\t\t\t\treturn tspan('oeExecutionValidationErrorBelowRange', {\n\t\t\t\t\tdefaultValue: 'You can issue order lower than {{loRange}}',\n\t\t\t\t\tloRange,\n\t\t\t\t});\n\t\t\tcase ExecutionPriceValidationErrorMessages.NotInRange:\n\t\t\t\treturn tspan('oeExecutionValidationErrorNotInRange', {\n\t\t\t\t\tdefaultValue: 'You can issue order starting from {{hiRange}} or lower than {{loRange}}',\n\t\t\t\t\tloRange,\n\t\t\t\t\thiRange,\n\t\t\t\t});\n\t\t\tcase ExecutionPriceValidationErrorMessages.WrongStepping:\n\t\t\t\treturn tspan('oeExecutionValidationErrorWrongStepping', {\n\t\t\t\t\tdefaultValue: 'Minimum step is {{step}}',\n\t\t\t\t\tstep,\n\t\t\t\t});\n\t\t}\n\t};\n\n\thandleToggleCheckbox = (name: keyof OrderEntryExecutionCheckboxes) => (value?: boolean) => {\n\t\tconst { onToggleCheckbox, visibleValues } = this.props;\n\n\t\tonToggleCheckbox({\n\t\t\t...visibleValues,\n\t\t\texpireAtActive: name === 'executePriceOpened' && value === false,\n\t\t\t[name]: pipe(\n\t\t\t\tvalue,\n\t\t\t\tO.fromNullable,\n\t\t\t\tO.getOrElse(constFalse),\n\t\t\t),\n\t\t});\n\t};\n\n\thandlePriceInput = (value: number) => {\n\t\tconst { onChangeExecutionPrice, formValues } = this.props;\n\t\tonChangeExecutionPrice({ ...formValues, priceValue: O.some(value) });\n\t};\n\n\thandleDateInput = (date: TDateInputValue) => {\n\t\tconst { onChangeExecutionDates, formDate } = this.props;\n\t\tonChangeExecutionDates({ ...formDate, expireAt: date });\n\t};\n}\n\nexport const OrderEntryExecutionComponent = withTranslation()(OrderEntryExecutionComponentUnwrapped);\n","import { combineContext, ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { OrderEntryExecutionComponent } from '../../components/order-entry-execution/order-entry-execution.component';\nimport { none } from 'fp-ts/lib/Option';\nimport { OrderEntryViewModel } from '../../../../view-model/order-entry/order-entry.view-model';\nimport { left } from 'fp-ts/lib/Either';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { ExecutionPriceValidationErrorMessages } from '../../../../model/order-entry/order-entry.model';\n\nconst empty = '';\n\nexport type OrderEntryExecutionContext = {\n\torderEntryViewModel: OrderEntryViewModel;\n};\n\nexport const OrderEntryExecutionContainer = combineContext(ask<OrderEntryExecutionContext>(), e => {\n\tconst {\n\t\tonToggleExecutionCheckboxes,\n\t\tonChangeExecutionPrice,\n\t\tonChangeExecutionDates,\n\t\texecutionCheckboxes$,\n\t\texecutionPrice$,\n\t\texecutionDates$,\n\t\tinitExecutionDates,\n\t\tpriceIncrement$,\n\t\tprecision$,\n\t} = e.orderEntryViewModel;\n\n\treturn withRXWithDefaults(OrderEntryExecutionComponent)(() => ({\n\t\tdefaultProps: {\n\t\t\tonToggleCheckbox: onToggleExecutionCheckboxes,\n\t\t\tonChangeExecutionPrice,\n\t\t\tonChangeExecutionDates,\n\t\t\tvisibleValues: {\n\t\t\t\texecutePriceOpened: false,\n\t\t\t\texpireAtActive: false,\n\t\t\t},\n\t\t\tformValues: {\n\t\t\t\tpriceValue: none,\n\t\t\t\texecutionPriceValidated: left({\n\t\t\t\t\tmessage: ExecutionPriceValidationErrorMessages.General,\n\t\t\t\t\thiRange: empty,\n\t\t\t\t\tloRange: empty,\n\t\t\t\t\tstep: empty,\n\t\t\t\t}),\n\t\t\t},\n\t\t\tformDate: initExecutionDates,\n\t\t\tstepperData: pending,\n\t\t},\n\t\tprops: {\n\t\t\tvisibleValues: executionCheckboxes$,\n\t\t\tformValues: executionPrice$,\n\t\t\tformDate: executionDates$,\n\t\t\tstepperData: combineLatestRD(priceIncrement$, precision$).pipe(\n\t\t\t\tmapRD(([priceIncrement, precision]) => ({ priceIncrement, precision })),\n\t\t\t),\n\t\t},\n\t}));\n});\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const ErrorIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 40 40\">\n\t\t\t<path\n\t\t\t\tfill=\"#ec1b1b\"\n\t\t\t\td=\"M30.059-.422L17.4-22.359a2.365 2.365 0 0 0-1.345-1.134 2.683 2.683 0 0 0-1.74 0 2.365 2.365 0 0 0-1.345 1.134L.316-.422a2.675 2.675 0 0 0-.263 1.714A2.53 2.53 0 0 0 .9 2.769a2.385 2.385 0 0 0 1.635.606h25.309a2.385 2.385 0 0 0 1.635-.606 2.53 2.53 0 0 0 .844-1.477 2.675 2.675 0 0 0-.264-1.714zm-1.477.844a.851.851 0 0 1-.026.844.768.768 0 0 1-.712.422H2.531a.768.768 0 0 1-.712-.422.851.851 0 0 1-.026-.844l12.656-21.938a.826.826 0 0 1 .738-.422.826.826 0 0 1 .738.422zm-13.394-4.43a1.431 1.431 0 0 1 1.055.422 1.431 1.431 0 0 1 .422 1.055 1.431 1.431 0 0 1-.422 1.055 1.431 1.431 0 0 1-1.055.422 1.431 1.431 0 0 1-1.055-.422 1.431 1.431 0 0 1-.422-1.055 1.431 1.431 0 0 1 .422-1.055 1.431 1.431 0 0 1 1.055-.422zm-.58-11.18a.677.677 0 0 0-.5.185.468.468 0 0 0-.132.448l.369 8.912a.554.554 0 0 0 .185.4.61.61 0 0 0 .448.185h.422a.61.61 0 0 0 .448-.185.61.61 0 0 0 .185-.448l.369-8.859a.468.468 0 0 0-.133-.45.677.677 0 0 0-.5-.185zm.58 11.18a1.431 1.431 0 0 1 1.055.422 1.431 1.431 0 0 1 .422 1.055 1.431 1.431 0 0 1-.422 1.055 1.431 1.431 0 0 1-1.055.422 1.431 1.431 0 0 1-1.055-.422 1.431 1.431 0 0 1-.422-1.055 1.431 1.431 0 0 1 .422-1.055 1.431 1.431 0 0 1 1.055-.422z\"\n\t\t\t\ttransform=\"translate(5 30)\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport * as cn from 'classnames';\nimport { PureComponent } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { formatMoney, formatNumber } from 'accounting';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport * as E from 'fp-ts/lib/Either';\nimport { constNull } from 'fp-ts/lib/function';\nimport {\n\tNumericStepper,\n\tTNumericStepperFullProps,\n} from '../../ui-common/numeric-stepper-ava/numeric-stepper.component';\nimport { MakeTheme } from '../../utils/theme.utils';\nimport {\n\tProfitLossKind,\n\tProvidedLabelType,\n\tTakeProfitStopLossComponentData,\n\tPriceValidationError,\n\tPriceValidationErrorMessages,\n} from './takeprofit-stoploss-panel.model';\nimport { tspan, TRANSLATION_PLACEHOLDER } from '../../utils/i18n.utils';\nimport { TCheckboxProps, Checkbox } from '../checkbox/checkbox.component';\nimport { ErrorIcon } from '../../ui-desktop/ui-kit/components/icons/error.icon';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as stepperCss from './theme/numeric-stepper.child.module.css';\nimport * as stepperButtonCss from './theme/numeric-stepper.button.module.css';\nimport * as css from './theme/takeprofit-stoploss-panel.module.css';\n\nexport type TakeProfitStopLossComponentProps = {\n\tdata: TakeProfitStopLossComponentData;\n\tonValueChange: (data: TakeProfitStopLossComponentData) => void;\n\tisShownValidErrors: boolean;\n\tcurrencySymbol: string;\n\ttheme: MakeTheme<\n\t\t| 'content'\n\t\t| 'controls'\n\t\t| 'element'\n\t\t| 'controlsWrapper'\n\t\t| 'profitControlsWrapper'\n\t\t| 'checkboxWrapper'\n\t\t| 'label'\n\t\t| 'priceWrapper'\n\t\t| 'priceLabel'\n\t\t| 'priceValue'\n\t\t| 'limitLabel'\n\t\t| 'plLabel'\n\t\t| 'error'\n\t\t| 'errorIcon'\n\t> & {\n\t\tCheckbox?: TCheckboxProps['theme'];\n\t\tNumericStepper?: TNumericStepperFullProps['theme'];\n\t};\n};\n// this function is needed to prevent negative input, but keep the input values less than the required\nconst handleNegativeValue = (newValue: number) => {\n\tif (newValue < 0) {\n\t\treturn 0;\n\t}\n\treturn newValue;\n};\n\nconst steppableInputTheme = {\n\tInput: stepperCss,\n\tSteppableInput: {\n\t\tButtonIcon: stepperButtonCss,\n\t},\n};\n\nclass TakeProfitStopLossComponentUnwrapped extends PureComponent<TakeProfitStopLossComponentProps & WithTranslation> {\n\trender() {\n\t\tconst {\n\t\t\tisShownValidErrors,\n\t\t\tcurrencySymbol,\n\t\t\ttheme,\n\t\t\tdata: {\n\t\t\t\tkind,\n\t\t\t\trawPrice,\n\t\t\t\tisSelected,\n\t\t\t\tisDisabled,\n\t\t\t\tminLimit,\n\t\t\t\tmaxLimit,\n\t\t\t\tvalue,\n\t\t\t\tstep,\n\t\t\t\tpossiblePL,\n\t\t\t\tprovidedLabel,\n\t\t\t\tprovidedLimit,\n\t\t\t\tinstrumentPrecision,\n\t\t\t},\n\t\t} = this.props;\n\n\t\tconst PLLabel = this.getPLLabel(kind);\n\n\t\tconst controlsWrapperClassname = cn(theme.controlsWrapper, {\n\t\t\t[theme.profitControlsWrapper as string]: this.getPLLabel(kind) === 'Profit',\n\t\t});\n\n\t\tconst min = isShownValidErrors ? minLimit : -Infinity;\n\t\tconst max = isShownValidErrors ? maxLimit : Infinity;\n\n\t\tconst label = this.stringifyProvidedLabel(providedLabel);\n\t\tconst limit = formatNumber(providedLimit, instrumentPrecision);\n\n\t\treturn (\n\t\t\t<div className={theme.content}>\n\t\t\t\t<div className={theme.checkboxWrapper}>\n\t\t\t\t\t<Checkbox\n\t\t\t\t\t\tonValueChange={this.handleCheckboxChange}\n\t\t\t\t\t\tvalue={isSelected}\n\t\t\t\t\t\tisDisabled={isDisabled}\n\t\t\t\t\t\ttheme={theme.Checkbox}>\n\t\t\t\t\t\t{this.getCheckboxLabel(kind)}\n\t\t\t\t\t</Checkbox>\n\t\t\t\t</div>\n\t\t\t\t{isSelected && (\n\t\t\t\t\t<div className={controlsWrapperClassname}>\n\t\t\t\t\t\t<div className={theme.controls}>\n\t\t\t\t\t\t\t<div className={theme.priceWrapper}>\n\t\t\t\t\t\t\t\t<span className={theme.priceLabel}>\n\t\t\t\t\t\t\t\t\t{tspan('takeProfitStopLossPanelPrice', 'Price')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span className={theme.priceValue}>{formatNumber(rawPrice, instrumentPrecision)}%</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<NumericStepper\n\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\tformatter={this.formatNumericStepperValue}\n\t\t\t\t\t\t\t\tmin={min}\n\t\t\t\t\t\t\t\tmax={max}\n\t\t\t\t\t\t\t\tstep={step}\n\t\t\t\t\t\t\t\tonValueChange={this.handleValueChange}\n\t\t\t\t\t\t\t\ttheme={{ ...steppableInputTheme, ...theme.NumericStepper }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className={cn(theme.label, theme.limitLabel)}>{`${label}: ${limit}`}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={theme.element}>\n\t\t\t\t\t\t\t<div className={theme.label}>\n\t\t\t\t\t\t\t\t{tspan(\n\t\t\t\t\t\t\t\t\t'takeProfitStopLossPanelPossiblePL',\n\t\t\t\t\t\t\t\t\t'Possible',\n\t\t\t\t\t\t\t\t\t`${TRANSLATION_PLACEHOLDER} ${PLLabel}, ${currencySymbol}`,\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={cn(theme.label, theme.plLabel)}>\n\t\t\t\t\t\t\t\t{formatMoney(possiblePL, { format: '%v' })}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{isShownValidErrors && this.renderError()}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tformatNumericStepperValue = (value: number) => {\n\t\tconst { instrumentPrecision } = this.props.data;\n\t\treturn formatNumber(value, instrumentPrecision);\n\t};\n\n\tprivate renderError = () => {\n\t\tconst { theme, data } = this.props;\n\n\t\treturn pipe(\n\t\t\tdata.validatedPrice,\n\t\t\tE.fold(\n\t\t\t\terror => (\n\t\t\t\t\t<div className={theme.error}>\n\t\t\t\t\t\t<div className={theme.errorIcon}>\n\t\t\t\t\t\t\t<ErrorIcon />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{this.stringifyError(error)}\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\tconstNull,\n\t\t\t),\n\t\t);\n\t};\n\n\tprivate stringifyError = ({ message, value }: PriceValidationError) => {\n\t\tswitch (message) {\n\t\t\tcase PriceValidationErrorMessages.MoreOrEqual:\n\t\t\t\treturn tspan('takeProfitStopLossPanelPriceShallBeMoreOrEqual', {\n\t\t\t\t\tdefaultValue: 'Price shall be more or equal to {{value}}',\n\t\t\t\t\tvalue,\n\t\t\t\t});\n\t\t\tcase PriceValidationErrorMessages.LessOrEqual:\n\t\t\t\treturn tspan('takeProfitStopLossPanelPriceShallBeLessOrEqual', {\n\t\t\t\t\tdefaultValue: 'Price shall be less or equal to {{value}}',\n\t\t\t\t\tvalue,\n\t\t\t\t});\n\t\t}\n\t};\n\n\thandleCheckboxChange = () => {\n\t\tconst { onValueChange, data } = this.props;\n\n\t\tconst updatedData = {\n\t\t\t...data,\n\t\t\tisSelected: !data.isSelected,\n\t\t\tisValueManuallyChanged: false,\n\t\t};\n\n\t\tonValueChange(updatedData);\n\t};\n\n\thandleValueChange = (newValue: number) => {\n\t\tconst { onValueChange, data } = this.props;\n\n\t\tconst value = handleNegativeValue(newValue);\n\n\t\tconst updatedData = {\n\t\t\t...data,\n\t\t\tvalue,\n\t\t\tisValueManuallyChanged: true,\n\t\t};\n\n\t\tonValueChange(updatedData);\n\t};\n\n\tprivate getCheckboxLabel = (PLKind: ProfitLossKind) => {\n\t\tswitch (PLKind) {\n\t\t\tcase ProfitLossKind.Profit:\n\t\t\t\treturn tspan('takeProfitStopLossPanelTakeProfit', 'Take Profit');\n\t\t\tcase ProfitLossKind.Loss:\n\t\t\t\treturn tspan('takeProfitStopLossPanelStopLoss', 'Stop Loss');\n\t\t}\n\t};\n\n\tprivate getPLLabel = (PLKind: ProfitLossKind): string => {\n\t\tconst { t } = this.props;\n\n\t\tswitch (PLKind) {\n\t\t\tcase ProfitLossKind.Profit:\n\t\t\t\treturn t('takeProfitStopLossPanelProfit', 'Profit');\n\t\t\tcase ProfitLossKind.Loss:\n\t\t\t\treturn t('takeProfitStopLossPanelLoss', 'Loss');\n\t\t}\n\t};\n\n\tprivate stringifyProvidedLabel = (providedLabel: ProvidedLabelType): string => {\n\t\tconst { t } = this.props;\n\n\t\tswitch (providedLabel) {\n\t\t\tcase ProvidedLabelType.Min:\n\t\t\t\treturn t('takeProfitStopLossPanelMin', 'Min');\n\t\t\tcase ProvidedLabelType.Max:\n\t\t\t\treturn t('takeProfitStopLossPanelMax', 'Max');\n\t\t}\n\t};\n}\n\nconst wTheme = {\n\t...css,\n};\n\nexport const TakeProfitStopLossComponent = withTranslation()(\n\twithTheme(Symbol(), wTheme)(TakeProfitStopLossComponentUnwrapped),\n);\n","import * as React from 'react';\nimport { PureComponent, Fragment } from 'react';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { TakeProfitStopLossComponent } from '../../../../ui-common/takeprofit-stoploss-panel/takeprofit-stoploss-panel.component';\nimport {\n\tTakeProfitStopLossComponentData,\n\tProfitLossKind,\n} from '../../../../ui-common/takeprofit-stoploss-panel/takeprofit-stoploss-panel.model';\nimport { OrderEntryTakeProfitStopLossData } from './order-entry-takeprofit-stoploss.model';\n\nimport * as css from './theme/order-entry-takeprofit-stoploss.module.css';\n\nexport type OrderEntryTakeProfitStopLossProps = {\n\tdata: RemoteData<Error, OrderEntryTakeProfitStopLossData>;\n\tonValueChange: (value: OrderEntryTakeProfitStopLossData) => void;\n\tisShownValidErrors: boolean;\n\tcurrencySymbol: string;\n};\n\nexport class OrderEntryTakeProfitStopLoss extends PureComponent<OrderEntryTakeProfitStopLossProps> {\n\trender() {\n\t\tconst { data } = this.props;\n\n\t\treturn <RemoteDataState data={data} success={data => this.renderSuccess(data)} />;\n\t}\n\n\tprivate renderSuccess(data: OrderEntryTakeProfitStopLossData) {\n\t\tconst { isShownValidErrors, currencySymbol } = this.props;\n\t\tconst { takeProfitData, stopLossData } = data;\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className={css.wrapper}>\n\t\t\t\t\t<TakeProfitStopLossComponent\n\t\t\t\t\t\tonValueChange={this.handleValueChange(data)}\n\t\t\t\t\t\tdata={takeProfitData}\n\t\t\t\t\t\tisShownValidErrors={isShownValidErrors}\n\t\t\t\t\t\tcurrencySymbol={currencySymbol}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className={css.wrapper}>\n\t\t\t\t\t<TakeProfitStopLossComponent\n\t\t\t\t\t\tonValueChange={this.handleValueChange(data)}\n\t\t\t\t\t\tdata={stopLossData}\n\t\t\t\t\t\tisShownValidErrors={isShownValidErrors}\n\t\t\t\t\t\tcurrencySymbol={currencySymbol}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\thandleValueChange = (data: OrderEntryTakeProfitStopLossData) => (changedValue: TakeProfitStopLossComponentData) => {\n\t\tconst { takeProfitData, stopLossData } = data;\n\t\tconst { onValueChange } = this.props;\n\n\t\tswitch (changedValue.kind) {\n\t\t\tcase ProfitLossKind.Profit:\n\t\t\t\tonValueChange({\n\t\t\t\t\ttakeProfitData: changedValue,\n\t\t\t\t\tstopLossData,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase ProfitLossKind.Loss:\n\t\t\t\tonValueChange({\n\t\t\t\t\ttakeProfitData,\n\t\t\t\t\tstopLossData: changedValue,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t};\n}\n","import { combineContext, ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { OrderEntryTakeProfitStopLoss } from '../../components/order-entry-takeprofit-stoploss/order-entry-takeprofit-stoploss.component';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { OrderEntryViewModel } from '../../../../view-model/order-entry/order-entry.view-model';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { toOrderEntryTakeProfitStopLossComponentData } from './order-entry-takeprofit-stoploss.utils';\n\nexport type OrderEntryTakeProfitStopLossContext = {\n\torderEntryViewModel: OrderEntryViewModel;\n};\n\nexport const OrderEntryTakeProfitStopLossContainer = combineContext(ask<OrderEntryTakeProfitStopLossContext>(), e => {\n\tconst { takeProfitStopLossValue$, onTakeProfitStopLossValueChange, currencySymbol$ } = e.orderEntryViewModel;\n\n\treturn withRXWithDefaults(OrderEntryTakeProfitStopLoss)(() => ({\n\t\tdefaultProps: {\n\t\t\tdata: pending,\n\t\t\tonValueChange: onTakeProfitStopLossValueChange,\n\t\t\tcurrencySymbol: '',\n\t\t},\n\t\tprops: {\n\t\t\tdata: takeProfitStopLossValue$.pipe(mapRD(value => toOrderEntryTakeProfitStopLossComponentData(value))),\n\t\t\tcurrencySymbol: currencySymbol$,\n\t\t},\n\t}));\n});\n","import { OrderEntryTakeProfitStopLossData } from '../../../../model/takeprofit-stoploss/takeprofit-stoploss.model';\nimport { OrderEntryTakeProfitStopLossData as OrderEntryTakeProfitStopLossComponentData } from '../../components/order-entry-takeprofit-stoploss/order-entry-takeprofit-stoploss.model';\n\nexport const toOrderEntryTakeProfitStopLossComponentData = (\n\tvalue: OrderEntryTakeProfitStopLossData,\n): OrderEntryTakeProfitStopLossComponentData => ({\n\ttakeProfitData: value.takeProfitData,\n\tstopLossData: value.stopLossData,\n});\n","import * as React from 'react';\nimport { ReactNode } from 'react';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { PURE } from '@devexperts/react-kit/dist/utils/pure';\nimport { MakeTheme } from '../../utils/theme.utils';\nimport * as css from './theme/symbol.module.css';\n\nexport type SymbolProps = {\n\ttitle: ReactNode;\n\tsubtitle?: ReactNode;\n\ttheme: MakeTheme<'container' | 'title' | 'subtitle'>;\n};\n\n@PURE\nclass RawSymbolComponent extends React.Component<SymbolProps> {\n\trender() {\n\t\tconst { title, subtitle, theme } = this.props;\n\t\treturn (\n\t\t\t<div className={theme.container}>\n\t\t\t\t<div className={theme.title}>{title}</div>\n\t\t\t\t{subtitle && <div className={theme.subtitle}>{subtitle}</div>}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst wTheme = { ...css };\n\nexport const SymbolComponent = withTheme(Symbol(), wTheme)(RawSymbolComponent);\n","import * as React from 'react';\nimport { IconWrapper } from '../icon-wrapper/icon-wrapper.component';\n\nexport const ExclamationIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 40 40\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M35.06 30.58L22.4 8.64a2.37 2.37 0 0 0-1.35-1.13 2.68 2.68 0 0 0-1.74 0 2.37 2.37 0 0 0-1.34 1.13L5.32 30.58a2.67 2.67 0 0 0-.27 1.71 2.53 2.53 0 0 0 .85 1.48 2.38 2.38 0 0 0 1.64.6h25.3a2.38 2.38 0 0 0 1.64-.6 2.53 2.53 0 0 0 .84-1.48 2.67 2.67 0 0 0-.26-1.71zm-1.48.84a.85.85 0 0 1-.02.85.77.77 0 0 1-.72.42H7.54a.77.77 0 0 1-.72-.42.85.85 0 0 1-.03-.85L19.45 9.48a.83.83 0 0 1 .74-.42.83.83 0 0 1 .73.42zM20.18 27a1.43 1.43 0 0 1 1.06.42 1.43 1.43 0 0 1 .43 1.06 1.43 1.43 0 0 1-.43 1.05 1.43 1.43 0 0 1-1.05.43 1.43 1.43 0 0 1-1.06-.43 1.43 1.43 0 0 1-.42-1.05 1.43 1.43 0 0 1 .42-1.06A1.43 1.43 0 0 1 20.2 27zm-.57-11.18a.68.68 0 0 0-.5.19.47.47 0 0 0-.13.45l.37 8.9a.55.55 0 0 0 .18.4.61.61 0 0 0 .45.2h.42a.61.61 0 0 0 .45-.2.61.61 0 0 0 .18-.44l.37-8.86a.47.47 0 0 0-.13-.45.68.68 0 0 0-.5-.19zM20.19 27a1.43 1.43 0 0 1 1.05.42 1.43 1.43 0 0 1 .43 1.06 1.43 1.43 0 0 1-.43 1.05 1.43 1.43 0 0 1-1.05.43 1.43 1.43 0 0 1-1.06-.43 1.43 1.43 0 0 1-.42-1.05 1.43 1.43 0 0 1 .42-1.06A1.43 1.43 0 0 1 20.2 27z\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { memo, ReactNode } from 'react';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { ExclamationIcon } from '../../icons/exclamation.icon';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as css from './theme/error-panel.module.css';\n\nexport type ErrorPanelProps = {\n\terror: Option<string>;\n\ttitle: ReactNode;\n};\n\nexport const ErrorPanel = memo<ErrorPanelProps>(props =>\n\tpipe(\n\t\tprops.error,\n\t\tO.map(error => (\n\t\t\t<div className={css.error}>\n\t\t\t\t<div className={css.error__icon}>\n\t\t\t\t\t<ExclamationIcon />\n\t\t\t\t</div>\n\t\t\t\t<div className={css.error__text}>\n\t\t\t\t\t<div className={css.error__title}>{props.title}</div>\n\t\t\t\t\t<div className={css.error__message}>{error}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)),\n\t\tO.toNullable,\n\t),\n);\n","import * as React from 'react';\nimport { PureComponent, Fragment } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { empty } from 'fp-ts/lib/Record';\nimport { SidePanel } from '../../../../ui-common/side-panel/side-panel.component';\nimport { Button } from '../../../../ui-common/button/button.component';\nimport { ButtonCta } from '../../../../ui-common/button/button-cta.component';\nimport { Optional } from '../../../../ui-common/optional/optional.component';\nimport { OrderEntryPanelSide } from '../order-entry-panel-side/order-entry-panel-side.component';\nimport { NumericStepper } from '../../../../ui-common/numeric-stepper-ava/numeric-stepper.component';\nimport { formatMoney, formatNumber } from 'accounting';\nimport {\n\tOrderEntryPanelData,\n\tOrderEntrySideValue,\n\tOrderEntryValue,\n\tOrderEntrySide,\n\tAmountValidationError,\n\tAmountValidationErrorMessages,\n} from './order-entry-panel.model';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { RouteLink } from '../../../../ui-common/route-link/containers/route-link.container';\nimport { routes } from '../../../../ui-common/routes';\nimport { CloseButton } from '../../../../ui-common/close-button/close-button.component';\nimport { RouteLinkRenderProps } from '../../../../ui-common/route-link/components/route-link.component';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { Either } from 'fp-ts/lib/Either';\nimport * as E from 'fp-ts/lib/Either';\nimport { OrderEntryExecutionContainer } from '../../containers/order-entry-execution/order-entry-execution.container';\nimport { OrderEntryTakeProfitStopLossContainer } from '../../containers/order-entry-takeprofit-stoploss/order-entry-takeprofit-stoploss.container';\nimport { constUndefined, constNull, constant, constTrue, constFalse } from 'fp-ts/lib/function';\nimport { InfoBox } from '../../../../ui-common/info-box/info-box.component';\nimport { SymbolComponent } from '../../../../ui-common/symbol/symbol';\nimport { tspan, TRANSLATION_PLACEHOLDER } from '../../../../utils/i18n.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { ErrorPanel } from '../../../../ui-common/error-panel/components/error-panel.component';\nimport * as cn from 'classnames';\nimport { RegistrationInfoBox } from '../../../ui-kit/components/preview-mode/components/registration-info-box.component';\nimport { DisableOverlay } from '../../../ui-kit/components/preview-mode/components/disable-overlay.component';\n\nimport * as css from './theme/order-entry-panel.module.css';\nimport * as buttonCss from './theme/button.child.module.css';\nimport * as buttonDepositCss from './theme/button-deposit.child.module.css';\nimport * as stepperCss from './theme/numeric-stepper.child.module.css';\nimport * as stepperButtonCss from './theme/numeric-stepper.button.module.css';\nimport * as infoBoxCss from './theme/info-box.child.module.css';\nimport * as sidePanelCss from './theme/side-panel.child.module.css';\nimport * as symbolCss from './theme/symbol.child.module.css';\nimport * as registrationInfoBox from './theme/registration-info-box.child.module.css';\n\nconst steppableInputTheme = {\n\tInput: stepperCss,\n\tSteppableInput: {\n\t\tButtonIcon: stepperButtonCss,\n\t},\n};\n\nconst sidePanelTheme = { SidePanel: sidePanelCss };\n\nexport type OrderEntryPanelProps = {\n\taction: OrderEntrySide;\n\tplKind: string;\n\telementId: Either<string, string>; //left - order, right - category\n\tdata: RemoteData<Error, OrderEntryPanelData>;\n\terror: Option<string>;\n\tlot: Option<number>;\n\taccountBalance: Option<number>;\n\tmoreOptionsOpened: boolean;\n\tonFooterButtonClick: (isValid: boolean) => () => void;\n\tonMoreOptionsClick: (value: boolean) => void;\n\tresult: number;\n\tsymbol: string;\n\tisValid: boolean;\n\tisShownValidErrors: boolean;\n\tonValueChange: (value: OrderEntryValue) => void;\n\tcurrencySymbol: string;\n\tisSubmitAllowed: RemoteData<Error, boolean>;\n\tisEditAllowed: RemoteData<Error, boolean>;\n\tisEdit?: boolean;\n\tpreviewMode: Option<boolean>;\n};\n\nexport const OrderEntryPanel = combineContext(\n\tRouteLink,\n\tOrderEntryExecutionContainer,\n\tOrderEntryTakeProfitStopLossContainer,\n\t(RouteLink, OrderEntryExecutionContainer, OrderEntryTakeProfitStopLossContainer) =>\n\t\twithTranslation()(\n\t\t\tclass OrderEntryPanel extends PureComponent<OrderEntryPanelProps & WithTranslation> {\n\t\t\t\trender() {\n\t\t\t\t\tconst { data } = this.props;\n\n\t\t\t\t\treturn <RemoteDataState data={data} success={data => this.renderSuccess(data)} />;\n\t\t\t\t}\n\n\t\t\t\tprivate renderSuccess = (data: OrderEntryPanelData) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tlot,\n\t\t\t\t\t\tresult,\n\t\t\t\t\t\tsymbol,\n\t\t\t\t\t\telementId,\n\t\t\t\t\t\tmoreOptionsOpened,\n\t\t\t\t\t\taction,\n\t\t\t\t\t\tcurrencySymbol,\n\t\t\t\t\t\tisEdit,\n\t\t\t\t\t\tpreviewMode,\n\t\t\t\t\t} = this.props;\n\t\t\t\t\tconst {\n\t\t\t\t\t\tdescription,\n\t\t\t\t\t\tsell,\n\t\t\t\t\t\tbuy,\n\t\t\t\t\t\tmarginImpact,\n\t\t\t\t\t\tprecision,\n\t\t\t\t\t\tstep,\n\t\t\t\t\t\tminOrderSize,\n\t\t\t\t\t\tmaxOrderSize,\n\t\t\t\t\t\tamountValidated,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tamountPrecision,\n\t\t\t\t\t\tunitName,\n\t\t\t\t\t} = data;\n\t\t\t\t\tconst cnMoreOptions = cn(css.moreOptions, {\n\t\t\t\t\t\t[css.moreOptions_opened]: moreOptionsOpened,\n\t\t\t\t\t});\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<SidePanel\n\t\t\t\t\t\t\theader={this.renderHeader(description)}\n\t\t\t\t\t\t\tfooter={this.renderFooter(value.side)}\n\t\t\t\t\t\t\ttheme={sidePanelTheme}\n\t\t\t\t\t\t\tscrollable>\n\t\t\t\t\t\t\t<div className={css.innerPaddedTopmostWrapper}>\n\t\t\t\t\t\t\t\t{isEdit && (\n\t\t\t\t\t\t\t\t\t<SymbolComponent\n\t\t\t\t\t\t\t\t\t\ttheme={symbolCss}\n\t\t\t\t\t\t\t\t\t\ttitle={symbol}\n\t\t\t\t\t\t\t\t\t\tsubtitle={pipe(\n\t\t\t\t\t\t\t\t\t\t\tdescription,\n\t\t\t\t\t\t\t\t\t\t\tO.getOrElse(constant('')),\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div className={css.operations}>\n\t\t\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\t\t\telementId,\n\t\t\t\t\t\t\t\t\t\tE.map(categoryId => (\n\t\t\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\t\t\t\t\t\t\tto={routes.trade.category.symbol.action.root}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcategoryId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsymbol,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction: 'sell',\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\trender={this.renderSide(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsell,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tOrderEntrySide.Sell,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprecision,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\t\t\t\t\t\t\tto={routes.trade.category.symbol.action.root}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcategoryId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsymbol,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction: 'buy',\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\trender={this.renderSide(buy, OrderEntrySide.Buy, precision, value)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\t\t\t\tE.getOrElse(() => (\n\t\t\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t<OrderEntryPanelSide\n\t\t\t\t\t\t\t\t\t\t\t\t\tamount={sell.amount}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpipSettings={sell.pipSettings}\n\t\t\t\t\t\t\t\t\t\t\t\t\tside={OrderEntrySide.Sell}\n\t\t\t\t\t\t\t\t\t\t\t\t\tprecision={precision}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisActive={OrderEntrySide.Sell === action}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisDisabled={OrderEntrySide.Sell !== action}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={constUndefined}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<OrderEntryPanelSide\n\t\t\t\t\t\t\t\t\t\t\t\t\tamount={buy.amount}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpipSettings={buy.pipSettings}\n\t\t\t\t\t\t\t\t\t\t\t\t\tside={OrderEntrySide.Buy}\n\t\t\t\t\t\t\t\t\t\t\t\t\tprecision={precision}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisActive={OrderEntrySide.Buy === action}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisDisabled={OrderEntrySide.Buy !== action}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={constUndefined}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={css.info}>\n\t\t\t\t\t\t\t\t\t<div className={css.element}>\n\t\t\t\t\t\t\t\t\t\t<div className={css.label}>\n\t\t\t\t\t\t\t\t\t\t\t{tspan('orderEntryAmount', 'Amount', `${TRANSLATION_PLACEHOLDER} `)}\n\t\t\t\t\t\t\t\t\t\t\t<Optional value={unitName} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\t\t\t\telementId,\n\t\t\t\t\t\t\t\t\t\t\tE.map(() => (\n\t\t\t\t\t\t\t\t\t\t\t\t<NumericStepper\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={value.amount}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstep={step}\n\t\t\t\t\t\t\t\t\t\t\t\t\tformatter={(inputValue: number) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatNumber(inputValue, amountPrecision)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmin={minOrderSize}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmax={maxOrderSize}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonIncrement={this.handleValueChange(value)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonDecrement={this.handleValueChange(value)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonValueChange={this.handleValueChange(value)}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttheme={steppableInputTheme}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\t\t\t\t\tE.getOrElse(() => <div className={css.text}>{value.amount}</div>),\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{E.isLeft(amountValidated) &&\n\t\t\t\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\t\t\t\tamountValidated,\n\t\t\t\t\t\t\t\t\t\t\t\tE.fold(\n\t\t\t\t\t\t\t\t\t\t\t\t\terror => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className={css.validationError}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.stringifyAmountErrors(error)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\tconstNull,\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={css.element}>\n\t\t\t\t\t\t\t\t\t\t<div className={css.label}>{tspan('orderEntryLot', 'Lot')}</div>\n\t\t\t\t\t\t\t\t\t\t<div className={css.text}>\n\t\t\t\t\t\t\t\t\t\t\t<Optional value={lot} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={css.element}>\n\t\t\t\t\t\t\t\t\t\t<div className={css.label}>\n\t\t\t\t\t\t\t\t\t\t\t{tspan(\n\t\t\t\t\t\t\t\t\t\t\t\t'orderEntryMarginImpact',\n\t\t\t\t\t\t\t\t\t\t\t\t'Margin Impact',\n\t\t\t\t\t\t\t\t\t\t\t\t`${TRANSLATION_PLACEHOLDER}, ${currencySymbol}`,\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className={css.text}>\n\t\t\t\t\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\t\t\t\t\tmarginImpact,\n\t\t\t\t\t\t\t\t\t\t\t\tE.fold(\n\t\t\t\t\t\t\t\t\t\t\t\t\t() => <Optional value={O.none} />,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdataR =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber.isNaN(dataR) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Optional value={O.none} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatMoney(dataR, {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformat: '%v',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={css.element}>\n\t\t\t\t\t\t\t\t\t\t<div className={css.label}>\n\t\t\t\t\t\t\t\t\t\t\t{tspan(\n\t\t\t\t\t\t\t\t\t\t\t\t'orderEntryValue',\n\t\t\t\t\t\t\t\t\t\t\t\t'Value',\n\t\t\t\t\t\t\t\t\t\t\t\t`${TRANSLATION_PLACEHOLDER}, ${currencySymbol}`,\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className={css.text}>{formatMoney(result, { format: '%v' })}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={cnMoreOptions} onClick={this.handleToggleMoreOptions}>\n\t\t\t\t\t\t\t\t\t{tspan('orderEntryMoreOptions', 'More Options')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{this.renderMoreOptionsPanels()}\n\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\tpreviewMode,\n\t\t\t\t\t\t\t\tO.map(\n\t\t\t\t\t\t\t\t\tisPreviewMode =>\n\t\t\t\t\t\t\t\t\t\tisPreviewMode && (\n\t\t\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t<RegistrationInfoBox\n\t\t\t\t\t\t\t\t\t\t\t\t\ttheme={registrationInfoBox}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext={tspan(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'orderEntryRegistrationDescription',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Continue registration in order to start trading',\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<DisableOverlay />\n\t\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</SidePanel>\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tprivate stringifyAmountErrors = ({\n\t\t\t\t\tmessage,\n\t\t\t\t\tmaxOrderSize,\n\t\t\t\t\tminOrderSize,\n\t\t\t\t\tminOrderIncrement,\n\t\t\t\t}: AmountValidationError) => {\n\t\t\t\t\tswitch (message) {\n\t\t\t\t\t\tcase AmountValidationErrorMessages.Max:\n\t\t\t\t\t\t\treturn tspan('orderEntryValidationErrorMax', {\n\t\t\t\t\t\t\t\tdefaultValue: 'Shall be multiple of {{minOrderIncrement}}. Max {{maxOrderSize}}',\n\t\t\t\t\t\t\t\tmaxOrderSize,\n\t\t\t\t\t\t\t\tminOrderIncrement,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tcase AmountValidationErrorMessages.Min:\n\t\t\t\t\t\t\treturn tspan('orderEntryValidationErrorMin', {\n\t\t\t\t\t\t\t\tdefaultValue: 'Minimum amount is {{minOrderSize}}',\n\t\t\t\t\t\t\t\tminOrderSize,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tcase AmountValidationErrorMessages.Multiple:\n\t\t\t\t\t\t\treturn tspan('orderEntryValidationErrorMultiple', {\n\t\t\t\t\t\t\t\tdefaultValue: 'Shall be multiple of {{minOrderIncrement}}',\n\t\t\t\t\t\t\t\tminOrderIncrement,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tprivate renderDepositBox = () => {\n\t\t\t\t\tconst text = tspan(\n\t\t\t\t\t\t'orderEntryNeedToDeposit',\n\t\t\t\t\t\t'You need to deposit on your account in order to make your first trade',\n\t\t\t\t\t);\n\n\t\t\t\t\tconst button = (\n\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\tto={routes.crm.deposit.root}\n\t\t\t\t\t\t\tvalue={empty}\n\t\t\t\t\t\t\trender={({ onNavigate }) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<ButtonCta theme={buttonDepositCss} onClick={onNavigate}>\n\t\t\t\t\t\t\t\t\t\t{tspan('depositButton', 'Deposit')}\n\t\t\t\t\t\t\t\t\t</ButtonCta>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\n\t\t\t\t\treturn <InfoBox text={text} button={button} theme={infoBoxCss} hides />;\n\t\t\t\t};\n\n\t\t\t\tprivate renderMoreOptionsPanels = () =>\n\t\t\t\t\tthis.props.moreOptionsOpened && (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<div className={css.innerPaddedWrapper}>\n\t\t\t\t\t\t\t\t<OrderEntryExecutionContainer\n\t\t\t\t\t\t\t\t\tisShownValidErrors={this.props.isShownValidErrors}\n\t\t\t\t\t\t\t\t\tisChangeable={pipe(\n\t\t\t\t\t\t\t\t\t\tthis.props.elementId,\n\t\t\t\t\t\t\t\t\t\tE.fold(constTrue, constFalse),\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<OrderEntryTakeProfitStopLossContainer isShownValidErrors={this.props.isShownValidErrors} />\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\n\t\t\t\trenderSide = (\n\t\t\t\t\tdata: OrderEntrySideValue,\n\t\t\t\t\tside: OrderEntrySide,\n\t\t\t\t\tprecision: number,\n\t\t\t\t\tvalue: OrderEntryValue,\n\t\t\t\t) => (props: RouteLinkRenderProps) => (\n\t\t\t\t\t<OrderEntryPanelSide\n\t\t\t\t\t\tamount={data.amount}\n\t\t\t\t\t\tpipSettings={data.pipSettings}\n\t\t\t\t\t\tprecision={precision}\n\t\t\t\t\t\tside={side}\n\t\t\t\t\t\tisActive={props.isActive}\n\t\t\t\t\t\tonClick={this.handleSideChange(props.onNavigate, value)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\n\t\t\t\thandleToggleMoreOptions = () => {\n\t\t\t\t\tconst { onMoreOptionsClick, moreOptionsOpened } = this.props;\n\t\t\t\t\tonMoreOptionsClick(!moreOptionsOpened);\n\t\t\t\t};\n\n\t\t\t\thandleValueChange = (value: OrderEntryValue) => (amount: number) => {\n\t\t\t\t\tconst { onValueChange } = this.props;\n\t\t\t\t\tonValueChange({ ...value, amount: Math.abs(amount).toString() });\n\t\t\t\t};\n\n\t\t\t\tprivate handleSideChange = (onNavigate: () => void, value: OrderEntryValue) => (\n\t\t\t\t\tside: OrderEntrySide,\n\t\t\t\t) => {\n\t\t\t\t\tconst { onValueChange } = this.props;\n\t\t\t\t\tonValueChange({ ...value, side });\n\t\t\t\t\tonNavigate();\n\t\t\t\t};\n\n\t\t\t\tprivate getText = (value: OrderEntrySide) => {\n\t\t\t\t\tswitch (value) {\n\t\t\t\t\t\tcase OrderEntrySide.Sell: {\n\t\t\t\t\t\t\treturn tspan('orderEntrySell', 'Sell');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase OrderEntrySide.Buy: {\n\t\t\t\t\t\t\treturn tspan('orderEntryBuy', 'Buy');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\trenderHeader = (description: Option<string>) => {\n\t\t\t\t\tconst { elementId, symbol, isEdit } = this.props;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t{isEdit ? (\n\t\t\t\t\t\t\t\t<span className={css.title}>{tspan('orderEntryPanelTitle', 'Edit Orders')}</span>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<SymbolComponent\n\t\t\t\t\t\t\t\t\ttitle={symbol}\n\t\t\t\t\t\t\t\t\tsubtitle={pipe(\n\t\t\t\t\t\t\t\t\t\tdescription,\n\t\t\t\t\t\t\t\t\t\tO.getOrElse(constant('')),\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\telementId,\n\t\t\t\t\t\t\t\tE.fold(\n\t\t\t\t\t\t\t\t\torderId => (\n\t\t\t\t\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\t\t\t\t\tto={routes.orders.order.root}\n\t\t\t\t\t\t\t\t\t\t\tvalue={{ orderId: Number(orderId) }}\n\t\t\t\t\t\t\t\t\t\t\trender={({ onNavigate }) => <CloseButton onClick={onNavigate} />}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcategoryId => (\n\t\t\t\t\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\t\t\t\t\tto={routes.trade.category.symbol.root}\n\t\t\t\t\t\t\t\t\t\t\tvalue={{ categoryId, symbol }}\n\t\t\t\t\t\t\t\t\t\t\trender={({ onNavigate }) => <CloseButton onClick={onNavigate} />}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\trenderFooter = (side: OrderEntrySide) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tonFooterButtonClick,\n\t\t\t\t\t\telementId,\n\t\t\t\t\t\tisValid,\n\t\t\t\t\t\tisSubmitAllowed,\n\t\t\t\t\t\tisEditAllowed,\n\t\t\t\t\t\taccountBalance,\n\t\t\t\t\t\terror,\n\t\t\t\t\t\tpreviewMode,\n\t\t\t\t\t} = this.props;\n\t\t\t\t\tconst isAccountBalanceZero =\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\taccountBalance,\n\t\t\t\t\t\t\tO.getOrElse(constant(0)),\n\t\t\t\t\t\t) === 0;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\taccountBalance,\n\t\t\t\t\t\t\t\tO.fold(constant(<Fragment />), data =>\n\t\t\t\t\t\t\t\t\tdata === 0 ? this.renderDepositBox() : <Fragment />,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<ErrorPanel\n\t\t\t\t\t\t\t\terror={error}\n\t\t\t\t\t\t\t\ttitle={tspan('orderEntryErrorPlacingOrder', 'Error Placing Your Order')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={onFooterButtonClick(isValid)}\n\t\t\t\t\t\t\t\tisPrimary={true}\n\t\t\t\t\t\t\t\ttheme={buttonCss}\n\t\t\t\t\t\t\t\tisDisabled={\n\t\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\t\telementId,\n\t\t\t\t\t\t\t\t\t\tE.fold(\n\t\t\t\t\t\t\t\t\t\t\t() => !isEditAllowed.getOrElse(false),\n\t\t\t\t\t\t\t\t\t\t\t() => !isSubmitAllowed.getOrElse(false),\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t) || isAccountBalanceZero\n\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\t\telementId,\n\t\t\t\t\t\t\t\t\tE.fold(() => tspan('orderEntrySaveChanges', 'Update'), () => this.getText(side)),\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\tpreviewMode,\n\t\t\t\t\t\t\t\tO.map(isPreviewMode => isPreviewMode && <DisableOverlay />),\n\t\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\t},\n\t\t),\n);\n","import { OrderEntryData, OrderValue } from '../../../../view-model/order-entry/order-entry.view-model';\nimport { OrderEntryPanelData, AmountValidationError } from '../../components/order-entry-panel/order-entry-panel.model';\nimport { definePipSettings } from '../../../../ui-common/pip-rate/pip-settings.utils';\nimport { Either, left, right } from 'fp-ts/lib/Either';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\n\nexport function toOrderEntryPanelData(\n\tdata: OrderEntryData,\n\tminOrderSize: number,\n\tmaxOrderSize: number,\n\tamountValidated: Either<AmountValidationError, string>,\n\tvalue: OrderValue,\n\tamountPrecision: number,\n\tunitName: Option<string>,\n): OrderEntryPanelData {\n\treturn {\n\t\tbuy: {\n\t\t\tamount: data.ask,\n\t\t\tpipSettings: pipe(\n\t\t\t\tdata.ask,\n\t\t\t\tO.fold(constant({ start: 0, length: 2 }), ask => definePipSettings(ask, data.pipsSize)),\n\t\t\t),\n\t\t},\n\t\tsell: {\n\t\t\tamount: data.bid,\n\t\t\tpipSettings: pipe(\n\t\t\t\tdata.bid,\n\t\t\t\tO.fold(constant({ start: 0, length: 2 }), bid => definePipSettings(bid, data.pipsSize)),\n\t\t\t),\n\t\t},\n\t\tdescription: data.description,\n\t\tmarginImpact: data.marginImpact,\n\t\tstep: data.step,\n\t\tamountPrecision,\n\t\tprecision: data.precision,\n\t\tminOrderSize,\n\t\tmaxOrderSize,\n\t\tamountValidated,\n\t\tvalue,\n\t\tunitName,\n\t};\n}\n\nexport const getEitherFromSideAndValue = (isLeft: boolean, value: string): Either<string, string> =>\n\tisLeft ? left(value) : right(value);\n","import { Observable, combineLatest } from 'rxjs';\nimport { distinctUntilChanged, filter, map, startWith } from 'rxjs/operators';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { chartsController } from '../../api/generated/swagger/controllers/ChartsController';\nimport { SocketClient } from '../../api/socket-client';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { isChartTO } from '../../api/socket/socket-message.to';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { CandleTO } from '../../api/generated/swagger/definitions/CandleTO';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { ChartRequestTO } from '../../api/generated/swagger/definitions/ChartRequestTO';\nimport { ChartSettingsStore } from '../../store/chart-settings/chart-settings.store';\nimport { ask, combineContext, fromReader } from '@devexperts/rx-utils/dist/context.utils';\nimport { MarketDataStore } from '../../store/market-data/market-data.store';\nimport { head, mapOption, findFirst } from 'fp-ts/lib/Array';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { fromOption, pending, success } from '@devexperts/remote-data-ts';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { ChartResponseTO } from '../../api/generated/swagger/definitions/ChartResponseTO';\nimport { InstrumentStore } from '../../store/instrument/instrument.store';\nimport { sequenceTOption } from '../../utils/option.utils';\nimport { Predicate } from 'fp-ts/lib/function';\nimport { AggrPeriodRangePairTO } from '../../api/generated/swagger/definitions/AggrPeriodRangePairTO';\nimport { tapRD } from '@devexperts/rx-utils/dist/rd/operators/tapRD';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { shareReplayWithDefaults } from '../../utils/rxjs/shareReplayWithDefaults';\n\nexport enum ChartType {\n\tBar = '* BAR *',\n\tCandle = '* CANDLE *',\n\tLine = '* LINE *',\n}\n\nexport type ChartPeriod = {\n\tname: string;\n\tseconds: number;\n};\n\ntype AggregationPeriodPair = {\n\trange: number;\n\tperiod: number;\n};\n\nexport type ChartViewModel = {\n\taggregationPeriodPair$: Observable<AggregationPeriodPair>;\n\tprecision$: LiveData<Error, number>;\n\tcandles$: LiveData<Error, CandleTO[]>;\n\tlastCandles$: LiveData<Error, CandleTO[]>;\n\tperiods$: LiveData<Error, ChartPeriod[]>;\n\tdescription$: LiveData<Error, Option<string>>;\n\tselectedPeriod$: Observable<ChartPeriod>;\n\tselectedChartType$: Observable<ChartType>;\n\tisCrossToolEnabled$: Observable<boolean>;\n\tonChangePeriod: (period: ChartPeriod) => void;\n\tonChangeChartType: (type: ChartType) => void;\n\tonSwitchCrossTool: (isEnabled: boolean) => void;\n};\n\ntype ChartContext = {\n\tsocketClient: SocketClient;\n\tchartSettingsStore: ChartSettingsStore;\n\tmarketDataStore: MarketDataStore;\n\tinstrumentStore: InstrumentStore;\n};\n\ntype CreateChartViewModel = Sink<(symbol: string, isMobile: boolean) => Sink<ChartViewModel>>;\n\nconst SUBTOPIC = 'chart';\nlet chartId = 0;\n\nexport const createChartViewModel = combineContext(\n\tfromReader(chartsController),\n\task<ChartContext>(),\n\t(chartsController, ctx): CreateChartViewModel => {\n\t\tconst { socketClient, chartSettingsStore, marketDataStore, instrumentStore } = ctx;\n\n\t\tconst charts$ = socketClient.message$.pipe(\n\t\t\tfilter(isChartTO),\n\t\t\tmap(data => data.body),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst effects$ = charts$;\n\n\t\tconst create = (symbol: string, isMobile: boolean): Sink<ChartViewModel> => {\n\t\t\tconst id = chartId++;\n\n\t\t\tconst selectedPeriod = createHandler<ChartPeriod>();\n\t\t\tconst selectedChartType = createHandler<ChartType>();\n\t\t\tconst isCrossToolEnabled = createHandler<boolean>();\n\t\t\tconst aggregationPeriodPair = createHandler<AggregationPeriodPair>();\n\n\t\t\tconst periods$: LiveData<Error, ChartPeriod[]> = chartSettingsStore.periods$.pipe(\n\t\t\t\tmapRD(data =>\n\t\t\t\t\tmapOption(data, el =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\tel.name,\n\t\t\t\t\t\t\tO.chain(name =>\n\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\tel.seconds,\n\t\t\t\t\t\t\t\t\tO.map(seconds => ({ name, seconds })),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tconst chartPeriodName$ = selectedPeriod.value$.pipe(\n\t\t\t\tmap(({ name }) => name),\n\t\t\t\tdistinctUntilChanged(),\n\t\t\t);\n\n\t\t\tconst chartPeriodSeconds$ = selectedPeriod.value$.pipe(\n\t\t\t\tmap(({ seconds }) => seconds),\n\t\t\t\tdistinctUntilChanged(),\n\t\t\t);\n\n\t\t\tconst selectedPeriod$: Observable<ChartPeriod> = combineLatest(chartPeriodName$, chartPeriodSeconds$).pipe(\n\t\t\t\tmap(([name, seconds]) => ({ name, seconds })),\n\t\t\t);\n\n\t\t\tconst selectedChartType$ = selectedChartType.value$;\n\t\t\tconst isCrossToolEnabled$ = isCrossToolEnabled.value$;\n\n\t\t\tconst chart$ = charts$.pipe(\n\t\t\t\tfilter(to => to.requestID === id),\n\t\t\t\tmap(data => success<Error, ChartResponseTO>(data)),\n\t\t\t\tstartWith(pending),\n\t\t\t\tshareReplayWithDefaults(),\n\t\t\t);\n\n\t\t\tconst requestChartData = (period: ChartPeriod) =>\n\t\t\t\tchartSettingsStore.pairs$.pipe(\n\t\t\t\t\tmapRD(pairs => findFirst(pairs, getAggregationPairMatchingPredicate(period))),\n\t\t\t\t\tmapRD(aggregationPeriodPair =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\tsequenceTOption(\n\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\taggregationPeriodPair,\n\t\t\t\t\t\t\t\t\tO.chain(({ aggregationPeriod }) => aggregationPeriod),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\taggregationPeriodPair,\n\t\t\t\t\t\t\t\t\tO.chain(({ range }) => range),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tO.chain(([{ seconds }, { duration }]) => sequenceTOption(seconds, duration)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t\tmap(aggregationPeriodPair =>\n\t\t\t\t\t\taggregationPeriodPair.chain(value =>\n\t\t\t\t\t\t\tfromOption(\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t() => new Error(`Could not find selected period/range pair in Chart settings pairs`),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t\ttapRD(([period, range]) => aggregationPeriodPair.handle({ period, range })),\n\t\t\t\t\tswitchMapRD(([seconds, duration]) => {\n\t\t\t\t\t\treturn chartsController.updateChartsSubscription({\n\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\tchartIds: O.some([]),\n\t\t\t\t\t\t\t\trequests: O.some([getChartRequestTO(id, symbol, seconds, duration)]),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}),\n\t\t\t\t);\n\n\t\t\tconst initialPeriod$ = periods$.pipe(\n\t\t\t\tmap(periods =>\n\t\t\t\t\tperiods.chain(periods =>\n\t\t\t\t\t\tfromOption(\n\t\t\t\t\t\t\tisMobile ? findFirst(periods, period => period.seconds === 1800) : head(periods),\n\t\t\t\t\t\t\t() => new Error('There are no any periods'),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tconst requestHistoricalData$ = combineLatestRD(initialPeriod$, marketDataStore.isInitialized$).pipe(\n\t\t\t\tswitchMapRD(([period]) => requestChartData(period)),\n\t\t\t\tshareReplayWithDefaults(),\n\t\t\t);\n\n\t\t\tconst requestChangeChartParameters$ = selectedPeriod$.pipe(\n\t\t\t\tmap(value => success<Error, ChartPeriod>(value)),\n\t\t\t\tswitchMapRD(period => requestChartData(period)),\n\t\t\t\tshareReplayWithDefaults(),\n\t\t\t);\n\n\t\t\tconst allChartData$ = combineLatestRD(requestHistoricalData$, chart$).pipe(\n\t\t\t\tmapRD(([_, chart]) => chart),\n\t\t\t\tdistinctUntilChanged(),\n\t\t\t\tshareReplayWithDefaults(),\n\t\t\t);\n\n\t\t\tconst candles$ = allChartData$.pipe(\n\t\t\t\tfilter(data => !data.isSuccess() || data.value.historyData),\n\t\t\t\tmapRD(data => data.data),\n\t\t\t);\n\t\t\tconst lastCandles$ = allChartData$.pipe(\n\t\t\t\tfilter(data => !data.isSuccess() || !data.value.historyData),\n\t\t\t\tmapRD(data => data.data),\n\t\t\t);\n\t\t\tconst instrument$ = instrumentStore.getBySymbol(symbol);\n\t\t\tconst description$ = instrument$.pipe(mapRD(instrument => instrument.description));\n\t\t\tconst precision$ = instrument$.pipe(mapRD(instrument => instrument.precision));\n\n\t\t\treturn new Sink(\n\t\t\t\t{\n\t\t\t\t\taggregationPeriodPair$: aggregationPeriodPair.value$,\n\t\t\t\t\tprecision$,\n\t\t\t\t\tcandles$,\n\t\t\t\t\tlastCandles$,\n\t\t\t\t\tperiods$,\n\t\t\t\t\tdescription$,\n\t\t\t\t\tselectedPeriod$,\n\t\t\t\t\tisCrossToolEnabled$,\n\t\t\t\t\tselectedChartType$,\n\t\t\t\t\tonChangePeriod: selectedPeriod.handle,\n\t\t\t\t\tonChangeChartType: selectedChartType.handle,\n\t\t\t\t\tonSwitchCrossTool: isCrossToolEnabled.handle,\n\t\t\t\t},\n\t\t\t\trequestChangeChartParameters$,\n\t\t\t);\n\t\t};\n\n\t\treturn new Sink(create, effects$);\n\t},\n);\n\nconst getAggregationPairMatchingPredicate = (period: ChartPeriod): Predicate<AggrPeriodRangePairTO> => ({\n\taggregationPeriod,\n}) =>\n\tpipe(\n\t\taggregationPeriod,\n\t\tO.exists(({ name }) =>\n\t\t\tpipe(\n\t\t\t\tname,\n\t\t\t\tO.exists(name => name === period.name),\n\t\t\t),\n\t\t),\n\t);\n\nconst getChartRequestTO = (id: number, symbol: string, seconds: number, duration: number): ChartRequestTO => ({\n\tsymbol,\n\taggregationPeriodSeconds: seconds,\n\trange: duration,\n\tforexPriceField: O.some('bid'),\n\tstudySubscription: O.some([]),\n\tsubtopic: SUBTOPIC,\n\tmaxBarsCount: 3500,\n\textendedSession: true,\n\tid,\n});\n","import { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport {\n\tcreateOrderEntryViewModel,\n\tOrderEntryViewModel,\n} from '../../../../view-model/order-entry/order-entry.view-model';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { OrderEntryPanel } from '../../components/order-entry-panel/order-entry-panel.component';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { toOrderEntryPanelData, getEitherFromSideAndValue } from './order-entry-panel.utils';\nimport * as O from 'fp-ts/lib/Option';\nimport * as E from 'fp-ts/lib/Either';\nimport { combineContext, ask, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { createSelector } from 'reselect';\nimport { map } from 'rxjs/operators';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { merge } from 'rxjs';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type OrderEntryContainerContext = {\n\torderEntryViewModel: OrderEntryViewModel;\n};\n\nconst Container = combineContext(OrderEntryPanel, ask<OrderEntryContainerContext>(), (OrderEntryPanel, e) =>\n\twithRXWithDefaults(OrderEntryPanel)(() => {\n\t\tconst { orderEntryViewModel } = e;\n\t\tconst limitsOrderSize$ = combineLatestRD(\n\t\t\torderEntryViewModel.amountMinOrderSize$,\n\t\t\torderEntryViewModel.amountMaxOrderSize$,\n\t\t);\n\t\tconst fullData$ = combineLatestRD(\n\t\t\tlimitsOrderSize$,\n\t\t\torderEntryViewModel.amountValidated$,\n\t\t\torderEntryViewModel.data$,\n\t\t\torderEntryViewModel.value$,\n\t\t\torderEntryViewModel.amountPrecision$,\n\t\t\torderEntryViewModel.unitName$,\n\t\t).pipe(\n\t\t\tmapRD(([[minOrderSize, maxOrderSize], amountValidated, viewModelData, value, amountPrecision, unitName]) =>\n\t\t\t\ttoOrderEntryPanelData(\n\t\t\t\t\tviewModelData,\n\t\t\t\t\tminOrderSize,\n\t\t\t\t\tmaxOrderSize,\n\t\t\t\t\tamountValidated,\n\t\t\t\t\tvalue,\n\t\t\t\t\tamountPrecision,\n\t\t\t\t\tunitName,\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\n\t\treturn {\n\t\t\tdefaultProps: {\n\t\t\t\tdata: pending,\n\t\t\t\tlot: O.none,\n\t\t\t\taccountBalance: O.none,\n\t\t\t\tresult: 0,\n\t\t\t\tonValueChange: value => orderEntryViewModel.onValueChange(value),\n\t\t\t\tonFooterButtonClick: orderEntryViewModel.onSend,\n\t\t\t\tmoreOptionsOpened: false,\n\t\t\t\tonMoreOptionsClick: orderEntryViewModel.onToggleMoreOptions,\n\t\t\t\terror: O.none,\n\t\t\t\tisValid: true,\n\t\t\t\tisShownValidErrors: false,\n\t\t\t\tcurrencySymbol: '',\n\t\t\t\tisSubmitAllowed: pending,\n\t\t\t\tisEditAllowed: pending,\n\t\t\t\tpreviewMode: O.some(false),\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\tdata: fullData$,\n\t\t\t\tlot: orderEntryViewModel.lot$,\n\t\t\t\taccountBalance: orderEntryViewModel.accountBalance$,\n\t\t\t\tresult: orderEntryViewModel.valueSum$,\n\t\t\t\tmoreOptionsOpened: orderEntryViewModel.moreOptionsOpened$,\n\t\t\t\terror: orderEntryViewModel.error$.pipe(\n\t\t\t\t\tmap(error =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\tO.map(error => error.message),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tisValid: orderEntryViewModel.isValid$,\n\t\t\t\tisShownValidErrors: orderEntryViewModel.isShownValidErrors$,\n\t\t\t\tcurrencySymbol: orderEntryViewModel.currencySymbol$,\n\t\t\t\tisSubmitAllowed: merge(orderEntryViewModel.isFundsEnough$, orderEntryViewModel.isEmitingOrdersAllowed$),\n\t\t\t\tisEditAllowed: orderEntryViewModel.isOrderEntryValuesChanged$,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const OrderEntryPanelContainer = combineContext(\n\tcreateOrderEntryViewModel,\n\tdeferContext(Container, 'orderEntryViewModel'),\n\t(createOrderEntryViewModel, Container) =>\n\t\trunOnMount(Container, props => {\n\t\t\tconst symbol = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.symbol,\n\t\t\t);\n\t\t\tconst action = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.action,\n\t\t\t);\n\t\t\tconst elementId = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.elementId.value,\n\t\t\t);\n\t\t\tconst isElementIdLeft = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => E.isLeft(props.elementId),\n\t\t\t);\n\t\t\tconst plKind = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.plKind,\n\t\t\t);\n\t\t\treturn createSelector(\n\t\t\t\tsymbol,\n\t\t\t\taction,\n\t\t\t\telementId,\n\t\t\t\tisElementIdLeft,\n\t\t\t\tplKind,\n\t\t\t\t(symbol, action, elementIdValue, isElementIdLeft, plKind) => {\n\t\t\t\t\tconst elementId = getEitherFromSideAndValue(isElementIdLeft, elementIdValue);\n\n\t\t\t\t\treturn createOrderEntryViewModel(symbol, action, elementId, plKind).map(orderEntryViewModel => ({\n\t\t\t\t\t\torderEntryViewModel,\n\t\t\t\t\t}));\n\t\t\t\t},\n\t\t\t);\n\t\t}),\n);\n","import { number, string, type } from 'io-ts';\n\nexport type AvaTradingSessionTO = {\n\tstartTime: number;\n\tstartTimeFormatted: string;\n\tendTime: number;\n\tendTimeFormatted: string;\n};\nexport const AvaTradingSessionTOIO = type({\n\tstartTime: number,\n\tstartTimeFormatted: string,\n\tendTime: number,\n\tendTimeFormatted: string,\n});\n","import { AvaTradingSessionTO, AvaTradingSessionTOIO } from '../definitions/AvaTradingSessionTO';\nimport { string, array, type } from 'io-ts';\n\nexport type AvaTradingWeekTO = {\n\ttimeZone: string;\n\tsunday: Array<AvaTradingSessionTO>;\n\tmonday: Array<AvaTradingSessionTO>;\n\ttuesday: Array<AvaTradingSessionTO>;\n\twednesday: Array<AvaTradingSessionTO>;\n\tthursday: Array<AvaTradingSessionTO>;\n\tfriday: Array<AvaTradingSessionTO>;\n\tsaturday: Array<AvaTradingSessionTO>;\n};\nexport const AvaTradingWeekTOIO = type({\n\ttimeZone: string,\n\tsunday: array(AvaTradingSessionTOIO),\n\tmonday: array(AvaTradingSessionTOIO),\n\ttuesday: array(AvaTradingSessionTOIO),\n\twednesday: array(AvaTradingSessionTOIO),\n\tthursday: array(AvaTradingSessionTOIO),\n\tfriday: array(AvaTradingSessionTOIO),\n\tsaturday: array(AvaTradingSessionTOIO),\n});\n","import { ResponseValidationError, TAPIClient } from '../client/client';\nimport { AvaTradingWeekTO, AvaTradingWeekTOIO } from '../definitions/AvaTradingWeekTO';\nimport { fromEither } from '@devexperts/remote-data-ts';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { asks } from 'fp-ts/lib/Reader';\nimport { string, number, type, partial } from 'io-ts';\nimport { map } from 'rxjs/operators';\n\nexport type TradinghoursendpointController = {\n\t/**\n\t * Get instrument's trading sessions hourw for whole week\n\t * @param { object } parameters\n\t */\n\treadonly getWeekTradingHours: (parameters: {\n\t\tquery: { symbol: string; timezoneOffset: number };\n\t}) => LiveData<Error, AvaTradingWeekTO>;\n};\n\nexport const tradinghoursendpointController = asks(\n\t(e: { apiClient: TAPIClient }): TradinghoursendpointController => ({\n\t\tgetWeekTradingHours: parameters => {\n\t\t\tconst encoded = partial({ query: type({ symbol: string, timezoneOffset: number }) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/instruments/tradinghours`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(AvaTradingWeekTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\t}),\n);\n","import { DailyTradingHours } from '../../ui-common/symbol-info/symbol-info.model';\nimport { fromArray } from 'fp-ts/lib/NonEmptyArray';\nimport { AvaTradingSessionTO } from '../../api/generated/swagger/definitions/AvaTradingSessionTO';\n\nexport const toTradingHours = (tradingSessions: Array<AvaTradingSessionTO>): DailyTradingHours =>\n\tfromArray(\n\t\ttradingSessions.map(session => ({\n\t\t\tstartTime: session.startTimeFormatted,\n\t\t\tendTime: session.endTimeFormatted,\n\t\t})),\n\t);\n","import { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { ask, combineContext, fromReader } from '@devexperts/rx-utils/dist/context.utils';\nimport { InstrumentStore } from '../../store/instrument/instrument.store';\nimport { MarketDataStore } from '../../store/market-data/market-data.store';\nimport { InstrumentInfoStore } from '../../store/instrument-info/instrument-info.store';\nimport {\n\tTradinghoursendpointController,\n\ttradinghoursendpointController,\n} from '../../api/generated/swagger/controllers/TradinghoursendpointController';\nimport { AvaTradingWeekTO } from '../../api/generated/swagger/definitions/AvaTradingWeekTO';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { distinctRDOptionNumber, distinctRDOptionString, distinctRDNumber } from '../../utils/setoid.utils';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { first } from 'rxjs/operators';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { map, startWith } from 'rxjs/operators';\nimport { success } from '@devexperts/remote-data-ts';\nimport { SymbolInfoData } from '../../ui-common/symbol-info/symbol-info.model';\nimport { toTradingHours } from './symbol-info.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type SymbolInfoViewModel = {\n\tsymbolInfoData$: LiveData<Error, SymbolInfoData>;\n};\n\nexport type SymbolInfoViewModelContext = {\n\tinstrumentStore: InstrumentStore;\n\tmarketDataStore: MarketDataStore;\n\tinstrumentInfoStore: InstrumentInfoStore;\n\ttradingHoursController: TradinghoursendpointController;\n};\n\nexport type CreateSymbolInfoViewModel = (symbol: string) => SymbolInfoViewModel;\n\nexport const createSymbolInfoViewModel = combineContext(\n\tfromReader(tradinghoursendpointController),\n\task<SymbolInfoViewModelContext>(),\n\t(tradinghoursendpointController, e): CreateSymbolInfoViewModel => (symbol: string) => {\n\t\tconst { instrumentStore, marketDataStore, instrumentInfoStore, tradingHoursController } = e;\n\n\t\t// marketData sources\n\t\tconst marketData$ = marketDataStore.getDataBySymbol(symbol);\n\t\tconst bid$ = marketData$.pipe(\n\t\t\tmapRD(data =>\n\t\t\t\tpipe(\n\t\t\t\t\tdata.lastQuote,\n\t\t\t\t\tO.chain(quote => quote.bid),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\t\tconst ask$ = marketData$.pipe(\n\t\t\tmapRD(data =>\n\t\t\t\tpipe(\n\t\t\t\t\tdata.lastQuote,\n\t\t\t\t\tO.chain(quote => quote.ask),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\t\tconst askDirection$ = marketData$.pipe(\n\t\t\tmapRD(data =>\n\t\t\t\tpipe(\n\t\t\t\t\tdata.lastQuote,\n\t\t\t\t\tO.map(quote => quote.askDirection),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\t\tconst bidDirection$ = marketData$.pipe(\n\t\t\tmapRD(data =>\n\t\t\t\tpipe(\n\t\t\t\t\tdata.lastQuote,\n\t\t\t\t\tO.map(quote => quote.bidDirection),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\t\tconst dayHigh$ = marketData$.pipe(\n\t\t\tmapRD(data =>\n\t\t\t\tpipe(\n\t\t\t\t\tdata.lastSummary,\n\t\t\t\t\tO.chain(summary => summary.dayHigh),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\t\tconst dayLow$ = marketData$.pipe(\n\t\t\tmapRD(data =>\n\t\t\t\tpipe(\n\t\t\t\t\tdata.lastSummary,\n\t\t\t\t\tO.chain(summary => summary.dayLow),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\t// basicInstrumentInfo sources\n\t\tconst basicInstrumentInfo$ = instrumentStore.getBySymbol(symbol);\n\t\tconst description$ = basicInstrumentInfo$.pipe(\n\t\t\tmapRD(data => data.description),\n\t\t\tdistinctRDOptionString,\n\t\t);\n\t\tconst pipsSize$ = basicInstrumentInfo$.pipe(\n\t\t\tmapRD(instrument => instrument.pipsSize),\n\t\t\tdistinctRDNumber,\n\t\t);\n\t\tconst unitName$ = basicInstrumentInfo$.pipe(\n\t\t\tmapRD(instrument => instrument.unitName),\n\t\t\tfirst(),\n\t\t);\n\t\tconst precision$ = basicInstrumentInfo$.pipe(\n\t\t\tmapRD(instrument => instrument.precision),\n\t\t\tfirst(),\n\t\t);\n\t\tconst lotSize$ = basicInstrumentInfo$.pipe(\n\t\t\tmapRD(instrument => instrument.lotSize),\n\t\t\tfirst(),\n\t\t);\n\t\t// extendedInstrumentInfo sources\n\t\tconst extendedInstrumentInfo$ = instrumentInfoStore.getBySymbol(symbol);\n\t\tconst dayChange$ = extendedInstrumentInfo$.pipe(\n\t\t\tmapRD(info => info.dayChange),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\t\tconst weekChange$ = extendedInstrumentInfo$.pipe(\n\t\t\tmapRD(info => info.weekChange),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\t\tconst monthChange$ = extendedInstrumentInfo$.pipe(\n\t\t\tmapRD(info => info.monthChange),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\t\tconst sentimentSell$ = extendedInstrumentInfo$.pipe(\n\t\t\tmapRD(info => info.sentimentSell),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\t\tconst sentimentBuy$ = extendedInstrumentInfo$.pipe(\n\t\t\tmapRD(info => info.sentimentBuy),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst tradingWeek$ = tradingHoursController\n\t\t\t.getWeekTradingHours({\n\t\t\t\tquery: { symbol, timezoneOffset: new Date().getTimezoneOffset() },\n\t\t\t})\n\t\t\t.pipe(\n\t\t\t\tmap(data => success<Error, Option<AvaTradingWeekTO>>(data.toOption())), // treat any problems with trading week as none\n\t\t\t\tstartWith(success<Error, Option<AvaTradingWeekTO>>(O.none)),\n\t\t\t);\n\t\tconst combinedData1$ = combineLatestRD(description$, pipsSize$, unitName$, precision$, lotSize$);\n\t\tconst combinedData2$ = combineLatestRD(bid$, ask$, askDirection$, bidDirection$, dayHigh$, dayLow$);\n\t\tconst combinedData3$ = combineLatestRD(dayChange$, weekChange$, monthChange$, sentimentSell$, sentimentBuy$);\n\n\t\tconst symbolInfoData$: LiveData<Error, SymbolInfoData> = combineLatestRD(\n\t\t\tcombinedData1$,\n\t\t\tcombinedData2$,\n\t\t\tcombinedData3$,\n\t\t\ttradingWeek$,\n\t\t).pipe(\n\t\t\tmapRD(\n\t\t\t\t([\n\t\t\t\t\t[description, pipsSize, unitName, precision, lotSize],\n\t\t\t\t\t[bid, ask, askDirection, bidDirection, dayHigh, dayLow],\n\t\t\t\t\t[dayChange, weekChange, monthChange, sentimentSell, sentimentBuy],\n\t\t\t\t\ttradingWeek,\n\t\t\t\t]) => ({\n\t\t\t\t\tdescription,\n\t\t\t\t\tcurrentBuyPrice: ask,\n\t\t\t\t\tbuyPriceDirection: askDirection,\n\t\t\t\t\tcurrentSellPrice: bid,\n\t\t\t\t\tpipSize: pipsSize,\n\t\t\t\t\tsellPriceDirection: bidDirection,\n\t\t\t\t\tmeasurementUnit: unitName,\n\t\t\t\t\ttradingHours: {\n\t\t\t\t\t\tmonday: pipe(\n\t\t\t\t\t\t\ttradingWeek,\n\t\t\t\t\t\t\tO.chain(tradingWeek => toTradingHours(tradingWeek.monday)),\n\t\t\t\t\t\t),\n\t\t\t\t\t\ttuesday: pipe(\n\t\t\t\t\t\t\ttradingWeek,\n\t\t\t\t\t\t\tO.chain(tradingWeek => toTradingHours(tradingWeek.tuesday)),\n\t\t\t\t\t\t),\n\t\t\t\t\t\twednesday: pipe(\n\t\t\t\t\t\t\ttradingWeek,\n\t\t\t\t\t\t\tO.chain(tradingWeek => toTradingHours(tradingWeek.wednesday)),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tthursday: pipe(\n\t\t\t\t\t\t\ttradingWeek,\n\t\t\t\t\t\t\tO.chain(tradingWeek => toTradingHours(tradingWeek.thursday)),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfriday: pipe(\n\t\t\t\t\t\t\ttradingWeek,\n\t\t\t\t\t\t\tO.chain(tradingWeek => toTradingHours(tradingWeek.friday)),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tsaturday: pipe(\n\t\t\t\t\t\t\ttradingWeek,\n\t\t\t\t\t\t\tO.chain(tradingWeek => toTradingHours(tradingWeek.saturday)),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tsunday: pipe(\n\t\t\t\t\t\t\ttradingWeek,\n\t\t\t\t\t\t\tO.chain(tradingWeek => toTradingHours(tradingWeek.sunday)),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\ttimeZoneOffset: pipe(\n\t\t\t\t\t\ttradingWeek,\n\t\t\t\t\t\tO.map(tradingWeek => tradingWeek.timeZone),\n\t\t\t\t\t),\n\t\t\t\t\tlotSize,\n\t\t\t\t\tprecision,\n\t\t\t\t\tdayHigh,\n\t\t\t\t\tdayLow,\n\t\t\t\t\tchangeDay: dayChange,\n\t\t\t\t\tchangeWeek: weekChange,\n\t\t\t\t\tchangeMonth: monthChange,\n\t\t\t\t\tmarketSentimentLeft: sentimentSell,\n\t\t\t\t\tmarketSentimentRight: sentimentBuy,\n\t\t\t\t}),\n\t\t\t),\n\t\t);\n\n\t\treturn {\n\t\t\tsymbolInfoData$,\n\t\t};\n\t},\n);\n","import * as React from 'react';\nimport { PureComponent, ReactNode } from 'react';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { PartialKeys } from '@devexperts/utils/dist/object';\nimport { MakeTheme } from '../../utils/theme.utils';\nimport * as css from './theme/info-panel.module.css';\nimport classnames from 'classnames';\n\ntype RawSymbolInfoItemProps = {\n\ttheme: MakeTheme<'item' | 'item_secondary' | 'label' | 'value'>;\n\tlabel: ReactNode;\n\tisSecondary?: boolean;\n};\n\nclass RawSymbolInfoItem extends PureComponent<RawSymbolInfoItemProps> {\n\trender() {\n\t\tconst { theme, label, children, isSecondary = false } = this.props;\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classnames(theme.item, {\n\t\t\t\t\t[theme.item_secondary as string]: isSecondary,\n\t\t\t\t})}>\n\t\t\t\t<div className={theme.label}>{label}</div>\n\t\t\t\t{children && <div className={theme.value}>{children}</div>}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst wTheme = {\n\t...css,\n};\n\nexport type SymbolInfoItemProps = PartialKeys<RawSymbolInfoItemProps, 'theme'>;\nexport const SymbolInfoItem = withTheme(Symbol(), wTheme)(RawSymbolInfoItem);\n","import * as React from 'react';\nimport { Fragment, memo, useCallback } from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { formatNumber } from 'accounting';\nimport { Option } from 'fp-ts/lib/Option';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { PipRate } from '../pip-rate/pip-rate.component';\nimport { definePipSettings } from '../pip-rate/pip-settings.utils';\nimport { tspan, TRANSLATION_PLACEHOLDER } from '../../utils/i18n.utils';\nimport { Optional } from '../optional/optional.component';\nimport { RemoteDataState } from '../remote-data-state/remote-data-state.component';\nimport { DailyTradingHours, SymbolInfoData } from './symbol-info.model';\nimport { PriceDirection } from '../price-direction/price-direction.component';\nimport { SymbolInfoItem } from '../symbol-info-item/symbol-info-item.component';\nimport { empty } from 'fp-ts/lib/Array';\nimport { sequenceTOption } from '../../utils/option.utils';\nimport { MakeTheme } from '../../utils/theme.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\nimport * as O from 'fp-ts/lib/Option';\nimport * as css from './theme/symbol-info.module.css';\nimport * as directionPriceCss from './theme/price-direction.child.module.css';\n\nexport type SymbolInfoProps = {\n\tdata: RemoteData<Error, SymbolInfoData>;\n\tsymbol: string;\n\tcategoryId: string;\n\ttheme?: MakeTheme<'item' | 'item_secondary' | 'label' | 'value' | 'container' | 'title' | 'subtitle'>;\n} & WithTranslation;\n\nexport const SymbolInfoCommon = withTranslation()(\n\tmemo((props: SymbolInfoProps) => {\n\t\tconst { data, t, theme } = props;\n\n\t\tconst renderPrice = useCallback(\n\t\t\t(value: Option<number>, pipsSize: number, precision: number, direction: Option<number>) =>\n\t\t\t\tpipe(\n\t\t\t\t\tsequenceTOption(value, direction),\n\t\t\t\t\tO.map(([value, direction]) => (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<PriceDirection direction={direction} theme={directionPriceCss} />\n\t\t\t\t\t\t\t<PipRate value={value} rise={definePipSettings(value, pipsSize)} digits={precision} />\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)),\n\t\t\t\t),\n\t\t\t[definePipSettings],\n\t\t);\n\n\t\tconst renderChange = useCallback(\n\t\t\t(value: Option<number>) =>\n\t\t\t\tpipe(\n\t\t\t\t\tvalue,\n\t\t\t\t\tO.map(value => (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t{value < 0 && <span className={css.prefixChange}></span>}\n\t\t\t\t\t\t\t{formatNumber(Math.abs(value), 2)}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)),\n\t\t\t\t),\n\t\t\t[formatNumber],\n\t\t);\n\n\t\tconst renderTradingHours = useCallback(\n\t\t\t(dailyTradingHours: DailyTradingHours) =>\n\t\t\t\tpipe(\n\t\t\t\t\tdailyTradingHours,\n\t\t\t\t\tO.map(dailyTradingHours => (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t{dailyTradingHours.toArray().map((item, index) => (\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\tclassName={css.tradingHours}>{`${item.startTime} - ${item.endTime}`}</span>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)),\n\t\t\t\t),\n\t\t\t[empty],\n\t\t);\n\n\t\tconst renderSuccess = useCallback(\n\t\t\t(data: SymbolInfoData) => {\n\t\t\t\tconst {\n\t\t\t\t\tpipSize,\n\t\t\t\t\ttimeZoneOffset,\n\t\t\t\t\ttradingHours,\n\t\t\t\t\tcurrentBuyPrice,\n\t\t\t\t\tbuyPriceDirection,\n\t\t\t\t\tcurrentSellPrice,\n\t\t\t\t\tsellPriceDirection,\n\t\t\t\t\tmeasurementUnit,\n\t\t\t\t\tprecision,\n\t\t\t\t\tlotSize,\n\t\t\t\t\tdayHigh,\n\t\t\t\t\tdayLow,\n\t\t\t\t\tchangeDay,\n\t\t\t\t\tchangeWeek,\n\t\t\t\t\tchangeMonth,\n\t\t\t\t\tmarketSentimentLeft,\n\t\t\t\t\tmarketSentimentRight,\n\t\t\t\t} = data;\n\n\t\t\t\tconst marketSentimentWidth = pipe(\n\t\t\t\t\tmarketSentimentLeft,\n\t\t\t\t\tO.fold(constant('0%'), value => `${value}%`),\n\t\t\t\t);\n\n\t\t\t\treturn (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('symbolInfoMarketSentiment', 'Market sentiment')}>\n\t\t\t\t\t\t\t<div className={css.marketSentiment}>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<Optional value={marketSentimentLeft} /> %\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<Optional value={marketSentimentRight} /> %\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<div className={css.marketSentimentBar}>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={css.marketSentimentBarLeft}\n\t\t\t\t\t\t\t\t\t\tstyle={{ width: marketSentimentWidth }}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('symbolInfoCurrentBuyPrice', 'Current buy price')}>\n\t\t\t\t\t\t\t<Optional value={renderPrice(currentBuyPrice, pipSize, precision, buyPriceDirection)} />\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('symbolInfoCurrentSellPrice', 'Current sell price')}>\n\t\t\t\t\t\t\t<Optional value={renderPrice(currentSellPrice, pipSize, precision, sellPriceDirection)} />\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('symbolInfoMeasurementUnit', 'Measurement unit')}>\n\t\t\t\t\t\t\t<Optional value={measurementUnit} />\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('symbolInfoLotSize', 'Lot size')}>\n\t\t\t\t\t\t\t{formatNumber(lotSize, { thousand: ' ' })}\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('symbolInfoTradingHours', 'Trading hours')}>\n\t\t\t\t\t\t\t<Optional value={timeZoneOffset} />\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('symbolInfoSun', 'Sun')} isSecondary={true}>\n\t\t\t\t\t\t\t<Optional value={renderTradingHours(tradingHours.sunday)} />\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('symbolInfoMon', 'Mon')} isSecondary={true}>\n\t\t\t\t\t\t\t<Optional value={renderTradingHours(tradingHours.monday)} />\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('symbolInfoTue', 'Tue')} isSecondary={true}>\n\t\t\t\t\t\t\t<Optional value={renderTradingHours(tradingHours.tuesday)} />\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('symbolInfoWed', 'Wed')} isSecondary={true}>\n\t\t\t\t\t\t\t<Optional value={renderTradingHours(tradingHours.wednesday)} />\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('symbolInfoThu', 'Thu')} isSecondary={true}>\n\t\t\t\t\t\t\t<Optional value={renderTradingHours(tradingHours.thursday)} />\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('symbolInfoFri', 'Fri')} isSecondary={true}>\n\t\t\t\t\t\t\t<Optional value={renderTradingHours(tradingHours.friday)} />\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('symbolInfoSat', 'Sat')} isSecondary={true}>\n\t\t\t\t\t\t\t<Optional value={renderTradingHours(tradingHours.saturday)} />\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\tdayHigh,\n\t\t\t\t\t\t\tO.map(value => (\n\t\t\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('symbolInfoDayHigh', 'Day high')}>\n\t\t\t\t\t\t\t\t\t<PipRate\n\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\trise={definePipSettings(value, pipSize)}\n\t\t\t\t\t\t\t\t\t\tdigits={precision}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\tdayLow,\n\t\t\t\t\t\t\tO.map(value => (\n\t\t\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('symbolInfoDayLow', 'Day low')}>\n\t\t\t\t\t\t\t\t\t<PipRate\n\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\trise={definePipSettings(value, pipSize)}\n\t\t\t\t\t\t\t\t\t\tdigits={precision}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<SymbolInfoItem\n\t\t\t\t\t\t\ttheme={theme}\n\t\t\t\t\t\t\tlabel={tspan('symbolInfoDayChange', 'Day change', `${TRANSLATION_PLACEHOLDER}, %`)}>\n\t\t\t\t\t\t\t<Optional value={renderChange(changeDay)} />\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t<SymbolInfoItem\n\t\t\t\t\t\t\ttheme={theme}\n\t\t\t\t\t\t\tlabel={tspan('symbolInfoWeekChange', 'Week change', `${TRANSLATION_PLACEHOLDER}, %`)}>\n\t\t\t\t\t\t\t<Optional value={renderChange(changeWeek)} />\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t<SymbolInfoItem\n\t\t\t\t\t\t\ttheme={theme}\n\t\t\t\t\t\t\tlabel={tspan('symbolInfoMonthChange', 'Month change', `${TRANSLATION_PLACEHOLDER}, %`)}>\n\t\t\t\t\t\t\t<Optional value={renderChange(changeMonth)} />\n\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t</Fragment>\n\t\t\t\t);\n\t\t\t},\n\t\t\t[t, renderPrice, formatNumber, renderTradingHours, definePipSettings, renderChange],\n\t\t);\n\n\t\treturn <RemoteDataState data={data} success={renderSuccess} />;\n\t}),\n);\n","import * as React from 'react';\nimport { Fragment, memo, useCallback } from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { routes } from '../../../../ui-common/routes';\nimport { SidePanel } from '../../../../ui-common/side-panel/side-panel.component';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { RouteLink } from '../../../../ui-common/route-link/containers/route-link.container';\nimport { SymbolComponent } from '../../../../ui-common/symbol/symbol';\nimport { SymbolInfoData } from '../../../../ui-common/symbol-info/symbol-info.model';\nimport { SymbolInfoCommon } from '../../../../ui-common/symbol-info/symbol-info.component';\nimport { CloseButton } from '../../../../ui-common/close-button/close-button.component';\nimport { empty } from 'fp-ts/lib/Array';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\n\nexport type SymbolInfoProps = {\n\tdata: RemoteData<Error, SymbolInfoData>;\n\tsymbol: string;\n\tcategoryId: string;\n} & WithTranslation;\n\nexport const SymbolInfo = combineContext(RouteLink, RouteLink =>\n\twithTranslation()(\n\t\tmemo((props: SymbolInfoProps) => {\n\t\t\tconst { data, symbol, categoryId } = props;\n\n\t\t\tconst renderHeader = useCallback(\n\t\t\t\t(description: Option<string>) => (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<SymbolComponent\n\t\t\t\t\t\t\ttitle={symbol}\n\t\t\t\t\t\t\tsubtitle={pipe(\n\t\t\t\t\t\t\t\tdescription,\n\t\t\t\t\t\t\t\tO.getOrElse(constant('')),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\tto={routes.trade.category.symbol.root}\n\t\t\t\t\t\t\tvalue={{ symbol, categoryId }}\n\t\t\t\t\t\t\trender={({ onNavigate }) => <CloseButton onClick={onNavigate} />}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tempty,\n\t\t\t);\n\n\t\t\tconst renderSuccess = useCallback(\n\t\t\t\t({ description }: SymbolInfoData) => (\n\t\t\t\t\t<SidePanel header={renderHeader(description)} scrollable>\n\t\t\t\t\t\t<SymbolInfoCommon {...props} />\n\t\t\t\t\t</SidePanel>\n\t\t\t\t),\n\t\t\t\t[renderHeader, props],\n\t\t\t);\n\n\t\t\treturn <RemoteDataState data={data} success={renderSuccess} />;\n\t\t}),\n\t),\n);\n","import { createSymbolInfoViewModel, SymbolInfoViewModel } from '../../../../view-model/info/symbol-info.view-model';\nimport { SymbolInfo } from '../../components/symbol-info/symbol-info.component';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { createSelector } from 'reselect';\n\nexport type SymbolInfoContainerContext = {\n\tsymbolInfoViewModel: SymbolInfoViewModel;\n};\n\nconst Container = combineContext(SymbolInfo, ask<SymbolInfoContainerContext>(), (SymbolInfo, e) =>\n\twithRXWithDefaults(SymbolInfo)(() => {\n\t\tconst { symbolInfoViewModel } = e;\n\t\tconst { symbolInfoData$ } = symbolInfoViewModel;\n\n\t\treturn {\n\t\t\tprops: { data: symbolInfoData$ },\n\t\t\tdefaultProps: { data: pending },\n\t\t};\n\t}),\n);\n\nexport const SymbolInfoContainer = combineContext(\n\tdeferContext(Container, 'symbolInfoViewModel'),\n\tcreateSymbolInfoViewModel,\n\t(Container, createSymbolInfoViewModel) =>\n\t\trunOnMount(Container, props => {\n\t\t\tconst symbol = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.symbol,\n\t\t\t);\n\n\t\t\treturn createSelector(\n\t\t\t\tsymbol,\n\t\t\t\tsymbol => ({\n\t\t\t\t\tsymbolInfoViewModel: createSymbolInfoViewModel(symbol),\n\t\t\t\t}),\n\t\t\t);\n\t\t}),\n);\n","import * as React from 'react';\nimport { Component, Fragment, ReactNode, createRef } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport * as cn from 'classnames';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport throttle from '@devexperts/utils/dist/function/throttle';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { CategoryList } from './categories.model';\nimport { routes } from '../../../../ui-common/routes';\nimport { RouteLink } from '../../../../ui-common/route-link/containers/route-link.container';\nimport { Scrollable } from '../../../../ui-common/scrollable/scrollable.component';\nimport { Link } from '../../../../ui-common/link/link.component';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as O from 'fp-ts/lib/Option';\nimport * as scrollableCss from './theme/scrollable.child.module.css';\nimport * as css from './theme/categories.module.css';\n\nexport type TCategoriesListProps = {\n\tdata: RemoteData<Error, CategoryList[]>;\n};\n\nconst THROTTLE_DELAY = 100;\n\nconst linkTheme = {\n\tcontainer: css.link,\n};\n\nconst activeLinkTheme = {\n\tcontainer: cn(css.link, css.link_active),\n};\n\ntype CategoriesListState = {\n\tisEndOfScroll: boolean;\n};\n\nexport const CategoriesList = combineContext(RouteLink, RouteLink =>\n\twithTranslation()(\n\t\tclass CategoriesList extends Component<TCategoriesListProps & WithTranslation, CategoriesListState> {\n\t\t\tprivate ref = createRef<HTMLDivElement>();\n\t\t\treadonly state = {\n\t\t\t\tisEndOfScroll: false,\n\t\t\t};\n\n\t\t\tconstructor(props: TCategoriesListProps & WithTranslation) {\n\t\t\t\tsuper(props);\n\t\t\t\tthis.handleScroll = throttle(this.handleScroll, THROTTLE_DELAY);\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\treturn <RemoteDataState data={this.props.data} success={this.renderSuccess} />;\n\t\t\t}\n\n\t\t\tprivate renderSuccess = (data: CategoryList[]): JSX.Element => {\n\t\t\t\treturn (\n\t\t\t\t\t<Scrollable theme={scrollableCss} onScroll={this.handleScroll}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref={this.ref}\n\t\t\t\t\t\t\tclassName={cn(css.container, {\n\t\t\t\t\t\t\t\t[css.container_hasShadow]: !this.state.isEndOfScroll,\n\t\t\t\t\t\t\t})}>\n\t\t\t\t\t\t\t{data.map(this.renderGroup)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Scrollable>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\trenderGroup = (list: CategoryList, index: number): ReactNode =>\n\t\t\t\tpipe(\n\t\t\t\t\tlist.categories,\n\t\t\t\t\tO.map(categories => (\n\t\t\t\t\t\t<Fragment key={index}>\n\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\tlist.title,\n\t\t\t\t\t\t\t\tO.map(title => <div className={css.title}>{this.localizeCategoryTitle(title)}</div>),\n\t\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div className={css.categories}>\n\t\t\t\t\t\t\t\t{categories.toArray().map(category => this.renderCategory(category.id, category.name))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)),\n\t\t\t\t\tO.toNullable,\n\t\t\t\t);\n\n\t\t\tprivate renderCategory = (categoryId: string, name: string): ReactNode => (\n\t\t\t\t<RouteLink\n\t\t\t\t\tkey={categoryId}\n\t\t\t\t\tto={routes.trade.category.root}\n\t\t\t\t\tvalue={{ categoryId }}\n\t\t\t\t\trender={({ href, onNavigate, isActive }) => (\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\ttheme={isActive ? activeLinkTheme : linkTheme}\n\t\t\t\t\t\t\thref={href}\n\t\t\t\t\t\t\tonClick={this.handleClick(isActive, onNavigate)}>\n\t\t\t\t\t\t\t{this.localizeCategoryName(name)}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t);\n\n\t\t\tprivate localizeCategoryTitle = (title: string) => {\n\t\t\t\tswitch (title) {\n\t\t\t\t\tcase 'Trends':\n\t\t\t\t\t\treturn tspan('categoriesTrends', 'Trends');\n\t\t\t\t\tcase 'Categories':\n\t\t\t\t\t\treturn tspan('categoriesCategories', 'Categories');\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn title;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tprivate localizeCategoryName = (name: string) => {\n\t\t\t\tswitch (name) {\n\t\t\t\t\tcase 'Favorites':\n\t\t\t\t\t\treturn tspan('categoriesFavorites', 'Favorites');\n\t\t\t\t\tcase 'Most rising':\n\t\t\t\t\t\treturn tspan('categoriesMostRising', 'Most rising');\n\t\t\t\t\tcase 'Most falling':\n\t\t\t\t\t\treturn tspan('categoriesMostFalling', 'Most falling');\n\t\t\t\t\tcase 'Most buying':\n\t\t\t\t\t\treturn tspan('categoriesMostBuying', 'Most buying');\n\t\t\t\t\tcase 'Most selling':\n\t\t\t\t\t\treturn tspan('categoriesMostSelling', 'Most selling');\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn name;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\thandleClick = (isActive: boolean, onNavigate: () => void) => (e: React.MouseEvent<HTMLAnchorElement>) => {\n\t\t\t\te.preventDefault();\n\t\t\t\t!isActive && onNavigate();\n\t\t\t};\n\n\t\t\tprivate handleScroll = (scrollLeft: number, scrollTop: number): void => {\n\t\t\t\tconst { current } = this.ref;\n\t\t\t\tconst { isEndOfScroll: stateIsEndOfScroll } = this.state;\n\n\t\t\t\tif (current && current.parentNode) {\n\t\t\t\t\tconst { scrollHeight, offsetHeight } = current.parentNode.parentNode as HTMLDivElement;\n\t\t\t\t\tconst isEndOfScroll: boolean = offsetHeight + scrollTop >= scrollHeight;\n\n\t\t\t\t\tif (stateIsEndOfScroll !== isEndOfScroll) {\n\t\t\t\t\t\tthis.setState({ isEndOfScroll });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t),\n);\n","import { WatchlistEntity } from '../../../../store/watchlist/watchlist.store';\n\nexport const trendsSort = (first: WatchlistEntity, second: WatchlistEntity) => {\n\tconst firstId = Number(first.id);\n\tconst secondId = Number(second.id);\n\n\tif (Number.isNaN(firstId) || Number.isNaN(secondId)) {\n\t\treturn 0;\n\t}\n\tif (firstId > secondId) {\n\t\treturn -1;\n\t} else {\n\t\treturn 1;\n\t}\n};\n","import { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { WatchlistStore } from '../../../../store/watchlist/watchlist.store';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { CategoriesList } from '../../components/categories/categories.component';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { none, some } from 'fp-ts/lib/Option';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { fromArray } from 'fp-ts/lib/NonEmptyArray';\nimport { CategoryList } from '../../components/categories/categories.model';\nimport { trendsSort } from './categories.utils';\n\ntype CategoryContainerContext = {\n\twatchlistStore: WatchlistStore;\n};\n\nexport const CategoriesContainer = combineContext(\n\tCategoriesList,\n\task<CategoryContainerContext>(),\n\t(CategoriesList, e) =>\n\t\twithRXWithDefaults(CategoriesList)(() => {\n\t\t\tconst { watchlistStore } = e;\n\t\t\t//#region component streams\n\t\t\tconst categories$: LiveData<Error, CategoryList[]> = combineLatestRD(\n\t\t\t\twatchlistStore.private$,\n\t\t\t\twatchlistStore.public$,\n\t\t\t\twatchlistStore.categories$,\n\t\t\t).pipe(\n\t\t\t\tmapRD(([privateList, publicList, categoryList]) => [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: none,\n\t\t\t\t\t\tcategories: fromArray(privateList),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: some('Trends'),\n\t\t\t\t\t\tcategories: fromArray(publicList.sort(trendsSort)),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: some('Categories'),\n\t\t\t\t\t\tcategories: fromArray(categoryList),\n\t\t\t\t\t},\n\t\t\t\t]),\n\t\t\t);\n\t\t\t//#endregion\n\n\t\t\treturn {\n\t\t\t\tdefaultProps: {\n\t\t\t\t\tdata: pending,\n\t\t\t\t},\n\t\t\t\tprops: {\n\t\t\t\t\tdata: categories$,\n\t\t\t\t},\n\t\t\t};\n\t\t}),\n);\n","import { Option } from 'fp-ts/lib/Option';\nimport { number, boolean, string, union, literal, array, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type ChartInstrumentTO = {\n\tid: Option<number>;\n\tprecision: Option<number>;\n\thasVolume: Option<boolean>;\n\thasDescription: Option<boolean>;\n\tcode: Option<string>;\n\tdescription: Option<string>;\n\ttype: Option<\n\t\t| 'CURRENCY'\n\t\t| 'STOCK'\n\t\t| 'FOREX'\n\t\t| 'FUTURES'\n\t\t| 'PRODUCT'\n\t\t| 'INDEX'\n\t\t| 'CFD'\n\t\t| 'OPTION'\n\t\t| 'SPREAD_BET'\n\t\t| 'CFD_FUTURES'\n\t\t| 'SB_FUTURES'\n\t\t| 'FX_OPTION'\n\t\t| 'FX_FORWARD'\n\t\t| 'CFD_OPTION'\n\t\t| 'SB_OPTION'\n\t\t| 'CFD_STOCK'\n\t\t| 'SB_STOCK'\n\t\t| 'CFD_FOREX'\n\t\t| 'SB_FOREX'\n\t\t| 'SPREAD'\n\t\t| 'WARRANT'\n\t\t| 'ETF'\n\t\t| 'OTHER'\n\t>;\n\tpricePrecisions: Option<Array<number>>;\n\tpriceIncrements: Option<Array<number>>;\n\tbondFraction: Option<boolean>;\n};\nexport const ChartInstrumentTOIO = type({\n\tid: createOptionFromNullable(number),\n\tprecision: createOptionFromNullable(number),\n\thasVolume: createOptionFromNullable(boolean),\n\thasDescription: createOptionFromNullable(boolean),\n\tcode: createOptionFromNullable(string),\n\tdescription: createOptionFromNullable(string),\n\ttype: createOptionFromNullable(\n\t\tunion([\n\t\t\tliteral('CURRENCY'),\n\t\t\tliteral('STOCK'),\n\t\t\tliteral('FOREX'),\n\t\t\tliteral('FUTURES'),\n\t\t\tliteral('PRODUCT'),\n\t\t\tliteral('INDEX'),\n\t\t\tliteral('CFD'),\n\t\t\tliteral('OPTION'),\n\t\t\tliteral('SPREAD_BET'),\n\t\t\tliteral('CFD_FUTURES'),\n\t\t\tliteral('SB_FUTURES'),\n\t\t\tliteral('FX_OPTION'),\n\t\t\tliteral('FX_FORWARD'),\n\t\t\tliteral('CFD_OPTION'),\n\t\t\tliteral('SB_OPTION'),\n\t\t\tliteral('CFD_STOCK'),\n\t\t\tliteral('SB_STOCK'),\n\t\t\tliteral('CFD_FOREX'),\n\t\t\tliteral('SB_FOREX'),\n\t\t\tliteral('SPREAD'),\n\t\t\tliteral('WARRANT'),\n\t\t\tliteral('ETF'),\n\t\t\tliteral('OTHER'),\n\t\t]),\n\t),\n\tpricePrecisions: createOptionFromNullable(array(number)),\n\tpriceIncrements: createOptionFromNullable(array(number)),\n\tbondFraction: createOptionFromNullable(boolean),\n});\n","import { ChartInstrumentTO, ChartInstrumentTOIO } from '../definitions/ChartInstrumentTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { string, union, literal, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type ChartRequestResultTO = {\n\tfeedSubtopicId: Option<string>;\n\tinstrument: Option<ChartInstrumentTO>;\n\tchartResultRequestError: Option<'ERROR_NONE' | 'ERROR_UNORDERED' | 'ERROR_NO_SYMBOL' | 'ERROR_INCORRECT_VENDOR'>;\n\terrorMessage: Option<string>;\n};\nexport const ChartRequestResultTOIO = type({\n\tfeedSubtopicId: createOptionFromNullable(string),\n\tinstrument: createOptionFromNullable(ChartInstrumentTOIO),\n\tchartResultRequestError: createOptionFromNullable(\n\t\tunion([\n\t\t\tliteral('ERROR_NONE'),\n\t\t\tliteral('ERROR_UNORDERED'),\n\t\t\tliteral('ERROR_NO_SYMBOL'),\n\t\t\tliteral('ERROR_INCORRECT_VENDOR'),\n\t\t]),\n\t),\n\terrorMessage: createOptionFromNullable(string),\n});\n","import { StudyParamTO, StudyParamTOIO } from '../definitions/StudyParamTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { string, array, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type StudyChartRequestTO = { id: Option<string>; parameters: Option<Array<StudyParamTO>> };\nexport const StudyChartRequestTOIO = type({\n\tid: createOptionFromNullable(string),\n\tparameters: createOptionFromNullable(array(StudyParamTOIO)),\n});\n","import { StudyChartRequestTO, StudyChartRequestTOIO } from '../definitions/StudyChartRequestTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { string, number, array, boolean, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type ChartRequestTO = {\n\tsymbol: string;\n\taggregationPeriodSeconds: number;\n\trange: number;\n\tforexPriceField: Option<string>;\n\tstudySubscription: Option<Array<StudyChartRequestTO>>;\n\tsubtopic: string;\n\tmaxBarsCount: number;\n\textendedSession: boolean;\n\tid: number;\n};\nexport const ChartRequestTOIO = type({\n\tsymbol: string,\n\taggregationPeriodSeconds: number,\n\trange: number,\n\tforexPriceField: createOptionFromNullable(string),\n\tstudySubscription: createOptionFromNullable(array(StudyChartRequestTOIO)),\n\tsubtopic: string,\n\tmaxBarsCount: number,\n\textendedSession: boolean,\n\tid: number,\n});\n","import { ChartRequestTO, ChartRequestTOIO } from '../definitions/ChartRequestTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { string, array, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type UpdateChartDataSubscriptionTO = {\n\tchartIds: Option<Array<string>>;\n\trequests: Option<Array<ChartRequestTO>>;\n};\nexport const UpdateChartDataSubscriptionTOIO = type({\n\tchartIds: createOptionFromNullable(array(string)),\n\trequests: createOptionFromNullable(array(ChartRequestTOIO)),\n});\n","import { ResponseValidationError, TAPIClient } from '../client/client';\nimport { ChartRequestResultTO, ChartRequestResultTOIO } from '../definitions/ChartRequestResultTO';\nimport { ChartRequestTO, ChartRequestTOIO } from '../definitions/ChartRequestTO';\nimport { ChartResponseTO, ChartResponseTOIO } from '../definitions/ChartResponseTO';\nimport { StudyTO, StudyTOIO } from '../definitions/StudyTO';\nimport {\n\tUpdateChartDataSubscriptionTO,\n\tUpdateChartDataSubscriptionTOIO,\n} from '../definitions/UpdateChartDataSubscriptionTO';\nimport { fromEither } from '@devexperts/remote-data-ts';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { asks } from 'fp-ts/lib/Reader';\nimport { partial, void as tvoid, number, type } from 'io-ts';\nimport { map } from 'rxjs/operators';\n\nexport type ChartsController = {\n\t/**\n\t * Get chart\n\t * @param { object } [parameters]\n\t */\n\treadonly getChart: (parameters: { body?: ChartRequestTO }) => LiveData<Error, ChartResponseTO>;\n\n\t/**\n\t * Update charts data subscription\n\t * @param { object } [parameters]\n\t */\n\treadonly updateChartsSubscription: (parameters: { body?: UpdateChartDataSubscriptionTO }) => LiveData<Error, void>;\n\n\t/**\n\t * Subscribe on chart data for the specified request\n\t * @param { object } [parameters]\n\t */\n\treadonly requestChart: (parameters: { body?: ChartRequestTO }) => LiveData<Error, ChartRequestResultTO>;\n\n\t/**\n\t * Get study\n\t * @param { object } parameters\n\t */\n\treadonly getStudy: (parameters: { query: { id: number } }) => LiveData<Error, StudyTO>;\n};\n\nexport const chartsController = asks(\n\t(e: { apiClient: TAPIClient }): ChartsController => ({\n\t\tgetChart: parameters => {\n\t\t\tconst encoded = partial({ body: ChartRequestTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/charts`,\n\t\t\t\t\tmethod: 'GET',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ChartResponseTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tupdateChartsSubscription: parameters => {\n\t\t\tconst encoded = partial({ body: UpdateChartDataSubscriptionTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/charts`,\n\t\t\t\t\tmethod: 'PUT',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\trequestChart: parameters => {\n\t\t\tconst encoded = partial({ body: ChartRequestTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/charts`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ChartRequestResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tgetStudy: parameters => {\n\t\t\tconst encoded = partial({ query: type({ id: number }) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/charts/study`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(StudyTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\t}),\n);\n","export type Period = {\n\tname: string;\n\tseconds: number;\n};\n\nexport enum ChartType {\n\tBar = '* BAR *',\n\tCandle = '* CANDLE *',\n\tLine = '* LINE *',\n}\n\nexport enum CrossToolMode {\n\tDisabled = '* DISABLED *',\n\tCrosshair = '* CROSSHAIR *',\n}\n","import * as React from 'react';\nimport { remoteData, RemoteData } from '@devexperts/remote-data-ts';\nimport { ComponentClass, ComponentType, PureComponent } from 'react';\nimport { RemoteDataState } from '../remote-data-state/remote-data-state.component';\nimport { sequence } from 'fp-ts/lib/Traversable';\nimport { array } from 'fp-ts/lib/Array';\n\nexport type MakeRemoteDataLoaderProps<P extends object, Keys extends keyof P> = {\n\t[K in keyof P]: K extends Keys ? RemoteData<unknown, P[K]> : P[K];\n};\n\nconst sequenceRDArray = sequence(remoteData, array);\n\nexport function makeRemoteDataLoader<P extends object, K extends keyof P>(\n\tTarget: ComponentType<P>,\n\t...keys: K[]\n): ComponentClass<MakeRemoteDataLoaderProps<P, K>> {\n\treturn class RemoteDataLoader extends PureComponent<MakeRemoteDataLoaderProps<P, K>> {\n\t\tstatic displayName = `RemoteDataLoader(${Target.displayName || Target.name})`;\n\n\t\trender() {\n\t\t\tconst values = keys.map(key => {\n\t\t\t\tconst prop: RemoteData<Error, P[K]> = this.props[key] as any;\n\t\t\t\treturn prop.map(value => ({\n\t\t\t\t\tkey,\n\t\t\t\t\tvalue,\n\t\t\t\t}));\n\t\t\t});\n\t\t\tconst data = sequenceRDArray(values);\n\t\t\treturn <RemoteDataState data={data} success={this.handleSuccess} />;\n\t\t}\n\n\t\tprivate handleSuccess = (values: Array<{ key: K; value: P[K] }>) => {\n\t\t\tconst props = values.reduce(\n\t\t\t\t(acc, value) => {\n\t\t\t\t\tacc[value.key] = value.value;\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\t{} as P,\n\t\t\t);\n\t\t\treturn <Target {...this.props} {...props} />;\n\t\t};\n\t};\n}\n","import { CrossToolMode, ChartType } from './toolbar.model';\n\nexport const typeToString = (type: ChartType): string => {\n\tswitch (type) {\n\t\tcase ChartType.Line:\n\t\t\treturn 'line';\n\t\tcase ChartType.Bar:\n\t\t\treturn 'bar';\n\t\tcase ChartType.Candle:\n\t\t\treturn 'candle';\n\t}\n};\n\nexport const toType = (type: string): ChartType => {\n\tswitch (type) {\n\t\tcase 'line':\n\t\t\treturn ChartType.Line;\n\t\tcase 'bar':\n\t\t\treturn ChartType.Bar;\n\t\tcase 'candle':\n\t\t\treturn ChartType.Candle;\n\t\tdefault:\n\t\t\treturn ChartType.Candle;\n\t}\n};\n\nexport const modeToString = (mode: CrossToolMode): string => {\n\tswitch (mode) {\n\t\tcase CrossToolMode.Disabled:\n\t\t\treturn 'no crosshair';\n\t\tcase CrossToolMode.Crosshair:\n\t\t\treturn 'crosshair';\n\t}\n};\n\nexport const booleanToMode = (isEnabled: boolean): CrossToolMode =>\n\tisEnabled ? CrossToolMode.Crosshair : CrossToolMode.Disabled;\n\nexport const isCrosshair = (mode: CrossToolMode) => mode === CrossToolMode.Crosshair;\n\nexport const toMode = (mode: string): CrossToolMode => {\n\tswitch (mode) {\n\t\tcase 'no crosshair':\n\t\t\treturn CrossToolMode.Disabled;\n\t\tcase 'crosshair':\n\t\t\treturn CrossToolMode.Crosshair;\n\t\tdefault:\n\t\t\treturn CrossToolMode.Disabled;\n\t}\n};\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const ChartBarIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 24 24\">\n\t\t\t<defs>\n\t\t\t\t<path id=\"chartBarA\" d=\"M6 16V3h2v7h4v2H8v9H6v-3H2v-2h4zM16 6V3h2v11h4v2h-4v5h-2V8h-4V6h4z\" />\n\t\t\t</defs>\n\t\t\t<g fill=\"none\" fillRule=\"evenodd\">\n\t\t\t\t<mask id=\"chartBarB\" fill=\"#fff\">\n\t\t\t\t\t<use xlinkHref=\"#chartBarA\" />\n\t\t\t\t</mask>\n\t\t\t\t<use fill=\"#FFF\" fillRule=\"nonzero\" xlinkHref=\"#chartBarA\" />\n\t\t\t\t<g fill=\"currentcolor\" fillRule=\"nonzero\" stroke=\"#979797\" mask=\"url(#chartBarB)\">\n\t\t\t\t\t<path stroke=\"none\" d=\"M0 0h24v24H0z\" />\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const ChartCandlesIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\">\n\t\t\t<path d=\"M0 0h2v5H0z\" transform=\"translate(3 4)\" />\n\t\t\t<path d=\"M0 0h6v2H0z\" transform=\"translate(1 7)\" />\n\t\t\t<path d=\"M0 0h2v10H0z\" transform=\"translate(1 9)\" />\n\t\t\t<path d=\"M0 0h4v2H0z\" transform=\"translate(3 17)\" />\n\t\t\t<path d=\"M0 0h2v8H0z\" transform=\"translate(5 9)\" />\n\t\t\t<path d=\"M0 0h2v3H0z\" transform=\"translate(3 19)\" />\n\t\t\t<path d=\"M0 0h2v5H0z\" transform=\"translate(12 17)\" />\n\t\t\t<path d=\"M0 0h6v2H0z\" transform=\"translate(10 15)\" />\n\t\t\t<path d=\"M0 0h2v10H0z\" transform=\"translate(10 5)\" />\n\t\t\t<path d=\"M0 0h4v2H0z\" transform=\"translate(12 5)\" />\n\t\t\t<path d=\"M0 0h2v8H0z\" transform=\"translate(14 7)\" />\n\t\t\t<path d=\"M0 0h2v1H0z\" transform=\"translate(12 4)\" />\n\t\t\t<path d=\"M0 0h2v7H0z\" transform=\"translate(21 4)\" />\n\t\t\t<path d=\"M0 0h6v2H0z\" transform=\"translate(19 9)\" />\n\t\t\t<path d=\"M0 0h2v9H0z\" transform=\"translate(19 11)\" />\n\t\t\t<path d=\"M0 0h4v2H0z\" transform=\"translate(21 18)\" />\n\t\t\t<path d=\"M0 0h2v7H0z\" transform=\"translate(23 11)\" />\n\t\t\t<path d=\"M0 0h2v1H0z\" transform=\"translate(21 20)\" />\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const ChartLineIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\">\n\t\t\t<path\n\t\t\t\tfill=\"none\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\tstrokeMiterlimit=\"10\"\n\t\t\t\tstrokeWidth=\"1.5\"\n\t\t\t\td=\"M3 20.623l4.032-8.76 5.095 4.418 3.452-9.9 4.245 6.84 3.169-8.094\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { Component, ComponentClass } from 'react';\nimport * as classnames from 'classnames';\nimport { PURE } from '@devexperts/react-kit/dist/utils/pure';\nimport { Button } from '../../../../../ui-common/button/button.component';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport {\n\tTFullSelectboxAnchorProps,\n\tTSelectboxAnchorProps,\n} from '@devexperts/react-kit/dist/components/Selectbox/SelectboxAnchor';\n\n@PURE\nclass RawPeriodsAnchor extends Component<TFullSelectboxAnchorProps> {\n\trender() {\n\t\tconst { theme, children, valueText, caretIcon, onClick, isOpened } = this.props;\n\n\t\tconst buttonTheme = {\n\t\t\tcontainer: classnames(theme.container, {\n\t\t\t\t[theme.container_isOpened as string]: isOpened,\n\t\t\t}),\n\t\t};\n\n\t\treturn (\n\t\t\t<Button onClick={onClick} theme={buttonTheme}>\n\t\t\t\t<div className={theme.content}>\n\t\t\t\t\t<div className={theme.text}>{valueText}</div>\n\t\t\t\t\t<div className={theme.caret}>{caretIcon}</div>\n\t\t\t\t</div>\n\t\t\t\t{children}\n\t\t\t</Button>\n\t\t);\n\t}\n}\n\nexport const PeriodsAnchor: ComponentClass<TSelectboxAnchorProps> = withTheme(Symbol())(RawPeriodsAnchor);\n","import * as React from 'react';\nimport { Component, ComponentClass, ReactNode } from 'react';\nimport * as classnames from 'classnames';\nimport { PURE } from '@devexperts/react-kit/dist/utils/pure';\nimport { Button } from '../../../../../ui-common/button/button.component';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport {\n\tTFullSelectboxAnchorProps,\n\tTSelectboxAnchorProps,\n} from '@devexperts/react-kit/dist/components/Selectbox/SelectboxAnchor';\nimport { ChartType } from '../toolbar.model';\nimport { toType } from '../toolbar.utils';\nimport { ChartBarIcon } from '../../../../ui-kit/components/icons/chart-bar.icon';\nimport { ChartCandlesIcon } from '../../../../ui-kit/components/icons/chart-candles.icon';\nimport { ChartLineIcon } from '../../../../ui-kit/components/icons/chart-line.icon';\n\n@PURE\nclass RawTypeAnchor extends Component<TFullSelectboxAnchorProps> {\n\trender() {\n\t\tconst { theme, children, valueText, caretIcon, onClick, isOpened } = this.props;\n\n\t\tconst buttonTheme = {\n\t\t\tcontainer: classnames(theme.container, {\n\t\t\t\t[theme.container_isOpened as string]: isOpened,\n\t\t\t}),\n\t\t};\n\n\t\treturn (\n\t\t\t<Button onClick={onClick} theme={buttonTheme}>\n\t\t\t\t<div className={theme.content}>\n\t\t\t\t\t<div className={theme.text}>{this.renderTypeIcon(valueText)}</div>\n\t\t\t\t\t<div className={theme.caret}>{caretIcon}</div>\n\t\t\t\t</div>\n\t\t\t\t{children}\n\t\t\t</Button>\n\t\t);\n\t}\n\n\tprivate renderTypeIcon = (valueText: ReactNode) => {\n\t\tif (valueText !== undefined && valueText !== null) {\n\t\t\tswitch (toType(valueText[1])) {\n\t\t\t\tcase ChartType.Bar:\n\t\t\t\t\treturn <ChartBarIcon />;\n\t\t\t\tcase ChartType.Candle:\n\t\t\t\t\treturn <ChartCandlesIcon />;\n\t\t\t\tcase ChartType.Line:\n\t\t\t\t\treturn <ChartLineIcon />;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n}\n\nexport const TypeAnchor: ComponentClass<TSelectboxAnchorProps> = withTheme(Symbol())(RawTypeAnchor);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const NoCrosshairIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M12.794 21.422a1.31 1.31 0 0 0 1.717.728l1.266-.527a1.363 1.363 0 0 0 .723-1.78l-1.509-3.657H17.3a1.358 1.358 0 0 0 .957-2.286l-8.6-9.226a1.319 1.319 0 0 0-2.278.935v13.178a1.318 1.318 0 0 0 2.3.91l1.642-1.857zm-1.119-5.677l-2.841 3.206c-.125.141-.334.04-.334-.163V5.606c0-.2.2-.3.33-.168l8.6 9.226a.234.234 0 0 1-.133.4h-3.985l2.144 5.207a.242.242 0 0 1-.112.313l-1.266.527a.188.188 0 0 1-.243-.117z\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const AimIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 24 24\">\n\t\t\t<g fill=\"none\" fillRule=\"evenodd\">\n\t\t\t\t<path stroke=\"currentcolor\" d=\"M11.5 4.5v5h1v-5h-1zm0 10v5h1v-5h-1zm8-3h-5v1h5v-1zm-10 0h-5v1h5v-1z\" />\n\t\t\t</g>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { Component, ComponentClass, ReactNode } from 'react';\nimport * as classnames from 'classnames';\nimport { PURE } from '@devexperts/react-kit/dist/utils/pure';\nimport { Button } from '../../../../../ui-common/button/button.component';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport {\n\tTFullSelectboxAnchorProps,\n\tTSelectboxAnchorProps,\n} from '@devexperts/react-kit/dist/components/Selectbox/SelectboxAnchor';\nimport { CrossToolMode } from '../toolbar.model';\nimport { NoCrosshairIcon } from '../../../../ui-kit/components/icons/no-crosshair.icon';\nimport { AimIcon } from '../../../../ui-kit/components/icons/aim.icon';\nimport { toMode } from '../toolbar.utils';\n\n@PURE\nclass RawCrossToolAnchor extends Component<TFullSelectboxAnchorProps> {\n\trender() {\n\t\tconst { theme, children, valueText, caretIcon, onClick, isOpened } = this.props;\n\n\t\tconst buttonTheme = {\n\t\t\tcontainer: classnames(theme.container, {\n\t\t\t\t[theme.container_isOpened as string]: isOpened,\n\t\t\t}),\n\t\t};\n\n\t\treturn (\n\t\t\t<Button onClick={onClick} theme={buttonTheme}>\n\t\t\t\t<div className={theme.content}>\n\t\t\t\t\t<div className={theme.text}>{this.renderCrossToolIcon(valueText)}</div>\n\t\t\t\t\t<div className={theme.caret}>{caretIcon}</div>\n\t\t\t\t</div>\n\t\t\t\t{children}\n\t\t\t</Button>\n\t\t);\n\t}\n\n\tprivate renderCrossToolIcon = (valueText: ReactNode) => {\n\t\tif (valueText !== undefined && valueText !== null) {\n\t\t\tswitch (toMode(valueText[1])) {\n\t\t\t\tcase CrossToolMode.Disabled:\n\t\t\t\t\treturn <NoCrosshairIcon />;\n\t\t\t\tcase CrossToolMode.Crosshair:\n\t\t\t\t\treturn <AimIcon />;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n}\n\nexport const CrossToolAnchor: ComponentClass<TSelectboxAnchorProps> = withTheme(Symbol())(RawCrossToolAnchor);\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { findFirst } from 'fp-ts/lib/Array';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { MenuItem } from '@devexperts/react-kit/dist/components/Menu/Menu';\nimport { CrossToolMode, Period, ChartType } from '../toolbar.model';\nimport { typeToString, modeToString, toMode, toType } from '../toolbar.utils';\nimport { eqNumber, eqString } from 'fp-ts/lib/Eq';\nimport { ChartBarIcon } from '../../../../ui-kit/components/icons/chart-bar.icon';\nimport { ChartCandlesIcon } from '../../../../ui-kit/components/icons/chart-candles.icon';\nimport { ChartLineIcon } from '../../../../ui-kit/components/icons/chart-line.icon';\nimport { Selectbox } from '../../../../ui-kit/components/selectbox/selectbox.component';\nimport { Menu, TMenuProps } from '../../../../ui-kit/components/menu/menu.component';\nimport { Scrollable } from '../../../../../ui-common/scrollable/scrollable.component';\nimport { PeriodsAnchor } from '../periods-anchor/periods-anchor.component';\nimport { TypeAnchor } from '../type-anchor/type-anchor.component';\nimport { NoCrosshairIcon } from '../../../../ui-kit/components/icons/no-crosshair.icon';\nimport { AimIcon } from '../../../../ui-kit/components/icons/aim.icon';\nimport { CrossToolAnchor } from '../cross-tool-anchor/cross-tool-anchor.component';\nimport { tspan } from '../../../../../utils/i18n.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\nimport * as css from './theme/toolbar.module.css';\nimport * as periodsSelectboxCss from './theme/periods-selectbox.child.module.css';\nimport * as typeSelectboxCss from './theme/type-selectbox.child.module.css';\nimport * as crossToolSelectboxCss from './theme/cross-tool-selectbox.child.module.css';\n\nexport type ToolbarProps = {\n\tperiods: Period[];\n\tselectedPeriod: Period;\n\ttitle: Option<string>;\n\tselectedType: ChartType;\n\tselectedCrossToolMode: CrossToolMode;\n\tonPeriodSelect: (period: Period) => void;\n\tonTypeSelect: (type: ChartType) => void;\n\tonCrossToolModeSelect: (type: CrossToolMode) => void;\n};\n\ntype ToolbarState = {\n\tisPeriodsSelectboxOpened: boolean;\n\tisTypeSelectboxOpened: boolean;\n\tisCrossToolModeSelectboxOpened: boolean;\n};\n\nclass ToolbarRaw extends PureComponent<ToolbarProps & WithTranslation, ToolbarState> {\n\treadonly state: ToolbarState = {\n\t\tisPeriodsSelectboxOpened: false,\n\t\tisTypeSelectboxOpened: false,\n\t\tisCrossToolModeSelectboxOpened: false,\n\t};\n\n\trender() {\n\t\tconst { periods, title, selectedPeriod, selectedType, selectedCrossToolMode } = this.props;\n\t\tconst { isPeriodsSelectboxOpened, isTypeSelectboxOpened, isCrossToolModeSelectboxOpened } = this.state;\n\n\t\treturn (\n\t\t\t<div className={css.container}>\n\t\t\t\t<div className={css.controls}>\n\t\t\t\t\t<Selectbox\n\t\t\t\t\t\tisOpened={isPeriodsSelectboxOpened}\n\t\t\t\t\t\tonToggle={this.handlePeriodsToggle}\n\t\t\t\t\t\tvalue={selectedPeriod.seconds}\n\t\t\t\t\t\tonValueChange={this.handlePeriodSelect}\n\t\t\t\t\t\tAnchor={PeriodsAnchor}\n\t\t\t\t\t\tMenu={this.renderScrollableMenu()}\n\t\t\t\t\t\ttheme={periodsSelectboxCss}>\n\t\t\t\t\t\t{periods.map((period, index) => (\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tvalue={period.seconds}\n\t\t\t\t\t\t\t\tisActive={eqNumber.equals(selectedPeriod.seconds, period.seconds)}>\n\t\t\t\t\t\t\t\t{period.name}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Selectbox>\n\t\t\t\t\t<Selectbox\n\t\t\t\t\t\tisOpened={isTypeSelectboxOpened}\n\t\t\t\t\t\tonToggle={this.handleTypeToggle}\n\t\t\t\t\t\tvalue={typeToString(selectedType)}\n\t\t\t\t\t\tonValueChange={this.handleTypeSelect}\n\t\t\t\t\t\tAnchor={TypeAnchor}\n\t\t\t\t\t\ttheme={typeSelectboxCss}>\n\t\t\t\t\t\t{Object.values(ChartType).map(type => (\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tkey={type}\n\t\t\t\t\t\t\t\tvalue={typeToString(type)}\n\t\t\t\t\t\t\t\tisActive={eqString.equals(typeToString(selectedType), typeToString(type))}>\n\t\t\t\t\t\t\t\t<div className={css.menuTypeIcon}>{this.renderTypeIcon(type)}</div>\n\t\t\t\t\t\t\t\t{this.localizeChartType(type)}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Selectbox>\n\t\t\t\t\t<Selectbox\n\t\t\t\t\t\tisOpened={isCrossToolModeSelectboxOpened}\n\t\t\t\t\t\tonToggle={this.handleCrossToolModeToggle}\n\t\t\t\t\t\tvalue={modeToString(selectedCrossToolMode)}\n\t\t\t\t\t\tonValueChange={this.handleCrossToolModeSelect}\n\t\t\t\t\t\tAnchor={CrossToolAnchor}\n\t\t\t\t\t\ttheme={crossToolSelectboxCss}>\n\t\t\t\t\t\t{Object.values(CrossToolMode).map(mode => (\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tkey={mode}\n\t\t\t\t\t\t\t\tvalue={modeToString(mode)}\n\t\t\t\t\t\t\t\tisActive={eqString.equals(modeToString(selectedCrossToolMode), modeToString(mode))}>\n\t\t\t\t\t\t\t\t<div className={css.menuTypeIcon}>{this.renderCrossToolIcon(mode)}</div>\n\t\t\t\t\t\t\t\t{this.localizeCrossMode(mode)}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Selectbox>\n\t\t\t\t</div>\n\t\t\t\t<div className={css.title}>\n\t\t\t\t\t{pipe(\n\t\t\t\t\t\ttitle,\n\t\t\t\t\t\tO.getOrElse(constant('')),\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tprivate renderScrollableMenu = () => (props: TMenuProps) => (\n\t\t<Scrollable>\n\t\t\t<Menu {...props} />\n\t\t</Scrollable>\n\t);\n\n\tprivate handlePeriodsToggle = (isOpened: boolean | undefined) => {\n\t\tif (isOpened !== undefined) {\n\t\t\tthis.setState({ isPeriodsSelectboxOpened: isOpened });\n\t\t}\n\t};\n\n\tprivate handlePeriodSelect = (seconds: number | undefined | string) => {\n\t\tconst selectedPeriod = pipe(\n\t\t\tO.fromNullable(seconds),\n\t\t\tO.chain(seconds => findFirst(this.props.periods, item => item.seconds === seconds)),\n\t\t);\n\t\tO.isSome(selectedPeriod) && this.props.onPeriodSelect(selectedPeriod.value);\n\t};\n\n\tprivate renderTypeIcon = (type: ChartType): JSX.Element => {\n\t\tswitch (type) {\n\t\t\tcase ChartType.Bar:\n\t\t\t\treturn <ChartBarIcon />;\n\t\t\tcase ChartType.Candle:\n\t\t\t\treturn <ChartCandlesIcon />;\n\t\t\tcase ChartType.Line:\n\t\t\t\treturn <ChartLineIcon />;\n\t\t}\n\t};\n\n\tprivate renderCrossToolIcon = (mode: CrossToolMode): JSX.Element => {\n\t\tswitch (mode) {\n\t\t\tcase CrossToolMode.Disabled:\n\t\t\t\treturn <NoCrosshairIcon />;\n\t\t\tcase CrossToolMode.Crosshair:\n\t\t\t\treturn <AimIcon />;\n\t\t}\n\t};\n\n\tprivate handleTypeToggle = (isOpened: boolean | undefined) => {\n\t\tif (isOpened !== undefined) {\n\t\t\tthis.setState({ isTypeSelectboxOpened: isOpened });\n\t\t}\n\t};\n\n\tprivate handleTypeSelect = (type: string | number | undefined) => {\n\t\tif (type !== undefined) {\n\t\t\tthis.props.onTypeSelect(toType(type.toString()));\n\t\t}\n\t};\n\n\tprivate handleCrossToolModeToggle = (isOpened: boolean | undefined) => {\n\t\tif (isOpened !== undefined) {\n\t\t\tthis.setState({ isCrossToolModeSelectboxOpened: isOpened });\n\t\t}\n\t};\n\n\tprivate handleCrossToolModeSelect = (type: string | number | undefined) => {\n\t\tif (type !== undefined) {\n\t\t\tthis.props.onCrossToolModeSelect(toMode(type.toString()));\n\t\t}\n\t};\n\n\tprivate localizeChartType = (type: ChartType) => {\n\t\tswitch (type) {\n\t\t\tcase ChartType.Bar:\n\t\t\t\treturn tspan('chartToolbarTypeBar', 'Bar');\n\t\t\tcase ChartType.Candle:\n\t\t\t\treturn tspan('chartToolbarTypeCandle', 'Candle');\n\t\t\tcase ChartType.Line:\n\t\t\t\treturn tspan('chartToolbarTypeLine', 'Line');\n\t\t}\n\t};\n\n\tprivate localizeCrossMode = (mode: CrossToolMode) => {\n\t\tswitch (mode) {\n\t\t\tcase CrossToolMode.Disabled:\n\t\t\t\treturn tspan('chartToolbarCrossModeDisabled', 'No crosshair');\n\t\t\tcase CrossToolMode.Crosshair:\n\t\t\t\treturn tspan('chartToolbarCrossModeCrosshair', 'Crosshair');\n\t\t}\n\t};\n}\n\nexport const Toolbar = withTranslation()(ToolbarRaw);\n","import Emitter from '@devexperts/utils/dist/emitter/Emitter';\n\n/**\n * CrossToolViewModel events\n * @enum {String}\n */\nexport const E_CROSS_TOOL_PLUGIN_MODEL = {\n\tCHANGE_IS_FIXED: 'CHANGE:IS_FIXED',\n\tCHANGE_IS_ENABLED: 'CHANGE:IS_ENABLED',\n\tCHANGE_DATETIME_FORMATTER: 'CHANGE:DATETIME_FORMATTER',\n};\n\nexport type CrossToolConfig = {\n\tisFixed: boolean;\n\tisEnabled: boolean;\n\tdateTimeFormatter: (date: Date) => string;\n};\n\n/**\n * @typedef {Object} TCrossToolPluginModel\n * @property {boolean} [isFixed]\n * @property {boolean} [isEnabled]\n * @property {function(date:Date):String} [dateTimeFormatter]\n */\n\n/**\n * @class CrossToolViewModel\n */\nexport default class CrossToolViewModel extends Emitter {\n\tprivate _isFixed = false;\n\n\tget isFixed() {\n\t\treturn this._isFixed;\n\t}\n\n\tset isFixed(value: boolean) {\n\t\tif (this._isFixed !== value) {\n\t\t\tthis._isFixed = value;\n\t\t\tthis._emit(E_CROSS_TOOL_PLUGIN_MODEL.CHANGE_IS_FIXED, value);\n\t\t}\n\t}\n\n\tprivate _isEnabled = true;\n\n\tget isEnabled() {\n\t\treturn this._isEnabled;\n\t}\n\n\tset isEnabled(value: boolean) {\n\t\tif (this._isEnabled !== value) {\n\t\t\tthis._isEnabled = value;\n\t\t\tthis._emit(E_CROSS_TOOL_PLUGIN_MODEL.CHANGE_IS_ENABLED, value);\n\t\t}\n\t}\n\n\tprivate _dateTimeFormatter: CrossToolConfig['dateTimeFormatter'] = value => value.toString();\n\n\tget dateTimeFormatter() {\n\t\treturn this._dateTimeFormatter;\n\t}\n\n\tset dateTimeFormatter(formatter: (date: Date) => string) {\n\t\tif (this._dateTimeFormatter !== formatter) {\n\t\t\tthis._dateTimeFormatter = formatter;\n\t\t\tthis._emit(E_CROSS_TOOL_PLUGIN_MODEL.CHANGE_DATETIME_FORMATTER, formatter);\n\t\t}\n\t}\n\n\t/**\n\t * @param {TCrossToolPluginModel} [config]\n\t */\n\tconstructor(config = CrossToolViewModel.config) {\n\t\tsuper();\n\t\tlet merged = config;\n\t\tif (config !== CrossToolViewModel.config) {\n\t\t\tmerged = Object.assign({}, CrossToolViewModel.config, config);\n\t\t}\n\t\tthis.isFixed = merged.isFixed;\n\t\tthis.isEnabled = merged.isEnabled;\n\t\tthis.dateTimeFormatter = merged.dateTimeFormatter;\n\t}\n\n\t/**\n\t * @type {TCrossToolPluginModel}\n\t */\n\tstatic config: CrossToolConfig = {\n\t\tisFixed: true,\n\t\tisEnabled: false,\n\t\tdateTimeFormatter: value => value.toString(),\n\t};\n}\n","import CrossToolViewModel, { E_CROSS_TOOL_PLUGIN_MODEL } from '../models/cross-tool.view-model';\nimport css from './cross-tool.module.css';\nimport * as classnames from 'classnames';\nimport ChartInfoView from './chart-info.view';\nimport { StudySeries } from '../../../chart.model';\nimport Hover from '@dx-private/dxchart5/dist/js/chart/model/Hover';\n\nfunction createElementWithClass(tagName: string, className: string) {\n\tconst element = document.createElement(tagName);\n\n\telement.className = className;\n\n\treturn element;\n}\n\n/**\n * This is used for main chart info box (Candles)\n * @type {Number}\n */\n\nconst MAIN_CHART_INFO_ID = 0;\n\n/**\n * CrossToolPluginView\n */\nexport default class CrossToolPluginView {\n\t/**\n\t * @type {CrossToolViewModel}\n\t * @private\n\t */\n\t_model: CrossToolViewModel;\n\n\t/**\n\t * Main element\n\t * @type {HTMLElement|Element}\n\t * @private\n\t */\n\t_element: Element;\n\n\t/**\n\t * Parent container\n\t * @type {HTMLElement|Element|EventTarget}\n\t */\n\t_container: Element;\n\n\t/**\n\t * @type {boolean}\n\t * @private\n\t */\n\t_isVisible = false;\n\n\t/**\n\t * @type {boolean}\n\t * @private\n\t */\n\t_isDisabled = false;\n\n\t/**\n\t * @type {boolean}\n\t * @private\n\t */\n\t_isMobile = false;\n\n\t/**\n\t * @type {ChartInfoView}\n\t * @private\n\t */\n\t_chartInfoView: ChartInfoView;\n\n\t/**\n\t * @type {HTMLElement}\n\t * @private\n\t */\n\t_chartInfoContainer: Element;\n\n\t/**\n\t * @type {HTMLElement}\n\t * @private\n\t */\n\t_xAxisLine: Element;\n\n\t/**\n\t * @type {HTMLElement}\n\t * @private\n\t */\n\t_yAxisLine: Element;\n\n\t/**\n\t * @type {HTMLElement|Element}\n\t * @private\n\t */\n\t_xChartAxisLabel?: Element;\n\n\t/**\n\t * @type {HTMLElement|Element}\n\t * @private\n\t */\n\t_yChartAxisLabel?: Element;\n\n\t/**\n\t * @type {HTMLElement|Element}\n\t * @private\n\t */\n\t_xChartAxisLabelValue?: Element;\n\n\t/**\n\t * @type {HTMLElement|Element}\n\t * @private\n\t */\n\t_yChartAxisLabelValue?: Element;\n\n\t/**\n\t * @type {boolean}\n\t * @private\n\t */\n\t_isXAxisLineVisible = false;\n\n\t/**\n\t * @type {Number}\n\t */\n\t_uiid = MAIN_CHART_INFO_ID;\n\n\t/**\n\t * @type {function(event:Event):void}\n\t * @private\n\t */\n\t_onMouseOver?: (e: Event) => void;\n\n\t/**\n\t * @type {function(event:Event):void}\n\t * @private\n\t */\n\t_onMouseOut?: (e: Event) => void;\n\n\t/**\n\t * @type {boolean}\n\t * @private\n\t */\n\t_isAlignedRight = false;\n\n\tconstructor(\n\t\tcontainer: Element,\n\t\tmodel: CrossToolViewModel,\n\t\tchartXAxis: Element | null,\n\t\tchartYAxis: Element | null,\n\t\tstudySeries: StudySeries | null,\n\t\tisMobile: boolean,\n\t\tcreateChartInfoView: (\n\t\t\tcontainer: Element,\n\t\t\tstudySeries: StudySeries | null,\n\t\t\tmodel: CrossToolViewModel,\n\t\t\tisMobile: boolean,\n\t\t) => ChartInfoView,\n\t) {\n\t\tif (studySeries) {\n\t\t\t//study, not candles\n\t\t\tthis._uiid = studySeries.uiid;\n\t\t}\n\t\tthis._container = container;\n\t\tthis._model = model;\n\n\t\tthis._isDisabled = !model.isEnabled;\n\t\tthis._isMobile = isMobile;\n\n\t\t//create element\n\t\tthis._element = createElementWithClass('div', css.container);\n\t\tthis._container.appendChild(this._element);\n\n\t\t//create axis-lines\n\t\tthis._xAxisLine = createElementWithClass('div', classnames(css.axis, css.axis_x));\n\t\tthis._yAxisLine = createElementWithClass('div', classnames(css.axis, css.axis_y));\n\t\tthis._element.appendChild(this._xAxisLine);\n\t\tthis._element.appendChild(this._yAxisLine);\n\n\t\t//create axis-labels\n\t\tif (chartXAxis) {\n\t\t\tthis._xChartAxisLabel = createElementWithClass('div', classnames(css.axisLabel, css.axisLabel_x));\n\t\t\tthis._xChartAxisLabelValue = createElementWithClass('div', classnames(css.axisLabelValue));\n\t\t\tconst xChartAxisLabelLine = createElementWithClass('div', classnames(css.axis, css.axis_y));\n\t\t\tthis._xChartAxisLabel.appendChild(xChartAxisLabelLine);\n\t\t\tthis._xChartAxisLabel.appendChild(this._xChartAxisLabelValue);\n\t\t\tif (chartXAxis.parentNode) {\n\t\t\t\tchartXAxis.parentNode.appendChild(this._xChartAxisLabel);\n\t\t\t}\n\t\t}\n\t\tif (chartYAxis) {\n\t\t\tthis._yChartAxisLabel = createElementWithClass('div', classnames(css.axisLabel, css.axisLabel_y));\n\t\t\tthis._yChartAxisLabelValue = createElementWithClass('div', classnames(css.axisLabelValue));\n\t\t\tconst yChartAxisLabelLine = createElementWithClass('div', classnames(css.axis, css.axis_x));\n\t\t\tthis._yChartAxisLabel.appendChild(yChartAxisLabelLine);\n\t\t\tthis._yChartAxisLabel.appendChild(this._yChartAxisLabelValue);\n\t\t\tif (chartYAxis.parentNode) {\n\t\t\t\tchartYAxis.parentNode.appendChild(this._yChartAxisLabel);\n\t\t\t}\n\t\t}\n\n\t\t//create ChartInfo view\n\t\tthis._chartInfoContainer = createElementWithClass(\n\t\t\t'div',\n\t\t\tclassnames(css.chartInfo, {\n\t\t\t\t[css.chartInfo_fixed]: this._model.isFixed,\n\t\t\t\t[css.chartInfo_mobile]: this._isMobile,\n\t\t\t}),\n\t\t);\n\t\tthis._chartInfoView = createChartInfoView(this._chartInfoContainer, studySeries, this._model, this._isMobile);\n\t\tthis._element.appendChild(this._chartInfoContainer);\n\n\t\t//subscribe to model\n\t\tthis._model.on(E_CROSS_TOOL_PLUGIN_MODEL.CHANGE_IS_FIXED, this._onChangeIsFixed);\n\n\t\tif (this._isDisabled) {\n\t\t\tthis._disable();\n\t\t} else {\n\t\t\tthis._enable();\n\t\t}\n\t}\n\n\t/**\n\t * Update\n\t */\n\tupdate(hoverModel: Hover) {\n\t\tthis._chartInfoView.update(hoverModel);\n\t\tthis._moveChartInfoView(hoverModel.x);\n\t\tthis._moveAxises(hoverModel.x, hoverModel.y, hoverModel.id);\n\t\tthis._updateLabels(\n\t\t\thoverModel.x,\n\t\t\thoverModel.y,\n\t\t\thoverModel.id,\n\t\t\thoverModel.time,\n\t\t\thoverModel.model.priceFormatter(hoverModel.yValue),\n\t\t);\n\t}\n\n\t/**\n\t * Enables view\n\t */\n\tenable() {\n\t\tif (this._isDisabled) {\n\t\t\tthis._isDisabled = false;\n\t\t\tthis._enable();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\t_enable() {\n\t\tthis._element.classList.remove(css.disabled);\n\t}\n\n\t/**\n\t * Disables view and hides subview\n\t */\n\tdisable() {\n\t\tif (!this._isDisabled) {\n\t\t\tthis._isDisabled = true;\n\t\t\tthis._disable();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\t_disable() {\n\t\tthis._element.classList.add(css.disabled);\n\t\tthis.hide();\n\t}\n\n\t/**\n\t * Shows view\n\t */\n\tshow() {\n\t\tif (!this._isVisible) {\n\t\t\tthis._isVisible = true;\n\t\t\tthis._show();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\t_show() {\n\t\tthis._element.classList.add(css.visible);\n\t\tif (this._xChartAxisLabel) {\n\t\t\tthis._xChartAxisLabel.classList.add(css.axisLabel_visible);\n\t\t}\n\t}\n\n\t/**\n\t * Hides view\n\t */\n\thide() {\n\t\tif (this._isVisible) {\n\t\t\tthis._isVisible = false;\n\t\t\tthis._hide();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\t_hide() {\n\t\tthis._element.classList.remove(css.visible);\n\t\tif (this._xChartAxisLabel) {\n\t\t\tthis._xChartAxisLabel.classList.remove(css.axisLabel_visible);\n\t\t}\n\t\tif (this._yChartAxisLabel) {\n\t\t\tthis._yChartAxisLabel.classList.remove(css.axisLabel_visible);\n\t\t}\n\t}\n\n\t/**\n\t * Notify this view that the chart have been resized.\n\t */\n\tnotifyResized() {\n\t\tthis._chartInfoView.notifyResized();\n\t}\n\n\t/**\n\t * Study uiid, empty is candles\n\t */\n\tget uiid() {\n\t\treturn this._uiid;\n\t}\n\n\t/**\n\t * Adds study\n\t * @param {StudySeries} studySeries\n\t */\n\taddStudy(studySeries: StudySeries) {\n\t\tthis._chartInfoView.addStudy(studySeries);\n\t}\n\n\t/**\n\t * Removes study\n\t * @param {StudySeries} studySeries\n\t */\n\tremoveStudy(studySeries: StudySeries) {\n\t\tthis._chartInfoView.removeStudy(studySeries);\n\t}\n\n\t/**\n\t * Teardown\n\t */\n\tclose() {\n\t\t//unsubscribe from model\n\t\tthis._model.off(E_CROSS_TOOL_PLUGIN_MODEL.CHANGE_IS_FIXED, this._onChangeIsFixed);\n\n\t\t//close ChartInfo view\n\t\tthis._chartInfoView.close();\n\n\t\t//clean chart axises\n\t\tif (this._xChartAxisLabel && this._xChartAxisLabel.parentNode) {\n\t\t\tthis._xChartAxisLabel.parentNode.removeChild(this._xChartAxisLabel);\n\t\t}\n\t\tif (this._yChartAxisLabel && this._yChartAxisLabel.parentNode) {\n\t\t\tthis._yChartAxisLabel.parentNode.removeChild(this._yChartAxisLabel);\n\t\t}\n\n\t\t//clean container\n\t\tthis._container.removeChild(this._element);\n\n\t\t//clean passed references\n\t\tdelete this['_container'];\n\t\tdelete this['_model'];\n\t}\n\n\t/////////////////////\n\t// PRIVATE MEMBERS //\n\t/////////////////////\n\n\t/**\n\t * Moves crosstool axis-lines\n\t * @param {number} x\n\t * @param {number} y\n\t * @param {number} uiid\n\t * @private\n\t */\n\t_moveAxises(x: number, y: number, uiid: number) {\n\t\tthis._yAxisLine['style'].transform = `translateX(${x}px)`;\n\t\tconst notStudyView = !uiid && !this._uiid;\n\t\tif (notStudyView || this._uiid === uiid) {\n\t\t\tthis._xAxisLine['style'].transform = `translateY(${y}px)`;\n\t\t}\n\t\tif (notStudyView || this._uiid === uiid) {\n\t\t\tthis._xAxisLine.classList.add(css.axis_visible);\n\t\t} else {\n\t\t\tthis._xAxisLine.classList.remove(css.axis_visible);\n\t\t}\n\t}\n\n\t/**\n\t * Moves ChartInfoView\n\t * @param {Number} x\n\t * @private\n\t */\n\t_moveChartInfoView(x: number) {\n\t\tif (!this._model.isFixed) {\n\t\t\tthis._chartInfoContainer['style'].transform = `translateX(${x}px)`;\n\t\t\tif (x + this._chartInfoContainer.clientWidth >= this._container.clientWidth) {\n\t\t\t\tif (!this._isAlignedRight) {\n\t\t\t\t\tthis._isAlignedRight = true;\n\t\t\t\t\tthis._chartInfoContainer.classList.add(css.chartInfo_alignedRight);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._isAlignedRight) {\n\t\t\t\t\tthis._isAlignedRight = false;\n\t\t\t\t\tthis._chartInfoContainer.classList.remove(css.chartInfo_alignedRight);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Move and update labels\n\t * @param {number} x\n\t * @param {number} y\n\t * @param {number} uiid\n\t * @param {string} xValue\n\t * @param {string} yValue\n\t * @private\n\t */\n\t_updateLabels(x: number, y: number, uiid: number, xValue: string, yValue: string) {\n\t\tif (this._xChartAxisLabel) {\n\t\t\t//update x label\n\t\t\tthis._xChartAxisLabel['style'].transform = `translateX(${x}px)`;\n\t\t}\n\n\t\tif (this._xChartAxisLabelValue) {\n\t\t\tthis._xChartAxisLabelValue['textContent'] = xValue;\n\t\t}\n\n\t\tconst notStudyView = !uiid && !this._uiid;\n\t\tif ((notStudyView || this._uiid === uiid) && this._yChartAxisLabel && this._yChartAxisLabelValue) {\n\t\t\t//update y label\n\t\t\tthis._yChartAxisLabel.classList.add(css.axisLabel_visible);\n\t\t\tthis._yChartAxisLabel['style'].transform = `translateY(${y}px)`;\n\t\t\tthis._yChartAxisLabelValue['textContent'] = yValue;\n\t\t} else {\n\t\t\tif (this._yChartAxisLabel) {\n\t\t\t\tthis._yChartAxisLabel.classList.remove(css.axisLabel_visible);\n\t\t\t}\n\t\t}\n\t}\n\n\t//////////////////////////\n\t// MODEL EVENT HANDLERS //\n\t//////////////////////////\n\n\t_onChangeIsFixed = (isFixed: boolean) => {\n\t\tif (isFixed) {\n\t\t\tthis._chartInfoContainer.classList.add(css.chartInfo_fixed);\n\t\t\tthis._chartInfoContainer['style'].transform = 'none';\n\t\t} else {\n\t\t\tthis._chartInfoContainer.classList.remove(css.chartInfo_fixed);\n\t\t}\n\t};\n}\n","import * as css from './ava-chart-Info.module.css';\nimport ChartInfoView from './chart-info.view';\nimport CrossToolViewModel, { E_CROSS_TOOL_PLUGIN_MODEL } from '../models/cross-tool.view-model';\nimport * as classnames from 'classnames';\nimport Hover from '@dx-private/dxchart5/dist/js/chart/model/Hover';\nimport { StudySeries } from '../../../chart.model';\n\nlet wheelEvent: string;\nwheelEvent = document.documentElement && 'onmousewheel' in document.documentElement ? 'mousewheel' : 'DOMMouseScroll';\ntry {\n\t//noinspection JSPotentiallyInvalidConstructorUsage\n\t/*eslint-disable babel/new-cap*/\n\tconst e = new WheelEvent('wheel');\n\tif (e) {\n\t\twheelEvent = 'wheel';\n\t}\n} catch (e) {}\n\nconst CANDLE_DIRECTION = {\n\tBULL: 'bull',\n\tBEAR: 'bear',\n};\n\nexport default class AVAChartInfoView extends ChartInfoView {\n\tprivate _candleGroup: Element | null = null;\n\n\tprotected _content: Element | null = null;\n\n\tprivate _toggle: Element | null = null;\n\n\tprivate _isCollapsed = false;\n\n\tprivate _overlaysAmount = 0;\n\n\tconstructor(container: Element, studySeries: StudySeries | null, model: CrossToolViewModel, isMobile: boolean) {\n\t\tsuper(container, studySeries, model);\n\t\tthis._model.on(E_CROSS_TOOL_PLUGIN_MODEL.CHANGE_IS_FIXED, this._onModelIsFixedChange);\n\t\tthis._element.classList.add(isMobile ? css.containerMobile : css.containerDesktop);\n\t\tif (!studySeries) {\n\t\t\tthis._element.classList.add(css.overlay);\n\t\t}\n\t}\n\n\tclose() {\n\t\tthis._model.off(E_CROSS_TOOL_PLUGIN_MODEL.CHANGE_IS_FIXED, this._onModelIsFixedChange);\n\t\tif (this._toggle) {\n\t\t\tthis._toggle.removeEventListener('click', this._onToggleClick);\n\t\t}\n\t\t//noinspection JSUnresolvedFunction\n\t\tthis._element.removeEventListener(wheelEvent, this._onWheelScroll);\n\n\t\tsuper.close();\n\t}\n\n\tupdate(hoverModel: Hover) {\n\t\tif (this._candleGroup) {\n\t\t\tthis._candleGroup.classList.remove(css.group_up);\n\t\t\tthis._candleGroup.classList.remove(css.group_down);\n\t\t\tswitch (hoverModel.candle.direction) {\n\t\t\t\tcase CANDLE_DIRECTION.BEAR:\n\t\t\t\t\tthis._candleGroup.classList.add(css.group_down);\n\t\t\t\t\tbreak;\n\t\t\t\tcase CANDLE_DIRECTION.BULL:\n\t\t\t\t\tthis._candleGroup.classList.add(css.group_up);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tsuper.update(hoverModel);\n\n\t\tif (!this._studySeries) {\n\t\t\t//main ChartInfoView\n\t\t\t//update only for overlaying\n\t\t\tconst overlaysAmount = hoverModel.overlays.length;\n\t\t\tif (this._overlaysAmount !== overlaysAmount) {\n\t\t\t\t//update only if number of overlays has changed\n\t\t\t\t//TODO: it's better to rely on react's diff\n\t\t\t\tthis._overlaysAmount = overlaysAmount;\n\t\t\t}\n\t\t}\n\t}\n\n\taddStudy(studySeries: StudySeries) {\n\t\tthis._overlaysAmount = -1;\n\t\tsuper.addStudy(studySeries);\n\t}\n\n\tremoveStudy(studySeries: StudySeries) {\n\t\tthis._overlaysAmount = -1;\n\t\tsuper.removeStudy(studySeries);\n\t}\n\n\t///////////////////////\n\t// PROTECTED MEMBERS //\n\t///////////////////////\n\n\tparse(element: Element) {\n\t\tsuper.parse(element);\n\n\t\tthis._candleGroup = element.querySelector(`.${css.group_candle}`);\n\t\tthis._content = element.querySelector('[data-element=chartInfo--content]');\n\t\tthis._toggle = element.querySelector('[data-element=chartInfo--toggle]');\n\n\t\tsetTimeout(() => {\n\t\t\tthis._candleGroup = element.querySelector(`.${css.group_candle}`);\n\t\t\tthis._content = element.querySelector('[data-element=chartInfo--content]');\n\t\t\tthis._toggle = element.querySelector('[data-element=chartInfo--toggle]');\n\n\t\t\tif (this._toggle) {\n\t\t\t\tthis._toggle.addEventListener('click', this._onToggleClick);\n\t\t\t}\n\t\t\tthis._element.addEventListener(wheelEvent, this._onWheelScroll);\n\t\t});\n\t\t//use setTimeout because BaseChartInfoView is composed and rendered in memory\n\t}\n\n\ttemplate(studySeries: StudySeries) {\n\t\treturn `\n\t\t\t<div class=\"${css.container}\" data-element=\"chartInfo\">\n\t\t\t\t<div class=\"${css.header}\">\n\t\t\t\t\t<span class=\"${css.title}\" data-element=\"chartInfo--title\">\n\t\t\t\t\t\t${studySeries ? this._getTitle(studySeries.conf) : ''}\n\t\t\t\t\t</span><button class=\"${css.toggle}\" data-element=\"chartInfo--toggle\">\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t\t<path id=\"a\" d=\"M10.657 15h8v2h-10V7h2v8z\"/>\n\t\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t\t<g fill=\"none\" fill-rule=\"evenodd\">\n\t\t\t\t\t\t\t\t<mask id=\"b\" fill=\"#fff\">\n\t\t\t\t\t\t\t\t\t<use xlink:href=\"#a\"/>\n\t\t\t\t\t\t\t\t</mask>\n\t\t\t\t\t\t\t\t<use fill=\"currentcolor\" transform=\"rotate(45 13.657 12)\" xlink:href=\"#a\"/>\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"${css.content}\" data-element=\"chartInfo--content\">\n\t\t\t\t\t${studySeries ? '' : this.candleTemplate()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tcandleTemplate() {\n\t\treturn `\n\t\t\t<div class=\"${classnames(css.group, css.group_candle)}\">\n\t\t\t\t<div class=\"${css.parameter}\">\n\t\t\t\t\t<div class=\"${css.label}\">\n\t\t\t\t\t\tOpen\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"${css.value}\" data-element=\"chartInfo--open\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"${css.parameter}\">\n\t\t\t\t\t<div class=\"${css.label}\">\n\t\t\t\t\t\tHigh\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"${css.value}\" data-element=\"chartInfo--high\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"${css.parameter}\">\n\t\t\t\t\t<div class=\"${css.label}\">\n\t\t\t\t\t\tLow\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"${css.value}\" data-element=\"chartInfo--low\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"${css.parameter}\">\n\t\t\t\t\t<div class=\"${css.label}\">\n\t\t\t\t\t\tClose\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"${css.value}\" data-element=\"chartInfo--close\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tprivate _collapse() {\n\t\tif (!this._isCollapsed) {\n\t\t\tthis._isCollapsed = true;\n\t\t\tthis._element.classList.add(css.collapsed);\n\t\t}\n\t}\n\n\tprivate _expand() {\n\t\tif (this._isCollapsed) {\n\t\t\tthis._isCollapsed = false;\n\t\t\tthis._element.classList.remove(css.collapsed);\n\t\t}\n\t}\n\n\t//////////////////////////\n\t// MODEL EVENT HANDLERS //\n\t//////////////////////////\n\n\t/**\n\t * @param {boolean} isFixed\n\t * @private\n\t */\n\tprivate _onModelIsFixedChange = (isFixed: boolean) => {\n\t\tif (!isFixed && this._model.isEnabled) {\n\t\t\tthis._expand();\n\t\t}\n\t};\n\n\t////////////////////////\n\t// DOM EVENT HANDLERS //\n\t////////////////////////\n\n\t_onToggleClick = () => {\n\t\tif (this._isCollapsed) {\n\t\t\tthis._expand();\n\t\t} else {\n\t\t\tthis._collapse();\n\t\t}\n\t};\n\n\tprivate _onWheelScroll = (e: Event) => {\n\t\te.stopPropagation();\n\t};\n}\n\nexport const createAVAChartInfoView = (\n\tcontainer: Element,\n\tstudySeries: StudySeries | null,\n\tmodel: CrossToolViewModel,\n\tisMobile: boolean,\n): AVAChartInfoView => new AVAChartInfoView(container, studySeries, model, isMobile);\n","type PluginInitializer = (...args: any) => void;\ntype Dependencies =\n\t| 'eventBus'\n\t| 'clearer'\n\t| 'options'\n\t| 'elements'\n\t| 'elements.mainCanvas'\n\t| 'chartBootstrap'\n\t| 'events';\nexport type PluginDependencyResolver = (dependencies: Dependencies[], initializer: PluginInitializer) => void;\n\nexport abstract class Plugin {\n\tabstract register(resolver: PluginDependencyResolver): void;\n}\n","import EventBus from '@dx-private/dxchart5/dist/js/chart/EventBus';\nimport CrossToolView from './views/cross-tool.view';\nimport CrossToolViewModel, { E_CROSS_TOOL_PLUGIN_MODEL } from './models/cross-tool.view-model';\nimport ChartInfoView from './views/chart-info.view';\nimport { Plugin, PluginDependencyResolver } from '../plugin.model';\nimport { StudySeries } from '../../chart.model';\nimport Hover from '@dx-private/dxchart5/dist/js/chart/model/Hover';\nimport ChartBootstrap from '@dx-private/dxchart5/dist/js/chart/bootstrap';\nimport { ChartComponents } from '@dx-private/dxchart5/dist/js/chart/ChartConfig';\n\nconst MAIN_CHART_INFO_VIEW_ID = 0;\n\nconst getAscendantByFilter = (element: Element | Document, filterFn: (el: Element | Document) => boolean) => {\n\tlet el = element;\n\n\twhile (el && el !== document && !filterFn(el)) {\n\t\tel = (el.parentElement || el.parentNode) as Element;\n\t}\n\n\treturn element === document ? null : element;\n};\n\nconst getAscendantByClassName = (element: Element | Document, className: string) => {\n\treturn getAscendantByFilter(element, function(currentElement: Element | Document) {\n\t\treturn currentElement['classList'] && currentElement['classList'].contains(className);\n\t});\n};\n\nexport default class CrossTool extends Plugin {\n\tprivate _bus?: EventBus;\n\n\tprivate _clearer?: Function;\n\n\tprivate _views: { key: string; value: CrossToolView } | {} = {};\n\n\tprivate _model: CrossToolViewModel;\n\tprivate _isMobile: boolean;\n\tprivate _chartConfig?: ChartComponents;\n\n\tprivate _createChartInfoView: (\n\t\tcontainer: Element,\n\t\tstudySeries: StudySeries | null,\n\t\tmodel: CrossToolViewModel,\n\t\tisMobile: boolean,\n\t) => ChartInfoView;\n\n\tprivate _subscriptions: Function[] = [];\n\n\tconstructor(\n\t\tmodel: CrossToolViewModel,\n\t\tcreateChartInfoView: (\n\t\t\tcontainer: Element,\n\t\t\tstudySeries: StudySeries | null,\n\t\t\tmodel: CrossToolViewModel,\n\t\t\tisMobile: boolean,\n\t\t) => ChartInfoView,\n\t\tisMobile = false,\n\t) {\n\t\tsuper();\n\t\tthis._model = model;\n\t\tthis._isMobile = isMobile;\n\t\tthis._model.on(E_CROSS_TOOL_PLUGIN_MODEL.CHANGE_IS_ENABLED, this._onModelIsEnabledChange);\n\t\tthis._createChartInfoView = createChartInfoView;\n\t}\n\n\tregister(resolver: PluginDependencyResolver) {\n\t\tresolver(\n\t\t\t['eventBus', 'clearer', 'elements.mainCanvas', 'chartBootstrap'],\n\t\t\t(bus: EventBus, clearer: () => void, canvas: HTMLCanvasElement, chartBootstrap: ChartBootstrap, events) => {\n\t\t\t\tthis._bus = bus;\n\t\t\t\tthis._clearer = clearer;\n\t\t\t\tthis._chartConfig = chartBootstrap.config.components;\n\t\t\t\tconst mainChartGraphElement = getAscendantByClassName(canvas, 'chart--graph');\n\t\t\t\tconst chartElement = getAscendantByClassName(canvas, 'chart');\n\t\t\t\tif (mainChartGraphElement && canvas.parentElement && chartElement) {\n\t\t\t\t\tthis._views[MAIN_CHART_INFO_VIEW_ID] = new CrossToolView(\n\t\t\t\t\t\tcanvas.parentElement,\n\t\t\t\t\t\tthis._model,\n\t\t\t\t\t\tchartElement.querySelector('[data-element=underlaySibling] [data-element=xAxis]'),\n\t\t\t\t\t\tmainChartGraphElement.querySelector('[data-element=yAxis]'),\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tthis._isMobile,\n\t\t\t\t\t\tthis._createChartInfoView,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (this._model.isEnabled) {\n\t\t\t\t\tthis._enable();\n\t\t\t\t} else {\n\t\t\t\t\tthis._iterateViews((view: CrossToolView) => view.disable());\n\t\t\t\t}\n\n\t\t\t\t//return clearer\n\t\t\t\treturn this._clearer([\n\t\t\t\t\tthis._bus.on(this._bus.types.STUDY_ADDED, this._onStudySeriesAdd),\n\t\t\t\t\tthis._bus.on(this._bus.types.STUDY_REMOVED, this._onStudySeriesRemove),\n\t\t\t\t\t() => {\n\t\t\t\t\t\tthis._disable();\n\t\t\t\t\t\tdelete this['_model'];\n\t\t\t\t\t\tdelete this['_ChartInfoViewClass'];\n\t\t\t\t\t\tthis._iterateViews((view: CrossToolView) => {\n\t\t\t\t\t\t\tview.close();\n\t\t\t\t\t\t\t// '' - backward compatibility with chart\n\t\t\t\t\t\t\tconst uiid = view.uiid === MAIN_CHART_INFO_VIEW_ID ? '' : view.uiid;\n\t\t\t\t\t\t\tif (this._bus) {\n\t\t\t\t\t\t\t\tthis._bus.fire(`${this._bus.types.DEC_MOVE_HANDLER}${uiid}`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdelete this._views[uiid];\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t},\n\t\t);\n\t}\n\n\t/////////////\n\t// PRIVATE //\n\t/////////////\n\n\tprivate _iterateViews(iterator: (view: CrossToolView) => void) {\n\t\tObject.keys(this._views).forEach(uiid => {\n\t\t\titerator(this._views[uiid]);\n\t\t});\n\t}\n\n\tprivate _enable() {\n\t\tif (this._bus) {\n\t\t\tthis._bus.fire(this._bus.types.INC_MOVE_HANDLER);\n\t\t\tif (this._chartConfig && this._chartConfig.chart) {\n\t\t\t\tthis._chartConfig.chart.allowCandleAsLine = false;\n\t\t\t\tthis._chartConfig.chart.highlightActiveCandle = true;\n\t\t\t\tthis._chartConfig.chart.showActiveCandlesBorder = true;\n\t\t\t}\n\t\t\tthis._subscriptions.push(\n\t\t\t\tthis._bus.on(this._bus.types.HOVER, this._onChartHover),\n\t\t\t\tthis._bus.on(this._bus.types.RESIZED, this._onChartResized),\n\t\t\t\tthis._bus.on(this._bus.types.CLOSE_HOVER, this._onChartCloseHover),\n\t\t\t);\n\t\t}\n\n\t\tthis._iterateViews(view => {\n\t\t\tview.enable();\n\t\t\tif (this._bus) {\n\t\t\t\tthis._bus.fire(`${this._bus.types.INC_MOVE_HANDLER}${view.uiid}`);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _disable() {\n\t\tif (this._bus) {\n\t\t\tthis._bus.fire(this._bus.types.DEC_MOVE_HANDLER);\n\t\t\tif (this._chartConfig && this._chartConfig.chart) {\n\t\t\t\tthis._chartConfig.chart.allowCandleAsLine = false;\n\t\t\t\tthis._chartConfig.chart.highlightActiveCandle = true;\n\t\t\t\tthis._chartConfig.chart.showActiveCandlesBorder = false;\n\t\t\t}\n\t\t}\n\n\t\tthis._subscriptions.forEach(unsubscribe => unsubscribe());\n\t\tthis._subscriptions = [];\n\n\t\tthis._iterateViews(view => {\n\t\t\tif (this._bus) {\n\t\t\t\tthis._bus.fire(`${this._bus.types.DEC_MOVE_HANDLER}${view.uiid}`);\n\t\t\t}\n\t\t\tview.disable();\n\t\t});\n\t}\n\n\t//////////////////////////\n\t// CHART EVENT HANDLERS //\n\t//////////////////////////\n\n\tprivate _onChartHover = (hoverModel: Hover) => {\n\t\tthis._iterateViews(view => {\n\t\t\tview.show();\n\t\t\tview.update(hoverModel);\n\t\t});\n\t};\n\n\tprivate _onChartResized = () => {\n\t\tthis._iterateViews(view => view.notifyResized());\n\t};\n\n\tprivate _onChartCloseHover = () => {\n\t\tthis._iterateViews(view => {\n\t\t\tview.hide();\n\t\t});\n\t};\n\n\tprivate _onStudySeriesAdd = (studySeries: StudySeries) => {\n\t\tconst uiid = studySeries.uiid;\n\t\tif (studySeries.overlaying) {\n\t\t\tthis._views[MAIN_CHART_INFO_VIEW_ID].addStudy(studySeries);\n\t\t} else {\n\t\t\tconst studyGraphElement = getAscendantByClassName(studySeries.canvasModel.parent, 'chart--graph');\n\t\t\tconst container = studySeries.canvasModel.parent.querySelector('canvas').parentElement;\n\t\t\tif (studyGraphElement) {\n\t\t\t\tthis._views[uiid] = new CrossToolView(\n\t\t\t\t\tcontainer,\n\t\t\t\t\tthis._model,\n\t\t\t\t\tnull,\n\t\t\t\t\tstudyGraphElement.querySelector('.dxc-yAxis'),\n\t\t\t\t\tstudySeries,\n\t\t\t\t\tthis._isMobile,\n\t\t\t\t\tthis._createChartInfoView,\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (this._bus) {\n\t\t\t\tthis._bus.fire(`${this._bus.types.INC_MOVE_HANDLER}${uiid}`);\n\t\t\t}\n\t\t}\n\t};\n\n\tprivate _onStudySeriesRemove = (studySeries: StudySeries) => {\n\t\tif (studySeries.overlaying) {\n\t\t\tthis._views[MAIN_CHART_INFO_VIEW_ID].removeStudy(studySeries);\n\t\t} else {\n\t\t\tconst uiid = studySeries.uiid;\n\t\t\tif (this._bus) {\n\t\t\t\tthis._bus.fire(`${this._bus.types.DEC_MOVE_HANDLER}${uiid}`);\n\t\t\t}\n\t\t\tconst view = this._views[uiid];\n\t\t\tif (view) {\n\t\t\t\tview.close();\n\t\t\t\tdelete this._views[uiid];\n\t\t\t}\n\t\t}\n\t};\n\n\t//////////////////////////\n\t// MODEL EVENT HANDLERS //\n\t//////////////////////////\n\n\tprivate _onModelIsEnabledChange = (isEnabled: boolean) => {\n\t\tif (isEnabled) {\n\t\t\tthis._enable();\n\t\t} else {\n\t\t\tthis._disable();\n\t\t}\n\t};\n}\n","import Hover from '@dx-private/dxchart5/dist/js/chart/model/Hover';\nimport CrossToolViewModel, { CrossToolConfig, E_CROSS_TOOL_PLUGIN_MODEL } from '../models/cross-tool.view-model';\nimport View from '../../utils/view';\nimport { StudySeries } from '../../../chart.model';\nexport const ERROR_INCORRECT_TEMPLATE = 'ChartInfoView template should return only one top-level child';\n\nexport default class ChartInfoView extends View {\n\tprivate _container: Element;\n\n\tprotected _element: Element;\n\n\tprotected _studySeries: StudySeries | null;\n\n\t/**\n\t * Used only for initial rendering\n\t */\n\tprivate _initializedStudySeries: StudySeries[] = [];\n\n\tprivate _title: Element | null = null;\n\n\tprivate _open: Element | null = null;\n\n\tprivate _high: Element | null = null;\n\n\tprivate _low: Element | null = null;\n\n\tprivate _close: Element | null = null;\n\n\tprivate _studies: Element | null = null;\n\n\t_model: CrossToolViewModel;\n\n\t_lastHoverModel?: Hover;\n\n\tconstructor(container: Element, studySeries: StudySeries | null, model: CrossToolViewModel) {\n\t\tsuper();\n\t\tthis._model = model;\n\t\tthis._container = container;\n\t\tthis._studySeries = studySeries;\n\t\tthis._element = this._createElement(this._studySeries);\n\t\tthis._container.appendChild(this._element);\n\t\tthis.parse(this._container);\n\t\tthis._subscribe([\n\t\t\tthis._model.on(\n\t\t\t\tE_CROSS_TOOL_PLUGIN_MODEL.CHANGE_DATETIME_FORMATTER,\n\t\t\t\tthis._onCrossToolPluginModelDateTimeFormatterChange,\n\t\t\t),\n\t\t]);\n\t}\n\n\t/**\n\t * Teardown\n\t */\n\tclose() {\n\t\tsuper.close();\n\t\tthis._container.removeChild(this._element);\n\t\tthis._initializedStudySeries = [];\n\t\tdelete this['_container'];\n\t\tdelete this['_studySeries'];\n\t\tdelete this['_model'];\n\t\tdelete this['_lastHoverModel'];\n\t}\n\n\t/**\n\t * Updates view according to hoverModel\n\t */\n\tupdate(hoverModel: Hover) {\n\t\tthis._lastHoverModel = hoverModel;\n\t\tif (this._studySeries) {\n\t\t\tconst currentStudySeries = hoverModel.studiesMap[this._studySeries.uiid];\n\t\t\tif (this._studies) {\n\t\t\t\tthis._studies.innerHTML = this.studiesTemplate(currentStudySeries);\n\t\t\t}\n\n\t\t\tif (this._title) {\n\t\t\t\tthis._title.textContent = this._getTitle(currentStudySeries);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._title) {\n\t\t\t\tthis._title.textContent = this._model.dateTimeFormatter(hoverModel.time);\n\t\t\t}\n\n\t\t\tif (this._open) {\n\t\t\t\tthis._open.textContent = hoverModel.open;\n\t\t\t}\n\n\t\t\tif (this._low) {\n\t\t\t\tthis._low.textContent = hoverModel.low;\n\t\t\t}\n\n\t\t\tif (this._high) {\n\t\t\t\tthis._high.textContent = hoverModel.high;\n\t\t\t}\n\n\t\t\tif (this._close) {\n\t\t\t\tthis._close.textContent = hoverModel.close;\n\t\t\t}\n\n\t\t\tif (this._studies) {\n\t\t\t\tthis._studies.innerHTML = hoverModel.overlays\n\t\t\t\t\t.map((overlay: StudySeries) => this.studiesTemplate(overlay))\n\t\t\t\t\t.join('');\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Adds study\n\t */\n\taddStudy(studySeries: StudySeries) {\n\t\tif (!this._studySeries && studySeries.overlaying) {\n\t\t\tthis._initializedStudySeries.push(studySeries);\n\t\t\tif (this._studies) {\n\t\t\t\tthis._studies.innerHTML = this._initializedStudySeries\n\t\t\t\t\t.map(study => {\n\t\t\t\t\t\treturn this.studiesTemplate(study.conf);\n\t\t\t\t\t})\n\t\t\t\t\t.join('');\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Removes study\n\t */\n\tremoveStudy(studySeries: StudySeries) {\n\t\tif (!this._studySeries && studySeries.overlaying) {\n\t\t\tlet index = -1;\n\t\t\tthis._initializedStudySeries.find((study, i) => {\n\t\t\t\tconst found = study.uiid === studySeries.uiid;\n\t\t\t\tif (found) {\n\t\t\t\t\tindex = i;\n\t\t\t\t}\n\t\t\t\treturn found;\n\t\t\t});\n\t\t\tif (index !== -1) {\n\t\t\t\tthis._initializedStudySeries.splice(index, 1);\n\t\t\t}\n\t\t\tif (this._studies) {\n\t\t\t\tthis._studies.innerHTML = this._initializedStudySeries\n\t\t\t\t\t.map(study => {\n\t\t\t\t\t\treturn this.studiesTemplate(study.conf);\n\t\t\t\t\t})\n\t\t\t\t\t.join('');\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Notify this view that the chart have been resized\n\t */\n\tnotifyResized() {\n\t\tthis.onChartResized();\n\t}\n\n\t///////////////\n\t// PROTECTED //\n\t///////////////\n\n\t/**\n\t * Parses initial markup\n\t */\n\tprotected parse(element: Element) {\n\t\tthis._title = element.querySelector('[data-element=chartInfo--title]');\n\t\tthis._open = element.querySelector('[data-element=chartInfo--open]');\n\t\tthis._high = element.querySelector('[data-element=chartInfo--high]');\n\t\tthis._low = element.querySelector('[data-element=chartInfo--low]');\n\t\tthis._close = element.querySelector('[data-element=chartInfo--close]');\n\t\tthis._studies = element.querySelector('[data-element=chartInfo--studies]');\n\t}\n\n\t/**\n\t * Generates initial markup\n\t */\n\tprotected template(studySeries: StudySeries | null) {\n\t\treturn `\n\t\t\t<div data-element=\"chartInfo\">\n\t\t\t\t<div data-element=\"chartInfo--title\">\n\t\t\t\t\t${studySeries ? this._getTitle(studySeries.conf) : ''}\n\t\t\t\t</div>\n\t\t\t\t<div data-element=\"chartInfo--content\">\n\t\t\t\t\t${studySeries ? '' : this.candleTemplate()}\n\t\t\t\t\t<ul data-element=\"chartInfo--studies\">\n\t\t\t\t\t\t${studySeries ? this.studiesTemplate(studySeries.conf) : ''}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t/**\n\t * Generates template for study from lines\n\t */\n\tprotected studiesTemplate(studySeries: StudySeries) {\n\t\treturn studySeries.lines\n\t\t\t.map((line, i) => {\n\t\t\t\treturn `\n\t\t\t\t<li>\n\t\t\t\t\t<span>${line.title}</span>\n\t\t\t\t\t<span style=\"color: ${line.colors[line.colorIdx || 0]}\">${line.value || ''}</span>\n\t\t\t\t</li>\n\t\t\t`;\n\t\t\t})\n\t\t\t.join('');\n\t}\n\n\t/**\n\t * Generates candle template\n\t */\n\tprotected candleTemplate() {\n\t\treturn `\n\t\t\t<div>\n\t\t\t\t<span>Open</span>\n\t\t\t\t<span data-element=\"chartInfo--open\"></span>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<span>Close</span>\n\t\t\t\t<span data-element=\"chartInfo--close\"></span>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<span>High</span>\n\t\t\t\t<span data-element=\"chartInfo--high\"></span>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<span>Low</span>\n\t\t\t\t<span data-element=\"chartInfo--low\"></span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t/**\n\t * This method is invoked when chart was resized.\n\t * It doesn't provide implementation and should be overriden in the derived class.\n\t * @abstract\n\t */\n\tprotected onChartResized() {}\n\n\t//////////////////////////\n\t// MODEL EVENT HANDLERS //\n\t/////////////////////////\n\n\t/**\n\t * @param {function(date:Date):String} formatter\n\t */\n\tprotected _onCrossToolPluginModelDateTimeFormatterChange = (formatter: CrossToolConfig['dateTimeFormatter']) => {\n\t\tif (!this._studySeries && this._lastHoverModel && this._title) {\n\t\t\tthis._title.textContent = formatter(this._lastHoverModel.time);\n\t\t}\n\t};\n\n\t/////////////\n\t// PRIVATE //\n\t/////////////\n\n\t/**\n\t * Gets title string\n\t */\n\tprotected _getTitle(study: StudySeries | null) {\n\t\tif (study) {\n\t\t\tconst parameters = study.parameters.map(parameter => parameter.value);\n\t\t\treturn `${study.title} (${parameters.join(',')})`;\n\t\t}\n\t\treturn '';\n\t}\n\n\tprivate _createElement(studySeries: StudySeries | null) {\n\t\tconst dummy = document.createElement('div');\n\t\tdummy.innerHTML = this.template(studySeries);\n\t\tif (dummy.children.length > 1) {\n\t\t\tthrow new Error(ERROR_INCORRECT_TEMPLATE);\n\t\t}\n\t\tconst element = dummy.children[0];\n\t\tdummy.removeChild(element);\n\t\treturn element;\n\t}\n}\n\nexport const createChartInfoView = (\n\tcontainer: Element,\n\tstudySeries: StudySeries | null,\n\tmodel: CrossToolViewModel,\n\tisMobile: boolean,\n): ChartInfoView => new ChartInfoView(container, studySeries, model);\n","export default class View {\n\tprivate _subscriptions: Function[] = [];\n\n\tprotected _subscribe(clearers: Function[]) {\n\t\tclearers.forEach(clearer => this._subscriptions.push(clearer));\n\t}\n\n\t/**\n\t * Closes view, unsbuscribes from subscriptions\n\t */\n\tclose() {\n\t\twhile (this._subscriptions.length !== 0) {\n\t\t\tconst close = this._subscriptions.pop();\n\t\t\tif (close) {\n\t\t\t\tclose();\n\t\t\t}\n\t\t}\n\t}\n}\n","export abstract class Plugin {\n\tabstract register(resolver: Function): void;\n}\n\nexport type PeriodRangePair = {\n\tperiod: number;\n\trange: number;\n};\n\nexport enum ChartYAxisPosition {\n\tLeft = '* LEFT *',\n\tRight = '* RIGHT *',\n}\n\nexport type TInstrument = {\n\tcode: string;\n\tpricePrecisions: number[];\n\ttype?: string;\n};\n\nexport enum CandleDirection {\n\tBID = 'Bid',\n\tASK = 'Ask',\n}\n\nexport type Candle = {\n\thi: number;\n\tlo: number;\n\topen: number;\n\tclose: number;\n\ttimestamp?: number;\n\texpansion?: number | boolean;\n\tidx?: number;\n};\n\nexport type Clearer = (arr: any) => void;\n\nexport type ChartElementsCache = {\n\tmainCanvas: HTMLCanvasElement;\n};\n\nexport enum BarType {\n\tCANDLE = 'candle',\n\tBAR = 'bar',\n\tLINE = 'line',\n\tAREA = 'area',\n}\n","import { BarType } from './chart.model';\nimport { NewChartConfig } from '@dx-private/dxchart5/dist/js/chart/ChartConfig';\n\nexport const mainConfig: NewChartConfig = {\n\tcomponents: {\n\t\tgrid: {\n\t\t\tvisible: true,\n\t\t\tdash: [0, 0],\n\t\t},\n\t\thighLow: {\n\t\t\tvisible: false,\n\t\t},\n\t\tvolumes: {\n\t\t\tvisible: false,\n\t\t},\n\t\tcrossTool: {\n\t\t\tvisible: false,\n\t\t\tquote: 'Open: {open}<br>High: {high}<br>Low: {low}<br>Close:{close}<p> {time}</p>',\n\t\t\tdateFormat: 'MM/dd/YY HH:mm',\n\t\t},\n\t\tstudies: {\n\t\t\tstudyLegend: false,\n\t\t\tstudyResizeHandler: false,\n\t\t\tlabelTemplate: '{name} ({params}): {lines}',\n\t\t\tlineTemplate: \"<span style='color: {color}' class='color' data-idx='{idx}'>{title}</span>\",\n\t\t\tstudies: [],\n\t\t},\n\t\twaterMark: {\n\t\t\tvisible: false,\n\t\t\ttitleFontSize: 70,\n\t\t\ttitleBottomPadding: 20,\n\t\t\tdescriptionFontSize: 21,\n\t\t\tdescriptionBottomPadding: 40,\n\t\t\ttimeIntervalFontSize: 28,\n\t\t},\n\t\tchart: {\n\t\t\tdefaultZoomCandleWidth: 7,\n\t\t\tminWidth: 4,\n\t\t\tspace: 1,\n\t\t\ttype: BarType.CANDLE,\n\t\t},\n\t\tinstrumentInfo: {\n\t\t\tinfoTemplate: '{description}',\n\t\t},\n\t},\n\tcolors: {\n\t\tcandleTheme: {\n\t\t\tbullColor: '#1db868',\n\t\t\tbearColor: '#ec1b1b',\n\t\t\tnoneColor: '#4f6170',\n\t\t\tbullWickColor: '#4f6170',\n\t\t\tbearWickColor: '#4f6170',\n\t\t\tnoneWickColor: '#4f6170',\n\t\t\tborderOpacity: 0.1,\n\t\t},\n\t\tactiveCandleTheme: {\n\t\t\tbullColor: '#1db868',\n\t\t\tbearColor: '#ec1b1b',\n\t\t\tnoneColor: '#4f6170',\n\t\t\tbullWickColor: '#4f6170',\n\t\t\tbearWickColor: '#4f6170',\n\t\t\tnoneWickColor: '#4f6170',\n\t\t\tborderOpacity: 0.1,\n\t\t},\n\t\tbarTheme: {\n\t\t\tbullColor: '#1db868',\n\t\t\tbearColor: '#ec1b1b',\n\t\t\tnoneColor: '#4f6170',\n\t\t},\n\n\t\tareaTheme: {\n\t\t\tlineColor: 'red',\n\t\t\tfillColor: 'rgba(255,255,255,0.7)',\n\t\t\tstartColor: 'green',\n\t\t\tstopColor: 'blue',\n\t\t},\n\t\twaterMarkTheme: {\n\t\t\tdescriptionColor: 'rgba(255,255,255,0.4)',\n\t\t\ttimeIntervalColor: 'rgba(255,255,255,0.4)',\n\t\t\ttitleColor: 'rgba(255,255,255,0.4)',\n\t\t},\n\t\tchartAreaTheme: {\n\t\t\tbackgroundColor: '#183044',\n\t\t\taxisColor: 'rgba(255,255,255,0.7)',\n\t\t\tgridColor: '#152430',\n\t\t\tvolumeLineColor: 'rgba(229,229,229,0.4)',\n\t\t\tvolumeFillColor: 'rgba(146,196,223,1)',\n\t\t\tmapFillColor: 'rgba(184,210,229,1)',\n\t\t\tmapGradientTopColor: 'rgba(184,210,229,1)',\n\t\t\tmapGradientBottomColor: 'rgba(184,210,229,1)',\n\t\t\tmapColor: 'rgba(229,229,229,0.4)',\n\t\t},\n\t\tlineTheme: {\n\t\t\tbullColor: '#5b822e',\n\t\t\tbearColor: '#962749',\n\t\t\tnoneColor: '#b3b3b3',\n\t\t},\n\t\tyAxis: {\n\t\t\tbackgroundColor: '#1e1e1e',\n\t\t\tlabelTextColor: '#aeb1b3',\n\t\t\tlabelBoxColor: 'rgb(59, 59, 59)',\n\t\t\tlabelBoxPositiveColor: 'rgb(78, 157, 69)',\n\t\t\tlabelBoxNegativeColor: 'rgb(233, 29, 37)',\n\t\t},\n\t\txAxis: {\n\t\t\tbackgroundColor: '#1e1e1e',\n\t\t\tlabelTextColor: '#aeb1b3',\n\t\t\tlabelBoxColor: 'rgb(59, 59, 59)',\n\t\t},\n\t\tcrossTool: {\n\t\t\tlineColor: '#575356',\n\t\t},\n\t\tnavigationMap: {\n\t\t\tbuttonColor: '#2a2f30',\n\t\t\tknotColor: '#464c4d',\n\t\t\tsliderColor: 'rgba(0,0,0, 0.3)',\n\t\t\tbackgroundColor: '#1e1e1e',\n\t\t\tbuttonArrowColor: '#FFFFFF',\n\t\t\tknotLineColor: '#FFFFFF',\n\t\t},\n\t},\n\tlogEvents: false,\n};\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport * as cn from 'classnames';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { ChartYAxisPosition } from './chart.model';\nimport * as css from './theme/chart.module.css';\n\ntype TChartGraphProps = {\n\ttheme: {\n\t\tgraph?: string;\n\t\tgraph_resizable?: string;\n\t\taxisWrapper_y?: string;\n\t\tcanvasArea?: string;\n\t\tcanvasWrapper?: string;\n\t\tstudyOverlay?: string;\n\t\tstudyMarker?: string;\n\t\taxis?: string;\n\t\taxis_y?: string;\n\t\textraCanvas?: string;\n\t};\n\tyAxisPosition?: ChartYAxisPosition;\n};\n\nclass RawChartGraph extends PureComponent<TChartGraphProps> {\n\trender() {\n\t\tconst { theme, yAxisPosition } = this.props;\n\n\t\treturn (\n\t\t\t<div className={cn(theme.graph, theme.graph_resizable)} data-chart-container=\"true\">\n\t\t\t\t{yAxisPosition === ChartYAxisPosition.Left && this.renderYAxis()}\n\t\t\t\t<div data-element=\"canvasArea\" className={theme.canvasArea}>\n\t\t\t\t\t<div className={theme.canvasWrapper}>\n\t\t\t\t\t\t<canvas data-element=\"mainCanvas\" />\n\t\t\t\t\t\t<canvas data-element=\"staticDrawingCanvas\" className={theme.studyOverlay} />\n\t\t\t\t\t\t<canvas data-element=\"dynamicDrawingCanvas\" className={theme.studyOverlay} />\n\t\t\t\t\t\t<canvas data-element=\"hitTestCanvas\" className={theme.studyOverlay} />\n\t\t\t\t\t\t<canvas data-element=\"extraCanvas1\" className={theme.extraCanvas} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{yAxisPosition === ChartYAxisPosition.Right && this.renderYAxis()}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderYAxis = () => {\n\t\tconst { theme } = this.props;\n\t\tconst axisYClassName = cn(theme.axis, theme.axis_y);\n\t\treturn (\n\t\t\t<div className={theme.axisWrapper_y}>\n\t\t\t\t<div data-element=\"yAxis\" className={axisYClassName} />\n\t\t\t</div>\n\t\t);\n\t};\n}\n\nconst wTheme = {\n\t...css,\n};\n\nexport const ChartGraph = withTheme(Symbol('ChartGraph'), wTheme)(RawChartGraph);\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport * as cn from 'classnames';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport * as css from './theme/chart-map.module.css';\n\ntype TChartMap = {\n\ttheme: {\n\t\tcontainer?: string;\n\t\tmap?: string;\n\t\twindow?: string;\n\t\tchartMap?: string;\n\t\tbutton?: string;\n\t\tbutton_toLeft?: string;\n\t\tbutton_toRight?: string;\n\t\tcanvasWrapper?: string;\n\t\tcanvas?: string;\n\t\tcontrols?: string;\n\t\tlabels?: string;\n\t\tarea?: string;\n\t\tarea_hidden?: string;\n\t\tknob?: string;\n\t\tknob_toLeft?: string;\n\t\tknob_toRight?: string;\n\t};\n};\n\nclass RawChartMap extends PureComponent<TChartMap> {\n\trender() {\n\t\tconst { theme } = this.props;\n\n\t\treturn (\n\t\t\t<div className={theme.map} data-chart-container={true}>\n\t\t\t\t<div key=\"chartMap\" className={theme.chartMap}>\n\t\t\t\t\t<div className=\"chartMap--container\">\n\t\t\t\t\t\t<button data-element=\"buttonLeft\" className={cn(theme.button, theme.button_toLeft)} />\n\t\t\t\t\t\t<div data-element=\"navigationContainer\" className={theme.canvasWrapper}>\n\t\t\t\t\t\t\t<canvas data-element=\"vmCanvas\" className={theme.canvas} />\n\t\t\t\t\t\t\t<div data-element=\"navLabels\" className={theme.labels} />\n\t\t\t\t\t\t\t<div className={theme.controls}>\n\t\t\t\t\t\t\t\t<div data-element=\"windowLeft\" className={cn(theme.area, theme.area_hidden)}>\n\t\t\t\t\t\t\t\t\t<span data-element=\"knotLeft\" className={cn(theme.knob, theme.knob_toLeft)} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={theme.area}>\n\t\t\t\t\t\t\t\t\t<span data-element=\"slider\" className={theme.window} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div data-element=\"windowRight\" className={cn(theme.area, theme.area_hidden)}>\n\t\t\t\t\t\t\t\t\t<span data-element=\"knotRight\" className={cn(theme.knob, theme.knob_toRight)} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button data-element=\"buttonRight\" className={cn(theme.button, theme.button_toRight)} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst wTheme = {\n\t...css,\n};\n\nexport const ChartMap = withTheme(Symbol(), wTheme)(RawChartMap);\n","import * as React from 'react';\nimport { Component, createRef } from 'react';\nimport '@dx-private/dxchart5/dist/css/chart-base.css';\nimport '@dx-private/dxchart5/dist/chart-combined.js';\nimport ChartBootstrap from '@dx-private/dxchart5/dist/js/chart/bootstrap';\nimport EventBus from '@dx-private/dxchart5/dist/js/chart/EventBus';\nimport Candle from '@dx-private/dxchart5/dist/js/chart/model/Candle';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { PartialKeys } from '@devexperts/utils/dist/object/object';\nimport { withDefaults } from '@devexperts/react-kit/dist/utils/with-defaults';\nimport { setoidStrict } from '@devexperts/utils/dist/typeclasses/setoid/setoid.utils';\nimport CrossTool from '../../../../ui-common/chart/plugin/cross-tool/cross-tool';\nimport CrossToolViewModel from '../../../../ui-common/chart/plugin/cross-tool/models/cross-tool.view-model';\nimport { createAVAChartInfoView } from '../../../../ui-common/chart/plugin/cross-tool/views/ava-chart-info-view';\nimport { MakeTheme } from '../../../../utils/theme.utils';\nimport { ChartType } from '../toolbar/toolbar.model';\nimport { ChartYAxisPosition, TInstrument, Candle as CandleType, Plugin, PeriodRangePair, BarType } from './chart.model';\nimport { mainConfig } from './chart.config';\nimport { ChartGraph } from './chart-graph.component';\nimport { ChartMap } from './chart-map.component';\nimport * as cn from 'classnames';\nimport * as css from './theme/chart.module.css';\n\nexport type RawChartProps = {\n\tsymbol: string;\n\tprecision: number;\n\thistorical: CandleType[];\n\tperiodRangePair: PeriodRangePair;\n\tplugins: Plugin[];\n\tlast: CandleType[];\n\tselectedType: ChartType;\n\tisCrossToolEnabled: boolean;\n\ttheme: MakeTheme<'wrapper' | 'container' | 'axis' | 'axis_x' | 'axisWrapper_x'>;\n};\n\nconst CANDLES_ON_CHART = 45;\n\nclass RawChart extends Component<RawChartProps> {\n\tprivate ref = createRef<HTMLDivElement>();\n\tprivate chart?: ChartBootstrap;\n\tprivate crosstoolViewModel = new CrossToolViewModel();\n\tprivate requestAnimationFrameId: number | undefined;\n\n\tcomponentDidMount() {\n\t\tconst {\n\t\t\tplugins,\n\t\t\tisCrossToolEnabled,\n\t\t\thistorical,\n\t\t\tselectedType,\n\t\t\tsymbol,\n\t\t\tprecision,\n\t\t\tperiodRangePair: { period, range },\n\t\t} = this.props;\n\t\tthis.crosstoolViewModel.isEnabled = isCrossToolEnabled;\n\n\t\tif (this.ref.current) {\n\t\t\tconst chartConfig = {\n\t\t\t\t...mainConfig,\n\t\t\t\tcomponents: {\n\t\t\t\t\t...mainConfig.components,\n\t\t\t\t\tchart: {\n\t\t\t\t\t\t...((mainConfig.components && mainConfig.components.chart) || {}),\n\t\t\t\t\t\ttype: this.typeToString(selectedType),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t\tconst defaultPlugins: Plugin[] = [new CrossTool(this.crosstoolViewModel, createAVAChartInfoView)];\n\n\t\t\tconst chartInstance = new window.chart.ChartBootstrap(this.ref.current, chartConfig);\n\t\t\tthis.chart = chartInstance;\n\t\t\tconst instrument = createInstrument(symbol, precision);\n\t\t\tthis.chart.setInstrument(instrument);\n\t\t\tthis.updateHistorical(instrument, historical, period, range, this.chart.bus);\n\t\t\t// FIXME: until chart plugin will not correctly scale on initialize\n\t\t\tthis.updateChartScale();\n\t\t\t[...defaultPlugins, ...plugins].forEach(plugin => plugin.register(chartInstance.registerPlugin));\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps: Readonly<RawChartProps>): boolean {\n\t\tif (this.crosstoolViewModel && nextProps.isCrossToolEnabled !== this.props.isCrossToolEnabled) {\n\t\t\tthis.crosstoolViewModel.isEnabled = nextProps.isCrossToolEnabled;\n\t\t}\n\t\tif (this.chart) {\n\t\t\tconst isPeriodAndRangeChanged =\n\t\t\t\tthis.props.periodRangePair.period !== nextProps.periodRangePair.period ||\n\t\t\t\tthis.props.periodRangePair.range !== nextProps.periodRangePair.range;\n\n\t\t\tif (\n\t\t\t\tnextProps.symbol !== this.props.symbol ||\n\t\t\t\tnextProps.historical !== this.props.historical ||\n\t\t\t\tisPeriodAndRangeChanged\n\t\t\t) {\n\t\t\t\tconst { period, range } = nextProps.periodRangePair;\n\n\t\t\t\tconst instrument = createInstrument(nextProps.symbol, this.props.precision);\n\t\t\t\tthis.chart.setInstrument(instrument);\n\t\t\t\tthis.updateHistorical(instrument, nextProps.historical, period, range, this.chart.bus);\n\t\t\t}\n\n\t\t\tif (nextProps.last && !setoidStrict.equals(this.props.last, nextProps.last)) {\n\t\t\t\tthis.updateLastCandles(nextProps.last, this.chart.bus);\n\t\t\t}\n\n\t\t\tif (nextProps.selectedType !== this.props.selectedType) {\n\t\t\t\tthis.chart.setChartType(this.typeToString(nextProps.selectedType));\n\t\t\t\tthis.updateLastCandles(nextProps.last, this.chart.bus);\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.requestAnimationFrameId && cancelAnimationFrame(this.requestAnimationFrameId);\n\t}\n\n\trender() {\n\t\tconst { theme } = this.props;\n\n\t\tconst chartAxisClassName = cn(theme.axis, theme.axis_x);\n\n\t\treturn (\n\t\t\t<div data-chart-container className={theme.wrapper}>\n\t\t\t\t<div className={theme.container} ref={this.ref}>\n\t\t\t\t\t<ChartGraph yAxisPosition={ChartYAxisPosition.Right} />\n\n\t\t\t\t\t<div data-element=\"underlaySibling\" className={theme.axisWrapper_x}>\n\t\t\t\t\t\t<div data-element=\"xAxis\" className={chartAxisClassName} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<ChartMap />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tprivate updateChartScale = () => {\n\t\tconst { historical } = this.props;\n\t\tif (this.chart && historical.length >= CANDLES_ON_CHART) {\n\t\t\tthis.chart.setXScale(historical.length - CANDLES_ON_CHART, historical.length);\n\t\t}\n\t\tthis.requestAnimationFrameId = requestAnimationFrame(() => this.updateChartScale());\n\t};\n\n\tprivate updateHistorical(\n\t\tinstrument: TInstrument,\n\t\thistorical: CandleType[],\n\t\tperiod: number,\n\t\trange: number,\n\t\tbus: EventBus,\n\t): void {\n\t\tif (this.chart) {\n\t\t\tif (historical.length > 0) {\n\t\t\t\tbus.fire(bus.types.LOADING, {\n\t\t\t\t\tinstrument,\n\t\t\t\t\tperiod,\n\t\t\t\t\trange,\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.chart.setCandles(historical as Candle[]);\n\n\t\t\tif (historical.length >= CANDLES_ON_CHART) {\n\t\t\t\tthis.chart.setXScale(historical.length - CANDLES_ON_CHART, historical.length);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate updateLastCandles(candles: CandleType[], bus: EventBus) {\n\t\tbus.fire(bus.types.CANDLE_CAME, candles);\n\t\t/* todo remove next after chart version update */\n\t\tbus.fire(bus.types.RESIZED);\n\t}\n\n\tprivate typeToString = (type: ChartType): BarType => {\n\t\tswitch (type) {\n\t\t\tcase ChartType.Candle:\n\t\t\t\treturn BarType.CANDLE;\n\t\t\tcase ChartType.Bar:\n\t\t\t\treturn BarType.BAR;\n\t\t\tcase ChartType.Line:\n\t\t\t\treturn BarType.LINE;\n\t\t}\n\t};\n}\n\nexport type ChartProps = PartialKeys<RawChartProps, 'plugins'>;\nexport const Chart = withTheme(Symbol(), css)(\n\twithDefaults<RawChartProps, 'plugins'>({\n\t\tplugins: [],\n\t})(RawChart),\n);\n\nfunction createInstrument(code: string, precision: number): TInstrument {\n\treturn {\n\t\tcode,\n\t\tpricePrecisions: [precision, 1.0000000001, precision],\n\t\ttype: 'FOREX',\n\t};\n}\n","export type Period = {\n\tname: string;\n\tseconds: number;\n};\n\nexport enum ChartType {\n\tBar = '* BAR *',\n\tCandle = '* CANDLE *',\n\tLine = '* LINE *',\n}\n\nexport enum CrossToolMode {\n\tDisabled = '* DISABLED *',\n\tCrosshair = '* CROSSHAIR *',\n}\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { PeriodRangePair } from '../chart/chart.model';\nimport { Toolbar } from '../toolbar/toolbar/toolbar.component';\nimport { CrossToolMode, Period, ChartType } from '../toolbar/toolbar.model';\nimport { isCrosshair } from '../toolbar/toolbar.utils';\nimport { Chart } from '../chart/chart.component';\nimport { withDefaults } from '@devexperts/react-kit/dist/utils/with-defaults';\nimport { Plugin } from '../../../../ui-common/chart/plugin/plugin.model';\nimport { Option } from 'fp-ts/lib/Option';\nimport Candle from '@dx-private/dxchart5/dist/js/chart/model/Candle';\nimport * as css from './theme/chart-wrapper.module.css';\n\nexport type ChartWrapperProps = {\n\tsymbol: string;\n\tprecision: number;\n\ttitle: Option<string>;\n\tplugins: Plugin[];\n\thistorical: Candle[];\n\tperiodRangePair: PeriodRangePair;\n\tlastCandles: Candle[];\n\tperiods: Period[];\n\tselectedPeriod: Period;\n\tselectedType: ChartType;\n\tselectedCrossToolMode: CrossToolMode;\n\tonPeriodSelect: (period: Period) => void;\n\tonTypeSelect: (type: ChartType) => void;\n\tonCrossToolModeSelect: (type: CrossToolMode) => void;\n};\n\nclass RawChartWrapper extends PureComponent<ChartWrapperProps> {\n\trender() {\n\t\tconst {\n\t\t\ttitle,\n\t\t\tsymbol,\n\t\t\tprecision,\n\t\t\tperiods,\n\t\t\tselectedPeriod,\n\t\t\tonPeriodSelect,\n\t\t\tplugins,\n\t\t\thistorical,\n\t\t\tlastCandles,\n\t\t\tselectedType,\n\t\t\tonTypeSelect,\n\t\t\tselectedCrossToolMode,\n\t\t\tonCrossToolModeSelect,\n\t\t\tperiodRangePair,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={css.container}>\n\t\t\t\t<Toolbar\n\t\t\t\t\ttitle={title}\n\t\t\t\t\tperiods={periods}\n\t\t\t\t\tselectedPeriod={selectedPeriod}\n\t\t\t\t\tonPeriodSelect={onPeriodSelect}\n\t\t\t\t\tselectedType={selectedType}\n\t\t\t\t\tonTypeSelect={onTypeSelect}\n\t\t\t\t\tselectedCrossToolMode={selectedCrossToolMode}\n\t\t\t\t\tonCrossToolModeSelect={onCrossToolModeSelect}\n\t\t\t\t/>\n\t\t\t\t<Chart\n\t\t\t\t\tisCrossToolEnabled={isCrosshair(selectedCrossToolMode)}\n\t\t\t\t\tsymbol={symbol}\n\t\t\t\t\tprecision={precision}\n\t\t\t\t\thistorical={historical}\n\t\t\t\t\tperiodRangePair={periodRangePair}\n\t\t\t\t\tplugins={plugins}\n\t\t\t\t\tlast={lastCandles}\n\t\t\t\t\tselectedType={selectedType}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport const ChartWrapper = withDefaults<ChartWrapperProps, 'plugins'>({\n\tplugins: [],\n})(RawChartWrapper);\n","import { makeRemoteDataLoader } from '../../../../ui-common/remote-data-loader/remote-data-loader.component';\nimport { ChartWrapper } from '../chart-wrapper/chart-wrapper.component';\n\nexport const ChartLoader = makeRemoteDataLoader(ChartWrapper, 'historical', 'periods', 'precision', 'title');\n","import * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant, constFalse } from 'fp-ts/lib/function';\nimport { CrossToolMode } from './chart-loader.model';\nimport { CandleTO } from '../../../../api/generated/swagger/definitions/CandleTO';\nimport Candle from '@dx-private/dxchart5/dist/js/chart/model/Candle';\n\nexport function booleanToMode(isEnabled: boolean): CrossToolMode {\n\treturn isEnabled ? CrossToolMode.Crosshair : CrossToolMode.Disabled;\n}\n\nexport function isCrosshair(mode: CrossToolMode) {\n\treturn mode === CrossToolMode.Crosshair;\n}\n\nexport function toChartCandle(to: CandleTO): Candle {\n\treturn new window.chart.Candle(\n\t\tpipe(\n\t\t\tto.high,\n\t\t\tO.getOrElse(constant(0)),\n\t\t),\n\t\tpipe(\n\t\t\tto.low,\n\t\t\tO.getOrElse(constant(0)),\n\t\t),\n\t\tpipe(\n\t\t\tto.open,\n\t\t\tO.getOrElse(constant(0)),\n\t\t),\n\t\tpipe(\n\t\t\tto.close,\n\t\t\tO.getOrElse(constant(0)),\n\t\t),\n\t\tto.timestamp.getTime(),\n\t\tpipe(\n\t\t\tto.volume,\n\t\t\tO.getOrElse(constant(0)),\n\t\t),\n\t\tpipe(\n\t\t\tto.expansion,\n\t\t\tO.getOrElse(constFalse),\n\t\t),\n\t\t0,\n\t);\n}\n","import { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { ChartViewModel, createChartViewModel } from '../../../../view-model/chart/chart.view-model';\nimport { ChartLoader } from '../../components/chart-loader/chart-loader.component';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport Candle from '@dx-private/dxchart5/dist/js/chart/model/Candle';\nimport { map } from 'rxjs/operators';\nimport { CrossToolMode, Period, ChartType } from './chart-loader.model';\nimport { booleanToMode, isCrosshair, toChartCandle } from './chart-loader.utils';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { createSelector } from 'reselect';\n\ntype ChartLoaderContainerContext = {\n\tchartViewModel: ChartViewModel;\n};\n\nconst empty: Candle[] = [];\n\nconst Container = combineContext(ask<ChartLoaderContainerContext>(), ctx => {\n\treturn withRXWithDefaults(ChartLoader)(() => {\n\t\tconst { chartViewModel } = ctx;\n\t\tconst onChangeType = (type: ChartType) => chartViewModel.onChangeChartType(type);\n\t\tconst onChangePeriod = (period: Period) => chartViewModel.onChangePeriod(period);\n\t\tconst onChangeCrossToolMode = (mode: CrossToolMode) => chartViewModel.onSwitchCrossTool(isCrosshair(mode));\n\n\t\tconst periods$ = chartViewModel.periods$;\n\t\tconst description$ = chartViewModel.description$;\n\t\tconst precision$ = chartViewModel.precision$;\n\t\tconst selectedChartType$ = chartViewModel.selectedChartType$;\n\t\tconst selectedPeriod$ = chartViewModel.selectedPeriod$;\n\t\tconst selectedCrossToolMode$ = chartViewModel.isCrossToolEnabled$.pipe(map(booleanToMode));\n\n\t\tconst historical$ = chartViewModel.candles$.pipe(mapRD(candles => candles.map(toChartCandle)));\n\n\t\tconst lastCandles$ = chartViewModel.lastCandles$.pipe(\n\t\t\tmap(candles => candles.map(candles => candles.map(toChartCandle)).getOrElse(empty)),\n\t\t);\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tprecision: precision$,\n\t\t\t\ttitle: description$,\n\t\t\t\thistorical: historical$,\n\t\t\t\tperiodRangePair: chartViewModel.aggregationPeriodPair$,\n\t\t\t\tlastCandles: lastCandles$,\n\t\t\t\tperiods: periods$,\n\t\t\t\tselectedPeriod: selectedPeriod$,\n\t\t\t\tselectedType: selectedChartType$,\n\t\t\t\tselectedCrossToolMode: selectedCrossToolMode$,\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tprecision: pending,\n\t\t\t\ttitle: pending,\n\t\t\t\thistorical: pending,\n\t\t\t\tperiodRangePair: {\n\t\t\t\t\tperiod: 60,\n\t\t\t\t\trange: 432000,\n\t\t\t\t},\n\t\t\t\tlastCandles: [],\n\t\t\t\tperiods: pending,\n\t\t\t\tselectedPeriod: {\n\t\t\t\t\tname: '1m',\n\t\t\t\t\tseconds: 60,\n\t\t\t\t},\n\t\t\t\tselectedType: ChartType.Candle,\n\t\t\t\tselectedCrossToolMode: CrossToolMode.Disabled,\n\t\t\t\tonPeriodSelect: onChangePeriod,\n\t\t\t\tonTypeSelect: onChangeType,\n\t\t\t\tonCrossToolModeSelect: onChangeCrossToolMode,\n\t\t\t},\n\t\t};\n\t});\n});\n\nexport const ChartLoaderContainer = combineContext(\n\tdeferContext(Container, 'chartViewModel'),\n\tcreateChartViewModel,\n\t(Container, createChartViewModel) =>\n\t\trunOnMount(Container, props => {\n\t\t\tconst plugins = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.plugins,\n\t\t\t);\n\t\t\tconst symbol = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.symbol,\n\t\t\t);\n\t\t\treturn createSelector(\n\t\t\t\tplugins,\n\t\t\t\tsymbol,\n\t\t\t\t(plugins, symbol) =>\n\t\t\t\t\tcreateChartViewModel(symbol, false).map(chartViewModel => ({\n\t\t\t\t\t\tplugins,\n\t\t\t\t\t\tchartViewModel,\n\t\t\t\t\t})),\n\t\t\t);\n\t\t}),\n);\n","import { Option } from 'fp-ts/lib/Option';\nimport { ReactNode } from 'react';\n\nexport enum PositionSide {\n\tBought = '* BOUGHT *',\n\tSold = '* SOLD *',\n}\n\nexport enum EditPositionPreset {\n\tTakeProfit = '* TAKE_PROFIT *',\n\tStopLoss = '* STOP_LOSS *',\n\tNone = '* NONE *',\n}\n\nexport enum TableSize {\n\tSmall = '* SMALL *',\n\tLarge = '* LARGE *',\n}\n\nexport type PositionsTableItem = {\n\tuid: string;\n\tquantity: number;\n\tside: PositionSide;\n\tsize: Option<number>;\n\topenPrice: Option<number>;\n\tstopLoss: Option<number>;\n\ttakeProfit: Option<number>;\n\tprecision: number;\n};\n\nexport type ConfigItem = {\n\twidth: number;\n\tdataKey: keyof PositionsTableItem | 'symbol' | 'profitLoss' | 'value' | 'controls';\n};\n\nexport type PositionsTableColumnNames = {\n\tsymbol: ReactNode;\n\tside: ReactNode;\n\tsize: ReactNode;\n\tvalue: ReactNode;\n\tprofitLoss: ReactNode;\n\topenPrice: ReactNode;\n\tstopLoss: ReactNode;\n\ttakeProfit: ReactNode;\n};\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const ClearIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 25 25\">\n\t\t\t<path fill=\"currentColor\" d=\"M7.7 18L18.1 7.8l-.8-.7L7 17.3z\" />\n\t\t\t<path fill=\"currentColor\" d=\"M7.5 7.7l10.3 10.4.7-.8L8.2 7z\" />\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const SearchIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 25 25\">\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M19 18.3a.3.3 0 0 1 0 .2.3.3 0 0 1 0 .2l-.3.2a.3.3 0 0 1-.2.1.2.2 0 0 1-.2 0l-3-3.1a.2.2 0 0 1-.1-.2v-.2a4.8 4.8 0 0 1-1.5 1 4.8 4.8 0 0 1-1.8.3 4.7 4.7 0 0 1-2.5-.7 5 5 0 0 1-1.7-1.8A4.7 4.7 0 0 1 7 12a4.7 4.7 0 0 1 .7-2.5 5 5 0 0 1 1.7-1.7A4.7 4.7 0 0 1 12 7a4.7 4.7 0 0 1 2.4.7 5 5 0 0 1 1.8 1.7 4.7 4.7 0 0 1 .6 2.5 4.8 4.8 0 0 1-.3 1.8 4.8 4.8 0 0 1-1 1.5h.3a.3.3 0 0 1 .2 0zM11.8 16a4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5 4 4 0 0 0 .6-2 4 4 0 0 0-.6-2.1A4 4 0 0 0 14 8.3a4 4 0 0 0-2-.6 4 4 0 0 0-2.1.6 4 4 0 0 0-1.5 1.5 4 4 0 0 0-.6 2 4 4 0 0 0 .6 2.1 4 4 0 0 0 1.5 1.5 4 4 0 0 0 2 .6z\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { empty, findFirst, findIndex, head, index, last } from 'fp-ts/lib/Array';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type Suggest = {\n\tdescription: Option<string>;\n\tid: string;\n\tsymbol: string;\n\tcategory: string;\n};\nexport type SuggestGroup = {\n\ttitle: string;\n\tvalues: Suggest[];\n};\n\nexport const getSuggests = (suggestGroups: SuggestGroup[]): Suggest[] =>\n\tsuggestGroups.reduce<Suggest[]>((acc, group) => acc.concat(group.values), empty);\nexport const getSuggest = (suggestId: string) => (suggests: Suggest[]): Option<Suggest> =>\n\tfindFirst(suggests, suggest => suggest.id === suggestId);\nexport const nextSuggest = (selectedId: Option<string>) => (suggests: Suggest[]): Option<Suggest> =>\n\tpipe(\n\t\tselectedId,\n\t\tO.chain(selectedId => findIndex(suggests, item => item.id === selectedId)),\n\t\tO.map(i => i + 1),\n\t\tO.chain(i => index(i, suggests)),\n\t\tO.alt(() => head(suggests)),\n\t);\nexport const prevSuggest = (selectedId: Option<string>) => (suggests: Suggest[]): Option<Suggest> =>\n\tpipe(\n\t\tselectedId,\n\t\tO.chain(selectedId => findIndex(suggests, item => item.id === selectedId)),\n\t\tO.map(i => i - 1),\n\t\tO.chain(i => index(i, suggests)),\n\t\tO.alt(() => last(suggests)),\n\t);\n","import * as React from 'react';\nimport { Component, createRef, Fragment, KeyboardEvent, MouseEvent, PureComponent } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport * as classNames from 'classnames';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { Lazy, constant } from 'fp-ts/lib/function';\nimport { head } from 'fp-ts/lib/Array';\nimport { Input, TInputProps } from '@devexperts/react-kit/dist/components/input/Input';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { Highlight } from '@devexperts/react-kit/dist/components/Highlight/Highlight';\nimport { PopoverAlign, PopoverPlacement } from '@devexperts/react-kit/dist/components/Popover/Popover';\nimport { Popover } from '../../../ui-kit/components/popover/popover.component';\nimport { Scrollable } from '../../../../ui-common/scrollable/scrollable.component';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { ClearIcon } from '../../../ui-kit/components/icons/clear.icon';\nimport { SearchIcon } from '../../../ui-kit/components/icons/search.icon';\nimport { getSuggest, getSuggests, nextSuggest, prevSuggest, Suggest, SuggestGroup } from './symbol-search.model';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as inputTheme from './theme/input.child.module.css';\nimport * as css from './theme/symbol-search.module.css';\nimport * as popoverTheme from './theme/popover.child.module.css';\nimport * as highlightTheme from './theme/highlight.child.module.css';\n\nconst symbolClassName = {\n\tcontainer: classNames(highlightTheme.container, highlightTheme.container_symbol),\n\tmark: highlightTheme.mark,\n};\n\nexport type SymbolSearchProps = {\n\tdata: RemoteData<Error, SuggestGroup[]>;\n\tisOpened: boolean;\n\tonCloseRequest: Lazy<void>;\n\tonEnter: (suggest: Option<Suggest>) => void;\n\tonInputBlur?: Lazy<void>;\n\tonSelect: (suggest: Option<Suggest>) => void;\n\tonValueChange: (value: string, keepOpened?: boolean) => void;\n\tselectedId: Option<string>;\n\tvalue: string;\n};\n\nclass SymbolSearchUnwrapped extends PureComponent<SymbolSearchProps & WithTranslation> {\n\tprivate input = createRef<Component<TInputProps>>();\n\tprivate isInputFocused: boolean = false;\n\n\tpublic render() {\n\t\tconst { data, value, isOpened, t } = this.props;\n\n\t\treturn (\n\t\t\t<div className={css.container}>\n\t\t\t\t<Input\n\t\t\t\t\tonFocus={this.inputHandleFocus}\n\t\t\t\t\tonBlur={this.inputHandleBlur}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonValueChange={this.handleValueChange}\n\t\t\t\t\tref={this.input}\n\t\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t\t\ttheme={inputTheme}\n\t\t\t\t\tplaceholder={t('symbolSearchSearchSymbol', 'Search Symbol')}>\n\t\t\t\t\t<div className={css.iconWrapper} onClick={this.handleIconClick}>\n\t\t\t\t\t\t{value ? <ClearIcon /> : <SearchIcon />}\n\t\t\t\t\t</div>\n\t\t\t\t</Input>\n\t\t\t\t<Popover\n\t\t\t\t\tonRequestClose={this.popoverHandleBlur}\n\t\t\t\t\tcloseOnClickAway={true}\n\t\t\t\t\talign={PopoverAlign.Left}\n\t\t\t\t\tplacement={PopoverPlacement.Bottom}\n\t\t\t\t\tisOpened={isOpened}\n\t\t\t\t\tanchor={this.input.current}\n\t\t\t\t\ttheme={popoverTheme}>\n\t\t\t\t\t<RemoteDataState data={data} success={this.renderSuccess} />\n\t\t\t\t</Popover>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tprivate renderSuccess = (data: SuggestGroup[]) => {\n\t\tconst { value, selectedId } = this.props;\n\n\t\treturn (\n\t\t\t<Scrollable>\n\t\t\t\t<ul className={css.suggestList}>\n\t\t\t\t\t{data.map((group, groupIndex) => (\n\t\t\t\t\t\t<Fragment key={groupIndex}>\n\t\t\t\t\t\t\t<div className={css.groupTitle}>\n\t\t\t\t\t\t\t\t<span className={css.groupTitleText}>{group.title}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{group.values.map((item, itemIndex) => {\n\t\t\t\t\t\t\t\tconst listItemClassName = classNames(css.suggest, {\n\t\t\t\t\t\t\t\t\t[css.suggest_selected]: pipe(\n\t\t\t\t\t\t\t\t\t\tselectedId,\n\t\t\t\t\t\t\t\t\t\tO.exists(selectedId => selectedId === item.id),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tconst symbolCN = {\n\t\t\t\t\t\t\t\t\t...symbolClassName,\n\t\t\t\t\t\t\t\t\tmark: pipe(\n\t\t\t\t\t\t\t\t\t\tselectedId,\n\t\t\t\t\t\t\t\t\t\tO.fold(constant(symbolClassName.mark), x =>\n\t\t\t\t\t\t\t\t\t\t\tx === item.id ? css.selectedMark : symbolClassName.mark,\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\tclassName={listItemClassName}\n\t\t\t\t\t\t\t\t\t\tkey={itemIndex}\n\t\t\t\t\t\t\t\t\t\tonMouseEnter={this.handleHover(item, selectedId)}\n\t\t\t\t\t\t\t\t\t\tonMouseMove={this.handleHover(item, selectedId)}\n\t\t\t\t\t\t\t\t\t\tonClick={this.handleClick(item)}>\n\t\t\t\t\t\t\t\t\t\t<Highlight theme={symbolCN} search={value}>\n\t\t\t\t\t\t\t\t\t\t\t{item.symbol}\n\t\t\t\t\t\t\t\t\t\t</Highlight>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</Scrollable>\n\t\t);\n\t};\n\n\t// Inputs onValueChange passes string or undefined but it is, actually, impossible, because input always has a value\n\tprivate handleValueChange = (value: string | undefined) => this.props.onValueChange(value || '', !!value);\n\n\tprivate handleHover = (suggest: Suggest, selectedId: Option<string>) => () => {\n\t\tconst { onSelect } = this.props;\n\t\tif (\n\t\t\tpipe(\n\t\t\t\tselectedId,\n\t\t\t\tO.exists(selectedId => selectedId === suggest.id),\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tonSelect(O.some(suggest));\n\t};\n\n\tprivate handleKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {\n\t\tconst {\n\t\t\tisOpened,\n\t\t\tonEnter,\n\t\t\tvalue: inputValue,\n\t\t\tonSelect,\n\t\t\tdata,\n\t\t\tselectedId,\n\t\t\tonValueChange,\n\t\t\tonCloseRequest,\n\t\t} = this.props;\n\t\tconst suggestGroups = data.toOption();\n\n\t\tif (e.key === 'Escape' || e.key === 'Tab') {\n\t\t\tonCloseRequest();\n\t\t\treturn;\n\t\t}\n\n\t\tconst suggests = pipe(\n\t\t\tsuggestGroups,\n\t\t\tO.map(getSuggests),\n\t\t);\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowDown':\n\t\t\t\te.preventDefault();\n\t\t\t\tconst next = pipe(\n\t\t\t\t\tsuggests,\n\t\t\t\t\tO.chain(nextSuggest(selectedId)),\n\t\t\t\t);\n\t\t\t\tonSelect(next);\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowUp':\n\t\t\t\tif (!isOpened) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t\tconst prev = pipe(\n\t\t\t\t\tsuggests,\n\t\t\t\t\tO.chain(prevSuggest(selectedId)),\n\t\t\t\t);\n\n\t\t\t\tonSelect(prev);\n\n\t\t\t\tbreak;\n\t\t\tcase 'Enter':\n\t\t\t\tif (!isOpened) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst selectedSuggest = pipe(\n\t\t\t\t\tselectedId,\n\t\t\t\t\tO.map(getSuggest),\n\t\t\t\t\tO.chain(f =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\tsuggests,\n\t\t\t\t\t\t\tO.chain(s => f(s)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t\tO.alt(() =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\tsuggests,\n\t\t\t\t\t\t\tO.chain(head),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\tonValueChange(\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tselectedSuggest,\n\t\t\t\t\t\tO.map(selectedSuggest => selectedSuggest.symbol),\n\t\t\t\t\t\tO.getOrElse(() => inputValue),\n\t\t\t\t\t),\n\t\t\t\t\tfalse,\n\t\t\t\t);\n\t\t\t\tonEnter(selectedSuggest);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tprivate inputHandleBlur = () => {\n\t\tthis.isInputFocused = false;\n\t};\n\n\tprivate inputHandleFocus = () => {\n\t\tthis.isInputFocused = true;\n\t};\n\n\tprivate handleClick = (suggest: Suggest) => (e: MouseEvent<HTMLElement>) => {\n\t\tconst { onValueChange, onEnter } = this.props;\n\t\te.preventDefault();\n\t\tonValueChange(suggest.symbol);\n\t\tonEnter(O.some(suggest));\n\t};\n\n\tprivate popoverHandleBlur = () => {\n\t\tif (this.isInputFocused) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.props.onInputBlur && this.props.onInputBlur();\n\t};\n\n\tprivate handleIconClick = (e: MouseEvent<HTMLElement>) => {\n\t\te.stopPropagation();\n\n\t\tconst { value } = this.props;\n\n\t\tif (value) {\n\t\t\tthis.props.onValueChange('');\n\t\t}\n\t};\n}\n\nexport const SymbolSearch = withTranslation()(SymbolSearchUnwrapped);\n","import { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { merge, Observable } from 'rxjs';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { distinctUntilChanged, filter, map, mapTo, startWith, switchMap } from 'rxjs/operators';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { SymbolSuggestController } from '../../api/generated/swagger/controllers/SymbolSuggestController';\nimport { InstrumentSuggestTreeNodeTO } from '../../api/generated/swagger/definitions/InstrumentSuggestTreeNodeTO';\nimport { Lazy } from 'fp-ts/lib/function';\nimport { href, Router } from '../../utils/router.utils';\nimport { routes } from '../../ui-common/routes';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { shareReplayWithDefaults } from '../../utils/rxjs/shareReplayWithDefaults';\n\ntype Suggestion = {\n\tsymbol: string;\n\tcategory: string;\n};\n\nexport type SymbolSearchViewModel = {\n\tsuggest$: LiveData<Error, InstrumentSuggestTreeNodeTO[]>;\n\tisOpened$: Observable<boolean>;\n\tinputValue$: Observable<string>;\n\tonInputValueChange: (value: string, keepOpened?: boolean) => void;\n\tselectedSuggestId$: Observable<Option<number>>;\n\tonSelectSuggest: (id: Option<number>) => void;\n\tonSearch: (symbol: string, category: string) => void;\n\tonClose: Lazy<void>;\n};\n\nexport type SymbolSearchViewContext = {\n\tsymbolSuggestController: SymbolSuggestController;\n\trouter: Router;\n};\n\nexport type CreateSymbolSearchViewModel = Sink<() => SymbolSearchViewModel>;\n\nexport const createSymbolSearchViewModel = combineContext(\n\task<SymbolSearchViewContext>(),\n\t(context): CreateSymbolSearchViewModel => {\n\t\tconst { symbolSuggestController } = context;\n\n\t\tconst isOpened = createHandler<boolean>();\n\t\tconst inputValue = createHandler<string>();\n\t\tconst selectedSuggestId = createHandler<Option<number>>();\n\t\tconst searchValue = createHandler<Suggestion>();\n\t\tconst closeRequest = createHandler<void>();\n\n\t\t//#region state\n\t\tconst searchValue$ = searchValue.value$.pipe(\n\t\t\tdistinctUntilChanged(),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst inputValue$ = merge(searchValue$.pipe(mapTo('')), inputValue.value$).pipe(\n\t\t\tstartWith(''),\n\t\t\tdistinctUntilChanged(),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst suggest$: LiveData<Error, InstrumentSuggestTreeNodeTO[]> = inputValue$.pipe(\n\t\t\tfilter<string>(Boolean),\n\t\t\tswitchMap(text =>\n\t\t\t\tsymbolSuggestController.requestSuggestsTree({ query: { text, instrumentTypes: O.none } }),\n\t\t\t),\n\t\t\tmapRD(response => response.root.childNodes),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst selectedSuggestId$ = merge(searchValue$.pipe(mapTo(O.none)), selectedSuggestId.value$).pipe(\n\t\t\tstartWith(O.none),\n\t\t);\n\n\t\tconst isOpened$ = merge(\n\t\t\tisOpened.value$,\n\t\t\tcloseRequest.value$.pipe(mapTo(false)),\n\t\t\tselectedSuggestId$.pipe(\n\t\t\t\tmap(selectedSymbol =>\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tselectedSymbol,\n\t\t\t\t\t\tO.isSome,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t),\n\t\t).pipe(startWith(false));\n\t\t//#endregion\n\n\t\t//#region handlers\n\t\tconst onInputValueChange = (value: string, keepOpened: boolean = false) => {\n\t\t\tinputValue.handle(value);\n\t\t\tisOpened.handle(keepOpened);\n\t\t};\n\t\tconst onSelectSuggest = (id: Option<number>) => selectedSuggestId.handle(id);\n\t\tconst onSearch = (symbol: string, category: string) => searchValue.handle({ symbol, category });\n\t\tconst onClose = () => closeRequest.handle(undefined);\n\t\t//#endregion\n\n\t\t//#region handlers\n\t\tconst searchEffect$ = searchValue$.pipe(\n\t\t\t// map(({ category, symbol }: Suggestion) => context.router.push(`/trade/${category.toLowerCase()}/${encodeURIComponent(symbol)}`)),\n\t\t\tmap(({ category, symbol }: Suggestion) =>\n\t\t\t\tcontext.router.push(\n\t\t\t\t\thref(routes.trade.category.symbol.root, { categoryId: category.toLowerCase(), symbol }),\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\t\t//#endregion\n\n\t\treturn new Sink(\n\t\t\t() => ({\n\t\t\t\tinputValue$,\n\t\t\t\tisOpened$,\n\t\t\t\tonClose,\n\t\t\t\tonInputValueChange,\n\t\t\t\tonSearch,\n\t\t\t\tonSelectSuggest,\n\t\t\t\tselectedSuggestId$,\n\t\t\t\tsuggest$,\n\t\t\t}),\n\t\t\tsearchEffect$,\n\t\t);\n\t},\n);\n","import { InstrumentSuggestTO } from '../../../../api/generated/swagger/definitions/InstrumentSuggestTO';\nimport { InstrumentSuggestTreeNodeTO } from '../../../../api/generated/swagger/definitions/InstrumentSuggestTreeNodeTO';\nimport { Suggest, SuggestGroup } from '../../components/symbol-search/symbol-search.model';\n\nexport const toSuggest = (suggest: InstrumentSuggestTO, parent: InstrumentSuggestTreeNodeTO): Suggest => ({\n\tdescription: suggest.description,\n\tid: suggest.id.toString(),\n\tsymbol: suggest.name,\n\tcategory: parent.name,\n});\n\nexport const toSuggestGroup = (instrumentGroup: InstrumentSuggestTreeNodeTO): SuggestGroup => ({\n\ttitle: instrumentGroup.name,\n\tvalues: instrumentGroup.suggests.map(suggests => toSuggest(suggests, instrumentGroup)),\n});\n","import { pending } from '@devexperts/remote-data-ts';\nimport { SymbolSearch } from '../../components/symbol-search/symbol-search.component';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport {\n\tcreateSymbolSearchViewModel,\n\tSymbolSearchViewModel,\n} from '../../../../view-model/symbol-search/symbol-search.view-model';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { toSuggestGroup } from './symbol-search.model';\nimport { map } from 'rxjs/operators';\nimport { Suggest } from '../../components/symbol-search/symbol-search.model';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\ntype TSymbolSearchContainerContext = {\n\tsymbolSearchViewModel: SymbolSearchViewModel;\n};\n\nexport const Container = combineContext(ask<TSymbolSearchContainerContext>(), context =>\n\twithRXWithDefaults(SymbolSearch)(() => {\n\t\tconst { symbolSearchViewModel } = context;\n\n\t\t//#region props\n\t\tconst suggest$ = symbolSearchViewModel.suggest$.pipe(mapRD(data => data.map(toSuggestGroup)));\n\t\tconst selectedId$ = symbolSearchViewModel.selectedSuggestId$.pipe(\n\t\t\tmap(id =>\n\t\t\t\tpipe(\n\t\t\t\t\tid,\n\t\t\t\t\tO.map(id => id.toString()),\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\t\t//#endregion\n\n\t\t//#region handlers\n\t\tconst onInputBlur = () => symbolSearchViewModel.onSelectSuggest(O.none);\n\t\tconst onSelect = (selectedSuggest: Option<Suggest>) =>\n\t\t\tsymbolSearchViewModel.onSelectSuggest(\n\t\t\t\tpipe(\n\t\t\t\t\tselectedSuggest,\n\t\t\t\t\tO.map(selectedSuggest => +selectedSuggest.id),\n\t\t\t\t\tO.filter(id => !isNaN(id)),\n\t\t\t\t),\n\t\t\t);\n\t\tconst onEnter = (selectedSuggest: Option<Suggest>) =>\n\t\t\tO.isSome(selectedSuggest) &&\n\t\t\tsymbolSearchViewModel.onSearch(selectedSuggest.value.symbol, selectedSuggest.value.category);\n\t\t//#endregion\n\n\t\treturn {\n\t\t\tdefaultProps: {\n\t\t\t\tdata: pending,\n\t\t\t\tisOpened: false,\n\t\t\t\tonCloseRequest: symbolSearchViewModel.onClose,\n\t\t\t\tonEnter,\n\t\t\t\tonInputBlur,\n\t\t\t\tonSelect,\n\t\t\t\tonValueChange: symbolSearchViewModel.onInputValueChange,\n\t\t\t\tselectedId: O.none,\n\t\t\t\tvalue: '',\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\tdata: suggest$,\n\t\t\t\tisOpened: symbolSearchViewModel.isOpened$,\n\t\t\t\tselectedId: selectedId$,\n\t\t\t\tvalue: symbolSearchViewModel.inputValue$,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const SymbolSearchContainer = combineContext(\n\tdeferContext(Container, 'symbolSearchViewModel'),\n\tcreateSymbolSearchViewModel,\n\t(Container, createSymbolSearchViewModel) =>\n\t\trunOnMount(Container, () => () => ({\n\t\t\tsymbolSearchViewModel: createSymbolSearchViewModel(),\n\t\t})),\n);\n","import * as React from 'react';\nimport { LineProp } from './line.model';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as O from 'fp-ts/lib/Option';\nimport * as css from './theme/line.component.module.css';\n\nclass RawLine extends React.Component<LineProp> {\n\trender() {\n\t\tconst { yPosition, formattedPrice, label, theme } = this.props;\n\t\tconst style = {\n\t\t\ttop: `${yPosition}px`,\n\t\t};\n\n\t\treturn (\n\t\t\t<div className={theme.container} style={style}>\n\t\t\t\t{pipe(\n\t\t\t\t\tlabel,\n\t\t\t\t\tO.map(label => <div className={theme.label}>{label}</div>),\n\t\t\t\t\tO.toNullable,\n\t\t\t\t)}\n\t\t\t\t<div className={theme.price}>{formattedPrice}</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst wTheme = {\n\t...css,\n};\n\nexport const Line = withTheme(Symbol(), wTheme)(RawLine);\n","import * as React from 'react';\nimport { LineProp } from './line.model';\nimport { Line } from './line.component';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { PartialKeys } from '@devexperts/utils/dist/object';\nimport { Theme } from '../../../ui-kit/components/theme/theme.component';\nimport { MakeTheme } from '../../../../utils/theme.utils';\nimport * as css from './theme/lines.component.module.css';\n\ntype LinesProps = {\n\tlines: LineProp[];\n\ttheme: MakeTheme<'container'>;\n};\n\nexport class RawLines extends React.Component<LinesProps> {\n\trender() {\n\t\tconst { lines } = this.props;\n\t\treturn (\n\t\t\t<div className={css.container}>\n\t\t\t\t{lines.map((line, index) => (\n\t\t\t\t\t<Line\n\t\t\t\t\t\tkey={`line${index}`}\n\t\t\t\t\t\ttheme={line.theme}\n\t\t\t\t\t\tformattedPrice={line.formattedPrice}\n\t\t\t\t\t\tyPosition={line.yPosition}\n\t\t\t\t\t\tlabel={line.label}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport const Lines = withTheme(Symbol(), css)(RawLines);\n\nexport const ThemedLines = (props: PartialKeys<LinesProps, 'theme'>) => (\n\t<Theme>\n\t\t<Lines {...props} />\n\t</Theme>\n);\n","import { Plugin, PluginDependencyResolver } from '../../../../ui-common/chart/plugin/plugin.model';\nimport { Clearer, ChartElementsCache, CandleDirection } from '../../components/chart/chart.model';\nimport { fromNullable, isSome, none, Option, some, option } from 'fp-ts/lib/Option';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { ThemedLines } from '../lines/lines.component';\nimport { liftA3 } from 'fp-ts/lib/Apply';\nimport { ChartEvents } from '@dx-private/dxchart5/dist/js/chart/ChartEvents';\nimport { LastCandleOnAxisUpdateRequest } from '@dx-private/dxchart5/dist/js/chart/axisLabels';\nimport EventBus from '@dx-private/dxchart5/dist/js/chart/EventBus';\nimport ChartData from '@dx-private/dxchart5/dist/js/chart/model/ChartData';\nimport * as css from '../lines/theme/lines-plugin.module.css';\nimport * as lineTheme from './theme/current-price-line.module.css';\n\nexport class CurrentPriceLinePlugin extends Plugin {\n\tprivate container: Option<HTMLDivElement> = none;\n\tprivate chartModel: Option<ChartData> = none;\n\tprivate currentPrice: Option<number> = none;\n\tprivate isDownDirection: boolean = false;\n\n\tregister(resolver: PluginDependencyResolver) {\n\t\tresolver(\n\t\t\t['eventBus', 'clearer', 'elements', 'events'],\n\t\t\t(bus: EventBus, clearer: Clearer, elements: ChartElementsCache, events: ChartEvents) => {\n\t\t\t\tconst { mainCanvas: canvas } = elements;\n\t\t\t\tconst div = document.createElement('div');\n\t\t\t\tdiv.classList.add(css.container);\n\t\t\t\tthis.container = some(div);\n\t\t\t\tconst parent = fromNullable(canvas.parentNode);\n\t\t\t\tif (isSome(parent)) {\n\t\t\t\t\tparent.value.appendChild(div);\n\t\t\t\t}\n\t\t\t\treturn clearer([\n\t\t\t\t\tevents.addRedrawListener(this.drawMainHandler),\n\t\t\t\t\tbus.on(bus.types.LAST_CANDLE, this.lastCandleTickHandler),\n\t\t\t\t\t() => {\n\t\t\t\t\t\tReactDOM.unmountComponentAtNode(div);\n\t\t\t\t\t\tif (isSome(parent)) {\n\t\t\t\t\t\t\tparent.value.removeChild(div);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t},\n\t\t);\n\t}\n\n\tprivate render = (container: HTMLDivElement) => (chartModel: ChartData) => (currentPrice: number) => {\n\t\tconst toY = (price: number) => Math.floor(chartModel.toY(price));\n\t\tconst format = (price: number) => chartModel.priceFormatter(price);\n\t\tconst theme = { price: this.isDownDirection ? lineTheme.price_down : lineTheme.price };\n\t\tReactDOM.render(\n\t\t\tReact.createElement(ThemedLines, {\n\t\t\t\tlines: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: none,\n\t\t\t\t\t\ttheme,\n\t\t\t\t\t\tformattedPrice: format(currentPrice),\n\t\t\t\t\t\tprice: currentPrice,\n\t\t\t\t\t\tyPosition: toY(currentPrice),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t}),\n\t\t\tcontainer,\n\t\t);\n\t};\n\n\tprivate renderLiftA3 = () => {\n\t\tliftA3(option)(this.render)(this.container)(this.chartModel)(this.currentPrice);\n\t};\n\n\tprivate lastCandleTickHandler = (event: LastCandleOnAxisUpdateRequest) => {\n\t\tconst currentPrice = fromNullable(event.value);\n\t\tthis.isDownDirection = event.candleDirection === CandleDirection.ASK;\n\t\tthis.currentPrice = currentPrice;\n\t\tthis.renderLiftA3();\n\t};\n\n\tprivate drawMainHandler = (chartModel: ChartData) => {\n\t\tthis.chartModel = fromNullable(chartModel);\n\t\tthis.renderLiftA3();\n\t};\n}\n","import * as React from 'react';\nimport * as cn from 'classnames';\nimport { FunctionComponent, ReactNode } from 'react';\nimport * as css from './theme/workspace.module.css';\n\ntype WorkspaceProps = {\n\tchildren: ReactNode;\n\tinnerShadow?: boolean;\n};\n\nexport const Workspace: FunctionComponent<WorkspaceProps> = ({ children, innerShadow }) => {\n\tconst workspaceClassName = cn(css.container, {\n\t\t[css.container_innerShadow]: innerShadow,\n\t});\n\n\treturn <div className={workspaceClassName}>{children}</div>;\n};\n","import * as React from 'react';\nimport { FunctionComponent, ReactNode } from 'react';\nimport * as css from './theme/workspace.module.css';\n\ntype WorkspaceChartProps = {\n\tchildren: ReactNode;\n};\n\nexport const WorkspaceChart: FunctionComponent<WorkspaceChartProps> = ({ children }) => (\n\t<div className={css.bottom}>{children}</div>\n);\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { routes } from '../../../../ui-common/routes';\nimport { Route } from '../../../../ui-common/route/containers/route.container';\nimport { MatchType } from '../../../../utils/router.utils';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { WatchlistContainer } from '../../../watchlist/containers/watchlist/watchlist.container';\nimport { OrderEntryPanelContainer } from '../../../order-entry/containers/order-entry-panel/order-entry-panel.container';\nimport { SymbolInfoContainer } from '../../../info-panel/containers/symbol-info/symbol-info.container';\nimport { CategoriesContainer } from '../../../categories/containers/categories/categories.container';\nimport { ChartLoaderContainer } from '../../../chart/containers/chart-loader/chart-loader.container';\nimport { SymbolSearchContainer } from '../../containers/symbol-search/symbol-search.container';\nimport { OrderEntrySide } from '../../../order-entry/components/order-entry-panel/order-entry-panel.model';\nimport { Plugin } from '../../../../ui-common/chart/plugin/plugin.model';\nimport { CurrentPriceLinePlugin } from '../../../chart/plugin/current-price-line/current-price-line-plugin';\nimport { right } from 'fp-ts/lib/Either';\nimport { Redirect } from '../../../../ui-common/redirect/containers/redirect.container';\nimport { Workspace } from '../../../ui-kit/components/workspace/workspace.component';\nimport { WorkspaceChart } from '../../../ui-kit/components/workspace/workspace-chart.component';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as css from './theme/trade-dashboard.module.css';\n\nexport type TradeDashboardProps = {\n\tfirstCategoryId: RemoteData<Error, string>;\n};\n\nexport const TradeDashboard = combineContext(\n\tRoute,\n\tWatchlistContainer,\n\tOrderEntryPanelContainer,\n\tSymbolInfoContainer,\n\tCategoriesContainer,\n\tChartLoaderContainer,\n\tSymbolSearchContainer,\n\tRedirect,\n\t(\n\t\tRoute,\n\t\tWatchlistContainer,\n\t\tOrderEntryPanelContainer,\n\t\tSymbolInfoContainer,\n\t\tCategoriesContainer,\n\t\tChartLoaderContainer,\n\t\tSymbolSearchContainer,\n\t\tRedirect,\n\t) => {\n\t\treturn class TradeDashboard extends PureComponent<TradeDashboardProps> {\n\t\t\tplugins: Plugin[] = [new CurrentPriceLinePlugin()];\n\n\t\t\trender() {\n\t\t\t\tconst { firstCategoryId } = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div className={css.container}>\n\t\t\t\t\t\t<RemoteDataState data={firstCategoryId} success={this.renderSuccess} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tprivate renderSuccess = (firstCategoryId: string) => {\n\t\t\t\treturn (\n\t\t\t\t\t<section className={css.container}>\n\t\t\t\t\t\t<div className={css.left}>\n\t\t\t\t\t\t\t<Workspace innerShadow>\n\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\t\t\tmatch={routes.trade.root}\n\t\t\t\t\t\t\t\t\trender={() => (\n\t\t\t\t\t\t\t\t\t\t<Redirect\n\t\t\t\t\t\t\t\t\t\t\tto={routes.trade.category.root}\n\t\t\t\t\t\t\t\t\t\t\tvalue={{ categoryId: firstCategoryId }}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className={css.symbols}>\n\t\t\t\t\t\t\t\t\t<Route match={routes.trade.root} render={() => <SymbolSearchContainer />} />\n\t\t\t\t\t\t\t\t\t<Route match={routes.trade.category.root} render={this.renderCategory} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={css.watchlist}>\n\t\t\t\t\t\t\t\t\t<Route match={routes.trade.category.root} render={this.renderWatchlist} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Workspace>\n\t\t\t\t\t\t\t<WorkspaceChart>\n\t\t\t\t\t\t\t\t<Route match={routes.trade.category.symbol.root} render={this.renderChart} />\n\t\t\t\t\t\t\t</WorkspaceChart>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Route match={routes.trade.category.symbol.action.root} exact render={this.renderAside} />\n\t\t\t\t\t\t<Route match={routes.trade.category.symbol.info.root} exact render={this.renderInfo} />\n\t\t\t\t\t</section>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderCategory = () => <CategoriesContainer />;\n\n\t\t\tprivate renderWatchlist = (path: MatchType<typeof routes.trade.category.root>) => (\n\t\t\t\t<WatchlistContainer categoryId={path.categoryId} />\n\t\t\t);\n\n\t\t\tprivate renderChart = (path: MatchType<typeof routes.trade.category.symbol.root>) => (\n\t\t\t\t<ChartLoaderContainer symbol={path.symbol} plugins={this.plugins} />\n\t\t\t);\n\t\t\tprivate renderAside = (path: MatchType<typeof routes.trade.category.symbol.action.root>) => {\n\t\t\t\tconst action = fromStringToSide(path.action);\n\t\t\t\treturn pipe(\n\t\t\t\t\taction,\n\t\t\t\t\tO.map(data => (\n\t\t\t\t\t\t<div className={css.aside}>\n\t\t\t\t\t\t\t<OrderEntryPanelContainer\n\t\t\t\t\t\t\t\tsymbol={path.symbol}\n\t\t\t\t\t\t\t\tplKind={''}\n\t\t\t\t\t\t\t\taction={data}\n\t\t\t\t\t\t\t\telementId={right(path.categoryId)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)),\n\t\t\t\t\tO.toNullable,\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderInfo = (path: MatchType<typeof routes.trade.category.symbol.info.root>) => (\n\t\t\t\t<div className={css.aside}>\n\t\t\t\t\t<SymbolInfoContainer symbol={path.symbol} categoryId={path.categoryId} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t};\n\t},\n);\n\nconst fromStringToSide = (side: string): Option<OrderEntrySide> => {\n\tswitch (side) {\n\t\tcase 'buy': {\n\t\t\treturn O.some(OrderEntrySide.Buy);\n\t\t}\n\t\tcase 'sell': {\n\t\t\treturn O.some(OrderEntrySide.Sell);\n\t\t}\n\t\tdefault: {\n\t\t\treturn O.none;\n\t\t}\n\t}\n};\n","import { RemoteData, fromOption } from '@devexperts/remote-data-ts';\nimport { WatchlistEntity } from '../../../../store/watchlist/watchlist.store';\nimport * as O from 'fp-ts/lib/Option';\nimport { head } from 'fp-ts/lib/Array';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport const toCategoryId = (categoriesListRD: RemoteData<Error, WatchlistEntity[]>) =>\n\tcategoriesListRD.chain(categoriesList =>\n\t\tfromOption(\n\t\t\tpipe(\n\t\t\t\tcategoriesList,\n\t\t\t\thead,\n\t\t\t\tO.map(category => category.id),\n\t\t\t),\n\t\t\t() => new Error('There is no categories in list'),\n\t\t),\n\t);\n","import { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { WatchlistStore } from '../../../../store/watchlist/watchlist.store';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { TradeDashboard } from '../../components/trade-dashboard/trade-dashboard.component';\nimport { map } from 'rxjs/operators';\nimport { distinctRDString } from '../../../../utils/setoid.utils';\nimport { toCategoryId } from './trade-dashboard.utils';\n\ntype TradeDashboardContainerContext = {\n\twatchlistStore: WatchlistStore;\n};\n\nexport const TradeDashboardContainer = combineContext(\n\tTradeDashboard,\n\task<TradeDashboardContainerContext>(),\n\t(TradeDashboard, e) =>\n\t\twithRXWithDefaults(TradeDashboard)(() => {\n\t\t\tconst { watchlistStore } = e;\n\t\t\tconst firstCategoryId$: LiveData<Error, string> = watchlistStore.private$.pipe(\n\t\t\t\tmap(toCategoryId),\n\t\t\t\tdistinctRDString,\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tprops: {\n\t\t\t\t\tfirstCategoryId: firstCategoryId$,\n\t\t\t\t},\n\t\t\t\tdefaultProps: {\n\t\t\t\t\tfirstCategoryId: pending,\n\t\t\t\t},\n\t\t\t};\n\t\t}),\n);\n","import { ConfigItem, PositionsTableColumnNames } from './position-table.model';\nimport { Column, TableCellAlign } from '../../../../ui-common/table-ava/table.model';\nimport { getWidthFromConfig } from '../../../../ui-common/table-ava/table.utils';\n\nexport const PositionLargeTableConfig: ConfigItem[] = [\n\t{\n\t\twidth: 180,\n\t\tdataKey: 'symbol',\n\t},\n\t{\n\t\twidth: 90,\n\t\tdataKey: 'side',\n\t},\n\t{\n\t\twidth: 90,\n\t\tdataKey: 'size',\n\t},\n\t{\n\t\twidth: 120,\n\t\tdataKey: 'value',\n\t},\n\t{\n\t\twidth: 120,\n\t\tdataKey: 'profitLoss',\n\t},\n\t{\n\t\twidth: 110,\n\t\tdataKey: 'openPrice',\n\t},\n\t{\n\t\twidth: 130,\n\t\tdataKey: 'stopLoss',\n\t},\n\t{\n\t\twidth: 130,\n\t\tdataKey: 'takeProfit',\n\t},\n\t{\n\t\twidth: 180,\n\t\tdataKey: 'controls',\n\t},\n];\n\nexport const PositionSmallTableConfig: ConfigItem[] = [\n\t{\n\t\twidth: 120,\n\t\tdataKey: 'symbol',\n\t},\n\t{\n\t\twidth: 70,\n\t\tdataKey: 'side',\n\t},\n\t{\n\t\twidth: 100,\n\t\tdataKey: 'size',\n\t},\n\t{\n\t\twidth: 129,\n\t\tdataKey: 'value',\n\t},\n\t{\n\t\twidth: 120,\n\t\tdataKey: 'profitLoss',\n\t},\n\t{\n\t\twidth: 85,\n\t\tdataKey: 'openPrice',\n\t},\n\t{\n\t\twidth: 75,\n\t\tdataKey: 'stopLoss',\n\t},\n\t{\n\t\twidth: 75,\n\t\tdataKey: 'takeProfit',\n\t},\n\t{\n\t\twidth: 165,\n\t\tdataKey: 'controls',\n\t},\n];\n\nexport const getColumnsConfig = (config: ConfigItem[], translatedColumnNames: PositionsTableColumnNames): Column[] => [\n\t{\n\t\tlabel: translatedColumnNames.symbol,\n\t\twidth: getWidthFromConfig(config, 'symbol'),\n\t\talign: TableCellAlign.Left,\n\t\tkey: 'symbol',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.side,\n\t\twidth: getWidthFromConfig(config, 'side'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'side',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.size,\n\t\twidth: getWidthFromConfig(config, 'size'),\n\t\talign: TableCellAlign.Right,\n\t\tkey: 'size',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.value,\n\t\twidth: getWidthFromConfig(config, 'value'),\n\t\talign: TableCellAlign.Right,\n\t\tkey: 'value',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.profitLoss,\n\t\twidth: getWidthFromConfig(config, 'profitLoss'),\n\t\talign: TableCellAlign.Right,\n\t\tkey: 'profitLoss',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.openPrice,\n\t\twidth: getWidthFromConfig(config, 'openPrice'),\n\t\talign: TableCellAlign.Right,\n\t\tkey: 'openPrice',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.stopLoss,\n\t\twidth: getWidthFromConfig(config, 'stopLoss'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'stopLoss',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.takeProfit,\n\t\twidth: getWidthFromConfig(config, 'takeProfit'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'takeProfit',\n\t},\n\t{\n\t\tlabel: '',\n\t\twidth: getWidthFromConfig(config, 'controls'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'info-icon',\n\t},\n];\n","import { MarketDataEntity } from '../../store/market-data/market-data.store';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport const getCurrentPrice = (isQuantityPositive: boolean) => (marketData: MarketDataEntity): Option<number> =>\n\tisQuantityPositive\n\t\t? pipe(\n\t\t\t\tmarketData.lastQuote,\n\t\t\t\tO.chain(quote => quote.ask),\n\t\t  )\n\t\t: pipe(\n\t\t\t\tmarketData.lastQuote,\n\t\t\t\tO.chain(quote => quote.bid),\n\t\t  );\n","import { Option } from 'fp-ts/lib/Option';\n\nexport enum PositionSide {\n\tBuy = '* BUY *',\n\tSell = '* SELL *',\n}\n\nexport type HeaderData = { positionCode: Option<string>; symbol: string };\n","import { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { PositionsStore } from '../../store/positions/positions.store';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { combineContext, ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { PositionTO } from '../../api/generated/swagger/definitions/PositionTO';\nimport { MetricsStore } from '../../store/metrics/metrics.store';\nimport { InstrumentStore } from '../../store/instrument/instrument.store';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { fromOption, success } from '@devexperts/remote-data-ts';\nimport { PositionSide } from '../../ui-desktop/positions/components/position-table/position-table.model';\nimport { distinctUntilChanged, map, first } from 'rxjs/operators';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { AccountViewModel } from '../account/account.view-model';\nimport { MarketDataStore } from '../../store/market-data/market-data.store';\nimport { ConversionRateStore } from '../../store/conversion-rate/conversion-rate.store';\nimport { getCurrentPrice } from './position-entity.utils';\nimport { distinctRDOptionNumber, distinctRDString, distinctRDNumber } from '../../utils/setoid.utils';\n\ntype PositionData = {\n\tuid: string;\n\tquantity: number;\n\tside: PositionSide;\n\tsize: Option<number>;\n\topenPrice: Option<number>;\n\tstopLoss: Option<number>;\n\ttakeProfit: Option<number>;\n\tprecision: number;\n};\n\nexport type PositionEntityViewModel = {\n\tposition$: LiveData<Error, PositionTO>;\n\tprofitLoss$: LiveData<Error, Option<number>>;\n\tsymbol$: LiveData<Error, string>;\n\tvalue$: LiveData<Error, Option<number>>;\n\tdata$: LiveData<Error, PositionData>;\n};\n\ntype PositionEntityViewModelContext = {\n\tpositionsStore: PositionsStore;\n\tmetricsStore: MetricsStore;\n\tinstrumentStore: InstrumentStore;\n\tmarketDataStore: MarketDataStore;\n\tconversionRateStore: ConversionRateStore;\n\taccountViewModel: AccountViewModel;\n};\n\ntype CreatePositionEntityViewModel = (uid: string) => PositionEntityViewModel;\n\nexport const createPositionEntityViewModel = combineContext(\n\task<PositionEntityViewModelContext>(),\n\t(context): CreatePositionEntityViewModel => (uid: string) => {\n\t\tconst {\n\t\t\tpositionsStore: { getPositionByUid },\n\t\t\tmetricsStore: { getMetricsByUid },\n\t\t\tmarketDataStore: { getDataBySymbol },\n\t\t\tinstrumentStore: { getBySymbol, getById },\n\t\t\tconversionRateStore: { getRateBySymbol },\n\t\t\taccountViewModel,\n\t\t} = context;\n\n\t\tconst getSymbolByInstrumentId = (instrumentId: number): LiveData<Error, string> =>\n\t\t\tgetById(instrumentId).pipe(mapRD(({ symbol }) => symbol));\n\n\t\tconst position$ = getPositionByUid(uid);\n\n\t\tconst quantity$ = position$.pipe(\n\t\t\tmapRD(({ quantity }) => quantity),\n\t\t\tdistinctRDNumber,\n\t\t);\n\n\t\tconst costBasis$ = position$.pipe(\n\t\t\tmapRD(({ costBasis }) => costBasis),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst stopLoss$ = position$.pipe(\n\t\t\tmapRD(({ stopLoss }) =>\n\t\t\t\tpipe(\n\t\t\t\t\tstopLoss,\n\t\t\t\t\tO.chain(({ fixedPrice }) => fixedPrice),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst takeProfit$ = position$.pipe(\n\t\t\tmapRD(({ takeProfit }) =>\n\t\t\t\tpipe(\n\t\t\t\t\ttakeProfit,\n\t\t\t\t\tO.chain(({ fixedPrice }) => fixedPrice),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst uid$ = position$.pipe(\n\t\t\tmapRD(({ uid }) => uid),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst profitLoss$ = getMetricsByUid(uid).pipe(\n\t\t\tmapRD(({ plOpen }) => plOpen),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst symbol$ = position$.pipe(\n\t\t\tswitchMapRD(({ positionKey: { instrumentId } }) => getSymbolByInstrumentId(instrumentId)),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst baseCurrency$ = accountViewModel.current$.pipe(\n\t\t\tdistinctUntilChanged((a, b) => a.baseCurrency === b.baseCurrency),\n\t\t\tmap(currentAccount => success<Error, string>(currentAccount.baseCurrency)),\n\t\t);\n\n\t\tconst instrumentData$ = symbol$.pipe(switchMapRD(symbol => getBySymbol(symbol)));\n\n\t\tconst currency$ = instrumentData$.pipe(\n\t\t\tmap(instrumentRD =>\n\t\t\t\tinstrumentRD.chain(instrument =>\n\t\t\t\t\tfromOption(instrument.currency, () => new Error('There is no currency in this instrument')),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDString,\n\t\t);\n\n\t\tconst precision$ = instrumentData$.pipe(\n\t\t\tmapRD(({ precision }) => precision),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst conversionRate$ = combineLatestRD(currency$, baseCurrency$).pipe(\n\t\t\tswitchMapRD(([currency, baseCurrency]) => getRateBySymbol(currency, baseCurrency)),\n\t\t);\n\n\t\tconst value$ = combineLatestRD(symbol$, quantity$).pipe(\n\t\t\tswitchMapRD(([symbol, quantity]) =>\n\t\t\t\tcombineLatestRD(getDataBySymbol(symbol), conversionRate$).pipe(\n\t\t\t\t\tmapRD(([marketData, conversionRateData]) => {\n\t\t\t\t\t\tconst { conversionRate } = conversionRateData;\n\t\t\t\t\t\tconst isQuantityPositive = quantity > 0;\n\t\t\t\t\t\treturn pipe(\n\t\t\t\t\t\t\tconversionRate,\n\t\t\t\t\t\t\tO.chain(rate => {\n\t\t\t\t\t\t\t\tconst currentPrice = getCurrentPrice(isQuantityPositive)(marketData);\n\t\t\t\t\t\t\t\treturn pipe(\n\t\t\t\t\t\t\t\t\tcurrentPrice,\n\t\t\t\t\t\t\t\t\tO.chain(price =>\n\t\t\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\t\t\trate.value,\n\t\t\t\t\t\t\t\t\t\t\tO.map(value => Math.abs(quantity * price * value)),\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t);\n\t\t\t\t\t}),\n\t\t\t\t\tdistinctRDOptionNumber,\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\n\t\tconst data$ = combineLatestRD(precision$, quantity$, costBasis$, stopLoss$, takeProfit$, uid$).pipe(\n\t\t\tmapRD(([precision, quantity, costBasis, stopLoss, takeProfit, uid]) => {\n\t\t\t\tconst isQuantityPositive = quantity > 0;\n\t\t\t\tconst side = isQuantityPositive ? PositionSide.Bought : PositionSide.Sold;\n\t\t\t\treturn {\n\t\t\t\t\tuid,\n\t\t\t\t\tquantity,\n\t\t\t\t\tside,\n\t\t\t\t\tsize: O.fromNullable(Math.abs(quantity)),\n\t\t\t\t\topenPrice: O.fromNullable(Math.abs(costBasis)),\n\t\t\t\t\tstopLoss,\n\t\t\t\t\ttakeProfit,\n\t\t\t\t\tprecision,\n\t\t\t\t};\n\t\t\t}),\n\t\t);\n\n\t\treturn {\n\t\t\tposition$,\n\t\t\tprofitLoss$,\n\t\t\tsymbol$,\n\t\t\tvalue$,\n\t\t\tdata$,\n\t\t};\n\t},\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../icon-wrapper/icon-wrapper.component';\n\nexport const DeleteIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 40 40\">\n\t\t\t<path\n\t\t\t\tfill=\"none\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\td=\"M23.7 29.8h-8.2a1.5 1.5 0 0 1-1.5-1.4l-1.3-14.2a.3.3 0 0 1 .3-.3h13.1a.3.3 0 0 1 .4.3l-1.3 14.2a1.5 1.5 0 0 1-1.5 1.4zM13.4 14.5l1.2 13.9a.9.9 0 0 0 .9.8h8.2a.9.9 0 0 0 .8-.8l1.3-13.9z\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\tfill=\"none\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\td=\"M22.8 14.5h-6.4a.3.3 0 0 1-.3-.3v-2a1.3 1.3 0 0 1 1.3-1.2h4.4a1.3 1.3 0 0 1 1.3 1.3v2a.3.3 0 0 1-.3.2zm-6-.6h5.7v-1.6a.6.6 0 0 0-.7-.7h-4.4a.6.6 0 0 0-.7.7zm.1 11.9a.3.3 0 0 1-.3-.3l-.5-7.2a.3.3 0 0 1 .6 0l.5 7.1a.3.3 0 0 1-.3.4zm2.7 0a.3.3 0 0 1-.3-.3v-7.3a.3.3 0 0 1 .6 0v7.3a.3.3 0 0 1-.3.3zm2.7 0a.3.3 0 0 1-.3-.4l.4-7.2a.3.3 0 1 1 .7 0l-.5 7.3a.3.3 0 0 1-.3.3z\"\n\t\t\t/>\n\t\t\t<path fill=\"none\" stroke=\"currentColor\" d=\"M27.7 14.5H11.5a.3.3 0 0 1 0-.6h16.2a.3.3 0 0 1 0 .6z\" />\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../icon-wrapper/icon-wrapper.component';\n\nexport const EditIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg viewBox=\"0 0 40 40\">\n\t\t\t<path\n\t\t\t\tfill=\"none\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\td=\"M16.3 27.9l-6.1 1.7 1.8-6.1 11.8-11.9a2.2 2.2 0 0 1 3 0l1.4 1.4a2.2 2.2 0 0 1 0 3zM26.4 17.8L22 13.4\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../../../../ui-common/icon-wrapper/icon-wrapper.component';\n\nexport const AddIcon = () => (\n\t<IconWrapper>\n\t\t<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n\t\t\t<defs>\n\t\t\t\t<path id=\"addIconA\" d=\"M13 11h7v2h-7v7h-2v-7H4v-2h7V4h2v7z\" />\n\t\t\t</defs>\n\t\t\t<g fill=\"none\" fillRule=\"evenodd\">\n\t\t\t\t<mask id=\"addIconB\" fill=\"#fff\">\n\t\t\t\t\t<use xlinkHref=\"#addIconA\" />\n\t\t\t\t</mask>\n\t\t\t\t<path stroke=\"#FFF\" d=\"M12.5 4.5h-1v7h-7v1h7v7h1v-7h7v-1h-7v-7z\" />\n\t\t\t\t<g fill=\"currentColor\" fillRule=\"nonzero\" mask=\"url(#addIconB)\">\n\t\t\t\t\t<path d=\"M0 0h24v24H0z\" />\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { PureComponent, ReactNode } from 'react';\nimport { formatNumber } from 'accounting';\nimport * as cn from 'classnames';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { findFirst } from 'fp-ts/lib/Array';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { RouteLink } from '../../../../ui-common/route-link/containers/route-link.container';\nimport { routes } from '../../../../ui-common/routes';\nimport { ConfigItem, PositionsTableItem, EditPositionPreset, PositionSide, TableSize } from './position-table.model';\nimport { TableCellAlign } from '../../../../ui-common/table-ava/table.model';\nimport { Optional } from '../../../../ui-common/optional/optional.component';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { InfoIcon } from '../../../../ui-common/icons/info.icon';\nimport { DeleteIcon } from '../../../../ui-common/icons/delete.icon';\nimport { EditIcon } from '../../../../ui-common/icons/edit.icon';\nimport { ListChildComponentProps } from 'react-window';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { AddIcon } from '../../../ui-kit/components/icons/add.icon';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\nimport * as css from './theme/position-table.module.css';\n\nexport type PositionEntityProps = ListChildComponentProps & {\n\trowData: string;\n\tremoteData: RemoteData<Error, PositionsTableItem>;\n\tsymbol: RemoteData<Error, string>;\n\tprofitLoss: RemoteData<Error, Option<number>>;\n\tvalue: RemoteData<Error, Option<number>>;\n\tconfig: ConfigItem[];\n\ttableSize: TableSize;\n} & WithTranslation;\n\nconst defaultColumnWidth = 150;\n\nexport const PositionEntity = combineContext(RouteLink, RouteLink =>\n\twithTranslation()(\n\t\tclass PositionEntity extends PureComponent<PositionEntityProps> {\n\t\t\trender() {\n\t\t\t\tconst { remoteData } = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<RemoteDataState data={remoteData} success={this.renderSuccess} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tprivate renderSuccess = (data: PositionsTableItem): JSX.Element => {\n\t\t\t\tconst { index, style, symbol, profitLoss, value } = this.props;\n\t\t\t\tconst openPrice = pipe(\n\t\t\t\t\tdata.openPrice,\n\t\t\t\t\tO.map(value => formatNumber(value, data.precision)),\n\t\t\t\t);\n\n\t\t\t\treturn (\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={routes.positions.position.root}\n\t\t\t\t\t\tvalue={{ positionId: data.uid }}\n\t\t\t\t\t\trender={({ onNavigate, isActive }) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={cn(css.row, { [css.rowSelected]: isActive })}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\trole=\"row\"\n\t\t\t\t\t\t\t\tstyle={style}\n\t\t\t\t\t\t\t\tonClick={onNavigate}>\n\t\t\t\t\t\t\t\t{this.renderSymbolCell(symbol)}\n\t\t\t\t\t\t\t\t{this.renderSide(data)}\n\t\t\t\t\t\t\t\t{this.renderCell(<Optional value={data.size} />, 'size', TableCellAlign.Right)}\n\t\t\t\t\t\t\t\t{this.renderValueCell(value)}\n\t\t\t\t\t\t\t\t{this.renderProfitLossCell(profitLoss)}\n\t\t\t\t\t\t\t\t{this.renderCell(<Optional value={openPrice} />, 'openPrice', TableCellAlign.Right)}\n\t\t\t\t\t\t\t\t{this.renderStopLossCell(data)}\n\t\t\t\t\t\t\t\t{this.renderTakeProfitCell(data)}\n\t\t\t\t\t\t\t\t{this.renderControls(data)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderCell = (val: ReactNode, type: string, align: TableCellAlign) => {\n\t\t\t\tconst { config, tableSize } = this.props;\n\t\t\t\tconst className = cn(css.rowColumn, {\n\t\t\t\t\t[css.rowColumn_left]: align === TableCellAlign.Left,\n\t\t\t\t\t[css.rowColumn_right]: align === TableCellAlign.Right,\n\t\t\t\t\t[css.rowColumn_center]: align === TableCellAlign.Center,\n\t\t\t\t\t[css.rowColumn_small]: tableSize === TableSize.Small,\n\t\t\t\t});\n\t\t\t\treturn (\n\t\t\t\t\t<div className={className} style={{ flexBasis: this.getWidthFromConfig(config, type) }}>\n\t\t\t\t\t\t{val}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderSymbolCell = (symbol: RemoteData<Error, string>) => {\n\t\t\t\treturn this.renderCell(\n\t\t\t\t\t<RemoteDataState\n\t\t\t\t\t\tdata={symbol}\n\t\t\t\t\t\tsuccess={data => {\n\t\t\t\t\t\t\treturn <span>{data}</span>;\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>,\n\t\t\t\t\t'symbol',\n\t\t\t\t\tTableCellAlign.Left,\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderValueCell = (value: RemoteData<Error, Option<number>>) => {\n\t\t\t\treturn this.renderCell(\n\t\t\t\t\t<RemoteDataState\n\t\t\t\t\t\tdata={value}\n\t\t\t\t\t\tsuccess={val => {\n\t\t\t\t\t\t\tconst value = pipe(\n\t\t\t\t\t\t\t\tval,\n\t\t\t\t\t\t\t\tO.map(val => formatNumber(val, 2)),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn <Optional value={value} />;\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>,\n\t\t\t\t\t'value',\n\t\t\t\t\tTableCellAlign.Right,\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderProfitLossCell = (profitLoss: RemoteData<Error, Option<number>>): ReactNode =>\n\t\t\t\tthis.renderCell(\n\t\t\t\t\t<RemoteDataState\n\t\t\t\t\t\tdata={profitLoss}\n\t\t\t\t\t\tsuccess={val => {\n\t\t\t\t\t\t\tconst value = pipe(\n\t\t\t\t\t\t\t\tval,\n\t\t\t\t\t\t\t\tO.map(pl => <div className={pl > 0 ? css.green : css.red}>{formatNumber(pl, 2)}</div>),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn <Optional value={value} />;\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>,\n\t\t\t\t\t'profitLoss',\n\t\t\t\t\tTableCellAlign.Right,\n\t\t\t\t);\n\n\t\t\tprivate getSide = (props: PositionsTableItem): ReactNode => {\n\t\t\t\tconst { side } = props;\n\t\t\t\tswitch (side) {\n\t\t\t\t\tcase PositionSide.Bought:\n\t\t\t\t\t\treturn <div className={css.green}>{tspan('positionsTableEntityBought', 'Bought')}</div>;\n\t\t\t\t\tcase PositionSide.Sold:\n\t\t\t\t\t\treturn <div className={css.red}>{tspan('positionsTableEntitySold', 'Sold')}</div>;\n\t\t\t\t}\n\t\t\t};\n\t\t\tprivate renderSide = (props: PositionsTableItem): ReactNode => {\n\t\t\t\tconst side = this.getSide(props);\n\t\t\t\treturn this.renderCell(side, 'side', TableCellAlign.Center);\n\t\t\t};\n\n\t\t\tprivate renderStopLossCell = (data: PositionsTableItem) => {\n\t\t\t\tconst { stopLoss, precision } = data;\n\t\t\t\tconst { tableSize } = this.props;\n\t\t\t\tconst value = pipe(\n\t\t\t\t\tstopLoss,\n\t\t\t\t\tO.fold<number, ReactNode>(\n\t\t\t\t\t\t() => this.renderAddProtection(data, EditPositionPreset.StopLoss),\n\t\t\t\t\t\tvalue => (\n\t\t\t\t\t\t\t<span className={tableSize === TableSize.Small ? css.addProtection_small : ''}>\n\t\t\t\t\t\t\t\t{formatNumber(value, precision)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\n\t\t\t\treturn this.renderCell(value, 'stopLoss', TableCellAlign.Center);\n\t\t\t};\n\n\t\t\tprivate renderTakeProfitCell = (data: PositionsTableItem) => {\n\t\t\t\tconst { takeProfit, precision } = data;\n\t\t\t\tconst { tableSize } = this.props;\n\t\t\t\tconst value = pipe(\n\t\t\t\t\ttakeProfit,\n\t\t\t\t\tO.fold<number, ReactNode>(\n\t\t\t\t\t\t() => this.renderAddProtection(data, EditPositionPreset.TakeProfit),\n\t\t\t\t\t\tvalue => (\n\t\t\t\t\t\t\t<span className={tableSize === TableSize.Small ? css.addProtection_small : ''}>\n\t\t\t\t\t\t\t\t{formatNumber(value, precision)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\n\t\t\t\treturn this.renderCell(value, 'takeProfit', TableCellAlign.Center);\n\t\t\t};\n\n\t\t\tprivate renderControls = (data: PositionsTableItem) => {\n\t\t\t\tconst { uid } = data;\n\t\t\t\tconst editingPositionRootSuffix = 'add-protection';\n\n\t\t\t\treturn this.renderCell(\n\t\t\t\t\t<ul className={css.controls}>\n\t\t\t\t\t\t<li className={css.control}>\n\t\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\t\tto={routes.positions.position.info.root}\n\t\t\t\t\t\t\t\tvalue={{ positionId: uid }}\n\t\t\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t\t\t<div className={css.icon} onClick={this.handleClickWithStopPropagation(onNavigate)}>\n\t\t\t\t\t\t\t\t\t\t<InfoIcon />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li className={css.control}>\n\t\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\t\tto={routes.positions.position.edit.profitLossKind.root}\n\t\t\t\t\t\t\t\tvalue={{ positionId: uid, profitLossKind: editingPositionRootSuffix }}\n\t\t\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t\t\t<div className={css.icon} onClick={this.handleClickWithStopPropagation(onNavigate)}>\n\t\t\t\t\t\t\t\t\t\t<EditIcon />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li className={css.control}>\n\t\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\t\tto={routes.positions.position.close.root}\n\t\t\t\t\t\t\t\tvalue={{ positionId: uid }}\n\t\t\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t\t\t<div className={css.icon} onClick={this.handleClickWithStopPropagation(onNavigate)}>\n\t\t\t\t\t\t\t\t\t\t<DeleteIcon />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>,\n\t\t\t\t\t'controls',\n\t\t\t\t\tTableCellAlign.Right,\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate handleClickWithStopPropagation = (onNavigate: () => void) => (\n\t\t\t\te: React.MouseEvent<HTMLDivElement>,\n\t\t\t) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tonNavigate();\n\t\t\t};\n\n\t\t\tprivate renderAddProtection = (data: PositionsTableItem, preset: EditPositionPreset) => {\n\t\t\t\tconst { uid } = data;\n\t\t\t\tconst { tableSize } = this.props;\n\n\t\t\t\tconst routeSuffix = this.getEditingPositionRouteSuffix(preset);\n\n\t\t\t\treturn (\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={routes.positions.position.edit.profitLossKind.root}\n\t\t\t\t\t\tvalue={{ positionId: uid, profitLossKind: routeSuffix }}\n\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={css.addProtection}\n\t\t\t\t\t\t\t\tonClick={this.handleClickWithStopPropagation(onNavigate)}>\n\t\t\t\t\t\t\t\t{tableSize === TableSize.Large ? (\n\t\t\t\t\t\t\t\t\ttspan('positionsTableEntityAddProtection', '+ Add')\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<i className={css.icon_plus}>\n\t\t\t\t\t\t\t\t\t\t<AddIcon />\n\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate getEditingPositionRouteSuffix = (preset: EditPositionPreset) => {\n\t\t\t\tswitch (preset) {\n\t\t\t\t\tcase EditPositionPreset.StopLoss:\n\t\t\t\t\t\treturn 'loss';\n\t\t\t\t\tcase EditPositionPreset.TakeProfit:\n\t\t\t\t\t\treturn 'profit';\n\t\t\t\t\tcase EditPositionPreset.None:\n\t\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tprivate getWidthFromConfig = (config: ConfigItem[], dataKey: string): number => {\n\t\t\t\tconst currentColumn = findFirst(config, item => {\n\t\t\t\t\treturn item['dataKey'] === dataKey;\n\t\t\t\t});\n\n\t\t\t\treturn pipe(\n\t\t\t\t\tcurrentColumn,\n\t\t\t\t\tO.fold(constant(defaultColumnWidth), value => value.width),\n\t\t\t\t);\n\t\t\t};\n\t\t},\n\t),\n);\n","import { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport {\n\tcreatePositionEntityViewModel,\n\tPositionEntityViewModel,\n} from '../../../../view-model/positions/position-entity.view-model';\nimport { PositionEntity } from '../../components/position-table/position-entity.component';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { createSelector } from 'reselect';\n\nexport type PositionEntityContainerContext = {\n\tpositionEntityViewModel: PositionEntityViewModel;\n};\n\nconst Container = combineContext(PositionEntity, ask<PositionEntityContainerContext>(), (PositionEntity, e) =>\n\twithRXWithDefaults(PositionEntity)(() => {\n\t\tconst {\n\t\t\tpositionEntityViewModel: { data$, profitLoss$, symbol$, value$ },\n\t\t} = e;\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tremoteData: data$,\n\t\t\t\tsymbol: symbol$,\n\t\t\t\tprofitLoss: profitLoss$,\n\t\t\t\tvalue: value$,\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tremoteData: pending,\n\t\t\t\tsymbol: pending,\n\t\t\t\tprofitLoss: pending,\n\t\t\t\tvalue: pending,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const PositionEntityContainer = combineContext(\n\tdeferContext(Container, 'positionEntityViewModel'),\n\tcreatePositionEntityViewModel,\n\t(Container, createPositionEntityViewModel) =>\n\t\trunOnMount(Container, props => {\n\t\t\tconst rowData = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.rowData,\n\t\t\t);\n\t\t\treturn createSelector(\n\t\t\t\trowData,\n\t\t\t\trowData => ({\n\t\t\t\t\tpositionEntityViewModel: createPositionEntityViewModel(rowData),\n\t\t\t\t}),\n\t\t\t);\n\t\t}),\n);\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { ListChildComponentProps } from 'react-window';\nimport { AutosizedTable as Table } from '../../../../ui-common/autosized-table-ava/autosized-table.component';\nimport { ConfigItem, PositionsTableColumnNames, TableSize } from './position-table.model';\nimport { getColumnsConfig } from './position-table.utils';\nimport { PositionEntityContainer } from '../../containers/position-table/position-entity.container';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { tspan, TRANSLATION_PLACEHOLDER } from '../../../../utils/i18n.utils';\n\nexport type PositionTableProps = {\n\tpositionsUid: string[];\n\taccountCurrency: string;\n\tconfig: ConfigItem[];\n\ttableSize: TableSize;\n} & WithTranslation;\n\nexport const PositionTable = combineContext(PositionEntityContainer, PositionEntityContainer =>\n\twithTranslation()(\n\t\tclass PositionTable extends PureComponent<PositionTableProps> {\n\t\t\tprivate getTranslatedColumnNames = (): PositionsTableColumnNames => {\n\t\t\t\tconst { accountCurrency } = this.props;\n\n\t\t\t\treturn {\n\t\t\t\t\tsymbol: tspan('positionsTableColumnSymbol', 'Symbol'),\n\t\t\t\t\tside: tspan('positionsTableColumnSide', 'Side'),\n\t\t\t\t\tsize: tspan('positionsTableColumnSize', 'Size'),\n\t\t\t\t\tvalue: tspan(\n\t\t\t\t\t\t'positionsTableColumnValue',\n\t\t\t\t\t\t'Value',\n\t\t\t\t\t\t`${TRANSLATION_PLACEHOLDER}, ${accountCurrency}`,\n\t\t\t\t\t),\n\t\t\t\t\tprofitLoss: tspan(\n\t\t\t\t\t\t'positionsTableColumnProfitLoss',\n\t\t\t\t\t\t'Profit/Loss',\n\t\t\t\t\t\t`${TRANSLATION_PLACEHOLDER}, ${accountCurrency}`,\n\t\t\t\t\t),\n\t\t\t\t\topenPrice: tspan('positionsTableColumnOpenPrice', 'Open Price'),\n\t\t\t\t\tstopLoss: tspan('positionsTableColumnStopLoss', 'Stop Loss'),\n\t\t\t\t\ttakeProfit: tspan('positionsTableColumnTakeProfit', 'Take Profit'),\n\t\t\t\t};\n\t\t\t};\n\n\t\t\trender() {\n\t\t\t\tconst { positionsUid, config } = this.props;\n\n\t\t\t\tconst columnNames = this.getTranslatedColumnNames();\n\n\t\t\t\treturn (\n\t\t\t\t\t<Table\n\t\t\t\t\t\titemCount={positionsUid.length}\n\t\t\t\t\t\titemSize={60}\n\t\t\t\t\t\titemData={positionsUid}\n\t\t\t\t\t\titemKey={this.getItemKey}\n\t\t\t\t\t\tcolumns={getColumnsConfig(config, columnNames)}>\n\t\t\t\t\t\t{this.renderRow}\n\t\t\t\t\t</Table>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tprivate getItemKey = (rowIndex: number, data: string[]) => data[rowIndex];\n\n\t\t\tprivate renderRow = (props: ListChildComponentProps) => (\n\t\t\t\t<PositionEntityContainer\n\t\t\t\t\tconfig={this.props.config}\n\t\t\t\t\ttableSize={this.props.tableSize}\n\t\t\t\t\trowData={props.data[props.index]}\n\t\t\t\t\t{...props}\n\t\t\t\t/>\n\t\t\t);\n\t\t},\n\t),\n);\n","import { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { PositionsStore } from '../../store/positions/positions.store';\nimport { Observable, merge, of, fromEvent, combineLatest } from 'rxjs';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { InstrumentStore } from '../../store/instrument/instrument.store';\nimport { Router } from '../../utils/router.utils';\nimport { map, switchMap, mapTo, startWith } from 'rxjs/operators';\nimport { TableSize, ConfigItem } from '../../ui-desktop/positions/components/position-table/position-table.model';\nimport {\n\tPositionLargeTableConfig,\n\tPositionSmallTableConfig,\n} from '../../ui-desktop/positions/components/position-table/position-table.utils';\nimport { shareReplayWithDefaults } from '../../utils/rxjs/shareReplayWithDefaults';\n\nexport type PositionViewModel = {\n\tpositionsUid$: Observable<string[]>;\n\ttableSize$: Observable<TableSize>;\n\ttableSizeConfig$: Observable<ConfigItem[]>;\n\tgetSymbolByInstrumentId: (instrumentId: number) => LiveData<Error, string>;\n};\n\ntype PositionViewModelContext = {\n\tinstrumentStore: InstrumentStore;\n\tpositionsStore: PositionsStore;\n\trouter: Router;\n};\n\ntype CreatePositionViewModel = Sink<() => PositionViewModel>;\n\nexport const createPositionViewModel = combineContext(\n\task<PositionViewModelContext>(),\n\t(e): CreatePositionViewModel => {\n\t\tconst { positionsStore, instrumentStore, router } = e;\n\n\t\tconst getSymbolByInstrumentId = (instrumentId: number): LiveData<Error, string> =>\n\t\t\tinstrumentStore.getById(instrumentId).pipe(mapRD(instrument => instrument.symbol));\n\n\t\tconst positionsUid$ = positionsStore.keys$;\n\n\t\tconst routeState$ = merge(of(router.state), router.state$);\n\t\tconst windowResize$ = fromEvent<Event>(window, 'resize').pipe(\n\t\t\tmapTo(undefined),\n\t\t\tstartWith(undefined),\n\t\t);\n\t\tconst tableSize$: Observable<TableSize> = combineLatest(routeState$, windowResize$).pipe(\n\t\t\tmap(([routerState]) => routerState),\n\t\t\tmap(({ location: { pathname } }) => {\n\t\t\t\tconst isContainsClose = pathname.includes('close');\n\t\t\t\tconst isContainsEdit = pathname.includes('edit');\n\t\t\t\tconst isContainsInfo = pathname.includes('info');\n\t\t\t\tconst isSmallWindow = window.innerWidth <= 1280;\n\n\t\t\t\treturn isSmallWindow && (isContainsClose || isContainsEdit || isContainsInfo)\n\t\t\t\t\t? TableSize.Small\n\t\t\t\t\t: TableSize.Large;\n\t\t\t}),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst tableSizeConfig$: Observable<ConfigItem[]> = tableSize$.pipe(\n\t\t\tswitchMap(tableSize =>\n\t\t\t\tof(tableSize === TableSize.Large ? PositionLargeTableConfig : PositionSmallTableConfig),\n\t\t\t),\n\t\t);\n\n\t\treturn new Sink(() => ({\n\t\t\tpositionsUid$,\n\t\t\ttableSize$,\n\t\t\ttableSizeConfig$,\n\t\t\tgetSymbolByInstrumentId,\n\t\t}));\n\t},\n);\n","import { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { empty } from 'fp-ts/lib/Array';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { InstrumentStore } from '../../../../store/instrument/instrument.store';\nimport { PositionLargeTableConfig } from '../../components/position-table/position-table.utils';\nimport { PositionTable } from '../../components/position-table/position-table.component';\nimport { createPositionViewModel, PositionViewModel } from '../../../../view-model/positions/positions.view-model';\nimport { AccountViewModel } from '../../../../view-model/account/account.view-model';\nimport { first, map } from 'rxjs/operators';\nimport { currencyStringToSymbol } from '../../../../utils/currency.utils';\nimport { TableSize } from '../../components/position-table/position-table.model';\n\nexport type PositionContainerContext = {\n\tpositionViewModel: PositionViewModel;\n\tinstrumentStore: InstrumentStore;\n\taccountViewModel: AccountViewModel;\n};\n\nconst Container = combineContext(PositionTable, ask<PositionContainerContext>(), (PositionTable, e) =>\n\twithRXWithDefaults(PositionTable)(() => {\n\t\tconst {\n\t\t\tpositionViewModel: { positionsUid$, tableSize$, tableSizeConfig$ },\n\t\t\taccountViewModel: { current$ },\n\t\t} = e;\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tpositionsUid: positionsUid$,\n\t\t\t\taccountCurrency: current$.pipe(\n\t\t\t\t\tfirst(),\n\t\t\t\t\tmap(value => currencyStringToSymbol(value.baseCurrency)),\n\t\t\t\t),\n\t\t\t\tconfig: tableSizeConfig$,\n\t\t\t\ttableSize: tableSize$,\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tpositionsUid: empty,\n\t\t\t\taccountCurrency: '',\n\t\t\t\tconfig: PositionLargeTableConfig,\n\t\t\t\ttableSize: TableSize.Large,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const PositionContainer = combineContext(\n\tdeferContext(Container, 'positionViewModel'),\n\tcreatePositionViewModel,\n\t(Container, createPositionViewModel) =>\n\t\trunOnMount(Container, () => () => ({\n\t\t\tpositionViewModel: createPositionViewModel(),\n\t\t})),\n);\n","import { combineLatest } from 'rxjs';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { filter, first, map, switchMap, tap, withLatestFrom, distinctUntilChanged } from 'rxjs/operators';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { LiveData, LiveDataOption } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { PositionsStore } from '../../store/positions/positions.store';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { merge } from 'rxjs/internal/observable/merge';\nimport { isSuccess, success, RemoteData } from '@devexperts/remote-data-ts';\nimport { PositionCloseInstrumentData, PositionCloseValue } from '../../model/positions/position-close.model';\nimport { AccountViewModel } from '../account/account.view-model';\nimport { InstrumentStore } from '../../store/instrument/instrument.store';\nimport { OrderStore } from '../../store/order/order.store';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { MarketDataStore } from '../../store/market-data/market-data.store';\nimport { href, Router } from '../../utils/router.utils';\nimport { MetricsStore } from '../../store/metrics/metrics.store';\nimport { LimitsStore } from '../../store/limits/limits.store';\nimport { distinctRDOptionNumber, distinctRDNumber } from '../../utils/setoid.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { empty } from 'fp-ts/lib/Record';\nimport { PositionTO } from '../../api/generated/swagger/definitions/PositionTO';\nimport { findFirst } from 'fp-ts/lib/Array';\nimport { sequenceTOption } from '../../utils/option.utils';\nimport { routes } from '../../ui-common/routes';\n\nexport type PositionCloseViewModel = {\n\tvalue$: LiveData<Error, PositionCloseValue>;\n\tinstrumentData$: LiveData<Error, PositionCloseInstrumentData>;\n\tprofit$: LiveDataOption<Error, number>;\n\tisReadyToClose$: Observable<boolean>;\n\tonAmountChange: (amount: number) => void;\n\tonSend: () => void;\n\terror$: Observable<Option<Error>>;\n};\n\ntype PositionCloseViewModelContext = {\n\tpositionsStore: PositionsStore;\n\tmetricsStore: MetricsStore;\n\taccountViewModel: AccountViewModel;\n\tinstrumentStore: InstrumentStore;\n\tlimitsStore: LimitsStore;\n\torderStore: OrderStore;\n\tmarketDataStore: MarketDataStore;\n\trouter: Router;\n};\n\ntype CreatePositionCloseViewModel = (uid: string) => Sink<PositionCloseViewModel>;\n\nexport const createPositionCloseViewModel = combineContext(\n\task<PositionCloseViewModelContext>(),\n\t(e): CreatePositionCloseViewModel => uid => {\n\t\tconst {\n\t\t\tpositionsStore: { getPositionByUid, sendCloseRequest, error$, closedPositions$ },\n\t\t\tmetricsStore: { getMetricsByUid },\n\t\t\taccountViewModel,\n\t\t\tinstrumentStore: { getById },\n\t\t\tlimitsStore: { getLimitsByInstrumentId },\n\t\t\tmarketDataStore: { getDataBySymbol },\n\t\t\trouter: { push },\n\t\t} = e;\n\n\t\tconst value = createHandler<number>();\n\t\tconst send = createHandler<void>();\n\n\t\tconst positionEntityData$ = getPositionByUid(uid);\n\n\t\tconst plOpen$ = getMetricsByUid(uid).pipe(\n\t\t\tmapRD(metrics => metrics.plOpen),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst instrumentData$ = positionEntityData$.pipe(\n\t\t\tswitchMapRD(({ positionKey: { instrumentId } }) => getById(instrumentId)),\n\t\t\tmapRD(instrument => ({\n\t\t\t\tsymbol: instrument.symbol,\n\t\t\t\tsymbolDescription: instrument.description,\n\t\t\t\tlotSize: instrument.lotSize,\n\t\t\t\tquantityIncrement: instrument.quantityIncrement,\n\t\t\t\tprecision: instrument.precision,\n\t\t\t})),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst limitsMinOrderIncrement$ = positionEntityData$.pipe(\n\t\t\tswitchMapRD(({ positionKey: { instrumentId } }) => getLimitsByInstrumentId(instrumentId)),\n\t\t\tmapRD(limits => limits.minOrderIncrement),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst symbolData$ = instrumentData$.pipe(switchMapRD(({ symbol }) => getDataBySymbol(symbol)));\n\n\t\tconst ask$ = symbolData$.pipe(\n\t\t\tmapRD(({ lastQuote }) =>\n\t\t\t\tpipe(\n\t\t\t\t\tlastQuote,\n\t\t\t\t\tO.chain(({ ask }) => ask),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst bid$ = symbolData$.pipe(\n\t\t\tmapRD(({ lastQuote }) =>\n\t\t\t\tpipe(\n\t\t\t\t\tlastQuote,\n\t\t\t\t\tO.chain(({ bid }) => bid),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst quote$ = combineLatestRD(ask$, bid$).pipe(\n\t\t\tmapRD(([ask, bid]) => ({\n\t\t\t\task,\n\t\t\t\tbid,\n\t\t\t})),\n\t\t\tfilter(isSuccess),\n\t\t\tmap(quote => quote.value),\n\t\t);\n\n\t\tconst positionQuantityRD$ = positionEntityData$.pipe(\n\t\t\tmapRD(({ quantity }) => quantity),\n\t\t\t// position amount may vary, but decided to left \"as-is\"\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst positionQuantity$ = positionQuantityRD$.pipe(\n\t\t\tfilter(isSuccess),\n\t\t\tmap(data => data.value),\n\t\t);\n\n\t\tconst amount$ = merge(positionQuantity$, value.value$);\n\n\t\tconst amountData$ = amount$.pipe(\n\t\t\tmap(value => success<Error, number>(Math.abs(value))),\n\t\t\tdistinctRDNumber,\n\t\t);\n\n\t\tconst step$ = combineLatestRD(instrumentData$, limitsMinOrderIncrement$).pipe(\n\t\t\tmapRD(([instrument, minOrderIncrement]) => minOrderIncrement * instrument.lotSize),\n\t\t);\n\n\t\tconst amountPrecision$ = step$.pipe(\n\t\t\tmapRD(step => {\n\t\t\t\tconst stepString = step.toString();\n\t\t\t\treturn step < 1 ? stepString.slice(stepString.indexOf('.') + 1).length : 0;\n\t\t\t}),\n\t\t);\n\n\t\tconst lotsPrecision$ = limitsMinOrderIncrement$.pipe(\n\t\t\tmapRD(limitsMinOrderIncrement => {\n\t\t\t\tconst limitsMinOrderIncrementString = String(limitsMinOrderIncrement);\n\t\t\t\treturn limitsMinOrderIncrementString.slice(limitsMinOrderIncrementString.indexOf('.') + 1).length;\n\t\t\t}),\n\t\t);\n\n\t\tconst value$ = combineLatestRD(\n\t\t\tpositionQuantityRD$,\n\t\t\tinstrumentData$,\n\t\t\tamountData$,\n\t\t\tstep$,\n\t\t\tamountPrecision$,\n\t\t\tlotsPrecision$,\n\t\t).pipe(\n\t\t\tmapRD(([quantity, { lotSize }, amount, step, precision, lotsPrecision]) => ({\n\t\t\t\tinitAmount: Math.abs(quantity),\n\t\t\t\tamount,\n\t\t\t\tlot: amount / lotSize,\n\t\t\t\tstep,\n\t\t\t\tprecision,\n\t\t\t\tlotsPrecision,\n\t\t\t})),\n\t\t);\n\n\t\tconst accountId$ = accountViewModel.current$.pipe(map(current => current.id));\n\t\tconst instrumentId$ = positionEntityData$.pipe(\n\t\t\tmapRD(({ positionKey: { instrumentId } }) => instrumentId),\n\t\t\tfilter(isSuccess),\n\t\t\tmap(instrument => instrument.value),\n\t\t);\n\n\t\tconst positionKey$ = positionEntityData$.pipe(\n\t\t\tmapRD(({ positionKey }) => positionKey),\n\t\t\tfilter(isSuccess),\n\t\t\tmap(instrument => instrument.value),\n\t\t);\n\n\t\tconst sendPrerequisites$ = combineLatest(\n\t\t\tinstrumentId$,\n\t\t\tamount$,\n\t\t\taccountId$,\n\t\t\tpositionKey$,\n\t\t\tquote$,\n\t\t\tpositionQuantity$,\n\t\t);\n\n\t\tconst sendEffect$ = send.value$.pipe(\n\t\t\twithLatestFrom(sendPrerequisites$),\n\t\t\tswitchMap(([_, [instrumentId, amount, accountId, positionKey, quote, positionQuantity]]) =>\n\t\t\t\tmerge(\n\t\t\t\t\tsendCloseRequest(accountId, instrumentId, amount, positionKey, quote, positionQuantity),\n\t\t\t\t\tclosedPositions$.pipe(\n\t\t\t\t\t\ttap((positions: RemoteData<Error, PositionTO[]>) => {\n\t\t\t\t\t\t\tif (positions.isSuccess()) {\n\t\t\t\t\t\t\t\tconst position = findFirst(positions.value, item =>\n\t\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\t\tsequenceTOption(item.positionKey.positionCode, positionKey.positionCode),\n\t\t\t\t\t\t\t\t\t\tO.exists(\n\t\t\t\t\t\t\t\t\t\t\t([itemPositionCode, positionCode]) => itemPositionCode === positionCode,\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif (O.isSome(position)) {\n\t\t\t\t\t\t\t\t\tpush(href(routes.positions.root, empty));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\n\t\tconst isReadyToClose$ = combineLatest(sendPrerequisites$, value$, plOpen$, instrumentData$).pipe(\n\t\t\t// allow closing position only if all data is fetched and resolved\n\t\t\tmap(\n\t\t\t\t([_, value, plOpen, instrumentData]) =>\n\t\t\t\t\tvalue.isSuccess() && plOpen.isSuccess() && instrumentData.isSuccess(),\n\t\t\t),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\n\t\treturn new Sink<PositionCloseViewModel>(\n\t\t\t{\n\t\t\t\tvalue$,\n\t\t\t\tprofit$: plOpen$,\n\t\t\t\tinstrumentData$: instrumentData$.pipe(\n\t\t\t\t\tmapRD(({ symbol, symbolDescription }) => ({ symbol, symbolDescription })),\n\t\t\t\t),\n\t\t\t\tisReadyToClose$,\n\t\t\t\tonAmountChange: value.handle,\n\t\t\t\tonSend: () => send.handle(undefined),\n\t\t\t\terror$,\n\t\t\t},\n\t\t\tsendEffect$,\n\t\t);\n\t},\n);\n","import * as React from 'react';\nimport { PureComponent, Fragment } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { formatNumber } from 'accounting';\nimport * as cn from 'classnames';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { routes } from '../../../../ui-common/routes';\nimport { SidePanel } from '../../../../ui-common/side-panel/side-panel.component';\nimport { Optional } from '../../../../ui-common/optional/optional.component';\nimport { RouteLink } from '../../../../ui-common/route-link/containers/route-link.container';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { NumericStepper } from '../../../../ui-common/numeric-stepper-ava/numeric-stepper.component';\nimport { Button } from '../../../../ui-common/button/button.component';\nimport { CloseButton } from '../../../../ui-common/close-button/close-button.component';\nimport { SymbolComponent } from '../../../../ui-common/symbol/symbol';\nimport { PositionCloseValue, PositionCloseInstrumentData } from './position-close.model';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constFalse, constant } from 'fp-ts/lib/function';\nimport { ErrorPanel } from '../../../../ui-common/error-panel/components/error-panel.component';\n\nimport * as buttonCss from './theme/button.child.module.css';\nimport * as symbolCss from './theme/symbol.child.module.css';\nimport * as stepperCss from './theme/numeric-stepper.child.module.css';\nimport * as stepperButtonCss from './theme/numeric-stepper.button.module.css';\nimport * as css from './theme/position-close.module.css';\n\nconst steppableTheme = {\n\tInput: stepperCss,\n\tSteppableInput: {\n\t\tButtonIcon: stepperButtonCss,\n\t},\n};\n\nexport type PositionCloseProps = {\n\tuid: string;\n\tvalue: RemoteData<Error, PositionCloseValue>;\n\taccountCurrency: string;\n\tinstrumentData: RemoteData<Error, PositionCloseInstrumentData>;\n\tprofitLossValue: RemoteData<Error, Option<number>>;\n\tisClosingPositionAllowed: boolean;\n\tonAmountChange: (amount: number) => void;\n\tonPositionClose: () => void;\n\terror: Option<string>;\n};\n\nexport const PositionClose = combineContext(RouteLink, RouteLink =>\n\twithTranslation()(\n\t\tclass PositionClose extends PureComponent<PositionCloseProps & WithTranslation> {\n\t\t\trender() {\n\t\t\t\tconst { profitLossValue, value, instrumentData } = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<SidePanel header={this.renderHeader()} footer={this.renderFooter()} scrollable>\n\t\t\t\t\t\t<RemoteDataState data={instrumentData} success={this.renderSuccessfulInstrumentData} />\n\t\t\t\t\t\t<div className={css.profit}>\n\t\t\t\t\t\t\t<h2 className={css.profitLabel}>{tspan('positionCloseProfit', 'Profit')}</h2>\n\t\t\t\t\t\t\t<RemoteDataState data={profitLossValue} success={this.renderSuccessfulProfitLoss} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<RemoteDataState data={value} success={this.renderControls} />\n\t\t\t\t\t</SidePanel>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tprivate renderHeader = () => (\n\t\t\t\t<div className={css.header}>\n\t\t\t\t\t<h1 className={css.headerLabel}>{tspan('positionCloseClosingPosition', 'Closing Position')}</h1>\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={routes.positions.position.root}\n\t\t\t\t\t\tvalue={{ positionId: this.props.uid }}\n\t\t\t\t\t\trender={({ onNavigate }) => <CloseButton onClick={onNavigate} />}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\tprivate renderFooter = () => {\n\t\t\t\tconst { isClosingPositionAllowed, error } = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<ErrorPanel\n\t\t\t\t\t\t\terror={error}\n\t\t\t\t\t\t\ttitle={tspan('positionCloseErrorClosePosition', 'Error Closing Position')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisDisabled={!isClosingPositionAllowed}\n\t\t\t\t\t\t\tisPrimary={true}\n\t\t\t\t\t\t\ttheme={buttonCss}\n\t\t\t\t\t\t\tonClick={this.handlePositionClose}>\n\t\t\t\t\t\t\t{tspan('positionCloseClosePosition', 'Close Position')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderSuccessfulInstrumentData = (instrumentData: PositionCloseInstrumentData) => {\n\t\t\t\tconst { symbol, symbolDescription } = instrumentData;\n\n\t\t\t\treturn (\n\t\t\t\t\t<SymbolComponent\n\t\t\t\t\t\ttitle={symbol}\n\t\t\t\t\t\tsubtitle={pipe(\n\t\t\t\t\t\t\tsymbolDescription,\n\t\t\t\t\t\t\tO.getOrElse(constant('')),\n\t\t\t\t\t\t)}\n\t\t\t\t\t\ttheme={symbolCss}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderSuccessfulProfitLoss = (profit: Option<number>) => {\n\t\t\t\tconst profitValueClassName = cn(css.profitValue, {\n\t\t\t\t\t[css.profitValue_positive]: pipe(\n\t\t\t\t\t\tprofit,\n\t\t\t\t\t\tO.fold(constFalse, profit => profit > 0),\n\t\t\t\t\t),\n\t\t\t\t\t[css.profitValue_negative]: pipe(\n\t\t\t\t\t\tprofit,\n\t\t\t\t\t\tO.fold(constFalse, profit => profit < 0),\n\t\t\t\t\t),\n\t\t\t\t});\n\n\t\t\t\treturn (\n\t\t\t\t\t<span className={profitValueClassName}>\n\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\tprofit,\n\t\t\t\t\t\t\t\tO.map(profit => `${formatNumber(profit, 2)} ${this.props.accountCurrency}`),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderControls = (value: PositionCloseValue) => {\n\t\t\t\tconst { initAmount, amount, lot, step, precision, lotsPrecision } = value;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div className={css.columns}>\n\t\t\t\t\t\t<div className={css.amount}>\n\t\t\t\t\t\t\t<div className={css.amountHeader}>\n\t\t\t\t\t\t\t\t<h2 className={css.amountLabel}>{tspan('positionCloseAmount', 'Amount')}</h2>\n\t\t\t\t\t\t\t\t<div className={css.amountQuantity}>\n\t\t\t\t\t\t\t\t\t<span>{`${value.amount} of ${value.initAmount}`}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<NumericStepper\n\t\t\t\t\t\t\t\tvalue={amount}\n\t\t\t\t\t\t\t\tmin={lot}\n\t\t\t\t\t\t\t\tstep={step}\n\t\t\t\t\t\t\t\tmax={initAmount}\n\t\t\t\t\t\t\t\tformatter={(inputValue: number) => formatNumber(inputValue, precision)}\n\t\t\t\t\t\t\t\tonIncrement={this.handleValueChange}\n\t\t\t\t\t\t\t\tonDecrement={this.handleValueChange}\n\t\t\t\t\t\t\t\tonValueChange={this.handleValueChange}\n\t\t\t\t\t\t\t\ttheme={steppableTheme}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={css.lot}>\n\t\t\t\t\t\t\t<h2 className={css.lotLabel}>{tspan('positionCloseLot', 'Lot')}</h2>\n\t\t\t\t\t\t\t<div className={css.lotValue}>{formatNumber(lot, lotsPrecision)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate handleValueChange = (amount: number) => {\n\t\t\t\tthis.props.onAmountChange(amount);\n\t\t\t};\n\n\t\t\tprivate handlePositionClose = () => {\n\t\t\t\tthis.props.onPositionClose();\n\t\t\t};\n\t\t},\n\t),\n);\n","import { pending } from '@devexperts/remote-data-ts';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport {\n\tPositionCloseViewModel,\n\tcreatePositionCloseViewModel,\n} from '../../../../view-model/positions/position-close.view-model';\nimport { PositionClose } from '../../components/position-close/position-close.component';\nimport { createSelector } from 'reselect';\nimport { AccountViewModel } from '../../../../view-model/account/account.view-model';\nimport { first, map } from 'rxjs/operators';\nimport { currencyStringToSymbol } from '../../../../utils/currency.utils';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type PositionCloseContainerContext = {\n\tpositionCloseViewModel: PositionCloseViewModel;\n\taccountViewModel: AccountViewModel;\n};\n\nexport const Container = combineContext(PositionClose, ask<PositionCloseContainerContext>(), (PositionClose, e) =>\n\twithRXWithDefaults(PositionClose)(() => {\n\t\tconst {\n\t\t\tpositionCloseViewModel: {\n\t\t\t\tvalue$,\n\t\t\t\tprofit$,\n\t\t\t\tinstrumentData$,\n\t\t\t\tisReadyToClose$,\n\t\t\t\tonAmountChange,\n\t\t\t\tonSend,\n\t\t\t\terror$,\n\t\t\t},\n\t\t\taccountViewModel: { current$ },\n\t\t} = e;\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tvalue: value$,\n\t\t\t\taccountCurrency: current$.pipe(\n\t\t\t\t\tfirst(),\n\t\t\t\t\tmap(value => currencyStringToSymbol(value.baseCurrency)),\n\t\t\t\t),\n\t\t\t\tinstrumentData: instrumentData$,\n\t\t\t\tprofitLossValue: profit$,\n\t\t\t\tisClosingPositionAllowed: isReadyToClose$,\n\t\t\t\terror: error$.pipe(\n\t\t\t\t\tmap(error =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\tO.map(error => error.message),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tvalue: pending,\n\t\t\t\taccountCurrency: '',\n\t\t\t\tinstrumentData: pending,\n\t\t\t\tprofitLossValue: pending,\n\t\t\t\tisClosingPositionAllowed: false,\n\t\t\t\tonAmountChange: value => onAmountChange(value),\n\t\t\t\tonPositionClose: onSend,\n\t\t\t\terror: O.none,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const PositionCloseContainer = combineContext(\n\tdeferContext(Container, 'positionCloseViewModel'),\n\tcreatePositionCloseViewModel,\n\t(Container, createPositionCloseViewModel) =>\n\t\trunOnMount(Container, props => {\n\t\t\tconst uid = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.uid,\n\t\t\t);\n\t\t\treturn createSelector(\n\t\t\t\tuid,\n\t\t\t\tuid =>\n\t\t\t\t\tcreatePositionCloseViewModel(uid).map(positionCloseViewModel => ({\n\t\t\t\t\t\tpositionCloseViewModel,\n\t\t\t\t\t})),\n\t\t\t);\n\t\t}),\n);\n","import * as React from 'react';\nimport * as cn from 'classnames';\nimport { memo, useMemo } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { TRANSLATION_PLACEHOLDER, tspan } from '../../utils/i18n.utils';\nimport { SymbolComponent, SymbolProps } from '../symbol/symbol';\nimport { EditingPositionData, EditingPositionTakeProfitStopLossData } from './editing-position.model';\nimport { Optional } from '../optional/optional.component';\nimport { MakeTheme } from '../../utils/theme.utils';\nimport { formatNumber, formatMoney } from 'accounting';\nimport {\n\tTakeProfitStopLossComponent,\n\tTakeProfitStopLossComponentProps,\n} from '../takeprofit-stoploss-panel/takeprofit-stoploss-panel.component';\nimport {\n\tTakeProfitStopLossComponentData,\n\tProfitLossKind,\n} from '../takeprofit-stoploss-panel/takeprofit-stoploss-panel.model';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\nimport * as css from './theme/editing-position.module.css';\n\nexport type EditingPositionProps = {\n\tdata: Option<EditingPositionData>;\n\tunitName: Option<string>;\n\tamount: Option<number>;\n\tvalue: Option<number>;\n\tamountPrecision: number;\n\tcurrencySymbol: string;\n\tprofitLoss: Option<number>;\n\tisShownValidErrors: boolean;\n\tonValueChange: (data: EditingPositionTakeProfitStopLossData) => void;\n\ttheme: MakeTheme<\n\t\t| 'symbol_container'\n\t\t| 'symbol_title'\n\t\t| 'symbol_subtitle'\n\t\t| 'profitAmount'\n\t\t| 'profitAmount_positive'\n\t\t| 'profitAmount_negative'\n\t\t| 'info'\n\t\t| 'element'\n\t\t| 'element_label'\n\t\t| 'element_text'\n\t\t| 'profitWrapper'\n\t\t| 'profitLabel'\n\t\t| 'takeProfitStopLossWrapper'\n\t\t| 'divider'\n\t\t| 'verticalSpacer'\n\t> & {\n\t\tSymbolComponent?: SymbolProps['theme'];\n\t\tTakeProfitStopLoss?: TakeProfitStopLossComponentProps['theme'];\n\t};\n};\n\nconst EditingPositionRaw = memo((props: EditingPositionProps & WithTranslation) => {\n\tconst {\n\t\tdata,\n\t\tunitName,\n\t\tamount,\n\t\tamountPrecision,\n\t\tvalue,\n\t\tcurrencySymbol,\n\t\tprofitLoss,\n\t\tisShownValidErrors,\n\t\ttheme,\n\t} = props;\n\n\tconst { symbol, description } = useMemo(\n\t\t() =>\n\t\t\tpipe(\n\t\t\t\tdata,\n\t\t\t\tO.fold(constant({ symbol: '', description: O.none }), ({ symbol, description }) => ({\n\t\t\t\t\tsymbol,\n\t\t\t\t\tdescription,\n\t\t\t\t})),\n\t\t\t),\n\t\t[data],\n\t);\n\n\tconst profitAmountClassName = useMemo(\n\t\t() =>\n\t\t\tcn(theme.profitAmount, {\n\t\t\t\t[theme.profitAmount_positive as string]: pipe(\n\t\t\t\t\tprofitLoss,\n\t\t\t\t\tO.exists(pl => pl > 0),\n\t\t\t\t),\n\t\t\t\t[theme.profitAmount_negative as string]: pipe(\n\t\t\t\t\tprofitLoss,\n\t\t\t\t\tO.exists(pl => pl < 0),\n\t\t\t\t),\n\t\t\t}),\n\t\t[profitLoss],\n\t);\n\n\tconst handleValueChange = React.useCallback(\n\t\t(data: EditingPositionTakeProfitStopLossData) => (changedValue: TakeProfitStopLossComponentData) => {\n\t\t\tconst { takeProfitData, stopLossData } = data;\n\t\t\tconst { onValueChange } = props;\n\n\t\t\tswitch (changedValue.kind) {\n\t\t\t\tcase ProfitLossKind.Profit:\n\t\t\t\t\tonValueChange({\n\t\t\t\t\t\ttakeProfitData: changedValue,\n\t\t\t\t\t\tstopLossData,\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase ProfitLossKind.Loss:\n\t\t\t\t\tonValueChange({\n\t\t\t\t\t\ttakeProfitData,\n\t\t\t\t\t\tstopLossData: changedValue,\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t[props.onValueChange],\n\t);\n\n\treturn (\n\t\t<div>\n\t\t\t<SymbolComponent\n\t\t\t\ttitle={symbol}\n\t\t\t\tsubtitle={pipe(\n\t\t\t\t\tdescription,\n\t\t\t\t\tO.getOrElse(constant('')),\n\t\t\t\t)}\n\t\t\t\ttheme={theme.SymbolComponent}\n\t\t\t/>\n\t\t\t<div className={theme.info}>\n\t\t\t\t<div className={theme.element}>\n\t\t\t\t\t<div className={theme.element_label}>\n\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\tunitName,\n\t\t\t\t\t\t\tO.map(name =>\n\t\t\t\t\t\t\t\ttspan('editingPositionAmount', 'Amount', `${TRANSLATION_PLACEHOLDER}, ${name}`),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={theme.element_text}>\n\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\tamount,\n\t\t\t\t\t\t\t\tO.map(amount => formatNumber(amount, amountPrecision)),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={theme.element}>\n\t\t\t\t\t<div className={theme.element_label}>{tspan('editingPositionLot', 'Lot')}</div>\n\t\t\t\t\t<div className={theme.element_text}>\n\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t\tO.map(data => formatNumber(data.lot, data.lotsPrecision)),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={theme.element}>\n\t\t\t\t\t<div className={theme.element_label}>\n\t\t\t\t\t\t{tspan(\n\t\t\t\t\t\t\t'editingPositionMarginImpact',\n\t\t\t\t\t\t\t'Margin Impact',\n\t\t\t\t\t\t\t`${TRANSLATION_PLACEHOLDER}, ${currencySymbol}`,\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={theme.element_text}>\n\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t\tO.map(data =>\n\t\t\t\t\t\t\t\t\tformatMoney(data.marginImpact, {\n\t\t\t\t\t\t\t\t\t\tformat: '%v',\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={theme.element}>\n\t\t\t\t\t<div className={theme.element_label}>\n\t\t\t\t\t\t{tspan('editingPositionValue', 'Value', `${TRANSLATION_PLACEHOLDER}, ${currencySymbol}`)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={theme.element_text}>\n\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\tO.map(value => formatMoney(value, { format: '%v' })),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={theme.profitWrapper}>\n\t\t\t\t\t<span className={theme.profitLabel}>{tspan('editingPositionProfit', 'Profit')}</span>\n\t\t\t\t\t<span className={profitAmountClassName}>\n\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\tprofitLoss,\n\t\t\t\t\t\t\t\tO.map(profit =>\n\t\t\t\t\t\t\t\t\tformatMoney(profit, {\n\t\t\t\t\t\t\t\t\t\tsymbol: currencySymbol,\n\t\t\t\t\t\t\t\t\t\tformat: '%v%s',\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{pipe(\n\t\t\t\tdata,\n\t\t\t\tO.map(data => {\n\t\t\t\t\tconst { takeProfitData, stopLossData } = data;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<div className={theme.divider} />\n\t\t\t\t\t\t\t<div className={theme.takeProfitStopLossWrapper}>\n\t\t\t\t\t\t\t\t<TakeProfitStopLossComponent\n\t\t\t\t\t\t\t\t\tonValueChange={handleValueChange({\n\t\t\t\t\t\t\t\t\t\ttakeProfitData,\n\t\t\t\t\t\t\t\t\t\tstopLossData,\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tdata={takeProfitData}\n\t\t\t\t\t\t\t\t\tisShownValidErrors={isShownValidErrors}\n\t\t\t\t\t\t\t\t\tcurrencySymbol={currencySymbol}\n\t\t\t\t\t\t\t\t\ttheme={theme.TakeProfitStopLoss}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={theme.divider} />\n\t\t\t\t\t\t\t<div className={theme.takeProfitStopLossWrapper}>\n\t\t\t\t\t\t\t\t<TakeProfitStopLossComponent\n\t\t\t\t\t\t\t\t\tonValueChange={handleValueChange({\n\t\t\t\t\t\t\t\t\t\ttakeProfitData,\n\t\t\t\t\t\t\t\t\t\tstopLossData,\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tdata={stopLossData}\n\t\t\t\t\t\t\t\t\tisShownValidErrors={isShownValidErrors}\n\t\t\t\t\t\t\t\t\tcurrencySymbol={currencySymbol}\n\t\t\t\t\t\t\t\t\ttheme={theme.TakeProfitStopLoss}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={theme.divider} />\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t);\n\t\t\t\t}),\n\t\t\t\tO.toNullable,\n\t\t\t)}\n\t\t\t<div className={theme.verticalSpacer} />\n\t\t</div>\n\t);\n});\n\nconst wTheme = {\n\t...css,\n};\n\nexport const EditingPosition = withTranslation()(withTheme(Symbol(), wTheme)(EditingPositionRaw));\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { Option } from 'fp-ts/lib/Option';\nimport {\n\tTakeProfitStopLossComponentData,\n\tProfitLossKind,\n} from '../../../../ui-common/takeprofit-stoploss-panel/takeprofit-stoploss-panel.model';\nimport { SidePanel } from '../../../../ui-common/side-panel/side-panel.component';\nimport { Button } from '../../../../ui-common/button/button.component';\nimport { CloseButton } from '../../../../ui-common/close-button/close-button.component';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { EditingPosition as EditingPositionCommon } from '../../../../ui-common/editing-position/editing-position.component';\nimport { RouteLink } from '../../../../ui-common/route-link/containers/route-link.container';\nimport { routes } from '../../../../ui-common/routes';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport * as css from './theme/editing-position.module.css';\nimport * as buttonCss from './theme/button.child.module.css';\nimport * as sidePanelCss from './theme/side-panel.child.module.css';\nimport {\n\tEditingPositionData,\n\tEditingPositionTakeProfitStopLossData,\n} from '../../../../ui-common/editing-position/editing-position.model';\n\nconst sidePanelTheme = { SidePanel: sidePanelCss };\n\nexport type EditingPositionProps = {\n\tuid: string;\n\tplKind: string;\n\tdata: Option<EditingPositionData>;\n\tamount: Option<number>;\n\tvalue: Option<number>;\n\tamountPrecision: number;\n\tprofitLoss: Option<number>;\n\tonValueChange: (data: EditingPositionTakeProfitStopLossData) => void;\n\tonPositionUpdate: (isValid: boolean) => () => void;\n\tisValid: boolean;\n\tisShownValidErrors: boolean;\n\tcurrencySymbol: string;\n\tunitName: Option<string>;\n\tisEditingPositionAllowed: boolean;\n};\n\nexport const EditingPosition = combineContext(RouteLink, RouteLink =>\n\twithTranslation()(\n\t\tclass EditingPosition extends PureComponent<EditingPositionProps & WithTranslation> {\n\t\t\trender() {\n\t\t\t\tconst {\n\t\t\t\t\tdata,\n\t\t\t\t\tisShownValidErrors,\n\t\t\t\t\tprofitLoss,\n\t\t\t\t\tamount,\n\t\t\t\t\tvalue,\n\t\t\t\t\tcurrencySymbol,\n\t\t\t\t\tunitName,\n\t\t\t\t\tamountPrecision,\n\t\t\t\t\tonValueChange,\n\t\t\t\t} = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<SidePanel\n\t\t\t\t\t\theader={this.renderHeader()}\n\t\t\t\t\t\tfooter={this.renderFooter()}\n\t\t\t\t\t\ttheme={sidePanelTheme}\n\t\t\t\t\t\tscrollable>\n\t\t\t\t\t\t<div className={css.content}>\n\t\t\t\t\t\t\t<EditingPositionCommon\n\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\tunitName={unitName}\n\t\t\t\t\t\t\t\tamount={amount}\n\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\tamountPrecision={amountPrecision}\n\t\t\t\t\t\t\t\tcurrencySymbol={currencySymbol}\n\t\t\t\t\t\t\t\tprofitLoss={profitLoss}\n\t\t\t\t\t\t\t\tisShownValidErrors={isShownValidErrors}\n\t\t\t\t\t\t\t\tonValueChange={onValueChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</SidePanel>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\thandleValueChange = (data: EditingPositionTakeProfitStopLossData) => (\n\t\t\t\tchangedValue: TakeProfitStopLossComponentData,\n\t\t\t) => {\n\t\t\t\tconst { takeProfitData, stopLossData } = data;\n\t\t\t\tconst { onValueChange } = this.props;\n\n\t\t\t\tswitch (changedValue.kind) {\n\t\t\t\t\tcase ProfitLossKind.Profit:\n\t\t\t\t\t\tonValueChange({\n\t\t\t\t\t\t\ttakeProfitData: changedValue,\n\t\t\t\t\t\t\tstopLossData,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ProfitLossKind.Loss:\n\t\t\t\t\t\tonValueChange({\n\t\t\t\t\t\t\ttakeProfitData,\n\t\t\t\t\t\t\tstopLossData: changedValue,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tprivate renderHeader = () => (\n\t\t\t\t<div className={css.header}>\n\t\t\t\t\t<span className={css.widgetLabel}>\n\t\t\t\t\t\t{tspan('editingPositionEditingPosition', 'Editing Position')}\n\t\t\t\t\t</span>\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={routes.positions.position.root}\n\t\t\t\t\t\tvalue={{ positionId: this.props.uid }}\n\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t<div className={css.closeBtnWrapper}>\n\t\t\t\t\t\t\t\t<CloseButton onClick={onNavigate} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\tprivate renderFooter = () => {\n\t\t\t\tconst { onPositionUpdate, isValid, isEditingPositionAllowed } = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisDisabled={!isEditingPositionAllowed}\n\t\t\t\t\t\tonClick={onPositionUpdate(isValid)}\n\t\t\t\t\t\tisPrimary={true}\n\t\t\t\t\t\ttheme={buttonCss}>\n\t\t\t\t\t\t{tspan('editingPositionUpdate', 'Update')}\n\t\t\t\t\t</Button>\n\t\t\t\t);\n\t\t\t};\n\t\t},\n\t),\n);\n","import { combineLatest, Observable, merge } from 'rxjs';\nimport { distinctUntilChanged, filter, map, startWith, switchMap, tap, withLatestFrom, first } from 'rxjs/operators';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { eqNumber } from 'fp-ts/lib/Eq';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { LiveData, LiveDataOption } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { fromOption, isSuccess, success } from '@devexperts/remote-data-ts';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { AccountViewModel } from '../account/account.view-model';\nimport { InstrumentStore } from '../../store/instrument/instrument.store';\nimport { OrderStore } from '../../store/order/order.store';\nimport { PositionsStore } from '../../store/positions/positions.store';\nimport { MarketDataStore } from '../../store/market-data/market-data.store';\nimport { ConversionRateStore } from '../../store/conversion-rate/conversion-rate.store';\nimport { routes } from '../../ui-common/routes';\nimport { href, Router } from '../../utils/router.utils';\nimport { filterMap } from '../../utils/rxjs/filtermap';\nimport {\n\tOrderEntryTakeProfitStopLossData,\n\tTakeProfitStopLossData,\n\tTakeProfitStopLossOptions,\n\tOrderKind,\n} from '../../model/takeprofit-stoploss/takeprofit-stoploss.model';\nimport { OrderEntrySide } from '../../model/order-entry/order-entry.model';\nimport {\n\tgetCurrentPrice,\n\tgetDefaultTakeProfitStopLossData,\n\tgetUpdatedProtectionOrderOption,\n\tgetTakeProfitStopLossValue,\n} from '../../model/takeprofit-stoploss/takeprofit-stoploss.utils';\nimport { countDistance } from '../../model/limits/limits.utils';\nimport { Either } from 'fp-ts/lib/Either';\nimport { MetricsStore } from '../../store/metrics/metrics.store';\nimport { LimitsStore } from '../../store/limits/limits.store';\nimport { currencyStringToSymbol } from '../../utils/currency.utils';\nimport { MarginImpactStore } from '../../store/margin-impact/margin-impact.store';\nimport {\n\tdistinctRDOptionNumber,\n\tdistinctRDOptionString,\n\tdistinctRDNumber,\n\tsetoidOptionNumber,\n} from '../../utils/setoid.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant, constFalse } from 'fp-ts/lib/function';\nimport * as E from 'fp-ts/lib/Either';\nimport { shareReplayWithDefaults } from '../../utils/rxjs/shareReplayWithDefaults';\n\n// position it is order with type equals 'MARKET'\nconst ORDER_TYPE = 'MARKET';\n\nexport type EditingPositionData = {\n\tsymbol: string;\n\tdescription: Option<string>;\n\tlot: number;\n\tmarginImpact: Either<Error, number>;\n\ttakeProfitData: TakeProfitStopLossData;\n\tstopLossData: TakeProfitStopLossData;\n\tlotsPrecision: number;\n};\n\nexport type EditingPositionViewModel = {\n\tdata$: LiveData<Error, EditingPositionData>;\n\tpositionAmountAbs$: LiveData<Error, number>;\n\tvalue$: LiveDataOption<Error, number>;\n\tprofitLoss$: LiveDataOption<Error, number>;\n\tonTakeProfitStopLossValueChange: (value: OrderEntryTakeProfitStopLossData) => void;\n\tonPositionUpdate: (isValid: boolean) => () => void;\n\tisValid$: Observable<boolean>;\n\tisShownValidErrors$: Observable<boolean>;\n\tamountPrecision$: Observable<number>;\n\tcurrencySymbol$: Observable<string>;\n\tunitName$: LiveDataOption<Error, string>;\n\tisEditingPositionAllowed$: Observable<boolean>;\n};\n\ntype EditingPositionViewModelContext = {\n\tpositionsStore: PositionsStore;\n\tmetricsStore: MetricsStore;\n\taccountViewModel: AccountViewModel;\n\tinstrumentStore: InstrumentStore;\n\torderStore: OrderStore;\n\tmarketDataStore: MarketDataStore;\n\tmarginImpactStore: MarginImpactStore;\n\tconversionRateStore: ConversionRateStore;\n\tlimitsStore: LimitsStore;\n\trouter: Router;\n};\n\ntype CreateEditingPositionViewModel = (uid: string, plKind: string) => Sink<EditingPositionViewModel>;\n\nexport const createEditingPositionViewModel = combineContext(\n\task<EditingPositionViewModelContext>(),\n\t(editingPositionContext): CreateEditingPositionViewModel => (uid, plKind) => {\n\t\tconst {\n\t\t\tpositionsStore: { getPositionByUid, sendUpdateProtectionOrdersRequest },\n\t\t\tmetricsStore: { getMetricsByUid },\n\t\t\tinstrumentStore: { getById, getBySymbol },\n\t\t\tmarketDataStore: { getDataBySymbol },\n\t\t\tmarginImpactStore,\n\t\t\tconversionRateStore: { getRateBySymbol },\n\t\t\trouter: { push },\n\t\t\tlimitsStore: { getLimitsByInstrumentId },\n\t\t\taccountViewModel: { current$, accountMetrics$ },\n\t\t} = editingPositionContext;\n\n\t\tconst takeProfitStopLossValueHandler = createHandler<OrderEntryTakeProfitStopLossData>();\n\t\tconst updateProtectionOrdersHandler = createHandler();\n\t\tconst isValidHandler = createHandler<boolean>();\n\t\tconst isShownValidErrorsHandler = createHandler<boolean>();\n\n\t\tconst position$ = getPositionByUid(uid);\n\n\t\tconst profitLoss$ = getMetricsByUid(uid).pipe(\n\t\t\tmapRD(data => data.plOpen),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst positionAmount$ = position$.pipe(\n\t\t\tmapRD(position => position.quantity),\n\t\t\tdistinctRDNumber,\n\t\t);\n\t\tconst positionAmountAbs$ = position$.pipe(\n\t\t\tmapRD(position => Math.abs(position.quantity)),\n\t\t\tdistinctRDNumber,\n\t\t);\n\t\tconst positionOpeningPrice$ = position$.pipe(\n\t\t\tmapRD(({ costBasis }) => costBasis),\n\t\t\tfilter(isSuccess),\n\t\t\tmap(data => data.value),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\n\t\tconst instrumentData$ = position$.pipe(\n\t\t\tswitchMapRD(({ positionKey: { instrumentId } }) => getById(instrumentId)),\n\t\t\tmapRD(instrument => ({\n\t\t\t\tid: instrument.id,\n\t\t\t\tlotSize: instrument.lotSize,\n\t\t\t\tsymbol: instrument.symbol,\n\t\t\t\tsymbolDescription: instrument.description,\n\t\t\t\tprecision: instrument.precision,\n\t\t\t\tquantityIncrement: instrument.quantityIncrement,\n\t\t\t\tpriceIncrement: instrument.priceIncrement,\n\t\t\t\tunitName: instrument.unitName,\n\t\t\t\tpipsSize: instrument.pipsSize,\n\t\t\t})),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst extractedTakeProfitStopLoss$ = position$.pipe(\n\t\t\tmapRD(position => ({\n\t\t\t\ttakeProfitData: position.takeProfit,\n\t\t\t\tstopLossData: position.stopLoss,\n\t\t\t})),\n\t\t);\n\n\t\tconst symbol$ = instrumentData$.pipe(mapRD(data => data.symbol));\n\n\t\tconst symbolMarginImpact$ = symbol$.pipe(\n\t\t\tswitchMapRD(symbol => marginImpactStore.getMarginImpactBySymbol(symbol)),\n\t\t);\n\n\t\tconst availableFunds$ = accountMetrics$.pipe(\n\t\t\tmap(({ availableFunds }) => availableFunds),\n\t\t\tdistinctUntilChanged(O.getEq(eqNumber).equals),\n\t\t);\n\n\t\tconst baseCurrency$ = current$.pipe(\n\t\t\tmap(currentAccount => success<Error, string>(currentAccount.baseCurrency)),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\n\t\tconst currencySymbol$ = current$.pipe(\n\t\t\tmap(currentAccount => currencyStringToSymbol(currentAccount.baseCurrency)),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst unitName$ = instrumentData$.pipe(\n\t\t\tmapRD(instrument => instrument.unitName),\n\t\t\tdistinctRDOptionString,\n\t\t);\n\n\t\tconst conversionRate$ = symbol$.pipe(\n\t\t\tswitchMapRD(symbol => {\n\t\t\t\tconst currency$ = getBySymbol(symbol).pipe(\n\t\t\t\t\tmap(instrumentRD =>\n\t\t\t\t\t\tinstrumentRD.chain(instrument =>\n\t\t\t\t\t\t\tfromOption(instrument.currency, () => new Error('There is no currency in this instrument')),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\treturn combineLatestRD(currency$, baseCurrency$).pipe(\n\t\t\t\t\tswitchMapRD(([currency, baseCurrency]) => {\n\t\t\t\t\t\treturn getRateBySymbol(currency, baseCurrency);\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\n\t\tconst value$ = combineLatestRD(symbol$, positionAmount$).pipe(\n\t\t\tswitchMapRD(([symbol, quantity]) =>\n\t\t\t\tcombineLatestRD(getDataBySymbol(symbol), conversionRate$).pipe(\n\t\t\t\t\tmapRD(([marketData, conversionRateData]) => {\n\t\t\t\t\t\tconst { conversionRate } = conversionRateData;\n\t\t\t\t\t\tconst isQuantityPositive = quantity > 0;\n\t\t\t\t\t\treturn pipe(\n\t\t\t\t\t\t\tconversionRate,\n\t\t\t\t\t\t\tO.chain(rate => {\n\t\t\t\t\t\t\t\tconst currentPrice = getCurrentPrice(isQuantityPositive)(marketData);\n\t\t\t\t\t\t\t\treturn pipe(\n\t\t\t\t\t\t\t\t\tcurrentPrice,\n\t\t\t\t\t\t\t\t\tO.chain(price =>\n\t\t\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\t\t\trate.value,\n\t\t\t\t\t\t\t\t\t\t\tO.map(value => Math.abs(quantity) * price * value),\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t);\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst lotSize$ = instrumentData$.pipe(\n\t\t\tmapRD(value => value.lotSize),\n\t\t\tfilter(isSuccess),\n\t\t\tmap(lotSize => lotSize.value),\n\t\t);\n\n\t\tconst formulaMarginImpact$ = symbolMarginImpact$.pipe(\n\t\t\tmapRD(data => data.formula),\n\t\t\tdistinctRDOptionString,\n\t\t);\n\t\tconst argumentsMarginImpact$ = symbolMarginImpact$.pipe(\n\t\t\tmapRD(data => data.arguments),\n\t\t\tdistinctRDOptionString,\n\t\t);\n\n\t\tconst quote$ = instrumentData$.pipe(switchMapRD(({ symbol }) => getDataBySymbol(symbol)));\n\n\t\tconst bid$ = quote$.pipe(\n\t\t\tmapRD(data =>\n\t\t\t\tpipe(\n\t\t\t\t\tdata.lastQuote,\n\t\t\t\t\tO.chain(({ bid }) => bid),\n\t\t\t\t),\n\t\t\t),\n\t\t\tfilter(isSuccess),\n\t\t\tfilterMap(quote => quote.value),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\n\t\tconst ask$ = quote$.pipe(\n\t\t\tmapRD(data =>\n\t\t\t\tpipe(\n\t\t\t\t\tdata.lastQuote,\n\t\t\t\t\tO.chain(({ ask }) => ask),\n\t\t\t\t),\n\t\t\t),\n\t\t\tfilter(isSuccess),\n\t\t\tfilterMap(quote => quote.value),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\n\t\tconst precision$ = instrumentData$.pipe(\n\t\t\tmapRD(value => value.precision),\n\t\t\tfilter(isSuccess),\n\t\t\tmap(precision => precision.value),\n\t\t);\n\n\t\tconst amount$ = positionAmount$.pipe(\n\t\t\tfilter(isSuccess),\n\t\t\tmap(amount => amount.value),\n\t\t);\n\n\t\tconst amountAbs$ = positionAmountAbs$.pipe(\n\t\t\tfilter(isSuccess),\n\t\t\tmap(amount => amount.value),\n\t\t);\n\n\t\tconst quantityInc$ = instrumentData$.pipe(\n\t\t\tmapRD(value => value.quantityIncrement),\n\t\t\tfilter(isSuccess),\n\t\t\tmap(quantityIncrement => quantityIncrement.value),\n\t\t);\n\n\t\tconst priceInc$ = instrumentData$.pipe(\n\t\t\tmapRD(value => value.priceIncrement),\n\t\t\tfilter(isSuccess),\n\t\t\tmap(priceIncrement => priceIncrement.value),\n\t\t);\n\n\t\tconst pipsSize$ = instrumentData$.pipe(\n\t\t\tmapRD(value => value.pipsSize),\n\t\t\tfilter(isSuccess),\n\t\t\tmap(pipsSize => pipsSize.value),\n\t\t);\n\n\t\tconst prevTPValue$ = extractedTakeProfitStopLoss$.pipe(\n\t\t\tmapRD(value =>\n\t\t\t\tpipe(\n\t\t\t\t\tvalue.takeProfitData,\n\t\t\t\t\tO.chain(takeProfitData => takeProfitData.fixedPrice),\n\t\t\t\t),\n\t\t\t),\n\t\t\tfilter(isSuccess),\n\t\t\tmap(takeProfitValue => takeProfitValue.value),\n\t\t\tdistinctUntilChanged(setoidOptionNumber.equals),\n\t\t);\n\n\t\tconst prevSLValue$ = extractedTakeProfitStopLoss$.pipe(\n\t\t\tmapRD(value =>\n\t\t\t\tpipe(\n\t\t\t\t\tvalue.stopLossData,\n\t\t\t\t\tO.chain(stopLossData => stopLossData.fixedPrice),\n\t\t\t\t),\n\t\t\t),\n\t\t\tfilter(isSuccess),\n\t\t\tmap(stopLossValue => stopLossValue.value),\n\t\t\tdistinctUntilChanged(setoidOptionNumber.equals),\n\t\t);\n\n\t\tconst orderSide$ = amount$.pipe(\n\t\t\tmap(amount => (amount > 0 ? OrderEntrySide.Buy : OrderEntrySide.Sell)),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst spot$ = combineLatest(bid$, ask$, orderSide$).pipe(\n\t\t\tmap(([bid, ask, orderSide]) => {\n\t\t\t\tswitch (orderSide) {\n\t\t\t\t\tcase OrderEntrySide.Sell:\n\t\t\t\t\t\treturn bid;\n\n\t\t\t\t\tcase OrderEntrySide.Buy:\n\t\t\t\t\t\treturn ask;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\n\t\tconst marginImpactQuantity$ = combineLatest(lotSize$, quantityInc$, orderSide$).pipe(\n\t\t\tmap(([lotSize, quantityInc, orderSide]) => {\n\t\t\t\tconst sign = orderSide === OrderEntrySide.Sell ? -1 : 1;\n\t\t\t\treturn success<Error, number>(quantityInc * sign * lotSize);\n\t\t\t}),\n\t\t);\n\n\t\tconst marginImpact$ = combineLatestRD(marginImpactQuantity$, formulaMarginImpact$, argumentsMarginImpact$).pipe(\n\t\t\tmapRD(([quantity, formula, args]) =>\n\t\t\t\tE.tryCatch2v(\n\t\t\t\t\t() =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\targs,\n\t\t\t\t\t\t\tO.chain(value =>\n\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\tformula,\n\t\t\t\t\t\t\t\t\tO.map(data => new Function(value, data)),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tO.fold(constant(new Error('Something went wrong during margin impact counting')), data =>\n\t\t\t\t\t\t\t\tdata(quantity),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tNumber,\n\t\t\t\t\t\t),\n\t\t\t\t\tconstant(new Error('Something went wrong during margin impact counting')),\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\n\t\tconst spotAmountCostCombined$ = combineLatest(spot$, amountAbs$, positionOpeningPrice$);\n\n\t\tconst initTakeProfitStopLossValue$ = combineLatest(prevTPValue$, prevSLValue$).pipe(\n\t\t\tswitchMap(([prevTPValue, prevSLValue]) =>\n\t\t\t\ttakeProfitStopLossValueHandler.value$.pipe(\n\t\t\t\t\tstartWith(\n\t\t\t\t\t\tgetDefaultTakeProfitStopLossData({\n\t\t\t\t\t\t\thasTP: pipe(\n\t\t\t\t\t\t\t\tprevTPValue,\n\t\t\t\t\t\t\t\tO.fold(() => (plKind === 'profit' ? O.some(0) : O.none), O.some),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\thasSL: pipe(\n\t\t\t\t\t\t\t\tprevSLValue,\n\t\t\t\t\t\t\t\tO.fold(() => (plKind === 'loss' ? O.some(0) : O.none), O.some),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\n\t\tconst currentAndPreviousTakeProfitStopLoss$ = combineLatest(\n\t\t\tinitTakeProfitStopLossValue$,\n\t\t\tprevTPValue$,\n\t\t\tprevSLValue$,\n\t\t);\n\n\t\tconst isShownValidErrors$: Observable<boolean> = isShownValidErrorsHandler.value$.pipe(\n\t\t\tstartWith(false),\n\t\t\tdistinctUntilChanged(),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst limitsData$ = instrumentData$.pipe(switchMapRD(({ id }) => getLimitsByInstrumentId(id)));\n\n\t\tconst limits$ = limitsData$.pipe(\n\t\t\tfilter(isSuccess),\n\t\t\tmap(data => data.value),\n\t\t);\n\n\t\tconst minOrderIncrement$ = limits$.pipe(\n\t\t\tmap(limit => limit.minOrderIncrement),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\n\t\tconst amountPrecision$ = combineLatest(lotSize$, minOrderIncrement$).pipe(\n\t\t\tmap(([lotSize, increment]) => {\n\t\t\t\tconst step = increment * lotSize;\n\t\t\t\tconst stepString = step.toString();\n\t\t\t\treturn step < 1 ? stepString.slice(stepString.indexOf('.') + 1).length : 0;\n\t\t\t}),\n\t\t);\n\n\t\tconst lotsPrecision$ = limitsData$.pipe(\n\t\t\tmapRD(({ minOrderIncrement }) => {\n\t\t\t\tconst limitsMinOrderIncrementString = String(minOrderIncrement);\n\t\t\t\treturn limitsMinOrderIncrementString.slice(limitsMinOrderIncrementString.indexOf('.') + 1).length;\n\t\t\t}),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst distance$ = combineLatest(limits$, pipsSize$, bid$, ask$).pipe(\n\t\t\tmap(([limits, pipsSize, bid, ask]) =>\n\t\t\t\tcountDistance(\n\t\t\t\t\tlimits.limitStopDistanceType,\n\t\t\t\t\tlimits.limitStopDistance,\n\t\t\t\t\tlimits.limitStopDistanceInPercentOfSpread,\n\t\t\t\t\tMath.abs(bid - ask),\n\t\t\t\t\tpipsSize,\n\t\t\t\t),\n\t\t\t),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst rate$ = conversionRate$.pipe(\n\t\t\tmap(rates =>\n\t\t\t\tpipe(\n\t\t\t\t\trates.toOption(),\n\t\t\t\t\tO.chain(rate =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\trate.conversionRate,\n\t\t\t\t\t\t\tO.chain(conversionRate => conversionRate.value),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctUntilChanged(setoidOptionNumber.equals),\n\t\t);\n\n\t\tconst takeProfitStopLossCalculatedData$ = combineLatest(\n\t\t\trate$,\n\t\t\tbid$,\n\t\t\task$,\n\t\t\tcombineLatest(\n\t\t\t\tcurrentAndPreviousTakeProfitStopLoss$,\n\t\t\t\tpriceInc$,\n\t\t\t\tspotAmountCostCombined$,\n\t\t\t\torderSide$,\n\t\t\t\tprecision$,\n\t\t\t\tdistance$,\n\t\t\t),\n\t\t).pipe(\n\t\t\tfilter(\n\t\t\t\t([rate, bid, ask, [[{ takeProfitData, stopLossData }]]]) =>\n\t\t\t\t\ttakeProfitData.isSelected || stopLossData.isSelected,\n\t\t\t),\n\t\t\tmap(\n\t\t\t\t([\n\t\t\t\t\trate,\n\t\t\t\t\tbid,\n\t\t\t\t\task,\n\t\t\t\t\t[\n\t\t\t\t\t\t[{ takeProfitData, stopLossData }, prevTakeProfitValue, prevStopLossValue],\n\t\t\t\t\t\tpriceIncrement,\n\t\t\t\t\t\t[spotValue, amount, costBasis],\n\t\t\t\t\t\tside,\n\t\t\t\t\t\tprecision,\n\t\t\t\t\t\tdistance,\n\t\t\t\t\t],\n\t\t\t\t]): TakeProfitStopLossOptions => ({\n\t\t\t\t\tcurrentTakeProfitData: takeProfitData,\n\t\t\t\t\tcurrentStopLossData: stopLossData,\n\t\t\t\t\tprevTakeProfitFixedPrice: prevTakeProfitValue,\n\t\t\t\t\tprevStopLossFixedPrice: prevStopLossValue,\n\t\t\t\t\tparentOrderPrice: spotValue,\n\t\t\t\t\tbid,\n\t\t\t\t\task,\n\t\t\t\t\torderType: ORDER_TYPE,\n\t\t\t\t\tamount: Number(amount),\n\t\t\t\t\tside,\n\t\t\t\t\tpriceIncrement,\n\t\t\t\t\tprecision,\n\t\t\t\t\trate: pipe(\n\t\t\t\t\t\trate,\n\t\t\t\t\t\tO.getOrElse(constant(1)),\n\t\t\t\t\t),\n\t\t\t\t\torderKind: OrderKind.Position,\n\t\t\t\t\tdistance,\n\t\t\t\t\tcostBasis,\n\t\t\t\t}),\n\t\t\t),\n\t\t\tmap(data => getTakeProfitStopLossValue(data)),\n\t\t\ttap(data => {\n\t\t\t\tconst {\n\t\t\t\t\ttakeProfitData: { validatedPrice: validatedPriceTP },\n\t\t\t\t\tstopLossData: { validatedPrice: validatedPriceSL },\n\t\t\t\t} = data;\n\n\t\t\t\tisValidHandler.handle(E.isRight(validatedPriceTP) && E.isRight(validatedPriceSL));\n\t\t\t}),\n\t\t);\n\n\t\tconst takeProfitStopLossData$ = merge(initTakeProfitStopLossValue$, takeProfitStopLossCalculatedData$);\n\n\t\tconst takeProfitStopLossLiveData$ = takeProfitStopLossData$.pipe(\n\t\t\tmap(value => success<Error, OrderEntryTakeProfitStopLossData>(value)),\n\t\t);\n\n\t\tconst data$ = combineLatestRD(\n\t\t\tpositionAmountAbs$,\n\t\t\tinstrumentData$,\n\t\t\ttakeProfitStopLossLiveData$,\n\t\t\tmarginImpact$,\n\t\t\tlotsPrecision$,\n\t\t).pipe(\n\t\t\tmapRD(([amount, instrumentData, takeProfitStopLossLiveData, marginImpact, lotsPrecision]) => ({\n\t\t\t\tsymbol: instrumentData.symbol,\n\t\t\t\tdescription: instrumentData.symbolDescription,\n\t\t\t\tlot: amount / instrumentData.lotSize,\n\t\t\t\tmarginImpact,\n\t\t\t\ttakeProfitData: takeProfitStopLossLiveData.takeProfitData,\n\t\t\t\tstopLossData: takeProfitStopLossLiveData.stopLossData,\n\t\t\t\tlotsPrecision,\n\t\t\t})),\n\t\t);\n\n\t\tconst positionKey$ = position$.pipe(\n\t\t\tmapRD(position => position.positionKey),\n\t\t\tfilter(isSuccess),\n\t\t\tmap(positionKey => positionKey.value),\n\t\t);\n\n\t\tconst successfulPrecision$ = instrumentData$.pipe(\n\t\t\tmapRD(value => value.precision),\n\t\t\tfilter(isSuccess),\n\t\t);\n\n\t\tconst protectionOrders$ = combineLatestRD(position$, takeProfitStopLossLiveData$, successfulPrecision$).pipe(\n\t\t\tmapRD(([position, takeProfitStopLossLiveData, successfulPrecision]) => {\n\t\t\t\tconst { takeProfit, stopLoss } = position;\n\t\t\t\tconst { takeProfitData, stopLossData } = takeProfitStopLossLiveData;\n\n\t\t\t\tconst tpProtection = getUpdatedProtectionOrderOption(takeProfit, takeProfitData, successfulPrecision);\n\t\t\t\tconst slProtection = getUpdatedProtectionOrderOption(stopLoss, stopLossData, successfulPrecision);\n\n\t\t\t\treturn [tpProtection, slProtection];\n\t\t\t}),\n\t\t\tfilter(isSuccess),\n\t\t\tmap(protectionOrders => protectionOrders.value),\n\t\t);\n\n\t\tconst isValid$: Observable<boolean> = isValidHandler.value$.pipe(\n\t\t\tstartWith(true),\n\t\t\tdistinctUntilChanged(),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst onPositionUpdate = (isValid: boolean) => () => {\n\t\t\tisShownValidErrorsHandler.handle(!isValid);\n\t\t\tisValid && updateProtectionOrdersHandler.handle(void 0);\n\t\t};\n\n\t\tconst sendEffect$ = updateProtectionOrdersHandler.value$.pipe(\n\t\t\twithLatestFrom(positionKey$, protectionOrders$),\n\t\t\tswitchMap(([_, positionKey, protectionOrders]) => {\n\t\t\t\tconst [tpProtection, slProtection] = protectionOrders;\n\n\t\t\t\tconst takeProfitProtection = O.isSome(tpProtection) ? [tpProtection.value] : [];\n\t\t\t\tconst stopLossProtection = O.isSome(slProtection) ? [slProtection.value] : [];\n\n\t\t\t\tconst maybeEmptyArrayWithProtections = [...takeProfitProtection, ...stopLossProtection];\n\n\t\t\t\treturn sendUpdateProtectionOrdersRequest(positionKey, maybeEmptyArrayWithProtections);\n\t\t\t}),\n\t\t\tfilter(isSuccess),\n\t\t\ttap(() => push(href(routes.positions.position.root, { positionId: uid }))),\n\t\t);\n\n\t\tconst isFundsEnough$ = combineLatestRD(\n\t\t\tmarginImpact$,\n\t\t\tavailableFunds$.pipe(map(val => success<Error, Option<number>>(val))),\n\t\t).pipe(\n\t\t\tmapRD(\n\t\t\t\t([marginImpact, availableFunds]) =>\n\t\t\t\t\tE.isRight(marginImpact) &&\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tavailableFunds,\n\t\t\t\t\t\tO.fold(constFalse, availableFunds => availableFunds > marginImpact.value),\n\t\t\t\t\t),\n\t\t\t),\n\t\t);\n\n\t\tconst isEditingPositionAllowed$ = isFundsEnough$.pipe(\n\t\t\tmap(isFundsEnough => isFundsEnough.getOrElse(false)),\n\t\t\tdistinctUntilChanged(),\n\t\t);\n\n\t\treturn new Sink(\n\t\t\t{\n\t\t\t\tdata$,\n\t\t\t\tpositionAmountAbs$,\n\t\t\t\tvalue$,\n\t\t\t\tamountPrecision$,\n\t\t\t\tprofitLoss$,\n\t\t\t\tisValid$,\n\t\t\t\tisShownValidErrors$,\n\t\t\t\tonPositionUpdate,\n\t\t\t\tonTakeProfitStopLossValueChange: takeProfitStopLossValueHandler.handle,\n\t\t\t\tcurrencySymbol$,\n\t\t\t\tunitName$,\n\t\t\t\t/* TODO: add full featured checking like in OE or closing position */\n\t\t\t\tisEditingPositionAllowed$,\n\t\t\t},\n\t\t\tsendEffect$,\n\t\t);\n\t},\n);\n","import { EditingPositionData as EditingPositionInputData } from '../../../../view-model/positions/editing-position.view-model';\nimport { EditingPositionData as EditingPositionOutputData } from '../../../../ui-common/editing-position/editing-position.model';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\nimport * as E from 'fp-ts/lib/Either';\n\nexport const toEditingPositionData = (value: EditingPositionInputData): EditingPositionOutputData => ({\n\tsymbol: value.symbol,\n\tdescription: value.description,\n\tlot: value.lot,\n\tmarginImpact: pipe(\n\t\tvalue.marginImpact,\n\t\tE.getOrElse(constant(0)),\n\t),\n\ttakeProfitData: value.takeProfitData,\n\tstopLossData: value.stopLossData,\n\tlotsPrecision: value.lotsPrecision,\n});\n","import { createSelector } from 'reselect';\nimport { map, filter } from 'rxjs/operators';\nimport * as O from 'fp-ts/lib/Option';\nimport { isSuccess } from '@devexperts/remote-data-ts';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { EditingPosition } from '../../components/editing-position/editing-position.component';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport {\n\tEditingPositionViewModel,\n\tcreateEditingPositionViewModel,\n} from '../../../../view-model/positions/editing-position.view-model';\nimport { toEditingPositionData } from './editing-position.utils';\nimport { identity } from 'io-ts';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type EditingPositionContainerContext = {\n\teditingPositionViewModel: EditingPositionViewModel;\n};\n\nexport const Container = combineContext(EditingPosition, ask<EditingPositionContainerContext>(), (EditingPosition, e) =>\n\twithRXWithDefaults(EditingPosition)(() => {\n\t\tconst {\n\t\t\tdata$,\n\t\t\tpositionAmountAbs$,\n\t\t\tvalue$,\n\t\t\tamountPrecision$,\n\t\t\tprofitLoss$,\n\t\t\tonTakeProfitStopLossValueChange,\n\t\t\tonPositionUpdate,\n\t\t\tisValid$,\n\t\t\tisShownValidErrors$,\n\t\t\tcurrencySymbol$,\n\t\t\tunitName$,\n\t\t\tisEditingPositionAllowed$,\n\t\t} = e.editingPositionViewModel;\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tdata: data$.pipe(\n\t\t\t\t\tmapRD(toEditingPositionData),\n\t\t\t\t\tmap(data => data.toOption()),\n\t\t\t\t),\n\t\t\t\tamount: positionAmountAbs$.pipe(map(data => data.toOption())),\n\t\t\t\tvalue: value$.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\tdata.toOption(),\n\t\t\t\t\t\t\tO.chain(identity),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tamountPrecision: amountPrecision$,\n\t\t\t\tprofitLoss: profitLoss$.pipe(\n\t\t\t\t\tfilter(isSuccess),\n\t\t\t\t\tmap(profitLoss => profitLoss.value),\n\t\t\t\t),\n\t\t\t\tisValid: isValid$,\n\t\t\t\tisShownValidErrors: isShownValidErrors$,\n\t\t\t\tcurrencySymbol: currencySymbol$,\n\t\t\t\tunitName: unitName$.pipe(\n\t\t\t\t\tmap(unitName =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\tunitName.toOption(),\n\t\t\t\t\t\t\tO.chain(identity),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tisEditingPositionAllowed: isEditingPositionAllowed$,\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tdata: O.none,\n\t\t\t\tamount: O.none,\n\t\t\t\tvalue: O.none,\n\t\t\t\tamountPrecision: 0,\n\t\t\t\tprofitLoss: O.none,\n\t\t\t\tonValueChange: onTakeProfitStopLossValueChange,\n\t\t\t\tonPositionUpdate,\n\t\t\t\tisValid: true,\n\t\t\t\tisShownValidErrors: false,\n\t\t\t\tcurrencySymbol: '',\n\t\t\t\tunitName: O.none,\n\t\t\t\tisEditingPositionAllowed: false,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const EditingPositionContainer = combineContext(\n\tdeferContext(Container, 'editingPositionViewModel'),\n\tcreateEditingPositionViewModel,\n\t(Container, createEditingPositionViewModel) =>\n\t\trunOnMount(Container, props => {\n\t\t\tconst uid = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.uid,\n\t\t\t);\n\t\t\tconst plKind = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.plKind,\n\t\t\t);\n\t\t\treturn createSelector(\n\t\t\t\tuid,\n\t\t\t\tplKind,\n\t\t\t\t(uid, plKind) =>\n\t\t\t\t\tcreateEditingPositionViewModel(uid, plKind).map(editingPositionViewModel => ({\n\t\t\t\t\t\teditingPositionViewModel,\n\t\t\t\t\t})),\n\t\t\t);\n\t\t}),\n);\n","import { ComponentType } from 'react';\nimport { identity } from 'fp-ts/lib/function';\n\nexport const withProps = <Props extends object = never>(): (<P>(\n\tTarget: ComponentType<P>,\n) => ComponentType<Props & P>) => identity as any;\n","import { Plugin, PluginDependencyResolver } from '../../../../ui-common/chart/plugin/plugin.model';\nimport { Clearer, ChartElementsCache } from '../../components/chart/chart.model';\nimport { fromNullable, isSome, none, Option, some, option } from 'fp-ts/lib/Option';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { ThemedLines } from './lines.component';\nimport { Line } from './line.model';\nimport { liftA2 } from 'fp-ts/lib/Apply';\nimport EventBus from '@dx-private/dxchart5/dist/js/chart/EventBus';\nimport { ChartEvents } from '@dx-private/dxchart5/dist/js/chart/ChartEvents';\nimport ChartData from '@dx-private/dxchart5/dist/js/chart/model/ChartData';\nimport * as css from './theme/lines-plugin.module.css';\n\nexport class LinesPlugin extends Plugin {\n\tprivate container: Option<HTMLDivElement> = none;\n\tprivate chartModel: Option<ChartData> = none;\n\n\tconstructor(private lines: Line[] = []) {\n\t\tsuper();\n\t}\n\n\tregister(resolver: PluginDependencyResolver) {\n\t\tresolver(\n\t\t\t['eventBus', 'clearer', 'elements', 'events'],\n\t\t\t(bus: EventBus, clearer: Clearer, elements: ChartElementsCache, events: ChartEvents) => {\n\t\t\t\tconst { mainCanvas: canvas } = elements;\n\t\t\t\tconst div = document.createElement('div');\n\t\t\t\tdiv.classList.add(css.container);\n\t\t\t\tthis.container = some(div);\n\t\t\t\tconst parent = fromNullable(canvas.parentNode);\n\t\t\t\tif (isSome(parent)) {\n\t\t\t\t\tparent.value.appendChild(div);\n\t\t\t\t}\n\t\t\t\treturn clearer([\n\t\t\t\t\tevents.addRedrawListener(this.drawMainHandler),\n\t\t\t\t\t() => {\n\t\t\t\t\t\tReactDOM.unmountComponentAtNode(div);\n\t\t\t\t\t\tif (isSome(parent)) {\n\t\t\t\t\t\t\tparent.value.removeChild(div);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t},\n\t\t);\n\t}\n\n\tprivate render = (container: HTMLDivElement) => (chartModel: ChartData) => {\n\t\tconst toY = (price: number) => Math.floor(chartModel.toY(price));\n\t\tconst format = (price: number) => chartModel.priceFormatter(price);\n\n\t\tconst lines = this.lines.map(line => ({\n\t\t\t...line,\n\t\t\ttheme: {},\n\t\t\tformattedPrice: format(line.price),\n\t\t\tyPosition: toY(line.price),\n\t\t}));\n\n\t\tReactDOM.render(\n\t\t\tReact.createElement(ThemedLines, {\n\t\t\t\tlines,\n\t\t\t}),\n\t\t\tcontainer,\n\t\t);\n\t};\n\n\tprivate renderLiftA2 = () => {\n\t\tliftA2(option)(this.render)(this.container)(this.chartModel);\n\t};\n\n\tprivate drawMainHandler = (chartModel: ChartData) => {\n\t\tthis.chartModel = fromNullable(chartModel);\n\t\tthis.renderLiftA2();\n\t};\n}\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { some } from 'fp-ts/lib/Option';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { ChartLoaderContainer } from '../../../chart/containers/chart-loader/chart-loader.container';\nimport { CurrentPriceLinePlugin } from '../../../chart/plugin/current-price-line/current-price-line-plugin';\nimport { LinesPlugin } from '../../../chart/plugin/lines/lines-plugin';\nimport { Plugin } from '../../../../ui-common/chart/plugin/plugin.model';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport * as css from './theme/positions-dashboard.module.css';\n\ntype ChartData = {\n\tcostBasis: number;\n\tsymbol: string;\n};\n\ntype PositionDashboardChartProps = {\n\tdata: RemoteData<Error, ChartData>;\n};\n\nexport const PositionDashboardChart = combineContext(ChartLoaderContainer, ChartLoaderContainer =>\n\twithTranslation()(\n\t\tclass PositionDashboardChart extends PureComponent<PositionDashboardChartProps & WithTranslation> {\n\t\t\trender() {\n\t\t\t\tconst { data } = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<RemoteDataState data={data} success={this.renderSuccess} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tprivate renderSuccess(data: ChartData): JSX.Element {\n\t\t\t\tconst { symbol, costBasis } = data;\n\n\t\t\t\tconst plugins: Plugin[] = [\n\t\t\t\t\tnew CurrentPriceLinePlugin(),\n\t\t\t\t\tnew LinesPlugin([\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tprice: costBasis,\n\t\t\t\t\t\t\tlabel: some(tspan('positionDashboardChartLineOpenPrice', 'Open Price')),\n\t\t\t\t\t\t},\n\t\t\t\t\t]),\n\t\t\t\t];\n\n\t\t\t\treturn (\n\t\t\t\t\t<div className={css.chart}>\n\t\t\t\t\t\t<ChartLoaderContainer symbol={symbol} plugins={plugins} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t),\n);\n","import { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { combineContext, ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { PositionsStore } from '../../store/positions/positions.store';\nimport { InstrumentStore } from '../../store/instrument/instrument.store';\nimport { eqString } from 'fp-ts/lib/Eq';\nimport { distinctUntilChangedStrict } from '../../utils/live-data.utils';\nimport { first } from 'rxjs/operators';\n\nexport type PositionDashboardChartViewModel = {\n\tsymbol$: LiveData<Error, string>;\n\tcostBasis$: LiveData<Error, number>;\n};\n\ntype CreatePositionDashboardChart = (positionId: string) => PositionDashboardChartViewModel;\n\ntype PositionDashboardChartContext = {\n\tpositionsStore: PositionsStore;\n\tinstrumentStore: InstrumentStore;\n};\n\nexport const createPositionDashboardChartViewModel = combineContext(\n\task<PositionDashboardChartContext>(),\n\t(context): CreatePositionDashboardChart => positionId => {\n\t\tconst { positionsStore, instrumentStore } = context;\n\t\tconst position$ = positionsStore.getPositionByUid(positionId);\n\t\tconst costBasis$ = position$.pipe(\n\t\t\tmapRD(position => position.costBasis),\n\t\t\tfirst(),\n\t\t);\n\t\tconst symbol$ = position$.pipe(\n\t\t\tswitchMapRD(position =>\n\t\t\t\tinstrumentStore.getById(position.positionKey.instrumentId).pipe(mapRD(instrument => instrument.symbol)),\n\t\t\t),\n\t\t\tdistinctUntilChangedStrict(eqString),\n\t\t);\n\n\t\treturn {\n\t\t\tsymbol$,\n\t\t\tcostBasis$,\n\t\t};\n\t},\n);\n","import { combineContext, deferContext, ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { withProps } from '../../../../utils/with-props.utils';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { PositionDashboardChart } from '../../components/positions-dashboard/position-dashboard-chart.component';\nimport {\n\tPositionDashboardChartViewModel,\n\tcreatePositionDashboardChartViewModel,\n} from '../../../../view-model/positions/position-dashboard-chart.view-model';\nimport { createSelector } from 'reselect';\n\ntype PositionDashboardChartContainerContext = {\n\tpositionDashboardChartViewModel: PositionDashboardChartViewModel;\n};\n\nconst Container = combineContext(\n\tPositionDashboardChart,\n\task<PositionDashboardChartContainerContext>(),\n\t(PositionDashboardChart, context) =>\n\t\twithProps<{ positionId: string }>()(\n\t\t\twithRXWithDefaults(PositionDashboardChart)(() => {\n\t\t\t\tconst {\n\t\t\t\t\tpositionDashboardChartViewModel: { symbol$, costBasis$ },\n\t\t\t\t} = context;\n\n\t\t\t\tconst data$ = combineLatestRD(symbol$, costBasis$).pipe(\n\t\t\t\t\tmapRD(([symbol, costBasis]) => ({ symbol, costBasis })),\n\t\t\t\t);\n\n\t\t\t\treturn {\n\t\t\t\t\tdefaultProps: {\n\t\t\t\t\t\tdata: pending,\n\t\t\t\t\t},\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tdata: data$,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}),\n\t\t),\n);\n\nexport const PositionDashboardChartContainer = combineContext(\n\tdeferContext(Container, 'positionDashboardChartViewModel'),\n\tcreatePositionDashboardChartViewModel,\n\t(Container, createPositionDashboardChartViewModel) =>\n\t\trunOnMount(Container, props => {\n\t\t\tconst positionId = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.positionId,\n\t\t\t);\n\t\t\treturn createSelector(\n\t\t\t\tpositionId,\n\t\t\t\tpositionId => ({\n\t\t\t\t\tpositionDashboardChartViewModel: createPositionDashboardChartViewModel(positionId),\n\t\t\t\t}),\n\t\t\t);\n\t\t}),\n);\n","export enum PositionSide {\n\tBuy = '* BUY *',\n\tSell = '* SELL *',\n}\n","import * as React from 'react';\nimport { Fragment, ReactNode, memo, useCallback } from 'react';\nimport { Option } from 'fp-ts/lib/Option';\nimport { formatMoney } from 'accounting';\nimport { format } from 'date-fns';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { HeaderData, PositionSide } from './position-details.model';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { RemoteDataState } from '../remote-data-state/remote-data-state.component';\nimport { SymbolComponent } from '../symbol/symbol';\nimport { TRANSLATION_PLACEHOLDER, tspan } from '../../utils/i18n.utils';\nimport { SymbolInfoItem } from '../symbol-info-item/symbol-info-item.component';\nimport { Optional } from '../optional/optional.component';\nimport { definePipSettings } from '../pip-rate/pip-settings.utils';\nimport { PipRate } from '../pip-rate/pip-rate.component';\nimport { PriceDirection } from '../price-direction/price-direction.component';\nimport { empty } from 'fp-ts/lib/Array';\nimport { MakeTheme } from '../../utils/theme.utils';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\nimport * as css from './theme/position-details.module.css';\nimport * as infoItemCss from './theme/symbol-info-item.child.module.css';\nimport * as directionPriceCss from './theme/price-direction.child.module.css';\nimport * as symbolCss from './theme/symbol.child.module.css';\n\nexport type PositionDetailsProps = {\n\tuid: string;\n\tpipsSize: number;\n\taccountCurrency: string;\n\tprecision: number;\n\theaderData: RemoteData<Error, HeaderData>;\n\tside: RemoteData<Error, PositionSide>;\n\topenPrice: RemoteData<Error, number>;\n\tcurrentPriceAndDirection: RemoteData<Error, Option<number>[]>;\n\tquantity: RemoteData<Error, number>;\n\tsizeInLots: RemoteData<Error, number>;\n\tcurrentValue: RemoteData<Error, Option<number>>;\n\topenDateTime: RemoteData<Error, Date>;\n\ttakeProfitValue: RemoteData<Error, Option<number>>;\n\tstopLossValue: RemoteData<Error, Option<number>>;\n\tswap: RemoteData<Error, Option<number>>;\n\tcommission: RemoteData<Error, Option<number>>;\n\ttheme?: MakeTheme<'item' | 'item_secondary' | 'label' | 'value' | 'container' | 'title' | 'subtitle'>;\n} & WithTranslation;\n\nexport const PositionDetailsCommomn = withTranslation()(\n\tmemo((props: PositionDetailsProps) => {\n\t\tconst {\n\t\t\theaderData,\n\t\t\tpipsSize,\n\t\t\tprecision,\n\t\t\tside,\n\t\t\topenPrice,\n\t\t\tcurrentPriceAndDirection,\n\t\t\tquantity,\n\t\t\tcurrentValue,\n\t\t\tsizeInLots,\n\t\t\topenDateTime,\n\t\t\ttakeProfitValue,\n\t\t\tstopLossValue,\n\t\t\tswap,\n\t\t\tcommission,\n\t\t\taccountCurrency,\n\t\t\tt,\n\t\t\ttheme,\n\t\t} = props;\n\n\t\tconst renderSide = useCallback(\n\t\t\t(side: PositionSide) => {\n\t\t\t\tswitch (side) {\n\t\t\t\t\tcase PositionSide.Buy:\n\t\t\t\t\t\treturn <span className={css.positiveSide}>{tspan('positionDetailsBuy', 'Buy')}</span>;\n\t\t\t\t\tcase PositionSide.Sell:\n\t\t\t\t\t\treturn <span className={css.negativeSide}>{tspan('positionDetailsSell', 'Sell')}</span>;\n\t\t\t\t}\n\t\t\t},\n\t\t\t[t],\n\t\t);\n\n\t\tconst renderPipsValue = useCallback(\n\t\t\t(value: number, pipsSize: number, precision: number) => {\n\t\t\t\tconst pipSettings = definePipSettings(value, pipsSize);\n\n\t\t\t\treturn <PipRate value={value} rise={pipSettings} digits={precision} />;\n\t\t\t},\n\t\t\t[definePipSettings],\n\t\t);\n\n\t\tconst renderOptionalPipsValue = useCallback(\n\t\t\t(maybeValue: Option<number>, pipsSize: number, precision: number) =>\n\t\t\t\tpipe(\n\t\t\t\t\tmaybeValue,\n\t\t\t\t\tO.map(value => renderPipsValue(value, pipsSize, precision)),\n\t\t\t\t),\n\t\t\t[renderPipsValue],\n\t\t);\n\n\t\tconst renderOptionalPipsDirectionValue = useCallback(\n\t\t\t(maybeValue: Option<number>, maybeDirection: Option<number>, pipsSize: number, precision: number) => {\n\t\t\t\tif (O.isSome(maybeValue)) {\n\t\t\t\t\tconst piprateNode = renderPipsValue(maybeValue.value, pipsSize, precision);\n\t\t\t\t\tconst directionNode = pipe(\n\t\t\t\t\t\tmaybeDirection,\n\t\t\t\t\t\tO.map(direction => <PriceDirection direction={direction} theme={directionPriceCss} />),\n\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t);\n\n\t\t\t\t\tconst nodeToRender = (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t{directionNode}\n\t\t\t\t\t\t\t{piprateNode}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\n\t\t\t\t\treturn O.some(nodeToRender);\n\t\t\t\t}\n\n\t\t\t\treturn O.none;\n\t\t\t},\n\t\t\t[renderPipsValue],\n\t\t);\n\n\t\tconst renderDateString = useCallback((value: Date) => {\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{format(value, 'MM.dd.yyyy HH:mm')}\n\t\t\t\t\t<span className={css.seconds}>{format(value, ':ss')}</span>\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}, empty);\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<RemoteDataState\n\t\t\t\t\tdata={headerData}\n\t\t\t\t\tsuccess={({ symbol, positionCode }) => (\n\t\t\t\t\t\t<SymbolComponent\n\t\t\t\t\t\t\ttheme={theme || symbolCss}\n\t\t\t\t\t\t\ttitle={pipe(\n\t\t\t\t\t\t\t\tpositionCode,\n\t\t\t\t\t\t\t\tO.fold<string, ReactNode>(constant(''), positionId =>\n\t\t\t\t\t\t\t\t\ttspan('positionDetailsId', 'ID', `${TRANSLATION_PLACEHOLDER} ${positionId}`),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tsubtitle={symbol}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t\t<SymbolInfoItem theme={theme || infoItemCss} label={tspan('positionDetailsSide', 'Side')}>\n\t\t\t\t\t<RemoteDataState data={side} success={renderSide} />\n\t\t\t\t</SymbolInfoItem>\n\t\t\t\t<SymbolInfoItem theme={theme || infoItemCss} label={tspan('positionDetailsOpenPrice', 'Open price')}>\n\t\t\t\t\t<RemoteDataState\n\t\t\t\t\t\tdata={openPrice}\n\t\t\t\t\t\tsuccess={openPrice => renderPipsValue(openPrice, pipsSize, precision)}\n\t\t\t\t\t/>\n\t\t\t\t</SymbolInfoItem>\n\t\t\t\t<SymbolInfoItem\n\t\t\t\t\ttheme={theme || infoItemCss}\n\t\t\t\t\tlabel={tspan('positionDetailsCurrentPrice', 'Current price')}>\n\t\t\t\t\t<RemoteDataState\n\t\t\t\t\t\tdata={currentPriceAndDirection}\n\t\t\t\t\t\tsuccess={([currentPrice, direction]) => (\n\t\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\t\tvalue={renderOptionalPipsDirectionValue(currentPrice, direction, pipsSize, precision)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t</SymbolInfoItem>\n\t\t\t\t<SymbolInfoItem theme={theme || infoItemCss} label={tspan('positionDetailsQuantity', 'Quantity')}>\n\t\t\t\t\t<RemoteDataState data={quantity} success={quantity => <Fragment>{quantity}</Fragment>} />\n\t\t\t\t</SymbolInfoItem>\n\t\t\t\t<SymbolInfoItem theme={theme || infoItemCss} label={tspan('positionDetailsSizeInLots', 'Size in lots')}>\n\t\t\t\t\t<RemoteDataState data={sizeInLots} success={sizeInLots => <Fragment>{sizeInLots}</Fragment>} />\n\t\t\t\t</SymbolInfoItem>\n\t\t\t\t<SymbolInfoItem\n\t\t\t\t\ttheme={theme || infoItemCss}\n\t\t\t\t\tlabel={tspan(\n\t\t\t\t\t\t'positionDetailsCurrentValue',\n\t\t\t\t\t\t'Current value',\n\t\t\t\t\t\t`${TRANSLATION_PLACEHOLDER}, ${accountCurrency}`,\n\t\t\t\t\t)}>\n\t\t\t\t\t<RemoteDataState\n\t\t\t\t\t\tdata={currentValue}\n\t\t\t\t\t\tsuccess={currentValue => (\n\t\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\t\tcurrentValue,\n\t\t\t\t\t\t\t\t\tO.map(value => formatMoney(value, { format: '%v' })),\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t</SymbolInfoItem>\n\t\t\t\t<SymbolInfoItem\n\t\t\t\t\ttheme={theme || infoItemCss}\n\t\t\t\t\tlabel={tspan('positionDetailsOpenDateTime', 'Open date time')}>\n\t\t\t\t\t<RemoteDataState data={openDateTime} success={renderDateString} />\n\t\t\t\t</SymbolInfoItem>\n\t\t\t\t<SymbolInfoItem theme={theme || infoItemCss} label={tspan('positionDetailsTakeProfit', 'Take profit')}>\n\t\t\t\t\t<RemoteDataState\n\t\t\t\t\t\tdata={takeProfitValue}\n\t\t\t\t\t\tsuccess={takeProfitValue => (\n\t\t\t\t\t\t\t<Optional value={renderOptionalPipsValue(takeProfitValue, pipsSize, precision)} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t</SymbolInfoItem>\n\t\t\t\t<SymbolInfoItem theme={theme || infoItemCss} label={tspan('positionDetailsStopLoss', 'Stop loss')}>\n\t\t\t\t\t<RemoteDataState\n\t\t\t\t\t\tdata={stopLossValue}\n\t\t\t\t\t\tsuccess={stopLossValue => (\n\t\t\t\t\t\t\t<Optional value={renderOptionalPipsValue(stopLossValue, pipsSize, precision)} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t</SymbolInfoItem>\n\t\t\t\t<SymbolInfoItem theme={theme || infoItemCss} label={tspan('positionDetailsSwap', 'Swap')}>\n\t\t\t\t\t<RemoteDataState data={swap} success={swap => <Optional value={swap} />} />\n\t\t\t\t</SymbolInfoItem>\n\t\t\t\t<SymbolInfoItem theme={theme || infoItemCss} label={tspan('positionDetailsCommission', 'Commission')}>\n\t\t\t\t\t<RemoteDataState data={commission} success={commission => <Optional value={commission} />} />\n\t\t\t\t</SymbolInfoItem>\n\t\t\t</Fragment>\n\t\t);\n\t}),\n);\n","import * as React from 'react';\nimport { Fragment, memo, useCallback } from 'react';\nimport { Option } from 'fp-ts/lib/Option';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { SidePanel } from '../../../../ui-common/side-panel/side-panel.component';\nimport { CloseButton } from '../../../../ui-common/close-button/close-button.component';\nimport { PositionSide, HeaderData } from '../../../../ui-common/position-details/position-details.model';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { RouteLink } from '../../../../ui-common/route-link/containers/route-link.container';\nimport { routes } from '../../../../ui-common/routes';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport { PositionDetailsCommomn } from '../../../../ui-common/position-details/position-details.component';\nimport { Button } from '../../../../ui-common/button/button.component';\nimport * as buttonCss from './theme/button.child.module.css';\nimport * as css from './theme/position-details.module.css';\n\nexport type PositionDetailsProps = {\n\tuid: string;\n\tpipsSize: number;\n\taccountCurrency: string;\n\tprecision: number;\n\theaderData: RemoteData<Error, HeaderData>;\n\tside: RemoteData<Error, PositionSide>;\n\topenPrice: RemoteData<Error, number>;\n\tcurrentPriceAndDirection: RemoteData<Error, Option<number>[]>;\n\tquantity: RemoteData<Error, number>;\n\tsizeInLots: RemoteData<Error, number>;\n\tcurrentValue: RemoteData<Error, Option<number>>;\n\topenDateTime: RemoteData<Error, Date>;\n\ttakeProfitValue: RemoteData<Error, Option<number>>;\n\tstopLossValue: RemoteData<Error, Option<number>>;\n\tswap: RemoteData<Error, Option<number>>;\n\tcommission: RemoteData<Error, Option<number>>;\n};\n\nexport const PositionDetails = combineContext(RouteLink, RouteLink =>\n\twithTranslation()(\n\t\tmemo((props: PositionDetailsProps & WithTranslation) => {\n\t\t\tconst { uid, t } = props;\n\n\t\t\tconst renderFooter = useCallback(\n\t\t\t\t() => (\n\t\t\t\t\t<div className={css.buttonWrapper}>\n\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\tto={routes.positions.position.close.root}\n\t\t\t\t\t\t\tvalue={{ positionId: uid }}\n\t\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t\t<Button onClick={onNavigate} isPrimary theme={buttonCss}>\n\t\t\t\t\t\t\t\t\t{tspan('positionDetailsClosePosition', 'Close Position')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\tto={routes.positions.position.edit.profitLossKind.root}\n\t\t\t\t\t\t\tvalue={{ positionId: uid, profitLossKind: 'add-protection' }}\n\t\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t\t<Button onClick={onNavigate} isPrimary theme={buttonCss}>\n\t\t\t\t\t\t\t\t\t{tspan('positionDetailsEditPosition', 'Edit Position')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\t[t],\n\t\t\t);\n\n\t\t\tconst renderHeader = useCallback(\n\t\t\t\t() => (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<span className={css.title}>{tspan('PositionInfoTitle', 'Position info')}</span>\n\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\tto={routes.positions.position.root}\n\t\t\t\t\t\t\tvalue={{ positionId: uid }}\n\t\t\t\t\t\t\trender={({ onNavigate }) => <CloseButton onClick={onNavigate} />}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\t[t],\n\t\t\t);\n\n\t\t\treturn (\n\t\t\t\t<SidePanel header={renderHeader()} footer={renderFooter()} scrollable>\n\t\t\t\t\t<PositionDetailsCommomn {...props} />\n\t\t\t\t</SidePanel>\n\t\t\t);\n\t\t}),\n\t),\n);\n","import { distinctUntilChanged, map, first } from 'rxjs/operators';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { Big } from 'big.js';\nimport { LiveData, LiveDataOption } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { fromOption, success } from '@devexperts/remote-data-ts';\nimport { PositionsStore } from '../../store/positions/positions.store';\nimport { InstrumentStore } from '../../store/instrument/instrument.store';\nimport { MetricsStore } from '../../store/metrics/metrics.store';\nimport { MarketDataStore } from '../../store/market-data/market-data.store';\nimport { ConversionRateStore } from '../../store/conversion-rate/conversion-rate.store';\nimport { AccountViewModel } from '../account/account.view-model';\nimport { PositionSide } from '../../model/positions/position-details.model';\nimport { getCurrentPrice } from '../../model/takeprofit-stoploss/takeprofit-stoploss.utils';\nimport { distinctRDOptionNumber, distinctRDNumber, distinctRDOptionNumberArray } from '../../utils/setoid.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type PositionDetailsViewModel = {\n\tpositionCode$: LiveDataOption<Error, string>;\n\tsymbol$: LiveData<Error, string>;\n\tside$: LiveData<Error, PositionSide>;\n\tprecision$: LiveData<Error, number>;\n\tpipsSize$: LiveData<Error, number>;\n\topenPrice$: LiveData<Error, number>;\n\tcurrentPriceAndDirection$: LiveData<Error, Option<number>[]>;\n\tquantity$: LiveData<Error, number>;\n\tsizeInLots$: LiveData<Error, number>;\n\tcurrentValue$: LiveDataOption<Error, number>;\n\topenDateTime$: LiveData<Error, Date>;\n\ttakeProfitValue$: LiveDataOption<Error, number>;\n\tstopLossValue$: LiveDataOption<Error, number>;\n\tswap$: LiveDataOption<Error, number>;\n\tcommission$: LiveDataOption<Error, number>;\n};\n\ntype PositionDetailsViewModelContext = {\n\tpositionsStore: PositionsStore;\n\tinstrumentStore: InstrumentStore;\n\tmetricsStore: MetricsStore;\n\tmarketDataStore: MarketDataStore;\n\tconversionRateStore: ConversionRateStore;\n\taccountViewModel: AccountViewModel;\n};\n\ntype CreatePositionDetailsViewModel = (uid: string) => PositionDetailsViewModel;\n\nexport const createPositionDetailsViewModel = combineContext(\n\task<PositionDetailsViewModelContext>(),\n\t(positionDetailsContext): CreatePositionDetailsViewModel => uid => {\n\t\tconst {\n\t\t\tpositionsStore: { getPositionByUid },\n\t\t\tinstrumentStore: { getById, getBySymbol },\n\t\t\tmetricsStore: { getMetricsByUid },\n\t\t\tmarketDataStore: { getDataBySymbol },\n\t\t\tconversionRateStore: { getRateBySymbol },\n\t\t\taccountViewModel,\n\t\t} = positionDetailsContext;\n\n\t\tconst metricsData$ = getMetricsByUid(uid);\n\t\tconst position$ = getPositionByUid(uid);\n\n\t\t// positions can be partially closed, so amount may vary\n\t\tconst positionAmount$ = position$.pipe(\n\t\t\tmapRD(position => position.quantity),\n\t\t\tdistinctRDNumber,\n\t\t);\n\t\tconst positionAmountAbs$ = position$.pipe(\n\t\t\tmapRD(position => Math.abs(position.quantity)),\n\t\t\tdistinctRDNumber,\n\t\t);\n\n\t\tconst instrumentData$ = position$.pipe(\n\t\t\tswitchMapRD(({ positionKey: { instrumentId } }) => getById(instrumentId)),\n\t\t\tmapRD(instrument => ({\n\t\t\t\tsymbol: instrument.symbol,\n\t\t\t\tlotSize: instrument.lotSize,\n\t\t\t\tprecision: instrument.precision,\n\t\t\t\tpipsSize: instrument.pipsSize,\n\t\t\t})),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst positionSide$ = positionAmount$.pipe(\n\t\t\tmapRD(amount => (amount > 0 ? PositionSide.Buy : PositionSide.Sell)),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst extractedTakeProfitStopLoss$ = position$.pipe(\n\t\t\tmapRD(position => ({\n\t\t\t\tmaybeTakeProfitValue: pipe(\n\t\t\t\t\tposition.takeProfit,\n\t\t\t\t\tO.chain(takeProfit => takeProfit.fixedPrice),\n\t\t\t\t),\n\t\t\t\tmaybeStopLossValue: pipe(\n\t\t\t\t\tposition.stopLoss,\n\t\t\t\t\tO.chain(stopLoss => stopLoss.fixedPrice),\n\t\t\t\t),\n\t\t\t})),\n\t\t);\n\n\t\tconst quote$ = instrumentData$.pipe(switchMapRD(({ symbol }) => getDataBySymbol(symbol)));\n\n\t\tconst ask$ = quote$.pipe(\n\t\t\tmapRD(({ lastQuote }) =>\n\t\t\t\tpipe(\n\t\t\t\t\tlastQuote,\n\t\t\t\t\tO.chain(({ ask }) => ask),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\t\tconst bid$ = quote$.pipe(\n\t\t\tmapRD(({ lastQuote }) =>\n\t\t\t\tpipe(\n\t\t\t\t\tlastQuote,\n\t\t\t\t\tO.chain(({ bid }) => bid),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\t\tconst askDirection$ = quote$.pipe(\n\t\t\tmapRD(({ lastQuote }) =>\n\t\t\t\tpipe(\n\t\t\t\t\tlastQuote,\n\t\t\t\t\tO.map(({ askDirection }) => askDirection),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\t\tconst bidDirection$ = quote$.pipe(\n\t\t\tmapRD(({ lastQuote }) =>\n\t\t\t\tpipe(\n\t\t\t\t\tlastQuote,\n\t\t\t\t\tO.map(({ bidDirection }) => bidDirection),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst currentPriceDirectionTuple$ = combineLatestRD(\n\t\t\tpositionSide$,\n\t\t\task$,\n\t\t\tbid$,\n\t\t\taskDirection$,\n\t\t\tbidDirection$,\n\t\t).pipe(\n\t\t\tmapRD(([side, ask, bid, askDirection, bidDirection]) => {\n\t\t\t\tswitch (side) {\n\t\t\t\t\tcase PositionSide.Sell:\n\t\t\t\t\t\treturn [ask, askDirection];\n\t\t\t\t\tcase PositionSide.Buy:\n\t\t\t\t\t\treturn [bid, bidDirection];\n\t\t\t\t}\n\t\t\t}),\n\t\t\tdistinctRDOptionNumberArray,\n\t\t);\n\n\t\tconst symbol$ = instrumentData$.pipe(mapRD(data => data.symbol));\n\n\t\tconst baseCurrency$ = accountViewModel.current$.pipe(\n\t\t\tdistinctUntilChanged((a, b) => a.baseCurrency === b.baseCurrency),\n\t\t\tmap(currentAccount => success<Error, string>(currentAccount.baseCurrency)),\n\t\t);\n\n\t\tconst conversionRate$ = symbol$.pipe(\n\t\t\tswitchMapRD(symbol => {\n\t\t\t\tconst currency$ = getBySymbol(symbol).pipe(\n\t\t\t\t\tmap(instrumentRD =>\n\t\t\t\t\t\tinstrumentRD.chain(instrument =>\n\t\t\t\t\t\t\tfromOption(instrument.currency, () => new Error('There is no currency in this instrument')),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\treturn combineLatestRD(currency$, baseCurrency$).pipe(\n\t\t\t\t\tswitchMapRD(([currency, baseCurrency]) => getRateBySymbol(currency, baseCurrency)),\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\n\t\tconst value$ = combineLatestRD(symbol$, positionAmount$).pipe(\n\t\t\tswitchMapRD(([symbol, quantity]) =>\n\t\t\t\tcombineLatestRD(getDataBySymbol(symbol), conversionRate$).pipe(\n\t\t\t\t\tmapRD(([marketData, conversionRateData]) => {\n\t\t\t\t\t\tconst { conversionRate } = conversionRateData;\n\t\t\t\t\t\tconst isQuantityPositive = quantity > 0;\n\t\t\t\t\t\treturn pipe(\n\t\t\t\t\t\t\tconversionRate,\n\t\t\t\t\t\t\tO.chain(rate => {\n\t\t\t\t\t\t\t\tconst currentPrice = getCurrentPrice(isQuantityPositive)(marketData);\n\t\t\t\t\t\t\t\treturn pipe(\n\t\t\t\t\t\t\t\t\tcurrentPrice,\n\t\t\t\t\t\t\t\t\tO.chain(price =>\n\t\t\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\t\t\trate.value,\n\t\t\t\t\t\t\t\t\t\t\tO.map(value => Math.abs(quantity) * price * value),\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t);\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\treturn {\n\t\t\tpositionCode$: position$.pipe(\n\t\t\t\tmapRD(({ positionKey: { positionCode } }) => positionCode),\n\t\t\t\tfirst(),\n\t\t\t),\n\t\t\tsymbol$: instrumentData$.pipe(mapRD(({ symbol }) => symbol)),\n\t\t\tside$: positionSide$,\n\t\t\tprecision$: instrumentData$.pipe(mapRD(({ precision }) => precision)),\n\t\t\tpipsSize$: instrumentData$.pipe(mapRD(({ pipsSize }) => pipsSize)),\n\t\t\topenPrice$: position$.pipe(\n\t\t\t\tmapRD(({ costBasis }) => Math.abs(costBasis)),\n\t\t\t\tfirst(),\n\t\t\t),\n\t\t\tcurrentPriceAndDirection$: currentPriceDirectionTuple$,\n\t\t\tquantity$: positionAmountAbs$,\n\t\t\tsizeInLots$: combineLatestRD(positionAmountAbs$, instrumentData$).pipe(\n\t\t\t\tmapRD(([positionAmount, { lotSize }]) => Number(Big(positionAmount).div(lotSize))),\n\t\t\t\tdistinctRDNumber,\n\t\t\t),\n\t\t\tcurrentValue$: value$,\n\t\t\topenDateTime$: position$.pipe(\n\t\t\t\tmapRD(({ time }) => time),\n\t\t\t\tfirst(),\n\t\t\t),\n\t\t\ttakeProfitValue$: extractedTakeProfitStopLoss$.pipe(\n\t\t\t\tmapRD(({ maybeTakeProfitValue }) => maybeTakeProfitValue),\n\t\t\t\tdistinctRDOptionNumber,\n\t\t\t),\n\t\t\tstopLossValue$: extractedTakeProfitStopLoss$.pipe(\n\t\t\t\tmapRD(({ maybeStopLossValue }) => maybeStopLossValue),\n\t\t\t\tdistinctRDOptionNumber,\n\t\t\t),\n\t\t\tswap$: metricsData$.pipe(\n\t\t\t\tmapRD(({ swap }) => swap),\n\t\t\t\tdistinctRDOptionNumber,\n\t\t\t),\n\t\t\tcommission$: metricsData$.pipe(\n\t\t\t\tmapRD(({ commission }) => commission),\n\t\t\t\tdistinctRDOptionNumber,\n\t\t\t),\n\t\t};\n\t},\n);\n","import * as React from 'react';\nimport { memo, useCallback } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { empty } from 'fp-ts/lib/Record';\nimport * as classNames from 'classnames';\nimport { ButtonCta } from '../../button/button-cta.component';\nimport { EmptyScreenIcon } from '../../icons/empty-screen.icon';\nimport { EmptyScreenFundIcon } from '../../icons/empty-screen-fund.icon';\nimport { EmptyScreenSearchIcon } from '../../icons/empty-screen-search.icon';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { MakeTheme } from '../../../utils/theme.utils';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { RouteLink } from '../../route-link/containers/route-link.container';\nimport { routes } from '../../routes';\nimport { tspan } from '../../../utils/i18n.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { RegistrationButton } from '../../../ui-desktop/ui-kit/components/preview-mode/components/registration-button.component';\n\nimport * as css from './theme/empty-screen.module.css';\nimport * as buttonCss from './theme/button.child.module.css';\n\nexport enum ScreenType {\n\tPositions = '* POSITIONS *',\n\tOrders = '* ORDERS *',\n\tHistory = '* HISTORY *',\n\tHistorySearch = '* HISTORY_SEARCH *',\n\tDeposit = '* DEPOSIT *',\n}\n\nexport type EmptyScreenProps = {\n\ttheme: MakeTheme<\n\t\t'container' | 'content' | 'iconContainer' | 'textWrapper' | 'title' | 'subtitle' | 'title_preview'\n\t>;\n\tscreenType: ScreenType;\n\tisZeroEquity: Option<boolean>;\n\tisCurrentDemo: boolean;\n\tpreviewMode: Option<boolean>;\n} & WithTranslation;\n\nconst EmptyScreenRaw = combineContext(RouteLink, RouteLink =>\n\tmemo<EmptyScreenProps>(props => {\n\t\tconst { isCurrentDemo, screenType, isZeroEquity, t, theme, previewMode } = props;\n\n\t\tconst renderButton = useCallback(\n\t\t\t(previewMode: boolean) => {\n\t\t\t\tconst toTrade =\n\t\t\t\t\t!pipe(\n\t\t\t\t\t\tisZeroEquity,\n\t\t\t\t\t\tO.getOrElse(() => false),\n\t\t\t\t\t) || isCurrentDemo;\n\t\t\t\tconst buttonTheme = {\n\t\t\t\t\tcontainer: classNames(buttonCss.container, {\n\t\t\t\t\t\t[buttonCss.container_trade]: toTrade,\n\t\t\t\t\t}),\n\t\t\t\t};\n\n\t\t\t\treturn previewMode ? (\n\t\t\t\t\t<RegistrationButton />\n\t\t\t\t) : (\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={toTrade ? routes.trade.root : routes.crm.deposit.root}\n\t\t\t\t\t\tvalue={empty}\n\t\t\t\t\t\trender={({ onNavigate }) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<ButtonCta theme={buttonTheme} onClick={onNavigate}>\n\t\t\t\t\t\t\t\t\t{toTrade\n\t\t\t\t\t\t\t\t\t\t? tspan('toTrade', 'Back to Trade')\n\t\t\t\t\t\t\t\t\t\t: tspan('fundAccount', 'Fund your Account')}\n\t\t\t\t\t\t\t\t</ButtonCta>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t},\n\t\t\t[isCurrentDemo, isZeroEquity, t],\n\t\t);\n\n\t\tconst renderIconByScreenType = useCallback(\n\t\t\t(screenType: ScreenType) => {\n\t\t\t\tswitch (screenType) {\n\t\t\t\t\tcase ScreenType.Positions:\n\t\t\t\t\t\treturn pipe(\n\t\t\t\t\t\t\tisZeroEquity,\n\t\t\t\t\t\t\tO.map(isZero => (isZero ? <EmptyScreenFundIcon /> : <EmptyScreenIcon />)),\n\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t);\n\t\t\t\t\tcase ScreenType.Orders:\n\t\t\t\t\t\treturn pipe(\n\t\t\t\t\t\t\tisZeroEquity,\n\t\t\t\t\t\t\tO.map(isZero => (isZero ? <EmptyScreenFundIcon /> : <EmptyScreenIcon />)),\n\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t);\n\t\t\t\t\tcase ScreenType.History:\n\t\t\t\t\t\treturn <EmptyScreenIcon />;\n\t\t\t\t\tcase ScreenType.HistorySearch:\n\t\t\t\t\t\treturn <EmptyScreenSearchIcon />;\n\t\t\t\t\tcase ScreenType.Deposit:\n\t\t\t\t\t\treturn <EmptyScreenFundIcon />;\n\t\t\t\t}\n\t\t\t},\n\t\t\t[isZeroEquity],\n\t\t);\n\n\t\tconst getTitleByScreenType = useCallback(\n\t\t\t(screenType: ScreenType, previewMode: boolean) => {\n\t\t\t\tif (previewMode) {\n\t\t\t\t\tswitch (screenType) {\n\t\t\t\t\t\tcase ScreenType.Positions:\n\t\t\t\t\t\t\treturn tspan(\n\t\t\t\t\t\t\t\t'continuerRegistrationPagePositionsText',\n\t\t\t\t\t\t\t\t'Continue registration in order to view positions',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tcase ScreenType.Orders:\n\t\t\t\t\t\t\treturn tspan(\n\t\t\t\t\t\t\t\t'continuerRegistrationPageOrdersText',\n\t\t\t\t\t\t\t\t'Continue registration in order to view positions orders',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tcase ScreenType.History:\n\t\t\t\t\t\t\treturn tspan(\n\t\t\t\t\t\t\t\t'continuerRegistrationPageHistoryText',\n\t\t\t\t\t\t\t\t'Continue registration in order to view positions history',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tcase ScreenType.Deposit:\n\t\t\t\t\t\t\treturn tspan(\n\t\t\t\t\t\t\t\t'continuerRegistrationPageDepositText',\n\t\t\t\t\t\t\t\t'Continue registration in order to deposit your funds',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tswitch (screenType) {\n\t\t\t\t\tcase ScreenType.Positions:\n\t\t\t\t\t\treturn tspan('noPositions', 'You have no open positions');\n\t\t\t\t\tcase ScreenType.Orders:\n\t\t\t\t\t\treturn tspan('noOrders', 'You have no pending orders');\n\t\t\t\t\tcase ScreenType.History:\n\t\t\t\t\t\treturn tspan('noHistory', 'You did not open any trade yet');\n\t\t\t\t\tcase ScreenType.HistorySearch:\n\t\t\t\t\t\treturn tspan('noHistorySearch', 'No trades matching your request');\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t},\n\t\t\t[t],\n\t\t);\n\n\t\tconst getSubTitleByScreenType = useCallback(\n\t\t\t(screenType: ScreenType) => {\n\t\t\t\tswitch (screenType) {\n\t\t\t\t\tcase ScreenType.Orders:\n\t\t\t\t\tcase ScreenType.History:\n\t\t\t\t\tcase ScreenType.Positions:\n\t\t\t\t\t\treturn pipe(\n\t\t\t\t\t\t\tisZeroEquity,\n\t\t\t\t\t\t\tO.exists(isZero => isZero === true),\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t? tspan('fundToStartTrade', 'Fund your account to start trading')\n\t\t\t\t\t\t\t: null;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t},\n\t\t\t[t, isZeroEquity],\n\t\t);\n\n\t\treturn pipe(\n\t\t\tpreviewMode,\n\t\t\tO.map(previewMode => (\n\t\t\t\t<section className={theme.container}>\n\t\t\t\t\t<div className={theme.content}>\n\t\t\t\t\t\t<div className={theme.iconContainer}>{renderIconByScreenType(screenType)}</div>\n\t\t\t\t\t\t<div className={theme.textWrapper}>\n\t\t\t\t\t\t\t<h2 className={classNames(theme.title, { [theme.title_preview as string]: previewMode })}>\n\t\t\t\t\t\t\t\t{getTitleByScreenType(screenType, previewMode)}\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t<div className={theme.subtitle}>{getSubTitleByScreenType(screenType)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{renderButton(previewMode)}\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t)),\n\t\t\tO.toNullable,\n\t\t);\n\t}),\n);\n\nconst wTheme = {\n\t...css,\n};\n\nexport const EmptyScreen = combineContext(EmptyScreenRaw, EmptyScreenRaw =>\n\twithTranslation()(withTheme(Symbol(), wTheme)(EmptyScreenRaw)),\n);\n","import { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { PositionDetails } from '../../components/position-details/position-details.component';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport {\n\tPositionDetailsViewModel,\n\tcreatePositionDetailsViewModel,\n} from '../../../../view-model/positions/position-details.view-model';\nimport { createSelector } from 'reselect';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { map } from 'rxjs/operators';\nimport { AccountViewModel } from '../../../../view-model/account/account.view-model';\nimport { currencyStringToSymbol } from '../../../../utils/currency.utils';\n\nexport type PositionDetailsContainerContext = {\n\tpositionDetailsViewModel: PositionDetailsViewModel;\n\taccountViewModel: AccountViewModel;\n};\n\nconst FALLBACK_PIPSSIZE_VALUE = 0.001;\nconst FALLBACK_PRECISION_VALUE = 5;\n\nexport const Container = combineContext(PositionDetails, ask<PositionDetailsContainerContext>(), (PositionDetails, e) =>\n\twithRXWithDefaults(PositionDetails)(() => {\n\t\tconst {\n\t\t\tpositionCode$,\n\t\t\tsymbol$,\n\t\t\tside$,\n\t\t\tprecision$,\n\t\t\tpipsSize$,\n\t\t\topenPrice$,\n\t\t\tcurrentPriceAndDirection$,\n\t\t\tquantity$,\n\t\t\tsizeInLots$,\n\t\t\tcurrentValue$,\n\t\t\topenDateTime$,\n\t\t\ttakeProfitValue$,\n\t\t\tstopLossValue$,\n\t\t\tswap$,\n\t\t\tcommission$,\n\t\t} = e.positionDetailsViewModel;\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\taccountCurrency: e.accountViewModel.current$.pipe(\n\t\t\t\t\tmap(data => currencyStringToSymbol(data.baseCurrency)),\n\t\t\t\t),\n\t\t\t\tpipsSize: pipsSize$.pipe(map(pipsSize => pipsSize.getOrElse(FALLBACK_PIPSSIZE_VALUE))),\n\t\t\t\tprecision: precision$.pipe(map(precision => precision.getOrElse(FALLBACK_PRECISION_VALUE))),\n\t\t\t\theaderData: combineLatestRD(symbol$, positionCode$).pipe(\n\t\t\t\t\tmapRD(([symbol, positionCode]) => ({\n\t\t\t\t\t\tsymbol,\n\t\t\t\t\t\tpositionCode,\n\t\t\t\t\t})),\n\t\t\t\t),\n\t\t\t\tside: side$,\n\t\t\t\topenPrice: openPrice$,\n\t\t\t\tcurrentPriceAndDirection: currentPriceAndDirection$,\n\t\t\t\tquantity: quantity$,\n\t\t\t\tsizeInLots: sizeInLots$,\n\t\t\t\tcurrentValue: currentValue$,\n\t\t\t\topenDateTime: openDateTime$,\n\t\t\t\ttakeProfitValue: takeProfitValue$,\n\t\t\t\tstopLossValue: stopLossValue$,\n\t\t\t\tswap: swap$,\n\t\t\t\tcommission: commission$,\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\taccountCurrency: '',\n\t\t\t\tpipsSize: FALLBACK_PIPSSIZE_VALUE,\n\t\t\t\tprecision: FALLBACK_PRECISION_VALUE,\n\t\t\t\theaderData: pending,\n\t\t\t\tside: pending,\n\t\t\t\topenPrice: pending,\n\t\t\t\tcurrentPriceAndDirection: pending,\n\t\t\t\tquantity: pending,\n\t\t\t\tsizeInLots: pending,\n\t\t\t\tcurrentValue: pending,\n\t\t\t\topenDateTime: pending,\n\t\t\t\ttakeProfitValue: pending,\n\t\t\t\tstopLossValue: pending,\n\t\t\t\tswap: pending,\n\t\t\t\tcommission: pending,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const PositionDetailsContainer = combineContext(\n\tdeferContext(Container, 'positionDetailsViewModel'),\n\tcreatePositionDetailsViewModel,\n\t(Container, createPositionDetailsViewModel) =>\n\t\trunOnMount(Container, props => {\n\t\t\tconst uid = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.uid,\n\t\t\t);\n\t\t\treturn createSelector(\n\t\t\t\tuid,\n\t\t\t\tuid => ({\n\t\t\t\t\tpositionDetailsViewModel: createPositionDetailsViewModel(uid),\n\t\t\t\t}),\n\t\t\t);\n\t\t}),\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../icon-wrapper/icon-wrapper.component';\n\nexport const EmptyScreenIcon = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 276.779 188.319\">\n\t\t\t<g transform=\"translate(1.5 1.5)\">\n\t\t\t\t<path\n\t\t\t\t\td=\"M367.427 574.92H313.07l4.108-3.833a8.134 8.134 0 0 0 2.583-5.941v-16.1h40.979v16.1a8.128 8.128 0 0 0 2.577 5.941z\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\ttransform=\"translate(-203.449 -389.6)\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M278.279 475.93v11.727c0 5.347-5.051 9.68-11.282 9.68H15.782c-6.234 0-11.282-4.337-11.282-9.68V475.93zM146.1 485.859c0-2.24-2.111-4.055-4.713-4.055s-4.713 1.813-4.713 4.055 2.111 4.047 4.713 4.047 4.713-1.813 4.713-4.047z\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\ttransform=\"translate(-4.5 -337.891)\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M278.279 14.18v128.359H4.5V14.18c0-5.343 5.051-9.68 11.282-9.68h251.211c6.238 0 11.286 4.337 11.286 9.68z\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\ttransform=\"translate(-4.5 -4.5)\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M396.107 495.99a4.051 4.051 0 1 1-4.047 4.055 4.049 4.049 0 0 1 4.047-4.055z\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\ttransform=\"translate(-259.291 -352.077)\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M278.279 142.539v11.727c0 5.347-5.051 9.68-11.282 9.68H15.782c-6.234 0-11.282-4.337-11.282-9.68V14.18c0-5.343 5.051-9.68 11.282-9.68h251.211c6.234 0 11.282 4.337 11.282 9.68v128.359z\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tstroke=\"#334656\"\n\t\t\t\t\tstrokeMiterlimit=\"10\"\n\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\ttransform=\"translate(-4.5 -4.5)\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M4.5 475.93h274.669\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tstroke=\"#334656\"\n\t\t\t\t\tstrokeMiterlimit=\"10\"\n\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\ttransform=\"translate(-4.5 -337.891)\"\n\t\t\t\t/>\n\t\t\t\t<g transform=\"translate(90.882 159.447)\">\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M319.751 549.04v16.1a8.134 8.134 0 0 1-2.583 5.941l-4.108 3.833\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tstroke=\"#334656\"\n\t\t\t\t\t\tstrokeMiterlimit=\"10\"\n\t\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\t\ttransform=\"translate(-294.349 -549.04)\"\n\t\t\t\t\t/>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M475.86 549.04v16.1a8.129 8.129 0 0 0 2.577 5.941l4.114 3.833\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tstroke=\"#334656\"\n\t\t\t\t\t\tstrokeMiterlimit=\"10\"\n\t\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\t\ttransform=\"translate(-409.48 -549.04)\"\n\t\t\t\t\t/>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M249.16 637.4h91.775\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tstroke=\"#334656\"\n\t\t\t\t\t\tstrokeMiterlimit=\"10\"\n\t\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\t\ttransform=\"translate(-249.16 -611.527)\"\n\t\t\t\t\t/>\n\t\t\t\t</g>\n\t\t\t\t<path\n\t\t\t\t\td=\"M400.153 500.045a4.047 4.047 0 1 1-4.047-4.055 4.048 4.048 0 0 1 4.047 4.055z\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tstroke=\"#334656\"\n\t\t\t\t\tstrokeMiterlimit=\"10\"\n\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\ttransform=\"translate(-259.291 -352.077)\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t\t<path\n\t\t\t\tfill=\"#334656\"\n\t\t\t\td=\"M0 90.968h15.839v-55.98H0zm26.4 0h15.836V0H26.4zm26.4 0h15.834V55.98H52.8zm26.4 0h15.831V20.993H79.193zm26.4-45.484v45.484h15.839V45.484z\"\n\t\t\t\ttransform=\"translate(77.91 26.989)\"\n\t\t\t/>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../icon-wrapper/icon-wrapper.component';\n\nexport const EmptyScreenFundIcon = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 169.159 169.159\">\n\t\t\t<g fill=\"none\" stroke=\"#334656\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"3\">\n\t\t\t\t<circle cx=\"24.12\" cy=\"24.12\" r=\"24.12\" transform=\"translate(84.579 1.5)\" />\n\t\t\t\t<g transform=\"translate(140.859 57.78)\">\n\t\t\t\t\t<circle cx=\"8.04\" cy=\"8.04\" r=\"8.04\" transform=\"translate(2.68)\" />\n\t\t\t\t\t<path d=\"M10.72 16.08c13.4 0 16.08-8.04 16.08-8.04M0 26.8s18.76 2.68 18.76-18.76\" />\n\t\t\t\t</g>\n\t\t\t\t<path d=\"M60.459 68.499h37.52M73.859 41.984a118.884 118.884 0 0 0-13.4 2.4c-5.36-10.72-21.44-13.4-32.16-10.72l5.36 24.12a56.333 56.333 0 0 0-16.08 29.48L1.5 84.58l2.68 34.84 13.4-2.68c3.412 14.421 13.269 25.653 24.12 32.16l-2.68 18.76h26.8v-10.72s13.4 2.68 26.8 0v10.714h26.8l-2.68-18.76c14.641-8.777 24.12-24.68 24.12-48.24 0-17.313-4.891-30.638-13.4-40.2\" />\n\t\t\t</g>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import * as React from 'react';\nimport { IconWrapper } from '../icon-wrapper/icon-wrapper.component';\n\nexport const EmptyScreenSearchIcon: React.FunctionComponent = () => (\n\t<IconWrapper>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 283.72 194.539\">\n\t\t\t<g transform=\"translate(-869.448 -402.63)\">\n\t\t\t\t<path\n\t\t\t\t\td=\"M-11727.528-4005.348h-254a11.922 11.922 0 0 1-8.487-3.517 11.915 11.915 0 0 1-3.515-8.482v-93.7h3v92.7a10.012 10.012 0 0 0 10 10h252a10.012 10.012 0 0 0 10-10v-138a10.012 10.012 0 0 0-10-10h-206.7v-3h207.7a11.91 11.91 0 0 1 8.482 3.517 11.913 11.913 0 0 1 3.517 8.485v140a11.908 11.908 0 0 1-3.517 8.482 11.91 11.91 0 0 1-8.48 3.515z\"\n\t\t\t\t\tfill=\"#334656\"\n\t\t\t\t\ttransform=\"translate(12868.697 4577.697)\"\n\t\t\t\t/>\n\t\t\t\t<g transform=\"translate(876.728 410.349)\">\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M367.427 574.92H313.07l4.108-3.833a8.134 8.134 0 0 0 2.583-5.941v-16.1h40.979v16.1a8.128 8.128 0 0 0 2.577 5.941z\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\ttransform=\"translate(-203.449 -389.6)\"\n\t\t\t\t\t/>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M278.279 475.93v11.727c0 5.347-5.051 9.68-11.282 9.68H15.782c-6.234 0-11.282-4.337-11.282-9.68V475.93zM146.1 485.859c0-2.24-2.111-4.055-4.713-4.055s-4.713 1.813-4.713 4.055 2.111 4.047 4.713 4.047 4.713-1.813 4.713-4.047z\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\ttransform=\"translate(-4.5 -337.891)\"\n\t\t\t\t\t/>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M278.279 14.18v128.359H4.5V14.18c0-5.343 5.051-9.68 11.282-9.68h251.211c6.238 0 11.286 4.337 11.286 9.68z\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\ttransform=\"translate(-4.5 -4.5)\"\n\t\t\t\t\t/>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M396.107 495.99a4.051 4.051 0 1 1-4.047 4.055 4.049 4.049 0 0 1 4.047-4.055z\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\ttransform=\"translate(-259.291 -352.077)\"\n\t\t\t\t\t/>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M4.5 475.93h274.669\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tstroke=\"#334656\"\n\t\t\t\t\t\tstrokeMiterlimit=\"10\"\n\t\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\t\ttransform=\"translate(-4.5 -337.891)\"\n\t\t\t\t\t/>\n\t\t\t\t\t<g transform=\"translate(90.882 159.447)\">\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M319.751 549.04v16.1a8.134 8.134 0 0 1-2.583 5.941l-4.108 3.833\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\tstroke=\"#334656\"\n\t\t\t\t\t\t\tstrokeMiterlimit=\"10\"\n\t\t\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\t\t\ttransform=\"translate(-294.349 -549.04)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M475.86 549.04v16.1a8.129 8.129 0 0 0 2.577 5.941l4.114 3.833\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\tstroke=\"#334656\"\n\t\t\t\t\t\t\tstrokeMiterlimit=\"10\"\n\t\t\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\t\t\ttransform=\"translate(-409.48 -549.04)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M249.16 637.4h91.775\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\tstroke=\"#334656\"\n\t\t\t\t\t\t\tstrokeMiterlimit=\"10\"\n\t\t\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\t\t\ttransform=\"translate(-249.16 -611.527)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</g>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M400.153 500.045a4.047 4.047 0 1 1-4.047-4.055 4.048 4.048 0 0 1 4.047 4.055z\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tstroke=\"#334656\"\n\t\t\t\t\t\tstrokeMiterlimit=\"10\"\n\t\t\t\t\t\tstrokeWidth=\"3\"\n\t\t\t\t\t\ttransform=\"translate(-259.291 -352.077)\"\n\t\t\t\t\t/>\n\t\t\t\t</g>\n\t\t\t\t<path\n\t\t\t\t\td=\"M0 90.968h15.839v-55.98H0zm26.4 0h15.836V0H26.4zm26.4 0h15.834V55.98H52.8zm26.4 0h15.831V20.993H79.193zm26.4-45.484v45.484h15.839V45.484z\"\n\t\t\t\t\tfill=\"#334656\"\n\t\t\t\t\ttransform=\"translate(953.138 435.838)\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M55.976-.368a1.189 1.189 0 0 1 .33.88 1.608 1.608 0 0 1-.33.99l-1.1.99a1.368 1.368 0 0 1-.99.44 1.045 1.045 0 0 1-.88-.44L38.821-11.7a1.045 1.045 0 0 1-.44-.88v-1.1a22.563 22.563 0 0 1-7.093 4.454 22.58 22.58 0 0 1-8.413 1.595 22.217 22.217 0 0 1-11.492-3.079 23.111 23.111 0 0 1-8.3-8.3A22.217 22.217 0 0 1 0-30.5a22.217 22.217 0 0 1 3.079-11.493 23.111 23.111 0 0 1 8.3-8.3 22.217 22.217 0 0 1 11.492-3.079A22.217 22.217 0 0 1 34.367-50.3a23.111 23.111 0 0 1 8.3 8.3 22.217 22.217 0 0 1 3.082 11.5 22.58 22.58 0 0 1-1.595 8.413 22.563 22.563 0 0 1-4.454 7.093h1.1a1.368 1.368 0 0 1 .99.44zm-33.1-10.777a19.05 19.05 0 0 0 9.733-2.584 19.067 19.067 0 0 0 7.038-7.038A19.05 19.05 0 0 0 42.23-30.5a19.05 19.05 0 0 0-2.584-9.733 19.067 19.067 0 0 0-7.038-7.038 19.05 19.05 0 0 0-9.733-2.584 19.05 19.05 0 0 0-9.733 2.584A19.067 19.067 0 0 0 6.1-40.233 19.05 19.05 0 0 0 3.519-30.5 19.05 19.05 0 0 0 6.1-20.768a19.067 19.067 0 0 0 7.038 7.038 19.05 19.05 0 0 0 9.736 2.585z\"\n\t\t\t\t\tfill=\"#334656\"\n\t\t\t\t\ttransform=\"translate(869.449 456.005)\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t</IconWrapper>\n);\n","import { Option } from 'fp-ts/lib/Option';\nimport { ReactNode } from 'react';\n\nexport enum OrdersSide {\n\tBuy = '* BUY *',\n\tSell = '* SELL *',\n}\n\nexport enum EditOrdersPreset {\n\tTakeProfit = '* TAKE_PROFIT *',\n\tStopLoss = '* STOP_LOSS *',\n\tNone = '* NONE *',\n}\n\nexport enum TableSize {\n\tSmall = '* SMALL *',\n\tLarge = '* LARGE *',\n}\n\nexport type OrdersTableItem = {\n\torderId: number;\n\tsymbol: string;\n\tprecision: number;\n\tside: OrdersSide;\n\tquantity: Option<number>;\n\ttriggerPrice: Option<number>;\n\tdistance: Option<number>;\n\tstopLoss: Option<number>;\n\ttakeProfit: Option<number>;\n\tvalidUntil: Option<Date>;\n};\n\nexport type ConfigItem = {\n\twidth: number;\n\tdataKey: keyof OrdersTableItem | 'controls';\n};\n\nexport type OrdersTableColumnNames = {\n\tsymbol: ReactNode;\n\tside: ReactNode;\n\tquantity: ReactNode;\n\ttriggerPrice: ReactNode;\n\tdistance: ReactNode;\n\tstopLoss: ReactNode;\n\ttakeProfit: ReactNode;\n\tvalidUntil: ReactNode;\n};\n","import { combineContext, ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../utils/withRXWithDefaults';\nimport { AccountViewModel } from '../../../view-model/account/account.view-model';\nimport { map, first } from 'rxjs/operators';\nimport * as O from 'fp-ts/lib/Option';\nimport { EmptyScreen } from '../../../ui-common/empty-screen/components/empty-screen.component';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type EmptyScreenContainerContext = {\n\taccountViewModel: AccountViewModel;\n};\n\nexport const EmptyScreenContainer = combineContext(ask<EmptyScreenContainerContext>(), EmptyScreen, (e, EmptyScreen) =>\n\twithRXWithDefaults(EmptyScreen)(() => {\n\t\tconst { equity$, current$ } = e.accountViewModel;\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tisZeroEquity: equity$.pipe(\n\t\t\t\t\tmap(someEquity =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\tsomeEquity,\n\t\t\t\t\t\t\tO.map(equity => equity === 0),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tisCurrentDemo: current$.pipe(\n\t\t\t\t\tfirst(),\n\t\t\t\t\tmap(account => account.paperMoney),\n\t\t\t\t),\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tisZeroEquity: O.none,\n\t\t\t\tisCurrentDemo: false,\n\t\t\t\tpreviewMode: O.some(false),\n\t\t\t},\n\t\t};\n\t}),\n);\n","import * as React from 'react';\nimport { PureComponent, Fragment } from 'react';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { Route } from '../../../../ui-common/route/containers/route.container';\nimport { routes } from '../../../../ui-common/routes';\nimport { MatchType } from '../../../../utils/router.utils';\nimport { PositionContainer } from '../../containers/position-table/position-table.container';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { PositionCloseContainer } from '../../../positions/containers/position-close/position-close.container';\nimport { EditingPositionContainer } from '../../../positions/containers/editing-position/editing-position.container';\nimport { PositionDashboardChartContainer } from '../../containers/position-dashboard-chart/position-dashboard-chart.container';\nimport { PositionDetailsContainer } from '../../../positions/containers/position-details/position-details.container';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { ScreenType } from '../../../../ui-common/empty-screen/components/empty-screen.component';\nimport { EmptyScreenContainer } from '../../../empty-screen/containers/empty-screen.container';\nimport { Workspace } from '../../../ui-kit/components/workspace/workspace.component';\nimport { WorkspaceChart } from '../../../ui-kit/components/workspace/workspace-chart.component';\nimport { Redirect } from '../../../../ui-common/redirect/containers/redirect.container';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as css from './theme/positions-dashboard.module.css';\n\nexport type PositionsDashboardProps = {\n\tfirstPositionId: RemoteData<Error, Option<string>>;\n};\n\nexport const PositionsDashboard = combineContext(\n\tRoute,\n\tPositionContainer,\n\tPositionCloseContainer,\n\tEditingPositionContainer,\n\tPositionDetailsContainer,\n\tPositionDashboardChartContainer,\n\tEmptyScreenContainer,\n\tRedirect,\n\t(\n\t\tRoute,\n\t\tPositionContainer,\n\t\tPositionCloseContainer,\n\t\tEditingPositionContainer,\n\t\tPositionDetailsContainer,\n\t\tPositionDashboardChartContainer,\n\t\tEmptyScreenContainer,\n\t\tRedirect,\n\t) => {\n\t\treturn class PositionsDashboard extends PureComponent<PositionsDashboardProps> {\n\t\t\trender() {\n\t\t\t\tconst { firstPositionId } = this.props;\n\n\t\t\t\treturn <RemoteDataState data={firstPositionId} success={this.renderSuccess} />;\n\t\t\t}\n\n\t\t\trenderSuccess = (firstPositionId: Option<string>) => {\n\t\t\t\treturn (\n\t\t\t\t\t<section className={css.container}>\n\t\t\t\t\t\t<div className={css.left}>\n\t\t\t\t\t\t\t<Workspace>\n\t\t\t\t\t\t\t\t<Route match={routes.positions.root} render={this.renderRoot(firstPositionId)} />\n\t\t\t\t\t\t\t</Workspace>\n\t\t\t\t\t\t\t<Route match={routes.positions.position.root} render={this.renderChart} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Route match={routes.positions.position.close.root} exact render={this.renderAside} />\n\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\tmatch={routes.positions.position.edit.profitLossKind.root}\n\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\trender={this.renderEditingPositionAside}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\tmatch={routes.positions.position.info.root}\n\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\trender={this.renderPositionDetailsAside}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</section>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderRoot = (positionId: Option<string>) => () => {\n\t\t\t\treturn pipe(\n\t\t\t\t\tpositionId,\n\t\t\t\t\tO.fold(\n\t\t\t\t\t\t() => (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\tmatch={routes.positions.position.root}\n\t\t\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\t\t\trender={() => <Redirect to={routes.positions.root} value={{}} />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<EmptyScreenContainer screenType={ScreenType.Positions} />\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t),\n\t\t\t\t\t\tpositionId => (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<Route match={routes.positions.position.root} render={this.renderPosition} />\n\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\tmatch={routes.positions.root}\n\t\t\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\t\t\trender={() => (\n\t\t\t\t\t\t\t\t\t\t<Redirect to={routes.positions.position.root} value={{ positionId }} />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderPosition = () => <PositionContainer />;\n\n\t\t\tprivate renderAside = (path: MatchType<typeof routes.positions.position.close.root>) => (\n\t\t\t\t<div className={css.aside}>\n\t\t\t\t\t<PositionCloseContainer uid={path.positionId} />\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\tprivate renderEditingPositionAside = (\n\t\t\t\tpath: MatchType<typeof routes.positions.position.edit.profitLossKind.root>,\n\t\t\t) => (\n\t\t\t\t<div className={css.aside}>\n\t\t\t\t\t<EditingPositionContainer uid={path.positionId} plKind={path.profitLossKind} />\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\tprivate renderPositionDetailsAside = (path: MatchType<typeof routes.positions.position.info.root>) => (\n\t\t\t\t<div className={css.aside}>\n\t\t\t\t\t<PositionDetailsContainer uid={path.positionId} />\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\tprivate renderChart = (path: MatchType<typeof routes.positions.position.root>) => (\n\t\t\t\t<WorkspaceChart>\n\t\t\t\t\t<PositionDashboardChartContainer positionId={path.positionId} />\n\t\t\t\t</WorkspaceChart>\n\t\t\t);\n\t\t};\n\t},\n);\n","import { eqString } from 'fp-ts/lib/Eq';\nimport * as O from 'fp-ts/lib/Option';\nimport { head } from 'fp-ts/lib/Array';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { PositionsDashboard } from '../../components/positions-dashboard/positions-dashboard.component';\nimport { PositionsStore } from '../../../../store/positions/positions.store';\nimport { distinctUntilChangedStrict } from '../../../../utils/live-data.utils';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type PositionDashboardContainerContext = {\n\tpositionsStore: PositionsStore;\n};\n\nexport const PositionDashboardContainer = combineContext(\n\tPositionsDashboard,\n\task<PositionDashboardContainerContext>(),\n\t(PositionsDashboard, e) =>\n\t\twithRXWithDefaults(PositionsDashboard)(() => {\n\t\t\tconst { positionsStore } = e;\n\n\t\t\tconst firstPositionId$ = positionsStore.all$.pipe(\n\t\t\t\tmapRD(list =>\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tlist,\n\t\t\t\t\t\thead,\n\t\t\t\t\t\tO.map(position => position.uid),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tdistinctUntilChangedStrict(O.getEq(eqString)),\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tprops: {\n\t\t\t\t\tfirstPositionId: firstPositionId$,\n\t\t\t\t},\n\t\t\t\tdefaultProps: {\n\t\t\t\t\tfirstPositionId: pending,\n\t\t\t\t},\n\t\t\t};\n\t\t}),\n);\n","import * as React from 'react';\nimport { Router, href, parse } from '../../../utils/router.utils';\nimport { PostMessageClient } from '../../../api/post-message.client';\nimport { asks } from '@devexperts/rx-utils/dist/context.utils';\nimport { WatchlistStore, WatchlistEntity } from '../../../store/watchlist/watchlist.store';\nimport { map, filter, tap, switchMap } from 'rxjs/operators';\nimport { getPath, routes } from '../../routes';\nimport {\n\tisRedirectToTradeWithSymbol,\n\tisRedirectToRealAccount,\n\tisClosePopup,\n\tLocalRedirectPostMessageTO,\n} from '../../../api/post-message/post-message.to';\nimport { not } from 'fp-ts/lib/function';\nimport { combineLatest, merge } from 'rxjs';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { findFirst } from 'fp-ts/lib/Array';\nimport { empty } from 'fp-ts/lib/Record';\nimport { isSuccess, success } from '@devexperts/remote-data-ts';\nimport { isProductionBuild } from '../../../utils/node-env.utils';\nimport { EnvViewModel } from '../../../view-model/env/env.view-model';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\ntype RedirectListenerContext = {\n\trouter: Router;\n\twatchlistStore: WatchlistStore;\n\tpostMessageClient: PostMessageClient;\n\tenvViewModel: EnvViewModel;\n};\n\nexport const RedirectListener = asks((context: RedirectListenerContext) => {\n\tconst {\n\t\trouter,\n\t\twatchlistStore: { categories$ },\n\t\tpostMessageClient: { postMessage$ },\n\t\tenvViewModel,\n\t} = context;\n\n\tconst directLinkRedirect$ = categories$.pipe(\n\t\tmap(categoriesRD =>\n\t\t\tcategoriesRD.map(categories => {\n\t\t\t\tconst symbolAndActionHref = pipe(\n\t\t\t\t\tparse(routes.trade.symbol.actionId.root, router.state.location.pathname),\n\t\t\t\t\tO.map(([{ symbol, action }]) => ({\n\t\t\t\t\t\tsymbol,\n\t\t\t\t\t\taction,\n\t\t\t\t\t})),\n\t\t\t\t\tO.map(params => getValueBySymbol(params.symbol, categories, params.action)),\n\t\t\t\t\tO.filter(O.isSome),\n\t\t\t\t\tO.map(data => data.value),\n\t\t\t\t\tO.map(hrefValue => href(routes.trade.category.symbol.action.root, hrefValue)),\n\t\t\t\t);\n\n\t\t\t\tconst symbolHref = pipe(\n\t\t\t\t\tparse(routes.trade.symbol.root, router.state.location.pathname),\n\t\t\t\t\tO.map(([{ symbol }]) => ({\n\t\t\t\t\t\tsymbol,\n\t\t\t\t\t})),\n\t\t\t\t\tO.map(params => getValueBySymbol(params.symbol, categories)),\n\t\t\t\t\tO.filter(O.isSome),\n\t\t\t\t\tO.map(data => data.value),\n\t\t\t\t\tO.map(hrefValue => href(routes.trade.category.symbol.root, hrefValue)),\n\t\t\t\t);\n\n\t\t\t\treturn pipe(\n\t\t\t\t\tsymbolAndActionHref,\n\t\t\t\t\tO.alt(() => symbolHref),\n\t\t\t\t);\n\t\t\t}),\n\t\t),\n\t\ttap(href => {\n\t\t\tif (href.isSuccess() && O.isSome(href.value)) {\n\t\t\t\trouter.replace(href.value.value);\n\t\t\t}\n\t\t}),\n\t);\n\n\tconst messagesWithMatch$ = postMessage$.pipe(\n\t\tfilter(not(isClosePopup)),\n\t\tfilter(not(isRedirectToRealAccount)),\n\t\tmap(message => ({\n\t\t\t...message,\n\t\t\tmatch: getPath(message as LocalRedirectPostMessageTO),\n\t\t})),\n\t);\n\n\tconst toTradeWithSymbolPostMessage$ = messagesWithMatch$.pipe(filter(isRedirectToTradeWithSymbol));\n\n\tconst toTradeWithSymbolHref$ = combineLatest(toTradeWithSymbolPostMessage$, categories$).pipe(\n\t\tmap(([message, categories]) =>\n\t\t\tcategories.map(categories =>\n\t\t\t\tpipe(\n\t\t\t\t\tgetValueBySymbol(message.payload.symbol, categories, message.payload.action),\n\t\t\t\t\tO.map(hrefValue =>\n\t\t\t\t\t\threfValue.action\n\t\t\t\t\t\t\t? href(routes.trade.category.symbol.action.root, hrefValue)\n\t\t\t\t\t\t\t: href(routes.trade.category.symbol.root, hrefValue),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t),\n\t\t),\n\t);\n\tconst redirectToRealAccount$ = postMessage$.pipe(\n\t\tfilter(isRedirectToRealAccount),\n\t\tmap(message => window.location.replace(message.payload.url)),\n\t);\n\n\tconst otherPostMessages$ = messagesWithMatch$.pipe(filter(not(isRedirectToTradeWithSymbol)));\n\n\tconst otherHref$ = otherPostMessages$.pipe(\n\t\tmap(other => success(O.some(href(getPath(other as LocalRedirectPostMessageTO), empty)))),\n\t);\n\n\tconst localRedirects$ = merge(toTradeWithSymbolHref$, otherHref$).pipe(\n\t\ttap(href => {\n\t\t\tif (href.isSuccess() && O.isSome(href.value)) {\n\t\t\t\trouter.replace(href.value.value);\n\t\t\t}\n\t\t}),\n\t);\n\n\tconst DYListener$ = envViewModel.loadedScripts$.pipe(\n\t\tfilter(isSuccess),\n\t\ttap(DYPush),\n\t\tswitchMap(() => {\n\t\t\treturn router.state$.pipe(tap(DYPush));\n\t\t}),\n\t);\n\n\tconst redirectEffect$ = merge(localRedirects$, directLinkRedirect$, redirectToRealAccount$, DYListener$);\n\n\treturn class RedirectListener extends React.Component {\n\t\tsubscription = redirectEffect$.subscribe();\n\n\t\tcomponentWillUnmount() {\n\t\t\tthis.subscription.unsubscribe();\n\t\t}\n\n\t\trender() {\n\t\t\treturn null;\n\t\t}\n\t};\n});\n\nconst getValueBySymbol = (\n\tsymbol: string,\n\tcategories: WatchlistEntity[],\n\taction = '',\n): Option<{ categoryId: string; symbol: string; action: string }> =>\n\tpipe(\n\t\tcategories,\n\t\tfindFirst(category => category.symbols.includes(symbol)),\n\t\tO.map(category => ({\n\t\t\tcategoryId: category.id,\n\t\t\tsymbol,\n\t\t\taction,\n\t\t})),\n\t);\n\nconst DYPush = () => {\n\tif (isProductionBuild) {\n\t\tDY.API('spa', {\n\t\t\tcontext: {\n\t\t\t\ttype: 'OTHER',\n\t\t\t},\n\t\t\turl: window.location.href,\n\t\t\tcountAsPageview: true,\n\t\t});\n\t}\n};\n","import * as React from 'react';\nimport { Component, ReactNode } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { withTheme } from '@devexperts/react-kit/dist/utils/withTheme';\nimport { Button } from '../button/button.component';\nimport { PURE } from '@devexperts/react-kit/dist/utils/pure';\nimport { MakeTheme } from '../../utils/theme.utils';\nimport { tspan } from '../../utils/i18n.utils';\nimport * as css from './theme/cancel-confirmation.module.css';\nimport * as buttonCss from './theme/button.child.module.css';\nimport * as buttonSubmitCss from './theme/button-submit.child.module.css';\n\nexport type CancelConfirmationProps = {\n\ttheme: MakeTheme<'container' | 'title'>;\n\ttitle: ReactNode;\n\tonSubmit: (e: React.MouseEvent<HTMLButtonElement>) => void;\n\tonCancel: () => void;\n};\n\n@PURE\nclass CancelConfirmationRaw extends Component<CancelConfirmationProps & WithTranslation> {\n\trender() {\n\t\tconst { theme, title } = this.props;\n\t\treturn (\n\t\t\t<div className={theme.container}>\n\t\t\t\t<div className={theme.title}>{title}</div>\n\t\t\t\t<Button onClick={this.handleClose} theme={buttonCss}>\n\t\t\t\t\t{tspan('confirmationDialogNo', 'No')}\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={this.handleSubmit} theme={buttonSubmitCss}>\n\t\t\t\t\t{tspan('confirmationDialogYes', 'Yes')}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n\n\thandleClose = () => {\n\t\tthis.props.onCancel();\n\t};\n\n\thandleSubmit = (e: React.MouseEvent<HTMLButtonElement>) => {\n\t\tthis.props.onSubmit(e);\n\t};\n}\n\nexport const CancelConfirmation = withTheme(Symbol(), css)(withTranslation()(CancelConfirmationRaw));\n","import { RouteLink } from '../../../../ui-common/route-link/containers/route-link.container';\nimport * as React from 'react';\nimport * as cn from 'classnames';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { PureComponent } from 'react';\nimport { routes } from '../../../../ui-common/routes';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { findFirst } from 'fp-ts/lib/Array';\nimport { ListChildComponentProps } from 'react-window';\nimport {\n\tConfigItem,\n\tEditOrdersPreset,\n\tOrdersSide,\n\tOrdersTableItem,\n\tTableSize,\n} from '../orders-table/orders-table.model';\nimport { ReactNode } from 'react';\nimport { Optional } from '../../../../ui-common/optional/optional.component';\nimport { format } from 'date-fns';\nimport { formatNumber } from 'accounting';\nimport { InfoIcon } from '../../../../ui-common/icons/info.icon';\nimport { EditIcon } from '../../../../ui-common/icons/edit.icon';\nimport { DeleteIcon } from '../../../../ui-common/icons/delete.icon';\nimport { CancelConfirmation } from '../../../../ui-common/cancel-confirmation/cancel-confirmation.component';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { AddIcon } from '../../../ui-kit/components/icons/add.icon';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport { Button } from '../../../../ui-common/button/button.component';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\nimport * as O from 'fp-ts/lib/Option';\nimport * as css from './theme/order-entity.module.css';\nimport * as buttonCss from './theme/button.child.module.css';\nimport * as iconButtonCss from './theme/icon-button.child.module.css';\n\nexport type OrderEntityProps = ListChildComponentProps & {\n\trowData: number;\n\tremoteData: RemoteData<Error, OrdersTableItem>;\n\tconfig: ConfigItem[];\n\ttableSize: TableSize;\n\tonClose: (orderId: number) => void;\n};\n\ntype OrderEntityState = {\n\tisConfirmPopupOpened: boolean;\n};\nconst defaultColumnWidth = 150;\n\nexport const OrderEntity = combineContext(RouteLink, RouteLink =>\n\twithTranslation()(\n\t\tclass OrderEntity extends PureComponent<OrderEntityProps & WithTranslation, OrderEntityState> {\n\t\t\treadonly state = {\n\t\t\t\tisConfirmPopupOpened: false,\n\t\t\t};\n\n\t\t\trender() {\n\t\t\t\tconst { remoteData } = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<RemoteDataState data={remoteData} success={this.renderSuccess} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\trenderSuccess = (data: OrdersTableItem) => {\n\t\t\t\tconst { index, style, tableSize, config } = this.props;\n\n\t\t\t\tconst rowColumn = cn(css.rowColumn, {\n\t\t\t\t\t[css.rowColumn_small]: tableSize === TableSize.Small,\n\t\t\t\t});\n\t\t\t\tconst rowColumnRight = cn(rowColumn, css.rowColumn_right);\n\t\t\t\t// const rowColumnLeft = cn(rowColumn, css.rowColumn_left);\n\t\t\t\tconst rowColumnCenter = cn(rowColumn, css.rowColumn_center);\n\t\t\t\tconst triggerPrice = pipe(\n\t\t\t\t\tdata.triggerPrice,\n\t\t\t\t\tO.map(value => formatNumber(value, data.precision)),\n\t\t\t\t);\n\t\t\t\treturn (\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={routes.orders.order.root}\n\t\t\t\t\t\tvalue={{ orderId: data.orderId }}\n\t\t\t\t\t\trender={({ onNavigate, isActive }) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tonClick={this.handleEditClick(onNavigate)}\n\t\t\t\t\t\t\t\tclassName={cn(css.row, { [css.rowSelected]: isActive })}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\trole=\"row\"\n\t\t\t\t\t\t\t\tstyle={style}>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={rowColumn}\n\t\t\t\t\t\t\t\t\tstyle={{ flexBasis: this.getWidthFromConfig(config, 'symbol') }}>\n\t\t\t\t\t\t\t\t\t{data.symbol}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={rowColumnCenter}\n\t\t\t\t\t\t\t\t\tstyle={{ flexBasis: this.getWidthFromConfig(config, 'side') }}>\n\t\t\t\t\t\t\t\t\t{this.getSide(data.side)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={rowColumnRight}\n\t\t\t\t\t\t\t\t\tstyle={{ flexBasis: this.getWidthFromConfig(config, 'quantity') }}>\n\t\t\t\t\t\t\t\t\t<Optional value={data.quantity} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={rowColumnRight}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tflexBasis: this.getWidthFromConfig(config, 'triggerPrice'),\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<Optional value={triggerPrice} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={rowColumnRight}\n\t\t\t\t\t\t\t\t\tstyle={{ flexBasis: this.getWidthFromConfig(config, 'distance') }}>\n\t\t\t\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\t\t\t\tdata.distance,\n\t\t\t\t\t\t\t\t\t\t\tO.map(distance => formatNumber(distance, data.precision)),\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={rowColumnCenter}\n\t\t\t\t\t\t\t\t\tstyle={{ flexBasis: this.getWidthFromConfig(config, 'stopLoss') }}>\n\t\t\t\t\t\t\t\t\t{this.renderStopLossCell(data)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={rowColumnCenter}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tflexBasis: this.getWidthFromConfig(config, 'takeProfit'),\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t{this.renderTakeProfitCell(data)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={rowColumnCenter}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tflexBasis: this.getWidthFromConfig(config, 'validUntil'),\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\t\t\t\tdata.validUntil,\n\t\t\t\t\t\t\t\t\t\t\tO.map(date => format(date, 'mm.dd hh:mm:ss')),\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={rowColumnRight}\n\t\t\t\t\t\t\t\t\tstyle={{ flexBasis: this.getWidthFromConfig(config, 'controls') }}>\n\t\t\t\t\t\t\t\t\t<ul className={css.controls}>\n\t\t\t\t\t\t\t\t\t\t<li className={css.control}>\n\t\t\t\t\t\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\t\t\t\t\t\tto={routes.orders.order.info.root}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={{ orderId: data.orderId }}\n\t\t\t\t\t\t\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className={css.infoCell}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={css.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleClickWithStopPropagation(onNavigate)}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<InfoIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li className={css.control}>\n\t\t\t\t\t\t\t\t\t\t\t<RouteLink\n\t\t\t\t\t\t\t\t\t\t\t\tto={routes.orders.order.edit.profitLossKind.root}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={{ orderId: data.orderId, profitLossKind: 'add-protection' }}\n\t\t\t\t\t\t\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button theme={iconButtonCss} onClick={this.handleEdit(onNavigate)}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EditIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li className={css.control}>\n\t\t\t\t\t\t\t\t\t\t\t<Button theme={iconButtonCss} onClick={this.openConfirmPopup}>\n\t\t\t\t\t\t\t\t\t\t\t\t<DeleteIcon />\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{this.state.isConfirmPopupOpened && (\n\t\t\t\t\t\t\t\t\t<CancelConfirmation\n\t\t\t\t\t\t\t\t\t\ttitle={tspan('orderEntityCancelOrder', 'Cancel this Order?')}\n\t\t\t\t\t\t\t\t\t\tonCancel={this.closeConfirmPopup}\n\t\t\t\t\t\t\t\t\t\tonSubmit={this.handleClose(data.orderId)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\thandleEditClick = (onNavigate: () => void) => (e: React.MouseEvent<HTMLDivElement>) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tonNavigate();\n\t\t\t};\n\n\t\t\thandleAddProtectionClick = (onNavigate: () => void) => (e: React.MouseEvent<HTMLButtonElement>) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tonNavigate();\n\t\t\t};\n\n\t\t\topenConfirmPopup = () => {\n\t\t\t\tthis.setState({ isConfirmPopupOpened: true });\n\t\t\t};\n\n\t\t\tcloseConfirmPopup = () => {\n\t\t\t\tthis.setState({ isConfirmPopupOpened: false });\n\t\t\t};\n\n\t\t\thandleClose = (id: number) => (e: React.MouseEvent<HTMLButtonElement>) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tconst { onClose } = this.props;\n\n\t\t\t\tonClose(id);\n\t\t\t};\n\n\t\t\tprivate renderStopLossCell = (item: OrdersTableItem) => {\n\t\t\t\tconst { tableSize } = this.props;\n\t\t\t\tconst value = pipe(\n\t\t\t\t\titem.stopLoss,\n\t\t\t\t\tO.fold<number, ReactNode>(\n\t\t\t\t\t\t() => this.renderAddProtection(item, EditOrdersPreset.StopLoss),\n\t\t\t\t\t\tdata => (\n\t\t\t\t\t\t\t<span className={tableSize === TableSize.Small ? css.TPSLCell_small : ''}>\n\t\t\t\t\t\t\t\t{formatNumber(data, item.precision)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\n\t\t\t\treturn value;\n\t\t\t};\n\n\t\t\tprivate renderTakeProfitCell = (item: OrdersTableItem) => {\n\t\t\t\tconst { tableSize } = this.props;\n\t\t\t\tconst value = pipe(\n\t\t\t\t\titem.takeProfit,\n\t\t\t\t\tO.fold<number, ReactNode>(\n\t\t\t\t\t\t() => this.renderAddProtection(item, EditOrdersPreset.TakeProfit),\n\t\t\t\t\t\tdata => (\n\t\t\t\t\t\t\t<span className={tableSize === TableSize.Small ? css.TPSLCell_small : ''}>\n\t\t\t\t\t\t\t\t{formatNumber(data, item.precision)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\n\t\t\t\treturn value;\n\t\t\t};\n\n\t\t\tprivate getEditingOrderRouteSuffix = (preset: EditOrdersPreset) => {\n\t\t\t\tswitch (preset) {\n\t\t\t\t\tcase EditOrdersPreset.StopLoss:\n\t\t\t\t\t\treturn 'loss';\n\t\t\t\t\tcase EditOrdersPreset.TakeProfit:\n\t\t\t\t\t\treturn 'profit';\n\t\t\t\t\tcase EditOrdersPreset.None:\n\t\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t};\n\n\t\t\trenderAddProtection = (data: OrdersTableItem, preset: EditOrdersPreset) => {\n\t\t\t\tconst { tableSize } = this.props;\n\t\t\t\tconst { orderId } = data;\n\n\t\t\t\tconst routeSuffix = this.getEditingOrderRouteSuffix(preset);\n\n\t\t\t\treturn (\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={routes.orders.order.edit.profitLossKind.root}\n\t\t\t\t\t\tvalue={{ orderId, profitLossKind: routeSuffix }}\n\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t<Button theme={buttonCss} onClick={this.handleAddProtectionClick(onNavigate)}>\n\t\t\t\t\t\t\t\t{tableSize === TableSize.Large ? (\n\t\t\t\t\t\t\t\t\ttspan('orderEntityAddProtection', '+ Add Protection')\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<i className={css.icon_plus}>\n\t\t\t\t\t\t\t\t\t\t<AddIcon />\n\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate handleEdit = (onNavigate: () => void) => (e: React.MouseEvent<HTMLButtonElement>) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tonNavigate();\n\t\t\t};\n\n\t\t\tprivate handleClickWithStopPropagation = (onNavigate: () => void) => (\n\t\t\t\te: React.MouseEvent<HTMLDivElement>,\n\t\t\t) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tonNavigate();\n\t\t\t};\n\n\t\t\tprivate getSide = (side: OrdersSide): ReactNode => {\n\t\t\t\tswitch (side) {\n\t\t\t\t\tcase OrdersSide.Buy:\n\t\t\t\t\t\treturn <div className={css.green}>{tspan('orderEntityBuy', 'Buy')}</div>;\n\t\t\t\t\tcase OrdersSide.Sell:\n\t\t\t\t\t\treturn <div className={css.red}>{tspan('orderEntitySell', 'Sell')}</div>;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tprivate getWidthFromConfig = (config: ConfigItem[], dataKey: string): number => {\n\t\t\t\tconst currentColumn = findFirst(config, item => {\n\t\t\t\t\treturn item['dataKey'] === dataKey;\n\t\t\t\t});\n\n\t\t\t\treturn pipe(\n\t\t\t\t\tcurrentColumn,\n\t\t\t\t\tO.fold(constant(defaultColumnWidth), value => value.width),\n\t\t\t\t);\n\t\t\t};\n\t\t},\n\t),\n);\n","import { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { OrdersViewModel } from '../../../../view-model/orders/orders.view-model';\nimport { OrderEntity } from '../../components/order-entity/order-entity.component';\nimport { switchMap, map, first } from 'rxjs/operators';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { distinctRDOptionNumber, distinctRDOptionDate } from '../../../../utils/setoid.utils';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { toOrderItem } from '../../../../view-model/orders/orders.utils';\n\nexport type OrderEntityContainerContext = {\n\tordersViewModel: OrdersViewModel;\n};\n\nexport const OrderEntityContainer = combineContext(\n\tOrderEntity,\n\task<OrderEntityContainerContext>(),\n\t(OrderEntity, context) =>\n\t\twithRXWithDefaults(OrderEntity)(props$ => {\n\t\t\tconst { ordersViewModel } = context;\n\n\t\t\tconst orderId$ = props$.pipe(\n\t\t\t\t// rowData is orderId\n\t\t\t\tmap(({ rowData }) => rowData),\n\t\t\t\tfirst(),\n\t\t\t);\n\n\t\t\tconst orderItem$ = orderId$.pipe(\n\t\t\t\tswitchMap(orderId => ordersViewModel.getById(orderId)),\n\t\t\t\tmapRD(toOrderItem),\n\t\t\t);\n\n\t\t\t// constant values\n\t\t\tconst orderIdRD$ = orderItem$.pipe(mapRD(({ orderId }) => orderId));\n\t\t\tconst symbol$ = orderItem$.pipe(mapRD(({ symbol }) => symbol));\n\t\t\tconst precision$ = orderItem$.pipe(mapRD(({ precision }) => precision));\n\t\t\tconst side$ = orderItem$.pipe(mapRD(({ side }) => side));\n\t\t\tconst quantity$ = orderItem$.pipe(mapRD(({ quantity }) => quantity));\n\n\t\t\t// probably will change\n\t\t\tconst triggerPrice$ = orderItem$.pipe(\n\t\t\t\tmapRD(({ triggerPrice }) => triggerPrice),\n\t\t\t\tdistinctRDOptionNumber,\n\t\t\t);\n\t\t\tconst distance$ = orderItem$.pipe(\n\t\t\t\tmapRD(({ distance }) => distance),\n\t\t\t\tdistinctRDOptionNumber,\n\t\t\t);\n\t\t\tconst stopLoss$ = orderItem$.pipe(\n\t\t\t\tmapRD(({ stopLoss }) => stopLoss),\n\t\t\t\tdistinctRDOptionNumber,\n\t\t\t);\n\t\t\tconst takeProfit$ = orderItem$.pipe(\n\t\t\t\tmapRD(({ takeProfit }) => takeProfit),\n\t\t\t\tdistinctRDOptionNumber,\n\t\t\t);\n\t\t\tconst validUntil$ = orderItem$.pipe(\n\t\t\t\tmapRD(({ validUntil }) => validUntil),\n\t\t\t\tdistinctRDOptionDate,\n\t\t\t);\n\n\t\t\tconst combinedConstantData$ = combineLatestRD(orderIdRD$, symbol$, precision$, side$, quantity$).pipe(\n\t\t\t\tfirst(),\n\t\t\t);\n\n\t\t\tconst combinedVariableData$ = combineLatestRD(\n\t\t\t\ttriggerPrice$,\n\t\t\t\tdistance$,\n\t\t\t\tstopLoss$,\n\t\t\t\ttakeProfit$,\n\t\t\t\tvalidUntil$,\n\t\t\t);\n\n\t\t\tconst data$ = combineLatestRD(combinedConstantData$, combinedVariableData$).pipe(\n\t\t\t\tmapRD(\n\t\t\t\t\t([\n\t\t\t\t\t\t[orderId, symbol, precision, side, quantity],\n\t\t\t\t\t\t[triggerPrice, distance, stopLoss, takeProfit, validUntil],\n\t\t\t\t\t]) => ({\n\t\t\t\t\t\torderId,\n\t\t\t\t\t\tsymbol,\n\t\t\t\t\t\tprecision,\n\t\t\t\t\t\tside,\n\t\t\t\t\t\tquantity,\n\t\t\t\t\t\ttriggerPrice,\n\t\t\t\t\t\tdistance,\n\t\t\t\t\t\tstopLoss,\n\t\t\t\t\t\ttakeProfit,\n\t\t\t\t\t\tvalidUntil,\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tprops: {\n\t\t\t\t\tremoteData: data$,\n\t\t\t\t},\n\t\t\t\tdefaultProps: {\n\t\t\t\t\tremoteData: pending,\n\t\t\t\t\tonClose: ordersViewModel.onClose,\n\t\t\t\t},\n\t\t\t};\n\t\t}),\n);\n","import { Column, TableCellAlign } from '../../../../ui-common/table-ava/table.model';\nimport { getWidthFromConfig } from '../../../../ui-common/table-ava/table.utils';\nimport { ConfigItem, OrdersTableColumnNames } from './orders-table.model';\n\nexport const OrdersLargeTableConfig: ConfigItem[] = [\n\t{\n\t\twidth: 134,\n\t\tdataKey: 'symbol',\n\t},\n\t{\n\t\twidth: 97,\n\t\tdataKey: 'side',\n\t},\n\t{\n\t\twidth: 105,\n\t\tdataKey: 'quantity',\n\t},\n\t{\n\t\twidth: 121,\n\t\tdataKey: 'triggerPrice',\n\t},\n\t{\n\t\twidth: 120,\n\t\tdataKey: 'distance',\n\t},\n\t{\n\t\twidth: 144,\n\t\tdataKey: 'stopLoss',\n\t},\n\t{\n\t\twidth: 140,\n\t\tdataKey: 'takeProfit',\n\t},\n\t{\n\t\twidth: 166,\n\t\tdataKey: 'validUntil',\n\t},\n\t{\n\t\twidth: 180,\n\t\tdataKey: 'controls',\n\t},\n];\n\nexport const OrdersSmallTableConfig: ConfigItem[] = [\n\t{\n\t\twidth: 145,\n\t\tdataKey: 'symbol',\n\t},\n\t{\n\t\twidth: 45,\n\t\tdataKey: 'side',\n\t},\n\t{\n\t\twidth: 105,\n\t\tdataKey: 'quantity',\n\t},\n\t{\n\t\twidth: 95,\n\t\tdataKey: 'triggerPrice',\n\t},\n\t{\n\t\twidth: 105,\n\t\tdataKey: 'distance',\n\t},\n\t{\n\t\twidth: 75,\n\t\tdataKey: 'stopLoss',\n\t},\n\t{\n\t\twidth: 75,\n\t\tdataKey: 'takeProfit',\n\t},\n\t{\n\t\twidth: 150,\n\t\tdataKey: 'validUntil',\n\t},\n\t{\n\t\twidth: 160,\n\t\tdataKey: 'controls',\n\t},\n];\n\nexport const getColumnsConfig = (config: ConfigItem[], translatedColumnNames: OrdersTableColumnNames): Column[] => [\n\t{\n\t\tlabel: translatedColumnNames.symbol,\n\t\twidth: getWidthFromConfig(config, 'symbol'),\n\t\talign: TableCellAlign.Left,\n\t\tkey: 'symbol',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.side,\n\t\twidth: getWidthFromConfig(config, 'side'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'side',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.quantity,\n\t\twidth: getWidthFromConfig(config, 'quantity'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'quantity',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.triggerPrice,\n\t\twidth: getWidthFromConfig(config, 'triggerPrice'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'triggerPrice',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.distance,\n\t\twidth: getWidthFromConfig(config, 'distance'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'distance',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.stopLoss,\n\t\twidth: getWidthFromConfig(config, 'stopLoss'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'stopLoss',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.takeProfit,\n\t\twidth: getWidthFromConfig(config, 'takeProfit'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'takeProfit',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.validUntil,\n\t\twidth: getWidthFromConfig(config, 'validUntil'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'validUntil',\n\t},\n\t{\n\t\tlabel: '',\n\t\twidth: getWidthFromConfig(config, 'controls'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'controls',\n\t},\n];\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { AutosizedTable as Table } from '../../../../ui-common/autosized-table-ava/autosized-table.component';\nimport { ListChildComponentProps } from 'react-window';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { isEmpty } from 'fp-ts/lib/Array';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { OrderEntityContainer } from '../../containers/order-entity/order-entity.container';\nimport { getColumnsConfig } from './orders-table.utils';\nimport { OrdersTableColumnNames, TableSize, ConfigItem } from './orders-table.model';\nimport { tspan } from '../../../../utils/i18n.utils';\n\nexport type OrdersTableProps = {\n\tdata: RemoteData<Error, number[]>;\n\tconfig: ConfigItem[];\n\ttableSize: TableSize;\n};\n\nexport const OrdersTable = combineContext(OrderEntityContainer, OrderEntityContainer =>\n\twithTranslation()(\n\t\tclass OrdersTable extends PureComponent<OrdersTableProps & WithTranslation> {\n\t\t\tprivate getTranslatedColumnNames = (): OrdersTableColumnNames => ({\n\t\t\t\tsymbol: tspan('ordersTableColumnSymbol', 'Symbol'),\n\t\t\t\tside: tspan('ordersTableColumnSide', 'Side'),\n\t\t\t\tquantity: tspan('ordersTableColumnQuantity', 'Quantity'),\n\t\t\t\ttriggerPrice: tspan('ordersTableColumnTriggerPrice', 'Trigger Price'),\n\t\t\t\tdistance: tspan('ordersTableColumnDistance', 'Distance'),\n\t\t\t\tstopLoss: tspan('ordersTableColumnStopLoss', 'Stop Loss'),\n\t\t\t\ttakeProfit: tspan('ordersTableColumnTakeProfit', 'Take Profit'),\n\t\t\t\tvalidUntil: tspan('ordersTableColumnValidUntil', 'Valid Until'),\n\t\t\t});\n\n\t\t\tpublic render() {\n\t\t\t\tconst { data } = this.props;\n\t\t\t\treturn <RemoteDataState data={data} success={this.renderSuccess} noData={data => isEmpty(data)} />;\n\t\t\t}\n\n\t\t\tprivate renderSuccess = (data: number[]) => {\n\t\t\t\tconst columnNames = this.getTranslatedColumnNames();\n\t\t\t\tconst { config } = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<Table\n\t\t\t\t\t\titemCount={data.length}\n\t\t\t\t\t\titemSize={60}\n\t\t\t\t\t\titemData={data}\n\t\t\t\t\t\titemKey={this.getItemKey}\n\t\t\t\t\t\tcolumns={getColumnsConfig(config, columnNames)}>\n\t\t\t\t\t\t{this.renderRow}\n\t\t\t\t\t</Table>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate getItemKey = (rowIndex: number, data: number) => data[rowIndex];\n\n\t\t\tprivate renderRow = (props: ListChildComponentProps) => (\n\t\t\t\t<OrderEntityContainer\n\t\t\t\t\tconfig={this.props.config}\n\t\t\t\t\ttableSize={this.props.tableSize}\n\t\t\t\t\trowData={props.data[props.index]}\n\t\t\t\t\t{...props}\n\t\t\t\t/>\n\t\t\t);\n\t\t},\n\t),\n);\n","import { LiveData, LiveDataOption } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { OrderTO } from '../../api/generated/swagger/definitions/OrderTO';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { OrderStore } from '../../store/order/order.store';\nimport { InstrumentStore } from '../../store/instrument/instrument.store';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport * as A from 'fp-ts/lib/Array';\nimport { empty } from 'fp-ts/lib/Record';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { map, switchMap, first, mapTo, startWith } from 'rxjs/operators';\nimport { fromOption, success } from '@devexperts/remote-data-ts';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { merge, of, Observable, fromEvent, combineLatest } from 'rxjs';\nimport { getTriggerPrice, getOrderSideByQuantity, getAmount, getCurrentPrice } from './orders.utils';\nimport { MarketDataStore } from '../../store/market-data/market-data.store';\nimport { distinctUntilChangedStrict } from '../../utils/live-data.utils';\nimport { eqNumber } from 'fp-ts/lib/Eq';\nimport { tapRD } from '@devexperts/rx-utils/dist/rd/operators/tapRD';\nimport { Router, href } from '../../utils/router.utils';\nimport { shareReplayWithDefaults } from '../../utils/rxjs/shareReplayWithDefaults';\nimport { routes } from '../../ui-common/routes';\nimport { TableSize, ConfigItem } from '../../ui-desktop/orders/components/orders-table/orders-table.model';\nimport {\n\tOrdersLargeTableConfig,\n\tOrdersSmallTableConfig,\n} from '../../ui-desktop/orders/components/orders-table/orders-table.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type OrderTOExtended = OrderTO & {\n\tsymbol: string;\n\tprecision: number;\n};\n\nexport type OrderTOFull = OrderTOExtended & {\n\ttriggerPrice: Option<number>;\n\tcurrentPrice: Option<number>;\n};\n\ntype OrdersViewModelContext = {\n\torderStore: OrderStore;\n\tinstrumentStore: InstrumentStore;\n\tmarketDataStore: MarketDataStore;\n\trouter: Router;\n};\nexport type OrdersViewModel = {\n\torders$: LiveDataOption<Error, OrderTOFull[]>;\n\ttableSize$: Observable<TableSize>;\n\ttableSizeConfig$: Observable<ConfigItem[]>;\n\tgetById: (orderId: number) => LiveData<Error, OrderTOFull>;\n\tonClose: (orderId: number) => void;\n};\ntype CreateOrdersViewModel = Sink<() => OrdersViewModel>;\n\nexport const createOrdersViewModel = combineContext(\n\task<OrdersViewModelContext>(),\n\t(context): CreateOrdersViewModel => {\n\t\tconst { orderStore, instrumentStore, marketDataStore, router } = context;\n\t\tconst { push } = router;\n\n\t\tconst close = createHandler<number>();\n\n\t\tconst getBidAskFromMarketData = (symbol: string) => {\n\t\t\tconst lastQuote$ = marketDataStore.getDataBySymbol(symbol).pipe(mapRD(({ lastQuote }) => lastQuote));\n\n\t\t\tconst bid$ = lastQuote$.pipe(\n\t\t\t\tmapRD(quote =>\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tquote,\n\t\t\t\t\t\tO.chain(({ bid }) => bid),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tdistinctUntilChangedStrict(O.getEq(eqNumber)),\n\t\t\t);\n\n\t\t\tconst ask$ = lastQuote$.pipe(\n\t\t\t\tmapRD(quote =>\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tquote,\n\t\t\t\t\t\tO.chain(({ ask }) => ask),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tdistinctUntilChangedStrict(O.getEq(eqNumber)),\n\t\t\t);\n\n\t\t\treturn combineLatestRD(bid$, ask$);\n\t\t};\n\n\t\tconst mapSingleOrderToOrderItem = (order: OrderTO): LiveData<Error, OrderTOFull> =>\n\t\t\tinstrumentStore.getById(order.instrumentId).pipe(\n\t\t\t\tfirst(),\n\t\t\t\tswitchMapRD(({ symbol, precision }) =>\n\t\t\t\t\tgetBidAskFromMarketData(symbol).pipe(\n\t\t\t\t\t\tmapRD(([bid, ask]) => {\n\t\t\t\t\t\t\tconst { quantity, type, limitPrice, stopPrice } = order;\n\n\t\t\t\t\t\t\tconst side = getOrderSideByQuantity(quantity);\n\t\t\t\t\t\t\tconst amount = getAmount(side, bid, ask);\n\t\t\t\t\t\t\tconst triggerPrice = getTriggerPrice(type, amount, limitPrice, stopPrice);\n\t\t\t\t\t\t\tconst currentPrice = getCurrentPrice(bid, ask, quantity);\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...order,\n\t\t\t\t\t\t\t\tsymbol,\n\t\t\t\t\t\t\t\tprecision,\n\t\t\t\t\t\t\t\ttriggerPrice,\n\t\t\t\t\t\t\t\tcurrentPrice,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\tconst mapNonEmptyOrders = (orders: OrderTO[]): LiveData<Error, OrderTOFull[]> =>\n\t\t\t(combineLatestRD as any)(...orders.map(order => mapSingleOrderToOrderItem(order)));\n\n\t\tconst orders$: LiveDataOption<Error, OrderTOFull[]> = orderStore.all$.pipe(\n\t\t\tswitchMapRD(orders =>\n\t\t\t\tA.isEmpty(orders)\n\t\t\t\t\t? of(success<Error, Option<OrderTOFull[]>>(O.none))\n\t\t\t\t\t: mapNonEmptyOrders(orders).pipe(mapRD(O.some)),\n\t\t\t),\n\t\t);\n\n\t\tconst getById = (id: number): LiveData<Error, OrderTOFull> =>\n\t\t\torders$.pipe(\n\t\t\t\tmap(ordersData =>\n\t\t\t\t\tordersData.chain(orderData =>\n\t\t\t\t\t\tfromOption(\n\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\torderData,\n\t\t\t\t\t\t\t\tO.chain(orderData => A.findFirst(orderData, data => data.orderId === id)),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t() => new Error(`Order data with id ${id} not found in orders.store`),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\tconst onClose = (orderId: number) => close.handle(orderId);\n\n\t\tconst closeEffect$ = close.value$.pipe(switchMap(orderId => orderStore.remove(orderId)));\n\n\t\tconst getFilteredOrdersList = (removedOrderId: number) =>\n\t\t\torderStore.all$.pipe(mapRD(orders => A.filter(orders, ({ orderId }) => orderId !== removedOrderId)));\n\n\t\tconst jumpToFirstOrderEffect$ = close.value$.pipe(\n\t\t\tswitchMap(getFilteredOrdersList),\n\t\t\tmapRD(A.head),\n\t\t\ttapRD(firstOrder =>\n\t\t\t\tpipe(\n\t\t\t\t\tfirstOrder,\n\t\t\t\t\tO.fold(\n\t\t\t\t\t\t() => push(href(routes.orders.root, empty)),\n\t\t\t\t\t\t({ orderId }) => push(href(routes.orders.order.root, { orderId })),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\n\t\tconst routeState$ = merge(of(router.state), router.state$);\n\t\tconst windowResize$ = fromEvent<Event>(window, 'resize').pipe(\n\t\t\tmapTo(undefined),\n\t\t\tstartWith(undefined),\n\t\t);\n\n\t\tconst tableSize$: Observable<TableSize> = combineLatest(routeState$, windowResize$).pipe(\n\t\t\tmap(([routerState]) => routerState),\n\t\t\tmap(({ location: { pathname } }) => {\n\t\t\t\tconst isContainsEdit = pathname.includes('edit');\n\t\t\t\tconst isContainsInfo = pathname.includes('info');\n\t\t\t\tconst isSmallWindow = window.innerWidth <= 1280;\n\t\t\t\treturn isSmallWindow && (isContainsEdit || isContainsInfo) ? TableSize.Small : TableSize.Large;\n\t\t\t}),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst tableSizeConfig$: Observable<ConfigItem[]> = tableSize$.pipe(\n\t\t\tswitchMap(tableSize => of(tableSize === TableSize.Large ? OrdersLargeTableConfig : OrdersSmallTableConfig)),\n\t\t);\n\n\t\treturn new Sink(\n\t\t\t() => ({\n\t\t\t\torders$,\n\t\t\t\tonClose,\n\t\t\t\tgetById,\n\t\t\t\ttableSize$,\n\t\t\t\ttableSizeConfig$,\n\t\t\t}),\n\t\t\tmerge(closeEffect$, jumpToFirstOrderEffect$),\n\t\t);\n\t},\n);\n","import { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { OrdersTable } from '../../components/orders-table/orders-table.component';\nimport { success } from '@devexperts/remote-data-ts';\nimport { OrdersViewModel, createOrdersViewModel, OrderTOFull } from '../../../../view-model/orders/orders.view-model';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport * as O from 'fp-ts/lib/Option';\nimport { empty } from 'fp-ts/lib/Array';\nimport { distinctRDNumberArray } from '../../../../utils/setoid.utils';\nimport { TableSize } from '../../components/orders-table/orders-table.model';\nimport { OrdersLargeTableConfig } from '../../components/orders-table/orders-table.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\n\nexport type OrdersTableContainerContext = {\n\tordersViewModel: OrdersViewModel;\n};\n\nconst Container = combineContext(OrdersTable, ask<OrdersTableContainerContext>(), (OrdersTable, context) =>\n\twithRXWithDefaults(OrdersTable)(() => {\n\t\tconst { ordersViewModel } = context;\n\t\tconst { tableSize$, tableSizeConfig$, orders$ } = ordersViewModel;\n\n\t\tconst data$ = orders$.pipe(\n\t\t\tmapRD(orders =>\n\t\t\t\tpipe(\n\t\t\t\t\torders,\n\t\t\t\t\tO.getOrElse<OrderTOFull[]>(constant(empty)),\n\t\t\t\t),\n\t\t\t),\n\t\t\tmapRD(tableItems => tableItems.map(item => item.orderId)),\n\t\t\tdistinctRDNumberArray,\n\t\t);\n\n\t\treturn {\n\t\t\tdefaultProps: {\n\t\t\t\tdata: success(empty),\n\t\t\t\tconfig: OrdersLargeTableConfig,\n\t\t\t\ttableSize: TableSize.Large,\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\tdata: data$,\n\t\t\t\tconfig: tableSizeConfig$,\n\t\t\t\ttableSize: tableSize$,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const OrdersTableContainer = combineContext(\n\tdeferContext(Container, 'ordersViewModel'),\n\tcreateOrdersViewModel,\n\t(Container, createOrdersViewModel) =>\n\t\trunOnMount(Container, () => () => ({ ordersViewModel: createOrdersViewModel() })),\n);\n","import * as React from 'react';\nimport { Fragment, ReactNode, memo, useCallback } from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { format } from 'date-fns';\nimport { Option } from 'fp-ts/lib/Option';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { OrderDetailsData } from './order-details.model';\nimport { RouteLink } from '../route-link/containers/route-link.container';\nimport { tspan } from '../../utils/i18n.utils';\nimport { OrdersSide } from '../../model/orders/orders.model';\nimport { SymbolInfoItem } from '../symbol-info-item/symbol-info-item.component';\nimport { SymbolComponent } from '../symbol/symbol';\nimport { Optional } from '../optional/optional.component';\nimport { PriceDirection } from '../price-direction/price-direction.component';\nimport { RemoteDataState } from '../remote-data-state/remote-data-state.component';\nimport { TPipSettings, PipRate } from '../pip-rate/pip-rate.component';\nimport { MakeTheme } from '../../utils/theme.utils';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\nimport * as css from './theme/order-details.module.css';\nimport * as symbolCss from './theme/symbol.child.module.css';\n\nconst DEFAULT_PIP_SETTINGS = { start: 0, length: 2 };\n\nconst directionTheme = { icon: css.icon };\nconst labelTheme = { label: css.label };\n\nexport type OrderDetailsProps = {\n\tdata: RemoteData<Error, OrderDetailsData>;\n\ttheme?: MakeTheme<'item' | 'item_secondary' | 'label' | 'value' | 'container' | 'title' | 'subtitle'>;\n} & WithTranslation;\n\nexport const OrderDetailsCommon = combineContext(RouteLink, RouteLink =>\n\twithTranslation()(\n\t\tmemo((props: OrderDetailsProps) => {\n\t\t\tconst { data, t, theme } = props;\n\n\t\t\tconst localizeOrderDetailsSide = useCallback(\n\t\t\t\t(ordersSide: OrdersSide) => {\n\t\t\t\t\tswitch (ordersSide) {\n\t\t\t\t\t\tcase OrdersSide.Buy: {\n\t\t\t\t\t\t\treturn tspan('orderDetailsSideBuy', 'Buy');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase OrdersSide.Sell: {\n\t\t\t\t\t\t\treturn tspan('orderDetailsSideSell', 'Sell');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t[t],\n\t\t\t);\n\n\t\t\tconst renderSuccess = useCallback(\n\t\t\t\t(orderDetails: OrderDetailsData): JSX.Element => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\torderId,\n\t\t\t\t\t\tsymbol,\n\t\t\t\t\t\tside,\n\t\t\t\t\t\ttriggerPrice,\n\t\t\t\t\t\tcurrentPrice,\n\t\t\t\t\t\tchangeDirection,\n\t\t\t\t\t\tdistance,\n\t\t\t\t\t\tquantity,\n\t\t\t\t\t\tvalidUntil,\n\t\t\t\t\t\topenDateTime,\n\t\t\t\t\t\tsizeInLots,\n\t\t\t\t\t\ttakeProfit,\n\t\t\t\t\t\tstopLoss,\n\t\t\t\t\t\tprecision,\n\t\t\t\t\t\tpipSettings,\n\t\t\t\t\t} = orderDetails;\n\t\t\t\t\tconst renderPipRate = getPipRateRenderer(pipSettings, precision);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<SymbolComponent title={`ID ${orderId}`} subtitle={symbol} theme={theme || symbolCss} />\n\t\t\t\t\t\t\t<SymbolInfoItem theme={theme || labelTheme} label={tspan('orderDetailsSide', 'Side')}>\n\t\t\t\t\t\t\t\t<div className={getSideClassName(side)}>{localizeOrderDetailsSide(side)}</div>\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem\n\t\t\t\t\t\t\t\ttheme={theme || labelTheme}\n\t\t\t\t\t\t\t\tlabel={tspan('orderDetailsTriggerPrice', 'Trigger price')}>\n\t\t\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\t\t\ttriggerPrice,\n\t\t\t\t\t\t\t\t\t\tO.map(renderPipRate),\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem\n\t\t\t\t\t\t\t\ttheme={theme || labelTheme}\n\t\t\t\t\t\t\t\tlabel={tspan('orderDetailsCurrentPrice', 'Current price')}>\n\t\t\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\t\t\tcurrentPrice,\n\t\t\t\t\t\t\t\t\t\tO.map(currentPrice => (\n\t\t\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t{pipe(\n\t\t\t\t\t\t\t\t\t\t\t\t\tchangeDirection,\n\t\t\t\t\t\t\t\t\t\t\t\t\tO.map(direction => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<PriceDirection direction={direction} theme={directionTheme} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\t\t\t\t\t\t\tO.toNullable,\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t{renderPipRate(currentPrice)}\n\t\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem\n\t\t\t\t\t\t\t\ttheme={theme || labelTheme}\n\t\t\t\t\t\t\t\tlabel={tspan('orderDetailsDistance', 'Distance')}>\n\t\t\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\t\t\tdistance,\n\t\t\t\t\t\t\t\t\t\tO.map(renderPipRate),\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem\n\t\t\t\t\t\t\t\ttheme={theme || labelTheme}\n\t\t\t\t\t\t\t\tlabel={tspan('orderDetailsQuantity', 'Quantity')}>\n\t\t\t\t\t\t\t\t{quantity}\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem\n\t\t\t\t\t\t\t\ttheme={theme || labelTheme}\n\t\t\t\t\t\t\t\tlabel={tspan('orderDetailsValidUntil', 'Valid until')}>\n\t\t\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\t\t\tvalidUntil,\n\t\t\t\t\t\t\t\t\t\tO.map(renderFormattedDate),\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem\n\t\t\t\t\t\t\t\ttheme={theme || labelTheme}\n\t\t\t\t\t\t\t\tlabel={tspan('orderDetailsOpenDateTime', 'Open date time')}>\n\t\t\t\t\t\t\t\t{renderFormattedDate(openDateTime)}\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem\n\t\t\t\t\t\t\t\ttheme={theme || labelTheme}\n\t\t\t\t\t\t\t\tlabel={tspan('orderDetailsSizeInLots', 'Size in lots')}>\n\t\t\t\t\t\t\t\t{sizeInLots}\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem\n\t\t\t\t\t\t\t\ttheme={theme || labelTheme}\n\t\t\t\t\t\t\t\tlabel={tspan('orderDetailsTakeProfit', 'Take profit')}>\n\t\t\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\t\t\ttakeProfit,\n\t\t\t\t\t\t\t\t\t\tO.map(renderPipRate),\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem\n\t\t\t\t\t\t\t\ttheme={theme || labelTheme}\n\t\t\t\t\t\t\t\tlabel={tspan('orderDetailsStopLoss', 'Stop loss')}>\n\t\t\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\t\t\tstopLoss,\n\t\t\t\t\t\t\t\t\t\tO.map(renderPipRate),\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\t[t, getSideClassName, localizeOrderDetailsSide, renderFormattedDate],\n\t\t\t);\n\n\t\t\treturn <RemoteDataState data={data} success={renderSuccess} />;\n\t\t}),\n\t),\n);\n\nfunction getSideClassName(side: OrdersSide): string {\n\tswitch (side) {\n\t\tcase OrdersSide.Buy: {\n\t\t\treturn css.green;\n\t\t}\n\t\tcase OrdersSide.Sell: {\n\t\t\treturn css.red;\n\t\t}\n\t}\n}\n\nconst getPipRateRenderer = (settings: Option<TPipSettings>, precision: number) => (value: number): ReactNode => (\n\t<PipRate\n\t\tvalue={value}\n\t\trise={pipe(\n\t\t\tsettings,\n\t\t\tO.getOrElse(constant(DEFAULT_PIP_SETTINGS)),\n\t\t)}\n\t\tdigits={precision}\n\t/>\n);\n\nfunction renderFormattedDate(date: Date): ReactNode {\n\tconst seconds = format(date, ':ss');\n\tconst mainPart = format(date, 'dd.mm.yyyy hh:mm');\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{mainPart}\n\t\t\t<span className={css.seconds}>{seconds}</span>\n\t\t</Fragment>\n\t);\n}\n","import * as React from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { routes } from '../../../../ui-common/routes';\nimport { OrderDetailsData } from '../../../../ui-common/order-details/order-details.model';\nimport { SidePanel } from '../../../../ui-common/side-panel/side-panel.component';\nimport { RouteLink } from '../../../../ui-common/route-link/containers/route-link.container';\nimport { CloseButton } from '../../../../ui-common/close-button/close-button.component';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport { OrderDetailsCommon } from '../../../../ui-common/order-details/order-details.component';\nimport { memo } from 'react';\nimport * as css from './theme/order-details.module.css';\nimport * as scrollableCss from './theme/scrollable.child.module.css';\nimport * as sidePanelCss from './theme/side-panel.child.module.css';\n\nconst sidePanelTheme = { SidePanel: sidePanelCss, Scrollable: scrollableCss };\n\ntype OrderDetailsProps = {\n\tdata: RemoteData<Error, OrderDetailsData>;\n};\n\nexport const OrderDetails = combineContext(RouteLink, OrderDetailsCommon, (RouteLink, OrderDetailsCommon) =>\n\twithTranslation()(\n\t\tmemo((props: OrderDetailsProps & WithTranslation) => {\n\t\t\tconst { data } = props;\n\n\t\t\tconst renderHeader = (orderId: number) => (\n\t\t\t\t<div className={css.header}>\n\t\t\t\t\t<span className={css.widgetLabel}>{tspan('orderDetailsOrderInfo', 'Order Info')}</span>\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={routes.orders.order.root}\n\t\t\t\t\t\tvalue={{ orderId }}\n\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t<div className={css.closeBtnWrapper}>\n\t\t\t\t\t\t\t\t<CloseButton onClick={onNavigate} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\tconst renderSuccess = (localData: OrderDetailsData) => {\n\t\t\t\tconst { orderId } = localData;\n\t\t\t\treturn (\n\t\t\t\t\t<SidePanel header={renderHeader(orderId)} scrollable theme={sidePanelTheme}>\n\t\t\t\t\t\t<OrderDetailsCommon data={data} />\n\t\t\t\t\t</SidePanel>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\treturn <RemoteDataState data={data} success={renderSuccess} />;\n\t\t}),\n\t),\n);\n","import { Big } from 'big.js';\nimport { combineContext, ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { OrderStore } from '../../store/order/order.store';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { InstrumentStore } from '../../store/instrument/instrument.store';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { MarketDataStore } from '../../store/market-data/market-data.store';\nimport { getTriggerPrice, getCurrentPrice, getOrderSideByQuantity, getAmount, getDistance } from './orders.utils';\nimport { OrderEntrySide } from '../../model/order-entry/order-entry.model';\nimport { first } from 'rxjs/operators';\nimport { distinctRDOptionNumber, distinctRDOptionDate } from '../../utils/setoid.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\ntype OrderDetailsData = {\n\torderId: number;\n\tsymbol: string;\n\tside: OrderEntrySide;\n\ttriggerPrice: Option<number>;\n\tchangeDirection: Option<number>;\n\tcurrentPrice: Option<number>;\n\tdistance: Option<number>;\n\tquantity: number;\n\tvalidUntil: Option<Date>;\n\topenDateTime: Date;\n\tsizeInLots: number;\n\ttakeProfit: Option<number>;\n\tstopLoss: Option<number>;\n\tamount: Option<number>;\n\tprecision: number;\n\tpipSize: number;\n};\n\nexport type OrderDetailsViewModel = {\n\torderDetails$: LiveData<Error, OrderDetailsData>;\n};\n\ntype CreateOrderDetailsViewModel = (orderId: number) => OrderDetailsViewModel;\n\ntype OrderDetailsViewModelContext = {\n\torderStore: OrderStore;\n\tinstrumentStore: InstrumentStore;\n\tmarketDataStore: MarketDataStore;\n};\n\nexport const createOrderDetailsViewModel = combineContext(\n\task<OrderDetailsViewModelContext>(),\n\t(context): CreateOrderDetailsViewModel => orderId => {\n\t\tconst {\n\t\t\torderStore: { getById },\n\t\t\tinstrumentStore,\n\t\t\tmarketDataStore: { getDataBySymbol },\n\t\t} = context;\n\n\t\tconst order$ = getById(orderId);\n\n\t\tconst instrument$ = order$.pipe(\n\t\t\tswitchMapRD(order => instrumentStore.getById(order.instrumentId)),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst marketData$ = instrument$.pipe(switchMapRD(instrument => getDataBySymbol(instrument.symbol)));\n\n\t\tconst orderId$ = order$.pipe(\n\t\t\tmapRD(({ orderId }) => orderId),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst quantity$ = order$.pipe(\n\t\t\tmapRD(({ quantity }) => quantity),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst validUntil$ = order$.pipe(\n\t\t\tmapRD(({ expireAt }) => expireAt),\n\t\t\tdistinctRDOptionDate,\n\t\t);\n\n\t\tconst createdTime$ = order$.pipe(\n\t\t\tmapRD(({ createdTime }) => createdTime),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst takeProfit$ = order$.pipe(\n\t\t\tmapRD(({ takeProfit }) =>\n\t\t\t\tpipe(\n\t\t\t\t\ttakeProfit,\n\t\t\t\t\tO.chain(v => v.fixedPrice),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst stopLoss$ = order$.pipe(\n\t\t\tmapRD(({ stopLoss }) =>\n\t\t\t\tpipe(\n\t\t\t\t\tstopLoss,\n\t\t\t\t\tO.chain(v => v.fixedPrice),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst orderType$ = order$.pipe(\n\t\t\tmapRD(({ type }) => type),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst stopPrice$ = order$.pipe(\n\t\t\tmapRD(({ stopPrice }) => stopPrice),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst limitPrice$ = order$.pipe(\n\t\t\tmapRD(({ limitPrice }) => limitPrice),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst quote$ = marketData$.pipe(mapRD(({ lastQuote }) => lastQuote));\n\n\t\tconst bid$ = quote$.pipe(\n\t\t\tmapRD(quote =>\n\t\t\t\tpipe(\n\t\t\t\t\tquote,\n\t\t\t\t\tO.chain(quote => quote.bid),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst ask$ = quote$.pipe(\n\t\t\tmapRD(quote =>\n\t\t\t\tpipe(\n\t\t\t\t\tquote,\n\t\t\t\t\tO.chain(quote => quote.ask),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst changeDirection$ = combineLatestRD(quote$, order$).pipe(\n\t\t\tmapRD(([quote, order]) =>\n\t\t\t\tpipe(\n\t\t\t\t\tquote,\n\t\t\t\t\tO.map(quote => (order.quantity < 0 ? quote.bidDirection : quote.askDirection)),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\n\t\tconst combinedData1$ = combineLatestRD(quantity$, validUntil$, createdTime$, takeProfit$, stopLoss$);\n\t\tconst combinedData2$ = combineLatestRD(instrument$, orderId$, bid$, ask$, changeDirection$);\n\t\tconst combinedData3$ = combineLatestRD(orderType$, limitPrice$, stopPrice$);\n\n\t\tconst orderDetails$ = combineLatestRD(combinedData1$, combinedData2$, combinedData3$).pipe(\n\t\t\tmapRD(\n\t\t\t\t([\n\t\t\t\t\t[quantity, expireAt, createdTime, takeProfit, stopLoss],\n\t\t\t\t\t[instrument, orderId, bid, ask, changeDirection],\n\t\t\t\t\t[orderType, limitPrice, stopPrice],\n\t\t\t\t]) => {\n\t\t\t\t\tconst currentPrice = getCurrentPrice(bid, ask, quantity);\n\t\t\t\t\tconst quantityAbs = Math.abs(quantity);\n\t\t\t\t\tconst side = getOrderSideByQuantity(quantity);\n\t\t\t\t\tconst amount = getAmount(side, bid, ask);\n\t\t\t\t\tconst triggerPrice = getTriggerPrice(orderType, amount, limitPrice, stopPrice);\n\n\t\t\t\t\tconst orderDetails: OrderDetailsData = {\n\t\t\t\t\t\torderId,\n\t\t\t\t\t\tsymbol: instrument.symbol,\n\t\t\t\t\t\tside,\n\t\t\t\t\t\ttriggerPrice,\n\t\t\t\t\t\tcurrentPrice,\n\t\t\t\t\t\tchangeDirection,\n\t\t\t\t\t\tdistance: pipe(\n\t\t\t\t\t\t\tcurrentPrice,\n\t\t\t\t\t\t\tO.chain(currentPrice =>\n\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\ttriggerPrice,\n\t\t\t\t\t\t\t\t\tO.map(triggerPrice => getDistance(triggerPrice, currentPrice)),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tquantity: quantityAbs,\n\t\t\t\t\t\tvalidUntil: expireAt,\n\t\t\t\t\t\topenDateTime: createdTime,\n\t\t\t\t\t\tsizeInLots: Number(Big(quantityAbs).div(instrument.lotSize)),\n\t\t\t\t\t\ttakeProfit,\n\t\t\t\t\t\tstopLoss,\n\t\t\t\t\t\tamount,\n\t\t\t\t\t\tprecision: instrument.precision,\n\t\t\t\t\t\tpipSize: instrument.pipsSize,\n\t\t\t\t\t};\n\n\t\t\t\t\treturn orderDetails;\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\treturn { orderDetails$ };\n\t},\n);\n","import { OrderEntrySide } from '../../model/order-entry/order-entry.model';\nimport { OrdersSide } from './components/orders-table/orders-table.model';\n\nexport function getOrdersSide(side: OrderEntrySide): OrdersSide {\n\tswitch (side) {\n\t\tcase OrderEntrySide.Buy: {\n\t\t\treturn OrdersSide.Buy;\n\t\t}\n\t\tcase OrderEntrySide.Sell: {\n\t\t\treturn OrdersSide.Sell;\n\t\t}\n\t}\n}\n","import { combineContext, ask, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { OrderDetails } from '../../components/order-details/order-details.component';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport {\n\tOrderDetailsViewModel,\n\tcreateOrderDetailsViewModel,\n} from '../../../../view-model/orders/order-details.view-model';\nimport { withProps } from '../../../../utils/with-props.utils';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { definePipSettings } from '../../../../ui-common/pip-rate/pip-settings.utils';\nimport { getOrdersSide } from '../../orders.model';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as O from 'fp-ts/lib/Option';\n\ntype OrderDetailsContainerContext = {\n\torderInfoViewModel: OrderDetailsViewModel;\n};\n\nconst Container = combineContext(OrderDetails, ask<OrderDetailsContainerContext>(), (OrderDetails, context) =>\n\twithRXWithDefaults(OrderDetails)(() => {\n\t\tconst {\n\t\t\torderInfoViewModel: { orderDetails$ },\n\t\t} = context;\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tdata: orderDetails$.pipe(\n\t\t\t\t\tmapRD(orderDetails => ({\n\t\t\t\t\t\t...orderDetails,\n\t\t\t\t\t\tpipSettings: pipe(\n\t\t\t\t\t\t\torderDetails.amount,\n\t\t\t\t\t\t\tO.map(amount => definePipSettings(amount, orderDetails.pipSize)),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tside: getOrdersSide(orderDetails.side),\n\t\t\t\t\t})),\n\t\t\t\t),\n\t\t\t},\n\t\t\tdefaultProps: { data: pending },\n\t\t};\n\t}),\n);\n\nconst withOrderId = withProps<{ orderId: number }>();\n\nexport const OrderInfoContainer = combineContext(\n\tdeferContext(Container.map(withOrderId), 'orderInfoViewModel'),\n\tcreateOrderDetailsViewModel,\n\t(Container, createOrderInfoViewModel) =>\n\t\trunOnMount(Container, () => props => ({ orderInfoViewModel: createOrderInfoViewModel(props.orderId) })),\n);\n","import { TDateInputValue } from '@devexperts/react-kit/dist/components/DateInput/DateInput.model';\n\nexport enum DateType {\n\tstartDate = '* START_DATE *',\n\tendDate = '* END_DATE *',\n}\n\nexport enum Period {\n\tlast7days = '* LAST_7_DAYS *',\n\tlast30Days = '* LAST_30_DAYS *',\n\tlast365days = '* LAST_365_DAYS *',\n\tthisMonth = '* THIS_MONTH *',\n\tthisYear = '* THIS_YEAR *',\n\tall = '* ALL *',\n\tcustom = '* CUSTOM *',\n}\n\nexport type PeriodNames = {\n\tlast7days: string;\n\tlast30Days: string;\n\tlast365days: string;\n\tthisMonth: string;\n\tthisYear: string;\n\tall: string;\n\tcustom: string;\n};\n\nexport type HistoryFilterData = {\n\tselectedPeriod: Period;\n\tstartDate: TDateInputValue;\n\tendDate: TDateInputValue;\n};\n\nexport type HistoryValueHandlerData = HistoryFilterData & {\n\tisDateInputChanged: boolean;\n};\n\nexport type UnwrappedFilterFormData = [Period, number, number];\n","import { combineContext, ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { OrderStore } from '../../store/order/order.store';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { InstrumentStore } from '../../store/instrument/instrument.store';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { LiveData, LiveDataOption } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { distinctRDOptionNumber } from '../../utils/setoid.utils';\nimport { first } from 'rxjs/internal/operators';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as O from 'fp-ts/lib/Option';\n\nexport type OrderDashboardChartViewModel = {\n\tsymbol$: LiveData<Error, string>;\n\tcostBasis$: LiveDataOption<Error, number>;\n};\n\ntype CreateOrderDashboardChart = (orderId: number) => OrderDashboardChartViewModel;\n\ntype OrderDashboardChartContext = {\n\torderStore: OrderStore;\n\tinstrumentStore: InstrumentStore;\n};\n\nexport const createOrderDashboardChartViewModel = combineContext(\n\task<OrderDashboardChartContext>(),\n\t(context): CreateOrderDashboardChart => orderId => {\n\t\tconst { orderStore, instrumentStore } = context;\n\t\tconst order$ = orderStore.getById(orderId);\n\n\t\tconst costBasis$ = order$.pipe(\n\t\t\tmapRD(order =>\n\t\t\t\tpipe(\n\t\t\t\t\torder.limitPrice,\n\t\t\t\t\tO.alt(() => order.stopPrice),\n\t\t\t\t),\n\t\t\t),\n\t\t\tdistinctRDOptionNumber,\n\t\t);\n\t\tconst symbol$ = order$.pipe(\n\t\t\tswitchMapRD(order =>\n\t\t\t\tinstrumentStore.getById(order.instrumentId).pipe(mapRD(instrument => instrument.symbol)),\n\t\t\t),\n\t\t\tfirst(),\n\t\t);\n\n\t\treturn {\n\t\t\tsymbol$,\n\t\t\tcostBasis$,\n\t\t};\n\t},\n);\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { ChartLoaderContainer } from '../../../chart/containers/chart-loader/chart-loader.container';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { CurrentPriceLinePlugin } from '../../../chart/plugin/current-price-line/current-price-line-plugin';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { LinesPlugin } from '../../../chart/plugin/lines/lines-plugin';\nimport { Plugin } from '../../../../ui-common/chart/plugin/plugin.model';\nimport { WorkspaceChart } from '../../../ui-kit/components/workspace/workspace-chart.component';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\n\ntype ChartData = {\n\tcostBasis: Option<number>;\n\tsymbol: string;\n};\n\ntype OrderDashboardChartProps = {\n\tdata: RemoteData<Error, ChartData>;\n};\n\nexport const OrderDashboardChart = combineContext(ChartLoaderContainer, ChartLoaderContainer =>\n\twithTranslation()(\n\t\tclass OrderDashboardChart extends PureComponent<OrderDashboardChartProps & WithTranslation> {\n\t\t\trender() {\n\t\t\t\tconst { data } = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<RemoteDataState data={data} success={this.renderSuccess} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tprivate renderSuccess(data: ChartData): JSX.Element {\n\t\t\t\tconst { symbol, costBasis } = data;\n\t\t\t\tconst plugins: Plugin[] = pipe(\n\t\t\t\t\tcostBasis,\n\t\t\t\t\tO.fold(constant([]), data => {\n\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\tnew CurrentPriceLinePlugin(),\n\t\t\t\t\t\t\tnew LinesPlugin([\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tprice: data,\n\t\t\t\t\t\t\t\t\tlabel: O.some(tspan('orderDashboardChartLineOpenPrice', 'Open Price')),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t];\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t\treturn (\n\t\t\t\t\t<WorkspaceChart>\n\t\t\t\t\t\t<ChartLoaderContainer symbol={symbol} plugins={plugins} />\n\t\t\t\t\t</WorkspaceChart>\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t),\n);\n","import { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport {\n\tOrderDashboardChartViewModel,\n\tcreateOrderDashboardChartViewModel,\n} from '../../../../view-model/orders/order-dashboard-chart.view-model';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { OrderDashboardChart } from '../../components/orders-dashboard/order-dashboard-chart.component';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { withProps } from '../../../../utils/with-props.utils';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\n\ntype OrderDashboardChartContainerContext = {\n\torderDashboardChartViewModel: OrderDashboardChartViewModel;\n};\n\nconst Container = combineContext(\n\tOrderDashboardChart,\n\task<OrderDashboardChartContainerContext>(),\n\t(OrderDashboardChart, context) =>\n\t\twithRXWithDefaults(OrderDashboardChart)(() => {\n\t\t\tconst {\n\t\t\t\torderDashboardChartViewModel: { symbol$, costBasis$ },\n\t\t\t} = context;\n\n\t\t\tconst data$ = combineLatestRD(symbol$, costBasis$).pipe(\n\t\t\t\tmapRD(([symbol, costBasis]) => ({ symbol, costBasis })),\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tdefaultProps: {\n\t\t\t\t\tdata: pending,\n\t\t\t\t},\n\t\t\t\tprops: {\n\t\t\t\t\tdata: data$,\n\t\t\t\t},\n\t\t\t};\n\t\t}),\n);\n\nconst withOrderId = withProps<{ orderId: number }>();\n\nexport const OrderDashboardChartContainer = combineContext(\n\tdeferContext(Container.map(withOrderId), 'orderDashboardChartViewModel'),\n\tcreateOrderDashboardChartViewModel,\n\t(Container, createOrderDashboardChartViewModel) =>\n\t\trunOnMount(Container, () => props => ({\n\t\t\torderDashboardChartViewModel: createOrderDashboardChartViewModel(props.orderId),\n\t\t})),\n);\n","import { combineContext, ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { OrderEntrySide } from '../../model/order-entry/order-entry.model';\nimport { OrderStore } from '../../store/order/order.store';\nimport { InstrumentStore } from '../../store/instrument/instrument.store';\nimport { getOrderSideByQuantity } from './orders.utils';\n\ntype OrderEditData = {\n\tsymbol: string;\n\tside: OrderEntrySide;\n};\n\nexport type OrderEditViewModel = {\n\torderEditData$: LiveData<Error, OrderEditData>;\n};\n\ntype CreateOrderEditViewModel = (orderId: number) => OrderEditViewModel;\n\ntype OrderEditViewModelContext = {\n\torderStore: OrderStore;\n\tinstrumentStore: InstrumentStore;\n};\n\nexport const createOrderEditViewModel = combineContext(\n\task<OrderEditViewModelContext>(),\n\t(context): CreateOrderEditViewModel => orderId => {\n\t\tconst {\n\t\t\torderStore: { getById },\n\t\t\tinstrumentStore,\n\t\t} = context;\n\n\t\tconst order$ = getById(orderId);\n\t\tconst instrument$ = order$.pipe(switchMapRD(order => instrumentStore.getById(order.instrumentId)));\n\n\t\tconst orderEditData$ = combineLatestRD(order$, instrument$).pipe(\n\t\t\tmapRD(([order, instrument]) => {\n\t\t\t\tconst side = getOrderSideByQuantity(order.quantity);\n\n\t\t\t\tconst orderEditData: OrderEditData = {\n\t\t\t\t\tsymbol: instrument.symbol,\n\t\t\t\t\tside,\n\t\t\t\t};\n\n\t\t\t\treturn orderEditData;\n\t\t\t}),\n\t\t);\n\n\t\treturn { orderEditData$ };\n\t},\n);\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { left } from 'fp-ts/lib/Either';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { OrderEntryPanelContainer } from '../../../order-entry/containers/order-entry-panel/order-entry-panel.container';\nimport { OrderEntrySide } from '../../../order-entry/components/order-entry-panel/order-entry-panel.model';\n\ntype OrderEditData = {\n\tsymbol: string;\n\tside: OrderEntrySide;\n};\n\ntype OrderEditProps = {\n\tdata: RemoteData<Error, OrderEditData>;\n\torderId: number;\n\tprofitLossKind: string;\n};\n\nexport const OrderEdit = combineContext(\n\tOrderEntryPanelContainer,\n\tOrderEntryPanelContainer =>\n\t\tclass OrderEdit extends PureComponent<OrderEditProps> {\n\t\t\trender() {\n\t\t\t\tconst { data } = this.props;\n\n\t\t\t\treturn <RemoteDataState data={data} success={this.renderSuccess} />;\n\t\t\t}\n\n\t\t\tprivate renderSuccess = (data: OrderEditData): JSX.Element => (\n\t\t\t\t<OrderEntryPanelContainer\n\t\t\t\t\telementId={left(String(this.props.orderId))}\n\t\t\t\t\tplKind={this.props.profitLossKind}\n\t\t\t\t\tsymbol={data.symbol}\n\t\t\t\t\taction={data.side}\n\t\t\t\t\tisEdit\n\t\t\t\t/>\n\t\t\t);\n\t\t},\n);\n","import { combineContext, ask, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { createOrderEditViewModel, OrderEditViewModel } from '../../../../view-model/orders/order-edit.view-model';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { OrderEdit } from '../../components/order-edit/order-edit.component';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { createSelector } from 'reselect';\n\ntype EditContainerContext = {\n\torderEditViewModel: OrderEditViewModel;\n};\n\nconst Container = combineContext(OrderEdit, ask<EditContainerContext>(), (OrderEdit, context) =>\n\twithRXWithDefaults(OrderEdit)(() => {\n\t\tconst {\n\t\t\torderEditViewModel: { orderEditData$ },\n\t\t} = context;\n\n\t\treturn {\n\t\t\tdefaultProps: {\n\t\t\t\tdata: pending,\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\tdata: orderEditData$,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const OrderEditContainer = combineContext(\n\tdeferContext(Container, 'orderEditViewModel'),\n\tcreateOrderEditViewModel,\n\t(Container, createOrderEditViewModel) =>\n\t\trunOnMount(Container, props => {\n\t\t\tconst orderId = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.orderId,\n\t\t\t);\n\t\t\treturn createSelector(\n\t\t\t\torderId,\n\t\t\t\torderId => ({\n\t\t\t\t\torderEditViewModel: createOrderEditViewModel(orderId),\n\t\t\t\t}),\n\t\t\t);\n\t\t}),\n);\n","import * as React from 'react';\nimport { PureComponent, Fragment } from 'react';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { OrdersTableContainer } from '../../containers/orders-table/orders-table.container';\nimport { Route } from '../../../../ui-common/route/containers/route.container';\nimport { MatchType } from '../../../../utils/router.utils';\nimport { routes } from '../../../../ui-common/routes';\nimport { OrderInfoContainer } from '../../containers/order-details/order-details.container';\nimport { OrderDashboardChartContainer } from '../../containers/order-dashboard-chart/order-dashboard-chart.container';\nimport { OrderEditContainer } from '../../containers/order-edit/order-edit.container';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { Redirect } from '../../../../ui-common/redirect/containers/redirect.container';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { constant } from 'fp-ts/lib/function';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { EmptyScreenContainer } from '../../../empty-screen/containers/empty-screen.container';\nimport { ScreenType } from '../../../../ui-common/empty-screen/components/empty-screen.component';\nimport { Workspace } from '../../../ui-kit/components/workspace/workspace.component';\nimport * as css from './theme/orders-dashboard.module.css';\n\nexport type OrdersDashboardProps = {\n\tfirstOrderId: RemoteData<Error, Option<number>>;\n};\nexport const OrdersDashboard = combineContext(\n\tOrdersTableContainer,\n\tRoute,\n\tOrderInfoContainer,\n\tOrderEditContainer,\n\tOrderDashboardChartContainer,\n\tEmptyScreenContainer,\n\tRedirect,\n\t(\n\t\tOrdersTableContainer,\n\t\tRoute,\n\t\tOrderInfoContainer,\n\t\tOrderEditContainer,\n\t\tOrderDashboardChartContainer,\n\t\tEmptyScreenContainer,\n\t\tRedirect,\n\t) =>\n\t\tclass OrdersDashboard extends PureComponent<OrdersDashboardProps> {\n\t\t\trender() {\n\t\t\t\tconst { firstOrderId } = this.props;\n\n\t\t\t\treturn <RemoteDataState data={firstOrderId} success={this.renderSuccess} />;\n\t\t\t}\n\n\t\t\tprivate renderSuccess = (firstOrderId: Option<number>) => (\n\t\t\t\t<section className={css.container}>\n\t\t\t\t\t<div className={css.left}>\n\t\t\t\t\t\t<Workspace>\n\t\t\t\t\t\t\t<Route match={routes.orders.root} render={this.renderRoot(firstOrderId)} />\n\t\t\t\t\t\t</Workspace>\n\t\t\t\t\t\t<Route match={routes.orders.order.root} render={this.renderChart} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<Route exact match={routes.orders.order.info.root} render={this.renderOrderInfo} />\n\t\t\t\t\t<Route exact match={routes.orders.order.edit.profitLossKind.root} render={this.renderEdit} />\n\t\t\t\t</section>\n\t\t\t);\n\n\t\t\tprivate renderRoot = (orderId: Option<number>) => () =>\n\t\t\t\tpipe(\n\t\t\t\t\torderId,\n\t\t\t\t\tO.fold(constant(<EmptyScreenContainer screenType={ScreenType.Orders} />), orderId => (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tmatch={routes.orders.root}\n\t\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\t\trender={() => <Redirect to={routes.orders.order.root} value={{ orderId }} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Route match={routes.orders.order.root} render={() => <OrdersTableContainer />} />\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)),\n\t\t\t\t);\n\n\t\t\tprivate renderChart = (path: MatchType<typeof routes.orders.order.root>) => (\n\t\t\t\t<OrderDashboardChartContainer orderId={path.orderId} />\n\t\t\t);\n\n\t\t\tprivate renderOrderInfo = (path: MatchType<typeof routes.orders.order.info.root>) => (\n\t\t\t\t<div className={css.aside}>\n\t\t\t\t\t<OrderInfoContainer orderId={path.orderId} />\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\tprivate renderEdit = (path: MatchType<typeof routes.orders.order.edit.profitLossKind.root>) => (\n\t\t\t\t<div className={css.aside}>\n\t\t\t\t\t<OrderEditContainer orderId={path.orderId} profitLossKind={path.profitLossKind} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t},\n);\n","import { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { head } from 'fp-ts/lib/Array';\nimport { eqNumber } from 'fp-ts/lib/Eq';\nimport { distinctUntilChangedStrict } from '../../../../utils/live-data.utils';\nimport { OrdersDashboard } from '../../components/orders-dashboard/orders-dashboard.component';\nimport { OrderStore } from '../../../../store/order/order.store';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type OrderDashboardContainerContext = {\n\torderStore: OrderStore;\n};\nexport const OrdersDashboardContainer = combineContext(\n\tOrdersDashboard,\n\task<OrderDashboardContainerContext>(),\n\t(OrdersDashboard, e) =>\n\t\twithRXWithDefaults(OrdersDashboard)(() => {\n\t\t\tconst { orderStore } = e;\n\n\t\t\tconst firstOrderId$: LiveData<Error, Option<number>> = orderStore.all$.pipe(\n\t\t\t\tmapRD(list =>\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tlist,\n\t\t\t\t\t\thead,\n\t\t\t\t\t\tO.map(order => order.orderId),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tdistinctUntilChangedStrict(O.getEq(eqNumber)),\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tprops: {\n\t\t\t\t\tfirstOrderId: firstOrderId$,\n\t\t\t\t},\n\t\t\t\tdefaultProps: {\n\t\t\t\t\tfirstOrderId: pending,\n\t\t\t\t},\n\t\t\t};\n\t\t}),\n);\n","import { ReactText } from 'react';\nimport { Period, PeriodNames } from './history-filter-form.model';\n\nexport const getMenuItemName = (period: Period, translatedPeriodNames: PeriodNames): string => {\n\tswitch (period) {\n\t\tcase Period.last7days:\n\t\t\treturn translatedPeriodNames.last7days;\n\t\tcase Period.last30Days:\n\t\t\treturn translatedPeriodNames.last30Days;\n\t\tcase Period.last365days:\n\t\t\treturn translatedPeriodNames.last365days;\n\t\tcase Period.thisMonth:\n\t\t\treturn translatedPeriodNames.thisMonth;\n\t\tcase Period.thisYear:\n\t\t\treturn translatedPeriodNames.thisYear;\n\t\tcase Period.all:\n\t\t\treturn translatedPeriodNames.all;\n\t\tcase Period.custom:\n\t\t\treturn translatedPeriodNames.custom;\n\t}\n};\n\nexport const isPeriod = (value: ReactText): value is Period => {\n\treturn Object.values(Period)\n\t\t.map(p => String(p))\n\t\t.includes(String(value));\n};\n","import { TDateInputValue } from '@devexperts/react-kit/dist/components/DateInput/DateInput.model';\nimport { ProfitLossKind } from '../takeprofit-stoploss/takeprofit-stoploss.model';\nimport { Option } from 'fp-ts/lib/Option';\n\nexport enum HistoryOrderSide {\n\tBuy = '* BUY *',\n\tSell = '* SELL *',\n}\n\nexport enum Period {\n\tlast7days = '* LAST_7_DAYS *',\n\tlast30Days = '* LAST_30_DAYS *',\n\tlast365days = '* LAST_365_DAYS *',\n\tthisMonth = '* THIS_MONTH *',\n\tthisYear = '* THIS_YEAR *',\n\tall = '* ALL *',\n\tcustom = '* CUSTOM *',\n}\n\nexport type UnwrappedFilterFormData = [Period, number, number];\n\nexport type HistoryFilterData = {\n\tselectedPeriod: Period;\n\tstartDate: TDateInputValue;\n\tendDate: TDateInputValue;\n};\n\nexport type HistoryValueHandlerData = HistoryFilterData & {\n\tisDateInputChanged: boolean;\n};\n\nexport type HistoryDetailsData = {\n\torderChainId: string;\n\tsymbol: string;\n\tside: HistoryOrderSide;\n\tamount: number;\n\tprofitLossKind: Option<ProfitLossKind>;\n\topenDateTime: Option<Date>;\n\tcloseDateTime: Date;\n\tsizeInLots: number;\n\ttakeProfitValue: Option<number>;\n\tstopLossValue: Option<number>;\n\tswaps: Option<number>;\n\tcommissions: Option<number>;\n\tpipsSize: number;\n\tprecision: number;\n};\n","import * as React from 'react';\nimport { PureComponent, ReactText } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { Either } from 'fp-ts/lib/Either';\nimport * as E from 'fp-ts/lib/Either';\nimport { constNull } from 'fp-ts/lib/function';\nimport { Menu, MenuItem } from '@devexperts/react-kit/dist/components/Menu/Menu';\nimport { Dropdown, TAnchorProps } from '@devexperts/react-kit/dist/components/Dropdown/Dropdown';\nimport {\n\tPopover,\n\tPopoverAlign,\n\tPopoverPlacement,\n\tTPopoverProps,\n} from '../../../ui-kit/components/popover/popover.component';\nimport { ArrowIcon } from '../../../ui-kit/components/icons/arrow.icon';\nimport { Button } from '../../../../ui-common/button/button.component';\nimport { DateInput } from '../../../ui-kit/components/date-input/date-input';\nimport { TDateInputValue } from '@devexperts/react-kit/dist/components/DateInput/DateInput.model';\nimport { Calendar } from '../../../ui-kit/components/calendar/calendar.component';\nimport { getMenuItemName, isPeriod } from './history-filter-form.utils';\nimport {\n\tUnwrappedFilterFormData,\n\tHistoryFilterData,\n\tHistoryValueHandlerData,\n\tPeriod,\n\tPeriodNames,\n\tDateType,\n} from './history-filter-form.model';\nimport { tspan } from '../../../../utils/i18n.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as css from './theme/history-filter-form.module.css';\nimport * as periodButtonCss from './theme/period-button.child.module.css';\nimport * as periodPopoverCss from './theme/period-popover.child.module.css';\nimport * as dateInputPopoverCss from './theme/date-input-popover.child.module.css';\nimport * as dateInputCss from './theme/date-input.child.module.css';\nimport * as dateInputButtonCss from './theme/date-input.button.module.css';\nimport * as menuItemCss from './theme/menu-item.child.module.css';\n\nexport type HistoryFilterProps = {\n\tvalidatedValue: Either<void, UnwrappedFilterFormData>;\n\tisPeriodDropdownOpened: boolean;\n\tvalue: HistoryFilterData;\n\tonPeriodDropdownToggle: (isOpened: boolean) => void;\n\tonValueChange: (value: HistoryValueHandlerData) => void;\n};\n\nconst periods: Array<Period> = [\n\tPeriod.last7days,\n\tPeriod.last30Days,\n\tPeriod.last365days,\n\tPeriod.thisMonth,\n\tPeriod.thisYear,\n\tPeriod.all,\n\tPeriod.custom,\n];\n\nconst dateInputTheme = {\n\tSteppableInput: {\n\t\tInput: dateInputCss,\n\t\tButtonIcon: dateInputButtonCss,\n\t},\n\tPopover: dateInputPopoverCss,\n};\n\nclass HistoryFilterFormUnwrapped extends PureComponent<HistoryFilterProps & WithTranslation> {\n\tprivate getTranslatedPeriodNames = (): PeriodNames => {\n\t\tconst { t } = this.props;\n\n\t\treturn {\n\t\t\tlast7days: t('historyFilterFormLast7Days', 'Last 7 days'),\n\t\t\tlast30Days: t('historyFilterFormLast30Days', 'Last 30 days'),\n\t\t\tlast365days: t('historyFilterFormLast365days', 'Last 365 days'),\n\t\t\tthisMonth: t('historyFilterFormThisMonth', 'This month'),\n\t\t\tthisYear: t('historyFilterFormThisYear', 'This year'),\n\t\t\tall: t('historyFilterFormAll', 'All'),\n\t\t\tcustom: t('historyFilterFormCustom', 'Custom'),\n\t\t};\n\t};\n\n\trender() {\n\t\tconst { isPeriodDropdownOpened, validatedValue } = this.props;\n\t\tconst { selectedPeriod, startDate, endDate } = this.props.value;\n\n\t\tconst periodNames = this.getTranslatedPeriodNames();\n\n\t\treturn (\n\t\t\t<div className={css.container}>\n\t\t\t\t<div className={css.dropdownWrapper}>\n\t\t\t\t\t<Dropdown\n\t\t\t\t\t\tAnchor={this.renderPeriodsAnchor}\n\t\t\t\t\t\tisOpened={isPeriodDropdownOpened}\n\t\t\t\t\t\tonToggle={this.handlePeriodsToggle}\n\t\t\t\t\t\tPopover={this.renderPeriodsPopover}>\n\t\t\t\t\t\t<Menu onItemSelect={this.handlePeriodSelect}>\n\t\t\t\t\t\t\t{periods.map(period => (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tkey={getMenuItemName(period, periodNames)}\n\t\t\t\t\t\t\t\t\tvalue={period}\n\t\t\t\t\t\t\t\t\tisActive={selectedPeriod === period}\n\t\t\t\t\t\t\t\t\ttheme={menuItemCss}>\n\t\t\t\t\t\t\t\t\t{getMenuItemName(period, periodNames)}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</Dropdown>\n\t\t\t\t</div>\n\t\t\t\t<div className={css.datePickersWrapper}>\n\t\t\t\t\t<span className={css.label}>{tspan('historyFilterFormFrom', 'From')}</span>\n\t\t\t\t\t<div className={css.dateInputWrapper}>\n\t\t\t\t\t\t<DateInput\n\t\t\t\t\t\t\tisDisabled={false}\n\t\t\t\t\t\t\tonValueChange={this.handleDateChange(DateType.startDate)}\n\t\t\t\t\t\t\tCalendar={Calendar}\n\t\t\t\t\t\t\tvalue={startDate}\n\t\t\t\t\t\t\terror={E.isLeft(validatedValue)}\n\t\t\t\t\t\t\ttheme={dateInputTheme}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{this.renderValidationResult()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<span className={css.label}>{tspan('historyFilterFormTo', 'to')}</span>\n\t\t\t\t\t<div className={css.dateInputWrapper}>\n\t\t\t\t\t\t<DateInput\n\t\t\t\t\t\t\tisDisabled={false}\n\t\t\t\t\t\t\tonValueChange={this.handleDateChange(DateType.endDate)}\n\t\t\t\t\t\t\tCalendar={Calendar}\n\t\t\t\t\t\t\tvalue={endDate}\n\t\t\t\t\t\t\terror={E.isLeft(validatedValue)}\n\t\t\t\t\t\t\ttheme={dateInputTheme}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tprivate renderPeriodsAnchor = (props: TAnchorProps) => {\n\t\tconst { children, onClick, innerRef } = props;\n\t\tconst { selectedPeriod } = this.props.value;\n\n\t\tconst periodNames = this.getTranslatedPeriodNames();\n\n\t\treturn (\n\t\t\t<Button isFlat onClick={onClick} ref={innerRef} theme={periodButtonCss}>\n\t\t\t\t<span className={css.text}>{getMenuItemName(selectedPeriod, periodNames)}</span>\n\t\t\t\t<div className={css.triangleWrapper}>\n\t\t\t\t\t<ArrowIcon />\n\t\t\t\t</div>\n\t\t\t\t{children}\n\t\t\t</Button>\n\t\t);\n\t};\n\n\tprivate renderPeriodsPopover = (props: TPopoverProps) => (\n\t\t<Popover {...props} placement={PopoverPlacement.Bottom} align={PopoverAlign.Left} theme={periodPopoverCss} />\n\t);\n\n\tprivate renderValidationResult = () => {\n\t\treturn pipe(\n\t\t\tthis.props.validatedValue,\n\t\t\tE.fold(\n\t\t\t\t() => (\n\t\t\t\t\t<div className={css.error}>\n\t\t\t\t\t\t{tspan(\n\t\t\t\t\t\t\t'historyFilterFormDateValidationError',\n\t\t\t\t\t\t\t'Start date must be equal or lower than end date',\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\tconstNull,\n\t\t\t),\n\t\t);\n\t};\n\n\tprivate handlePeriodsToggle = (isOpened: boolean | undefined) => {\n\t\tconst { onPeriodDropdownToggle } = this.props;\n\n\t\tif (isOpened !== undefined) {\n\t\t\tonPeriodDropdownToggle(isOpened);\n\t\t}\n\t};\n\n\tprivate handlePeriodSelect = (period: ReactText) => {\n\t\tconst { startDate, endDate } = this.props.value;\n\t\tconst { isPeriodDropdownOpened, onValueChange, onPeriodDropdownToggle } = this.props;\n\n\t\tif (!isPeriod(period)) {\n\t\t\treturn;\n\t\t}\n\n\t\tonPeriodDropdownToggle(!isPeriodDropdownOpened);\n\n\t\tonValueChange({\n\t\t\tselectedPeriod: period,\n\t\t\tstartDate,\n\t\t\tendDate,\n\t\t\tisDateInputChanged: false,\n\t\t});\n\t};\n\n\tprivate handleDateChange = (dateType: DateType) => (date: TDateInputValue) => {\n\t\tconst { selectedPeriod, startDate, endDate } = this.props.value;\n\t\tconst { onValueChange } = this.props;\n\n\t\tconst changeDate = (from: TDateInputValue, to: TDateInputValue) =>\n\t\t\tonValueChange({\n\t\t\t\tselectedPeriod,\n\t\t\t\tstartDate: from,\n\t\t\t\tendDate: to,\n\t\t\t\tisDateInputChanged: true,\n\t\t\t});\n\n\t\tswitch (dateType) {\n\t\t\tcase DateType.startDate:\n\t\t\t\tchangeDate(date, endDate);\n\t\t\t\tbreak;\n\n\t\t\tcase DateType.endDate:\n\t\t\t\tchangeDate(startDate, date);\n\t\t\t\tbreak;\n\t\t}\n\t};\n}\n\nexport const HistoryFilterForm = withTranslation()(HistoryFilterFormUnwrapped);\n","import {\n\tdifferenceInDays,\n\tisSameDay,\n\tstartOfYear,\n\tstartOfMonth,\n\tstartOfDay,\n\tsubDays,\n\tendOfDay,\n\tgetDate,\n\tgetMonth,\n\tgetYear,\n} from 'date-fns';\nimport * as O from 'fp-ts/lib/Option';\nimport { TDateInputValue } from '@devexperts/react-kit/dist/components/DateInput/DateInput.model';\nimport {\n\tPeriod,\n\tHistoryFilterData,\n\tHistoryValueHandlerData,\n\tUnwrappedFilterFormData,\n} from '../../model/history/history.model';\nimport { Either } from 'fp-ts/lib/Either';\nimport * as E from 'fp-ts/lib/Either';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\n\nconst getTimestampFromDateInputValue = (inputDate: TDateInputValue): number =>\n\tnew Date(\n\t\tpipe(\n\t\t\tinputDate.year,\n\t\t\tO.getOrElse(constant(0)),\n\t\t),\n\t\tpipe(\n\t\t\tinputDate.month,\n\t\t\tO.getOrElse(constant(0)),\n\t\t),\n\t\tpipe(\n\t\t\tinputDate.day,\n\t\t\tO.getOrElse(constant(0)),\n\t\t),\n\t).getTime();\n\nexport const mapDatesToPeriod = (value: HistoryValueHandlerData): HistoryFilterData => {\n\tconst { startDate, endDate, isDateInputChanged } = value;\n\n\tif (!isDateInputChanged) {\n\t\treturn value;\n\t}\n\n\tconst getDifferenceInDays = (endDate: number): number => differenceInDays(Date.now(), endDate);\n\n\tconst daysToThisMonth = getDifferenceInDays(startOfMonth(Date.now()).getTime());\n\tconst daysToThisYear = getDifferenceInDays(startOfYear(Date.now()).getTime());\n\tconst daysToAllPeriod = getDifferenceInDays(new Date(0).getTime());\n\n\tconst differenceInDaysBetweenDates = differenceInDays(\n\t\tgetTimestampFromDateInputValue(endDate),\n\t\tgetTimestampFromDateInputValue(startDate),\n\t);\n\n\tconst isEndDateCustomized = !isSameDay(new Date(getTimestampFromDateInputValue(endDate)), new Date());\n\tconst isPeriodMatched = [7, 30, 365, daysToThisMonth, daysToThisYear, daysToAllPeriod].includes(\n\t\tdifferenceInDaysBetweenDates,\n\t);\n\n\tif (isEndDateCustomized || !isPeriodMatched) {\n\t\treturn { ...value, selectedPeriod: Period.custom };\n\t}\n\n\tswitch (differenceInDaysBetweenDates) {\n\t\tcase 7:\n\t\t\treturn { ...value, selectedPeriod: Period.last7days };\n\n\t\tcase 30:\n\t\t\treturn { ...value, selectedPeriod: Period.last30Days };\n\n\t\tcase 365:\n\t\t\treturn { ...value, selectedPeriod: Period.last365days };\n\n\t\tcase daysToThisMonth:\n\t\t\treturn { ...value, selectedPeriod: Period.thisMonth };\n\n\t\tcase daysToThisYear:\n\t\t\treturn { ...value, selectedPeriod: Period.thisYear };\n\n\t\tcase daysToAllPeriod:\n\t\t\treturn { ...value, selectedPeriod: Period.all };\n\n\t\tdefault:\n\t\t\treturn { ...value, selectedPeriod: Period.custom };\n\t}\n};\n\nexport const unwrapDatesFromValue = (value: HistoryFilterData): UnwrappedFilterFormData => {\n\tconst endOfThisDay = endOfDay(Date.now()).getTime();\n\tconst getStartOfDay = (substactDays: number): number => startOfDay(subDays(endOfThisDay, substactDays)).getTime();\n\n\tswitch (value.selectedPeriod) {\n\t\tcase Period.last7days:\n\t\t\treturn [value.selectedPeriod, getStartOfDay(7), endOfThisDay];\n\n\t\tcase Period.last30Days:\n\t\t\treturn [value.selectedPeriod, getStartOfDay(30), endOfThisDay];\n\n\t\tcase Period.last365days:\n\t\t\treturn [value.selectedPeriod, getStartOfDay(365), endOfThisDay];\n\n\t\tcase Period.thisMonth:\n\t\t\treturn [value.selectedPeriod, startOfMonth(endOfThisDay).getTime(), endOfThisDay];\n\n\t\tcase Period.thisYear:\n\t\t\treturn [value.selectedPeriod, startOfYear(endOfThisDay).getTime(), endOfThisDay];\n\n\t\tcase Period.all:\n\t\t\treturn [value.selectedPeriod, new Date(0).getTime(), endOfThisDay];\n\n\t\tcase Period.custom:\n\t\t\treturn [\n\t\t\t\tvalue.selectedPeriod,\n\t\t\t\tstartOfDay(getTimestampFromDateInputValue(value.startDate)).getTime(),\n\t\t\t\tendOfDay(getTimestampFromDateInputValue(value.endDate)).getTime(),\n\t\t\t];\n\n\t\tdefault:\n\t\t\treturn [value.selectedPeriod, getStartOfDay(7), endOfThisDay];\n\t}\n};\n\nexport const wrapDatesToValue = (unwrappedValues: UnwrappedFilterFormData): HistoryFilterData => {\n\tconst [period, startDate, endDate] = unwrappedValues;\n\n\treturn {\n\t\tselectedPeriod: period,\n\t\tstartDate: {\n\t\t\tday: O.some(getDate(startDate)),\n\t\t\tmonth: O.some(getMonth(startDate)),\n\t\t\tyear: O.some(getYear(startDate)),\n\t\t},\n\t\tendDate: {\n\t\t\tday: O.some(getDate(endDate)),\n\t\t\tmonth: O.some(getMonth(endDate)),\n\t\t\tyear: O.some(getYear(endDate)),\n\t\t},\n\t};\n};\n\nexport const getDefaultHistoryValue = (): HistoryFilterData => {\n\tconst today = Date.now();\n\tconst weekAgo = subDays(today, 7).getTime();\n\n\treturn {\n\t\tselectedPeriod: Period.last7days,\n\t\tstartDate: {\n\t\t\tday: O.some(getDate(weekAgo)),\n\t\t\tmonth: O.some(getMonth(weekAgo)),\n\t\t\tyear: O.some(getYear(weekAgo)),\n\t\t},\n\t\tendDate: {\n\t\t\tday: O.some(getDate(today)),\n\t\t\tmonth: O.some(getMonth(today)),\n\t\t\tyear: O.some(getYear(today)),\n\t\t},\n\t};\n};\n\nexport const dedupeValues = (prevValue: UnwrappedFilterFormData, currValue: UnwrappedFilterFormData): boolean =>\n\tprevValue.every((prevHistoryDataValue, i) => currValue[i] === prevHistoryDataValue);\n\nexport const validateDateInputs = (unwrappedValues: UnwrappedFilterFormData): Either<void, UnwrappedFilterFormData> => {\n\tconst [startTimestamp, endTimestamp] = unwrappedValues.slice(1);\n\treturn startTimestamp > endTimestamp ? E.left(undefined) : E.right(unwrappedValues);\n};\n","import { Observable } from 'rxjs';\nimport { tap, map, startWith, distinctUntilChanged, filter } from 'rxjs/operators';\nimport { HistoryOrderStore } from '../../store/history-order/history-order.store';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { HistoryFilterData, HistoryValueHandlerData, UnwrappedFilterFormData } from '../../model/history/history.model';\nimport {\n\tmapDatesToPeriod,\n\tunwrapDatesFromValue,\n\twrapDatesToValue,\n\tgetDefaultHistoryValue,\n\tdedupeValues,\n\tvalidateDateInputs,\n} from './history-filter-form.utils';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { Either } from 'fp-ts/lib/Either';\nimport * as E from 'fp-ts/lib/Either';\n\nexport type HistoryFilterFormViewModel = {\n\tinitValue: HistoryFilterData;\n\tisPeriodDropdownOpened$: Observable<boolean>;\n\tvalue$: Observable<HistoryFilterData>;\n\tvalidatedValue$: Observable<Either<void, UnwrappedFilterFormData>>;\n\tonPeriodDropdownToggle: (isOpened: boolean) => void;\n\tonValueChange: (value: HistoryValueHandlerData) => void;\n};\n\ntype HistoryFilterFormViewModelContext = {\n\thistoryOrderStore: HistoryOrderStore;\n};\n\ntype CreateHistoryHistoryFilterFormViewModel = () => Sink<HistoryFilterFormViewModel>;\n\nexport const createHistoryFilterFormViewModel = combineContext(\n\task<HistoryFilterFormViewModelContext>(),\n\t(ctx: HistoryFilterFormViewModelContext): CreateHistoryHistoryFilterFormViewModel => {\n\t\tconst { historyOrderStore } = ctx;\n\n\t\tconst dropdownHandler = createHandler<boolean>();\n\t\tconst filterFormHandler = createHandler<HistoryValueHandlerData>();\n\n\t\tconst initValue = getDefaultHistoryValue();\n\n\t\tconst initHandlerValue: HistoryValueHandlerData = {\n\t\t\t...initValue,\n\t\t\tisDateInputChanged: false,\n\t\t};\n\n\t\tconst unwrappedValue$ = filterFormHandler.value$.pipe(\n\t\t\tstartWith(initHandlerValue),\n\t\t\tmap(mapDatesToPeriod),\n\t\t\tmap(unwrapDatesFromValue),\n\t\t\tdistinctUntilChanged(dedupeValues),\n\t\t);\n\n\t\tconst validatedValue$ = unwrappedValue$.pipe(map(validateDateInputs));\n\n\t\tconst validValue$ = validatedValue$.pipe(filter(E.isRight));\n\n\t\tconst effect$ = validValue$.pipe(\n\t\t\ttap(({ value: [_, startTimestamp, endTimestamp] }) =>\n\t\t\t\thistoryOrderStore.onDateChange(startTimestamp, endTimestamp),\n\t\t\t),\n\t\t);\n\n\t\tconst value$ = unwrappedValue$.pipe(map(wrapDatesToValue));\n\n\t\treturn () =>\n\t\t\tnew Sink(\n\t\t\t\t{\n\t\t\t\t\tinitValue,\n\t\t\t\t\tisPeriodDropdownOpened$: dropdownHandler.value$,\n\t\t\t\t\tvalue$,\n\t\t\t\t\tvalidatedValue$,\n\t\t\t\t\tonPeriodDropdownToggle: dropdownHandler.handle,\n\t\t\t\t\tonValueChange: filterFormHandler.handle,\n\t\t\t\t},\n\t\t\t\teffect$,\n\t\t\t);\n\t},\n);\n","import { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { right } from 'fp-ts/lib/Either';\nimport { UnwrappedFilterFormData } from '../../../../model/history/history.model';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { HistoryFilterForm } from '../../components/history-filter-form/history-filter-form.component';\nimport {\n\tcreateHistoryFilterFormViewModel,\n\tHistoryFilterFormViewModel,\n} from '../../../../view-model/history/history-filter-form.view-model';\n\ntype HistoryFilterFormContainerContext = {\n\thistoryFilterFormViewModel: HistoryFilterFormViewModel;\n};\n\nexport const Container = combineContext(ask<HistoryFilterFormContainerContext>(), ctx => {\n\treturn withRXWithDefaults(HistoryFilterForm)(() => {\n\t\tconst {\n\t\t\thistoryFilterFormViewModel: {\n\t\t\t\tisPeriodDropdownOpened$,\n\t\t\t\tvalue$,\n\t\t\t\tonPeriodDropdownToggle,\n\t\t\t\tinitValue,\n\t\t\t\tonValueChange,\n\t\t\t\tvalidatedValue$,\n\t\t\t},\n\t\t} = ctx;\n\n\t\tconst { selectedPeriod: initPeriod } = initValue;\n\n\t\treturn {\n\t\t\tprops: {\n\t\t\t\tisPeriodDropdownOpened: isPeriodDropdownOpened$,\n\t\t\t\tvalue: value$,\n\t\t\t\tvalidatedValue: validatedValue$,\n\t\t\t},\n\t\t\tdefaultProps: {\n\t\t\t\tisPeriodDropdownOpened: false,\n\t\t\t\tonPeriodDropdownToggle,\n\t\t\t\tvalue: initValue,\n\t\t\t\tvalidatedValue: right<void, UnwrappedFilterFormData>([initPeriod, 0, 0]),\n\t\t\t\tonValueChange,\n\t\t\t},\n\t\t};\n\t});\n});\n\nexport const HistoryFilterFormContainer = combineContext(\n\tcreateHistoryFilterFormViewModel,\n\tdeferContext(Container, 'historyFilterFormViewModel'),\n\t(createHistoryFilterFormViewModel, Container) =>\n\t\trunOnMount(Container, () => () =>\n\t\t\tcreateHistoryFilterFormViewModel().map(historyFilterFormViewModel => ({ historyFilterFormViewModel })),\n\t\t),\n);\n","import { HistoryTableConfigItem, HistoryTableItem, HistoryTableColumnNames } from './history-table.model';\nimport { HistoryOrderSide } from '../../../../model/history/history.model';\nimport { Column, TableCellAlign } from '../../../../ui-common/table-ava/table.model';\nimport { getWidthFromConfig } from '../../../../ui-common/table-ava/table.utils';\n\ntype StringifiedOrderSide = 'Buy' | 'Sell';\n\nexport const getItemKey = (rowIndex: number, data: HistoryTableItem[]) => data[rowIndex].orderId;\n\nexport const getColumnsConfig = (\n\tconfig: HistoryTableConfigItem[],\n\ttranslatedColumnNames: HistoryTableColumnNames,\n): Column[] => [\n\t{\n\t\tlabel: translatedColumnNames.openDateTime,\n\t\twidth: getWidthFromConfig(config, 'openDateTime'),\n\t\talign: TableCellAlign.Left,\n\t\tkey: 'openDateTime',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.instrument,\n\t\twidth: getWidthFromConfig(config, 'instrument'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'instrument',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.profitLoss,\n\t\twidth: getWidthFromConfig(config, 'profitLoss'),\n\t\talign: TableCellAlign.Right,\n\t\tkey: 'profitLoss',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.side,\n\t\twidth: getWidthFromConfig(config, 'side'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'side',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.amount,\n\t\twidth: getWidthFromConfig(config, 'amount'),\n\t\talign: TableCellAlign.Right,\n\t\tkey: 'amount',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.openPrice,\n\t\twidth: getWidthFromConfig(config, 'openPrice'),\n\t\talign: TableCellAlign.Right,\n\t\tkey: 'openPrice',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.closePrice,\n\t\twidth: getWidthFromConfig(config, 'closePrice'),\n\t\talign: TableCellAlign.Right,\n\t\tkey: 'closePrice',\n\t},\n\t{\n\t\tlabel: translatedColumnNames.closeDateTime,\n\t\twidth: getWidthFromConfig(config, 'closeDateTime'),\n\t\talign: TableCellAlign.Center,\n\t\tkey: 'closeDateTime',\n\t},\n\t{\n\t\tlabel: ' ',\n\t\twidth: getWidthFromConfig(config, 'info-icon'),\n\t\talign: TableCellAlign.Right,\n\t\tkey: 'info-icon',\n\t},\n];\n\nexport const stringifyOrderSideEnum = (side: HistoryOrderSide): StringifiedOrderSide => {\n\tswitch (side) {\n\t\tcase HistoryOrderSide.Buy:\n\t\t\treturn 'Buy';\n\t\tcase HistoryOrderSide.Sell:\n\t\t\treturn 'Sell';\n\t}\n};\n\nexport const HistoryTableConfig: HistoryTableConfigItem[] = [\n\t{\n\t\twidth: 190,\n\t\tdataKey: 'openDateTime',\n\t\tlabel: 'Open Date-time',\n\t},\n\t{\n\t\twidth: 100,\n\t\tdataKey: 'instrument',\n\t\tlabel: 'Instrument',\n\t},\n\t{\n\t\twidth: 120,\n\t\tdataKey: 'profitLoss',\n\t\tlabel: 'Profit/Loss',\n\t},\n\t{\n\t\twidth: 90,\n\t\tdataKey: 'side',\n\t\tlabel: 'Side',\n\t},\n\t{\n\t\twidth: 90,\n\t\tdataKey: 'amount',\n\t\tlabel: 'Amount',\n\t},\n\t{\n\t\twidth: 90,\n\t\tdataKey: 'openPrice',\n\t\tlabel: 'Open Price',\n\t},\n\t{\n\t\twidth: 90,\n\t\tdataKey: 'closePrice',\n\t\tlabel: 'Close Price',\n\t},\n\t{\n\t\twidth: 190,\n\t\tdataKey: 'closeDateTime',\n\t\tlabel: 'Close Date-time',\n\t},\n\t{\n\t\twidth: 70,\n\t\tdataKey: 'info-icon',\n\t\tlabel: '',\n\t},\n];\n","import * as React from 'react';\nimport { PureComponent, Fragment } from 'react';\nimport { ListChildComponentProps } from 'react-window';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport * as cn from 'classnames';\nimport { formatMoney, formatNumber } from 'accounting';\nimport { format } from 'date-fns';\nimport { findFirst } from 'fp-ts/lib/Array';\nimport { empty } from 'fp-ts/lib/Record';\nimport * as O from 'fp-ts/lib/Option';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { RouteLink } from '../../../../ui-common/route-link/containers/route-link.container';\nimport { routes } from '../../../../ui-common/routes';\nimport { Link } from '../../../../ui-common/link/link.component';\nimport { AutosizedTable as Table } from '../../../../ui-common/autosized-table-ava/autosized-table.component';\nimport { TableCellAlign } from '../../../../ui-common/table-ava/table.model';\nimport { TableCell } from '../../../../ui-common/table-ava/table-cell.component';\nimport { InfoIcon } from '../../../../ui-common/icons/info.icon';\nimport { Optional } from '../../../../ui-common/optional/optional.component';\nimport {\n\tHistoryTableItem,\n\tHistoryTableConfigItem,\n\tHistoryTableColumnNames,\n\tHistoryOrderSide,\n} from './history-table.model';\nimport { stringifyOrderSideEnum, getItemKey, getColumnsConfig } from './history-table.utils';\nimport { RenderRemoteData } from '@devexperts/react-kit/dist/components/render-remote-data/render-remote-data.component';\nimport { EmptyScreenContainer } from '../../../empty-screen/containers/empty-screen.container';\nimport { ScreenType } from '../../../../ui-common/empty-screen/components/empty-screen.component';\nimport { Preloader } from '../../../ui-kit/components/preloader/preloader.component';\nimport { tspan, TRANSLATION_PLACEHOLDER } from '../../../../utils/i18n.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\nimport * as css from './theme/history-table.module.css';\n\nexport type HistoryTableProps = {\n\tdata: RemoteData<Error, HistoryTableItem[]>;\n\tconfig: HistoryTableConfigItem[];\n\tcurrencySymbol: string;\n};\n\nconst defaultColumnWidth = 150;\n\nexport const HistoryTable = combineContext(RouteLink, EmptyScreenContainer, (RouteLink, EmptyScreenContainer) =>\n\twithTranslation()(\n\t\tclass HistoryTable extends PureComponent<HistoryTableProps & WithTranslation> {\n\t\t\tprivate getTranslatedColumnNames = (): HistoryTableColumnNames => {\n\t\t\t\tconst { currencySymbol } = this.props;\n\n\t\t\t\treturn {\n\t\t\t\t\topenDateTime: tspan('historyTableOpenDateTime', 'Open Date-time'),\n\t\t\t\t\tinstrument: tspan('historyTableInstrument', 'Instrument'),\n\t\t\t\t\tprofitLoss: tspan(\n\t\t\t\t\t\t'historyTableProfitLoss',\n\t\t\t\t\t\t'Profit/Loss',\n\t\t\t\t\t\t`${TRANSLATION_PLACEHOLDER}, ${currencySymbol}`,\n\t\t\t\t\t),\n\t\t\t\t\tside: tspan('historyTableSide', 'Side'),\n\t\t\t\t\tamount: tspan('historyTableAmount', 'Amount'),\n\t\t\t\t\topenPrice: tspan('historyTableOpenPrice', 'Open Price'),\n\t\t\t\t\tclosePrice: tspan('historyTableClosePrice', 'Close Price'),\n\t\t\t\t\tcloseDateTime: tspan('historyTableCloseDateTime', 'Close Date-time'),\n\t\t\t\t};\n\t\t\t};\n\n\t\t\trender() {\n\t\t\t\tconst { data } = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<RenderRemoteData\n\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\tsuccess={this.renderSuccess}\n\t\t\t\t\t\tnoData={data => data.length === 0}\n\t\t\t\t\t\tDataStateNoData={() => <EmptyScreenContainer screenType={ScreenType.HistorySearch} />}\n\t\t\t\t\t\tDataStatePending={() => <Preloader />}\n\t\t\t\t\t\tDataStateFailure={() => <div>Error loading data</div>}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tprivate renderSuccess = (data: HistoryTableItem[]) => {\n\t\t\t\tconst { config } = this.props;\n\n\t\t\t\tconst columnNames = this.getTranslatedColumnNames();\n\n\t\t\t\treturn (\n\t\t\t\t\t<Table\n\t\t\t\t\t\titemCount={data.length}\n\t\t\t\t\t\titemSize={60}\n\t\t\t\t\t\titemData={data}\n\t\t\t\t\t\titemKey={getItemKey}\n\t\t\t\t\t\tcolumns={getColumnsConfig(config, columnNames)}>\n\t\t\t\t\t\t{this.renderRow}\n\t\t\t\t\t</Table>\n\t\t\t\t);\n\t\t\t};\n\t\t\tprivate renderRow = (props: ListChildComponentProps) => {\n\t\t\t\tconst { style } = props;\n\t\t\t\tconst rowData = props.data[props.index];\n\n\t\t\t\treturn (\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={routes.history.root}\n\t\t\t\t\t\tvalue={empty}\n\t\t\t\t\t\trender={({ onNavigate }) => (\n\t\t\t\t\t\t\t<div className={css.row} onClick={onNavigate} style={style}>\n\t\t\t\t\t\t\t\t<div className={css.rowColumn} style={this.getFlexBasis('openDateTime')}>\n\t\t\t\t\t\t\t\t\t{this.renderOpenDateTime(rowData)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={css.rowColumn} style={this.getFlexBasis('instrument')}>\n\t\t\t\t\t\t\t\t\t{this.renderInstrument(rowData)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={css.rowColumn} style={this.getFlexBasis('profitLoss')}>\n\t\t\t\t\t\t\t\t\t{this.renderProfitLoss(rowData)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={css.rowColumn} style={this.getFlexBasis('side')}>\n\t\t\t\t\t\t\t\t\t{this.renderSide(rowData)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={css.rowColumn} style={this.getFlexBasis('amount')}>\n\t\t\t\t\t\t\t\t\t{this.renderAmount(rowData)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={css.rowColumn} style={this.getFlexBasis('openPrice')}>\n\t\t\t\t\t\t\t\t\t{this.renderOpenPrice(rowData)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={css.rowColumn} style={this.getFlexBasis('closePrice')}>\n\t\t\t\t\t\t\t\t\t{this.renderClosePrice(rowData)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={css.rowColumn} style={this.getFlexBasis('closeDateTime')}>\n\t\t\t\t\t\t\t\t\t{this.renderCloseDateTime(rowData)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={css.rowColumn} style={this.getFlexBasis('info-icon')}>\n\t\t\t\t\t\t\t\t\t{this.renderInfoIcon(rowData)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderOpenDateTime = (props: HistoryTableItem) => {\n\t\t\t\tconst value = props.openDateTime;\n\t\t\t\tconst cnCell = pipe(\n\t\t\t\t\tvalue,\n\t\t\t\t\tO.fold(constant(cn(css.cell, css.cell_empty)), constant(css.cell)),\n\t\t\t\t);\n\t\t\t\tconst openDateTime = (\n\t\t\t\t\t<Optional\n\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tO.map(date => this.toStringDate(date)),\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\n\t\t\t\treturn <div className={cnCell}>{openDateTime}</div>;\n\t\t\t};\n\n\t\t\tprivate renderInstrument = (props: HistoryTableItem) => {\n\t\t\t\tconst value = props.instrument;\n\t\t\t\tconst cnCell = pipe(\n\t\t\t\t\tvalue,\n\t\t\t\t\tO.fold(constant(cn(css.cell, css.cell_empty)), constant(css.cell)),\n\t\t\t\t);\n\t\t\t\tconst instrument = <Optional value={value} />;\n\n\t\t\t\treturn <div className={cnCell}>{instrument}</div>;\n\t\t\t};\n\n\t\t\tprivate renderProfitLoss = (props: HistoryTableItem) => {\n\t\t\t\tconst value = props.profitLoss;\n\t\t\t\tconst cnCell = pipe(\n\t\t\t\t\tvalue,\n\t\t\t\t\tO.fold(constant(cn(css.cell, css.cell_empty)), profitLoss =>\n\t\t\t\t\t\tcn(css.cell, css.cell_numeric, {\n\t\t\t\t\t\t\t[css.cell_positive]: profitLoss > 0,\n\t\t\t\t\t\t\t[css.cell_negative]: profitLoss < 0,\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\tconst profitLoss = (\n\t\t\t\t\t<Optional\n\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tO.map(this.toStringProfitLoss),\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\n\t\t\t\treturn <div className={cnCell}>{profitLoss}</div>;\n\t\t\t};\n\n\t\t\tprivate renderSide = (props: HistoryTableItem) => {\n\t\t\t\tconst value = props.side;\n\t\t\t\tconst cnCell = pipe(\n\t\t\t\t\tvalue,\n\t\t\t\t\tO.fold(constant(cn(css.cell, css.cell_empty)), side => {\n\t\t\t\t\t\tconst stringifiedSide = stringifyOrderSideEnum(side);\n\t\t\t\t\t\treturn cn(css.cell, {\n\t\t\t\t\t\t\t[css.cell_buy]: stringifiedSide === 'Buy',\n\t\t\t\t\t\t\t[css.cell_sell]: stringifiedSide === 'Sell',\n\t\t\t\t\t\t});\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t\tconst side = (\n\t\t\t\t\t<Optional\n\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tO.map(this.localizeOrderSideEnum),\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\n\t\t\t\treturn <div className={cnCell}>{side}</div>;\n\t\t\t};\n\n\t\t\tprivate renderAmount = (props: HistoryTableItem) => {\n\t\t\t\tconst value = props.amount;\n\t\t\t\tconst cnCell = pipe(\n\t\t\t\t\tvalue,\n\t\t\t\t\tO.fold(\n\t\t\t\t\t\tconstant(cn(css.cell, [css.cell_numeric, css.cell_empty])),\n\t\t\t\t\t\tconstant(cn(css.cell, css.cell_numeric)),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\tconst amount = <Optional value={value} />;\n\n\t\t\t\treturn <div className={cnCell}>{amount}</div>;\n\t\t\t};\n\n\t\t\tprivate renderOpenPrice = (props: HistoryTableItem) => {\n\t\t\t\tconst value = props.openPrice;\n\t\t\t\tconst cnCell = pipe(\n\t\t\t\t\tvalue,\n\t\t\t\t\tO.fold(\n\t\t\t\t\t\tconstant(cn(css.cell, [css.cell_numeric, css.cell_empty])),\n\t\t\t\t\t\tconstant(cn(css.cell, css.cell_numeric)),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\tconst openPrice = (\n\t\t\t\t\t<Optional\n\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tO.map(amount => formatNumber(amount, props.precision)),\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\n\t\t\t\treturn <div className={cnCell}>{openPrice}</div>;\n\t\t\t};\n\n\t\t\tprivate renderClosePrice = (props: HistoryTableItem) => {\n\t\t\t\tconst value = props.closePrice;\n\t\t\t\tconst cnCell = pipe(\n\t\t\t\t\tvalue,\n\t\t\t\t\tO.fold(\n\t\t\t\t\t\tconstant(cn(css.cell, [css.cell_numeric, css.cell_empty])),\n\t\t\t\t\t\tconstant(cn(css.cell, css.cell_numeric)),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\tconst closePrice = (\n\t\t\t\t\t<Optional\n\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tO.map(price => formatNumber(price, props.precision)),\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\n\t\t\t\treturn <div className={cnCell}>{closePrice}</div>;\n\t\t\t};\n\n\t\t\tprivate renderCloseDateTime = (props: HistoryTableItem) => {\n\t\t\t\tconst value = props.closeDateTime;\n\t\t\t\tconst cnCell = pipe(\n\t\t\t\t\tvalue,\n\t\t\t\t\tO.fold(constant(cn(css.cell, css.cell_empty)), constant(css.cell)),\n\t\t\t\t);\n\t\t\t\tconst closeDateTime = (\n\t\t\t\t\t<Optional\n\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tO.map(date => this.toStringDate(date)),\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\n\t\t\t\treturn <div className={cnCell}>{closeDateTime}</div>;\n\t\t\t};\n\n\t\t\tprivate toStringProfitLoss = (value: number) => {\n\t\t\t\tconst prefix = value > 0 ? '+' : '';\n\t\t\t\tconst result = formatMoney(value, {\n\t\t\t\t\tformat: '%v',\n\t\t\t\t});\n\t\t\t\treturn `${prefix}${result}`;\n\t\t\t};\n\n\t\t\tprivate toStringDate = (value: Date) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t{format(value, 'mm.dd.yyyy hh:mm')}\n\t\t\t\t\t\t<span className={css.seconds}>{format(value, ':ss')}</span>\n\t\t\t\t\t</Fragment>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tprivate renderInfoIcon = (props: HistoryTableItem) => (\n\t\t\t\t<TableCell align={TableCellAlign.Right}>\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={routes.history.order.info.root}\n\t\t\t\t\t\tvalue={{ historyOrderId: props.orderId }}\n\t\t\t\t\t\trender={({ href, onNavigate }) => (\n\t\t\t\t\t\t\t<Link href={href} onClick={onNavigate}>\n\t\t\t\t\t\t\t\t<i className={css.icon}>\n\t\t\t\t\t\t\t\t\t<InfoIcon />\n\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t</TableCell>\n\t\t\t);\n\n\t\t\tprivate getFlexBasis = (dataKey: string): { flexBasis: number } => {\n\t\t\t\tconst { config } = this.props;\n\t\t\t\tconst currentColumn = findFirst(config, item => {\n\t\t\t\t\treturn item['dataKey'] === dataKey;\n\t\t\t\t});\n\n\t\t\t\tconst width = pipe(\n\t\t\t\t\tcurrentColumn,\n\t\t\t\t\tO.fold(constant(defaultColumnWidth), value => value.width),\n\t\t\t\t);\n\t\t\t\treturn { flexBasis: width };\n\t\t\t};\n\n\t\t\tprivate localizeOrderSideEnum = (side: HistoryOrderSide) => {\n\t\t\t\tconst stringifiedSide = stringifyOrderSideEnum(side);\n\n\t\t\t\tswitch (stringifiedSide) {\n\t\t\t\t\tcase 'Buy':\n\t\t\t\t\t\treturn tspan('historyTableBuySide', 'Buy');\n\t\t\t\t\tcase 'Sell':\n\t\t\t\t\t\treturn tspan('historyTableSellSide', 'Sell');\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t),\n);\n","import { some } from 'fp-ts/lib/Option';\nimport { HistoryOrderTO } from '../../../../api/generated/swagger/definitions/HistoryOrderTO';\nimport { HistoryOrderSide } from '../../../../model/history/history.model';\nimport { HistoryTableItem } from '../../components/history-table/history-table.model';\nimport { HistoryTableData } from '../../../../view-model/history/history-table.view-model';\n\nexport const toOrderSideEnum = (rawSide: HistoryOrderTO['side']): HistoryOrderSide => {\n\tswitch (rawSide) {\n\t\tcase 'BUY':\n\t\t\treturn HistoryOrderSide.Buy;\n\t\tcase 'SELL':\n\t\t\treturn HistoryOrderSide.Sell;\n\t}\n};\n\nexport const toHistoryTableData = (data: HistoryTableData): HistoryTableItem => ({\n\torderId: data.orderId,\n\topenDateTime: data.openDateTime,\n\tinstrument: some(data.instrument),\n\tprofitLoss: data.profitLoss,\n\tside: some(data.side),\n\tamount: some(Math.abs(data.amount)),\n\topenPrice: data.openPrice,\n\tclosePrice: data.closePrice,\n\tcloseDateTime: some(data.closeDateTime),\n\tprecision: data.precision,\n});\n","import { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { HistoryOrderStore } from '../../store/history-order/history-order.store';\nimport { combineContext, ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { Option } from 'fp-ts/lib/Option';\nimport { HistoryOrderSide } from '../../model/history/history.model';\nimport { toOrderSideEnum } from '../../ui-desktop/history/containers/history-table/history-table.utils';\n\nexport type HistoryTableData = {\n\torderId: number;\n\topenDateTime: Option<Date>;\n\tinstrument: string;\n\tprofitLoss: Option<number>;\n\tside: HistoryOrderSide;\n\tamount: number;\n\topenPrice: Option<number>;\n\tclosePrice: Option<number>;\n\tcloseDateTime: Date;\n\tprecision: number;\n};\n\nexport type HistoryTableViewModel = {\n\tdata$: LiveData<Error, HistoryTableData[]>;\n};\n\ntype HistoryTableViewModelContext = {\n\thistoryOrderStore: HistoryOrderStore;\n};\n\ntype CreateHistoryTableViewModel = () => HistoryTableViewModel;\n\nexport const createHistoryTableViewModel = combineContext(\n\task<HistoryTableViewModelContext>(),\n\t(HistoryTableContext): CreateHistoryTableViewModel => () => {\n\t\tconst {\n\t\t\thistoryOrderStore: { requestedOrders$ },\n\t\t} = HistoryTableContext;\n\n\t\tconst filteredOrders$: LiveData<Error, HistoryTableData[]> = requestedOrders$.pipe(\n\t\t\tmapRD(orders =>\n\t\t\t\torders.map(to => ({\n\t\t\t\t\torderId: to.orderId,\n\t\t\t\t\topenDateTime: to.openTime,\n\t\t\t\t\tinstrument: to.instrument.symbol,\n\t\t\t\t\tprofitLoss: to.profitSize,\n\t\t\t\t\tside: toOrderSideEnum(to.side),\n\t\t\t\t\tamount: Math.abs(to.quantity),\n\t\t\t\t\topenPrice: to.openPrice,\n\t\t\t\t\tclosePrice: to.closePrice,\n\t\t\t\t\tcloseDateTime: to.closeTime,\n\t\t\t\t\tprecision: to.instrument.precision,\n\t\t\t\t})),\n\t\t\t),\n\t\t);\n\n\t\treturn {\n\t\t\tdata$: filteredOrders$,\n\t\t};\n\t},\n);\n","import { pending } from '@devexperts/remote-data-ts';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { HistoryTable } from '../../components/history-table/history-table.component';\nimport { HistoryTableConfig } from '../../components/history-table/history-table.utils';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { AccountViewModel } from '../../../../view-model/account/account.view-model';\nimport { currencyStringToSymbol } from '../../../../utils/currency.utils';\nimport { map } from 'rxjs/operators';\nimport {\n\tcreateHistoryTableViewModel,\n\tHistoryTableViewModel,\n} from '../../../../view-model/history/history-table.view-model';\nimport { toHistoryTableData } from './history-table.utils';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\n\ntype HistoryPageContainerContext = {\n\thistoryTableViewModel: HistoryTableViewModel;\n\taccountViewModel: AccountViewModel;\n};\n\nexport const Container = combineContext(\n\task<HistoryPageContainerContext>(),\n\tHistoryTable,\n\t(ctx, HistoryTableComponent) =>\n\t\twithRXWithDefaults(HistoryTableComponent)(() => {\n\t\t\tconst { historyTableViewModel, accountViewModel } = ctx;\n\t\t\tconst { current$ } = accountViewModel;\n\t\t\tconst currencySymbol$ = current$.pipe(\n\t\t\t\tmap(currentAccount => currencyStringToSymbol(currentAccount.baseCurrency)),\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tprops: {\n\t\t\t\t\tdata: historyTableViewModel.data$.pipe(mapRD(data => data.map(toHistoryTableData))),\n\t\t\t\t\tcurrencySymbol: currencySymbol$,\n\t\t\t\t},\n\t\t\t\tdefaultProps: {\n\t\t\t\t\tdata: pending,\n\t\t\t\t\tcurrencySymbol: '',\n\t\t\t\t\tconfig: HistoryTableConfig,\n\t\t\t\t},\n\t\t\t};\n\t\t}),\n);\n\nexport const HistoryTableContainer = combineContext(\n\tdeferContext(Container, 'historyTableViewModel'),\n\tcreateHistoryTableViewModel,\n\t(Container, createHistoryTableViewModel) =>\n\t\trunOnMount(Container, () => () => ({ historyTableViewModel: createHistoryTableViewModel() })),\n);\n","import * as React from 'react';\nimport { memo, Fragment, useCallback } from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { format } from 'date-fns';\nimport { Option } from 'fp-ts/lib/Option';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { RouteLink } from '../../ui-common/route-link/containers/route-link.container';\nimport { RemoteDataState } from '../../ui-common/remote-data-state/remote-data-state.component';\nimport { Optional } from '../../ui-common/optional/optional.component';\nimport { PipRate } from '../../ui-common/pip-rate/pip-rate.component';\nimport { SymbolInfoItem } from '../symbol-info-item/symbol-info-item.component';\nimport { definePipSettings } from '../../ui-common/pip-rate/pip-settings.utils';\nimport { tspan } from '../../utils/i18n.utils';\nimport { HistoryDetailsData, HistoryOrderSide } from '../../model/history/history.model';\nimport { ProfitLossKind } from '../../model/takeprofit-stoploss/takeprofit-stoploss.model';\nimport { MakeTheme } from '../../utils/theme.utils';\nimport { empty } from 'fp-ts/lib/Array';\nimport * as O from 'fp-ts/lib/Option';\nimport * as css from './theme/history-details.module.css';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type HistoryDetailsProps = {\n\torderId: number;\n\tdata: RemoteData<Error, HistoryDetailsData>;\n\ttheme?: MakeTheme<'item' | 'item_secondary' | 'label' | 'value' | 'container' | 'title' | 'subtitle'>;\n} & WithTranslation;\n\nexport const HistoryDetailsCommon = combineContext(RouteLink, RouteLink =>\n\twithTranslation()(\n\t\tmemo((props: HistoryDetailsProps) => {\n\t\t\tconst { data, t, theme } = props;\n\n\t\t\tconst renderSide = useCallback(\n\t\t\t\t(side: HistoryOrderSide) => {\n\t\t\t\t\tswitch (side) {\n\t\t\t\t\t\tcase HistoryOrderSide.Buy:\n\t\t\t\t\t\t\treturn <span className={css.positiveSide}>{tspan('historyDetailsBuy', 'Buy')}</span>;\n\t\t\t\t\t\tcase HistoryOrderSide.Sell:\n\t\t\t\t\t\t\treturn <span className={css.negativeSide}>{tspan('historyDetailsSell', 'Sell')}</span>;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t[t],\n\t\t\t);\n\n\t\t\tconst stringifyProfitLossKind = useCallback(\n\t\t\t\t(plKind: ProfitLossKind) => {\n\t\t\t\t\tswitch (plKind) {\n\t\t\t\t\t\tcase ProfitLossKind.Profit:\n\t\t\t\t\t\t\treturn <span className={css.positiveSide}>{tspan('historyDetailsProfit', 'Profit')}</span>;\n\t\t\t\t\t\tcase ProfitLossKind.Loss:\n\t\t\t\t\t\t\treturn <span className={css.negativeSide}>{tspan('historyDetailsLoss', 'Loss')}</span>;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t[t],\n\t\t\t);\n\n\t\t\tconst renderDateString = useCallback((value: Date) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t{format(value, 'MM.dd.yyyy HH:mm')}\n\t\t\t\t\t\t<span className={css.seconds}>{format(value, ':ss')}</span>\n\t\t\t\t\t</Fragment>\n\t\t\t\t);\n\t\t\t}, empty);\n\n\t\t\tconst renderPipsValue = useCallback(\n\t\t\t\t(value: number, pipsSize: number, precision: number) => {\n\t\t\t\t\tconst pipSettings = definePipSettings(value, pipsSize);\n\n\t\t\t\t\treturn <PipRate value={value} rise={pipSettings} digits={precision} />;\n\t\t\t\t},\n\t\t\t\t[definePipSettings],\n\t\t\t);\n\n\t\t\tconst renderOptionalPipsValue = useCallback(\n\t\t\t\t(maybeValue: Option<number>, pipsSize: number, precision: number) =>\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tmaybeValue,\n\t\t\t\t\t\tO.map(value => renderPipsValue(value, pipsSize, precision)),\n\t\t\t\t\t),\n\t\t\t\t[renderPipsValue],\n\t\t\t);\n\n\t\t\tconst renderSuccess = useCallback(\n\t\t\t\t(data: HistoryDetailsData) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tside,\n\t\t\t\t\t\tamount,\n\t\t\t\t\t\tprofitLossKind,\n\t\t\t\t\t\topenDateTime,\n\t\t\t\t\t\tcloseDateTime,\n\t\t\t\t\t\tsizeInLots,\n\t\t\t\t\t\ttakeProfitValue,\n\t\t\t\t\t\tstopLossValue,\n\t\t\t\t\t\tswaps,\n\t\t\t\t\t\tcommissions,\n\t\t\t\t\t\tprecision,\n\t\t\t\t\t\tpipsSize,\n\t\t\t\t\t} = data;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('historyDetailsSide', 'Side')}>\n\t\t\t\t\t\t\t\t{renderSide(side)}\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('historyDetailsAmount', 'Amount')}>\n\t\t\t\t\t\t\t\t{amount}\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('historyDetailsProfitLoss', 'Profit/Loss')}>\n\t\t\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\t\t\tprofitLossKind,\n\t\t\t\t\t\t\t\t\t\tO.map(stringifyProfitLossKind),\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('historyDetailsOpenDateTime', 'Open date time')}>\n\t\t\t\t\t\t\t\t<Optional\n\t\t\t\t\t\t\t\t\tvalue={pipe(\n\t\t\t\t\t\t\t\t\t\topenDateTime,\n\t\t\t\t\t\t\t\t\t\tO.map(renderDateString),\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem\n\t\t\t\t\t\t\t\ttheme={theme}\n\t\t\t\t\t\t\t\tlabel={tspan('historyDetailsCloseDateTime', 'Close date time')}>\n\t\t\t\t\t\t\t\t{renderDateString(closeDateTime)}\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('historyDetailsSizeInLots', 'Size in lots')}>\n\t\t\t\t\t\t\t\t{sizeInLots}\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('historyDetailsTakeProfit', 'Take profit')}>\n\t\t\t\t\t\t\t\t<Optional value={renderOptionalPipsValue(takeProfitValue, pipsSize, precision)} />\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('historyDetailsStopLoss', 'Stop loss')}>\n\t\t\t\t\t\t\t\t<Optional value={renderOptionalPipsValue(stopLossValue, pipsSize, precision)} />\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('historyDetailsSwaps', 'Swaps')}>\n\t\t\t\t\t\t\t\t<Optional value={swaps} />\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t\t<SymbolInfoItem theme={theme} label={tspan('historyDetailsCommissions', 'Commissions')}>\n\t\t\t\t\t\t\t\t<Optional value={commissions} />\n\t\t\t\t\t\t\t</SymbolInfoItem>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\t[t, renderSide, stringifyProfitLossKind, renderDateString, renderOptionalPipsValue],\n\t\t\t);\n\n\t\t\treturn <RemoteDataState data={data} success={renderSuccess} />;\n\t\t}),\n\t),\n);\n","import * as React from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport * as O from 'fp-ts/lib/Option';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { RemoteDataState } from '../../../../ui-common/remote-data-state/remote-data-state.component';\nimport { SidePanel } from '../../../../ui-common/side-panel/side-panel.component';\nimport { HistoryDetailsData } from '../../../../ui-common/history-details/history-details.model';\nimport { HistoryDetailsCommon } from '../../../../ui-common/history-details/history-details.component';\nimport { memo, Fragment, ReactNode } from 'react';\nimport { empty } from 'fp-ts/lib/Record';\nimport { SymbolComponent } from '../../../../ui-common/symbol/symbol';\nimport { tspan, TRANSLATION_PLACEHOLDER } from '../../../../utils/i18n.utils';\nimport { routes } from '../../../../ui-common/routes';\nimport { CloseButton } from '../../../../ui-common/close-button/close-button.component';\nimport { RouteLink } from '../../../../ui-common/route-link/containers/route-link.container';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\nimport * as css from './theme/history-details.module.css';\n\nexport type HistoryDetailsProps = {\n\torderId: number;\n\tdata: RemoteData<Error, HistoryDetailsData>;\n};\n\nexport const HistoryDetails = combineContext(HistoryDetailsCommon, RouteLink, (HistoryDetailsCommon, RouteLink) =>\n\twithTranslation()(\n\t\tmemo((props: HistoryDetailsProps & WithTranslation) => {\n\t\t\tconst { data, orderId } = props;\n\n\t\t\tconst renderHeader = (symbol: string, orderChainId: string) => (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<div className={css.headerText}>\n\t\t\t\t\t\t<SymbolComponent\n\t\t\t\t\t\t\ttitle={pipe(\n\t\t\t\t\t\t\t\torderChainId,\n\t\t\t\t\t\t\t\tO.fromNullable,\n\t\t\t\t\t\t\t\tO.fold<ReactNode, ReactNode>(constant(''), x =>\n\t\t\t\t\t\t\t\t\ttspan('historyDetailsId', 'ID', `${TRANSLATION_PLACEHOLDER} ${x}`),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tsubtitle={symbol}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<RouteLink\n\t\t\t\t\t\tto={routes.history.root}\n\t\t\t\t\t\tvalue={empty}\n\t\t\t\t\t\trender={({ onNavigate }) => <CloseButton onClick={onNavigate} />}\n\t\t\t\t\t/>\n\t\t\t\t</Fragment>\n\t\t\t);\n\n\t\t\tconst renderSuccess = (localData: HistoryDetailsData) => {\n\t\t\t\tconst { symbol, orderChainId } = localData;\n\t\t\t\treturn (\n\t\t\t\t\t<SidePanel header={renderHeader(symbol, orderChainId)} scrollable>\n\t\t\t\t\t\t<HistoryDetailsCommon data={data} orderId={orderId} />\n\t\t\t\t\t</SidePanel>\n\t\t\t\t);\n\t\t\t};\n\n\t\t\treturn <RemoteDataState data={data} success={renderSuccess} />;\n\t\t}),\n\t),\n);\n","import { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { Big } from 'big.js';\nimport { HistoryDetailsData, HistoryOrderSide } from '../../model/history/history.model';\nimport { ProfitLossKind } from '../../model/takeprofit-stoploss/takeprofit-stoploss.model';\nimport { HistoryOrderStore } from '../../store/history-order/history-order.store';\nimport { combineContext, ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { first } from 'rxjs/internal/operators';\nimport * as O from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type HistoryDetailsViewModel = {\n\tdata$: LiveData<Error, HistoryDetailsData>;\n};\n\ntype HistoryDetailsViewModelContext = {\n\thistoryOrderStore: HistoryOrderStore;\n};\n\ntype CreateHistoryDetailsViewModel = (orderId: number) => HistoryDetailsViewModel;\n\nexport const createHistoryDetailsViewModel = combineContext(\n\task<HistoryDetailsViewModelContext>(),\n\t(historyDetailsContext): CreateHistoryDetailsViewModel => orderId => {\n\t\tconst {\n\t\t\thistoryOrderStore: { getOrderHistoryById },\n\t\t} = historyDetailsContext;\n\n\t\tconst order$ = getOrderHistoryById(orderId);\n\n\t\tconst data$: LiveData<Error, HistoryDetailsData> = order$.pipe(\n\t\t\tmapRD(historyOrder => ({\n\t\t\t\tsymbol: historyOrder.instrument.symbol,\n\t\t\t\torderChainId: historyOrder.orderChainId,\n\t\t\t\tside: historyOrder.quantity > 0 ? HistoryOrderSide.Buy : HistoryOrderSide.Sell,\n\t\t\t\tamount: Math.abs(historyOrder.quantity),\n\t\t\t\tprofitLossKind: pipe(\n\t\t\t\t\thistoryOrder.profitSize,\n\t\t\t\t\tO.map(profitSize => (profitSize >= 0 ? ProfitLossKind.Profit : ProfitLossKind.Loss)),\n\t\t\t\t),\n\t\t\t\topenDateTime: historyOrder.openTime,\n\t\t\t\tcloseDateTime: historyOrder.closeTime,\n\t\t\t\tsizeInLots: Number(Big(Math.abs(historyOrder.quantity)).div(historyOrder.instrument.lotSize)),\n\t\t\t\ttakeProfitValue: pipe(\n\t\t\t\t\thistoryOrder.takeProfit,\n\t\t\t\t\tO.chain(tp => tp.fixedPrice),\n\t\t\t\t),\n\t\t\t\tstopLossValue: pipe(\n\t\t\t\t\thistoryOrder.stopLoss,\n\t\t\t\t\tO.chain(sl => sl.fixedPrice),\n\t\t\t\t),\n\t\t\t\tswaps: historyOrder.swaps,\n\t\t\t\tcommissions: historyOrder.commissions,\n\t\t\t\tpipsSize: historyOrder.instrument.pipsSize,\n\t\t\t\tprecision: historyOrder.instrument.precision,\n\t\t\t})),\n\t\t\tfirst(),\n\t\t);\n\n\t\treturn {\n\t\t\tdata$,\n\t\t};\n\t},\n);\n","import { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { HistoryDetails } from '../../components/history-details/history-details.component';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport {\n\tHistoryDetailsViewModel,\n\tcreateHistoryDetailsViewModel,\n} from '../../../../view-model/history/history-details.view-model';\nimport { createSelector } from 'reselect';\n\ntype HistoryDetailsContainerContext = {\n\thistoryDetailsViewModel: HistoryDetailsViewModel;\n};\n\nexport const Container = combineContext(ask<HistoryDetailsContainerContext>(), HistoryDetails, (e, HistoryDetails) =>\n\twithRXWithDefaults(HistoryDetails)(() => {\n\t\tconst { data$ } = e.historyDetailsViewModel;\n\n\t\treturn {\n\t\t\tprops: { data: data$ },\n\t\t\tdefaultProps: {\n\t\t\t\tdata: pending,\n\t\t\t},\n\t\t};\n\t}),\n);\n\nexport const HistoryDetailsContainer = combineContext(\n\tdeferContext(Container, 'historyDetailsViewModel'),\n\tcreateHistoryDetailsViewModel,\n\t(Container, createHistoryDetailsViewModel) =>\n\t\trunOnMount(Container, props => {\n\t\t\tconst orderId = createSelector(\n\t\t\t\tprops,\n\t\t\t\tprops => props.orderId,\n\t\t\t);\n\t\t\treturn createSelector(\n\t\t\t\torderId,\n\t\t\t\torderId => ({\n\t\t\t\t\thistoryDetailsViewModel: createHistoryDetailsViewModel(orderId),\n\t\t\t\t}),\n\t\t\t);\n\t\t}),\n);\n","import * as React from 'react';\nimport { FunctionComponent, ReactNode } from 'react';\nimport * as css from './theme/workspace.module.css';\n\ntype WorkspacePanelProps = {\n\tchildren: ReactNode;\n};\n\nexport const WorkspacePanel: FunctionComponent<WorkspacePanelProps> = ({ children }) => (\n\t<div className={css.panel}>{children}</div>\n);\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { routes } from '../../../../ui-common/routes';\nimport { Route } from '../../../../ui-common/route/containers/route.container';\nimport { HistoryFilterFormContainer } from '../../containers/history-filter-form/history-filter-form.container';\nimport { HistoryTableContainer } from '../../containers/history-table/history-table.container';\nimport { HistoryDetailsContainer } from '../../containers/history-details/history-details.container';\nimport { MatchType } from '../../../../utils/router.utils';\nimport { EmptyScreenContainer } from '../../../empty-screen/containers/empty-screen.container';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { ScreenType } from '../../../../ui-common/empty-screen/components/empty-screen.component';\nimport { RenderRemoteData } from '@devexperts/react-kit/dist/components/render-remote-data/render-remote-data.component';\nimport { Workspace } from '../../../ui-kit/components/workspace/workspace.component';\nimport { WorkspacePanel } from '../../../ui-kit/components/workspace/workspace-panel.component';\nimport { Preloader } from '../../../ui-kit/components/preloader/preloader.component';\nimport * as css from './theme/history-dashboard.module.css';\n\nexport type HistoryDashboardProps = {\n\thistoryOrdersCount: RemoteData<Error, number>;\n};\n\nexport const HistoryDashboard = combineContext(\n\tRoute,\n\tHistoryFilterFormContainer,\n\tHistoryTableContainer,\n\tHistoryDetailsContainer,\n\tEmptyScreenContainer,\n\t(Route, HistoryFilterFormContainer, HistoryTableContainer, HistoryDetailsContainer, EmptyScreenContainer) =>\n\t\tclass HistoryDashboard extends PureComponent<HistoryDashboardProps> {\n\t\t\trender() {\n\t\t\t\tconst { historyOrdersCount } = this.props;\n\n\t\t\t\treturn (\n\t\t\t\t\t<RenderRemoteData\n\t\t\t\t\t\tdata={historyOrdersCount}\n\t\t\t\t\t\tsuccess={this.renderSuccess}\n\t\t\t\t\t\tnoData={data => data === 0}\n\t\t\t\t\t\tDataStateNoData={() => (\n\t\t\t\t\t\t\t<div className={css.emptyScreen}>\n\t\t\t\t\t\t\t\t<EmptyScreenContainer screenType={ScreenType.History} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tDataStatePending={() => <Preloader />}\n\t\t\t\t\t\tDataStateFailure={() => <div>Error loading data</div>}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tprivate renderSuccess = () => (\n\t\t\t\t<section className={css.container}>\n\t\t\t\t\t<div className={css.left}>\n\t\t\t\t\t\t<WorkspacePanel>\n\t\t\t\t\t\t\t<div className={css.filterFormWrapper}>\n\t\t\t\t\t\t\t\t<HistoryFilterFormContainer />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</WorkspacePanel>\n\t\t\t\t\t\t<Workspace>\n\t\t\t\t\t\t\t<div className={css.historyTableWrapper}>\n\t\t\t\t\t\t\t\t<HistoryTableContainer />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Workspace>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Route match={routes.history.order.info.root} exact render={this.renderHistoryDetailsAside} />\n\t\t\t\t</section>\n\t\t\t);\n\n\t\t\tprivate renderHistoryDetailsAside = (path: MatchType<typeof routes.history.order.info.root>) => (\n\t\t\t\t<div className={css.aside}>\n\t\t\t\t\t<HistoryDetailsContainer orderId={path.historyOrderId} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t},\n);\n","import { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { HistoryOrderStore } from '../../store/history-order/history-order.store';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { tap } from 'rxjs/operators';\nimport { endOfDay } from 'date-fns';\nimport { of } from 'rxjs';\n\nexport type HistoryDashboardViewModel = {\n\thistoryOrdersCount$: LiveData<Error, number>;\n};\n\ntype HistoryDashboardViewModelContext = {\n\thistoryOrderStore: HistoryOrderStore;\n};\n\ntype CreateHistoryDashboardViewModel = () => Sink<HistoryDashboardViewModel>;\n\nexport const createHistoryDashboardViewModel = combineContext(\n\task<HistoryDashboardViewModelContext>(),\n\t(ctx: HistoryDashboardViewModelContext): CreateHistoryDashboardViewModel => {\n\t\tconst { historyOrderStore } = ctx;\n\n\t\t// TODO: change 1000 to 0, when api will be ready\n\t\tconst allHistoryRequest$ = of({ startDate: 1000, endDate: endOfDay(Date.now()).getTime() }).pipe(\n\t\t\ttap(({ startDate, endDate }) => historyOrderStore.onDateChange(startDate, endDate)),\n\t\t);\n\n\t\tconst historyOrdersCount$ = historyOrderStore.allOrders$.pipe(mapRD(items => items.length));\n\n\t\treturn () => new Sink({ historyOrdersCount$ }, allHistoryRequest$);\n\t},\n);\n","import { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { HistoryDashboard } from '../../components/history-dashboard/history-dashboard.component';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { withRXWithDefaults } from '../../../../utils/withRXWithDefaults';\nimport { pending } from '@devexperts/remote-data-ts';\nimport {\n\tcreateHistoryDashboardViewModel,\n\tHistoryDashboardViewModel,\n} from '../../../../view-model/history/history-dashboard.view-model';\n\nexport type HistoryDashboardContainerContext = {\n\thistoryDashboardViewModel: HistoryDashboardViewModel;\n};\n\nexport const Container = combineContext(\n\task<HistoryDashboardContainerContext>(),\n\tHistoryDashboard,\n\t(ctx, HistoryDashboard) => {\n\t\treturn withRXWithDefaults(HistoryDashboard)(() => {\n\t\t\tconst {\n\t\t\t\thistoryDashboardViewModel: { historyOrdersCount$ },\n\t\t\t} = ctx;\n\n\t\t\treturn {\n\t\t\t\tprops: {\n\t\t\t\t\thistoryOrdersCount: historyOrdersCount$,\n\t\t\t\t},\n\t\t\t\tdefaultProps: {\n\t\t\t\t\thistoryOrdersCount: pending,\n\t\t\t\t},\n\t\t\t};\n\t\t});\n\t},\n);\n\nexport const HistoryDashboardContainer = combineContext(\n\tcreateHistoryDashboardViewModel,\n\tdeferContext(Container, 'historyDashboardViewModel'),\n\t(createHistoryDashboardViewModel, Container) =>\n\t\trunOnMount(Container, () => () =>\n\t\t\tcreateHistoryDashboardViewModel().map(historyDashboardViewModel => ({ historyDashboardViewModel })),\n\t\t),\n);\n","import * as React from 'react';\nimport { memo } from 'react';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { fold, Option } from 'fp-ts/lib/Option';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { EmptyScreenContainer } from '../../../ui-desktop/empty-screen/containers/empty-screen.container';\nimport { Preloader } from '../../../ui-desktop/ui-kit/components/preloader/preloader.component';\nimport { ScreenType } from '../../empty-screen/components/empty-screen.component';\nimport { Iframe } from '../../iframe/iframe.component';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type DepositPageProps = WithTranslation & {\n\tpreviewMode: Option<boolean>;\n};\n\nexport const DepositPage = combineContext(EmptyScreenContainer, EmptyScreenContainer =>\n\twithTranslation()(\n\t\tmemo<DepositPageProps>(props =>\n\t\t\tpipe(\n\t\t\t\tprops.previewMode,\n\t\t\t\tfold(\n\t\t\t\t\t() => <Preloader />,\n\t\t\t\t\tpreviewMode =>\n\t\t\t\t\t\tpreviewMode ? (\n\t\t\t\t\t\t\t<EmptyScreenContainer screenType={ScreenType.Deposit} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Iframe src={`/api/avacrm/withdrawal?lang=${props.i18n.language}`} />\n\t\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t),\n\t\t),\n\t),\n);\n","import * as React from 'react';\nimport { Fragment, memo } from 'react';\nimport { Route } from '../../../ui-common/route/containers/route.container';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { routes } from '../../routes';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { getLanguageForCRM } from '../../../utils/i18n.utils';\nimport { Iframe } from '../../iframe/iframe.component';\nimport { DepositPage } from './deposit.component';\nimport * as O from 'fp-ts/lib/Option';\n\nexport const CrmPages = combineContext(Route, DepositPage, (Route, DepositPage) =>\n\twithTranslation()(\n\t\tmemo((props: WithTranslation) => {\n\t\t\tconst language = getLanguageForCRM(props.i18n);\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tmatch={routes.crm.accounts.root}\n\t\t\t\t\t\trender={() => <Iframe src={`/api/avacrm/my_account?lang=${language}`} />}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tmatch={routes.crm.personal.root}\n\t\t\t\t\t\trender={() => <Iframe src={`/api/avacrm/personal_details?lang=${language}`} />}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tmatch={routes.crm.uploaddocs.root}\n\t\t\t\t\t\trender={() => <Iframe src={`/api/avacrm/upload_document?lang=${language}`} />}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tmatch={routes.crm.withdraw.root}\n\t\t\t\t\t\trender={() => <Iframe src={`/api/avacrm/withdrawal?lang=${language}`} />}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route match={routes.crm.deposit.root} render={() => <DepositPage previewMode={O.some(false)} />} />\n\t\t\t\t\t<Route\n\t\t\t\t\t\tmatch={routes.crm.calculator.root}\n\t\t\t\t\t\trender={() => (\n\t\t\t\t\t\t\t<Iframe src={`//www.avatrade.com/trading-info/trading-calculator?lang=${language}`} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tmatch={routes.crm.becomeTrader.root}\n\t\t\t\t\t\trender={() => <Iframe src={`/api/avacrm/become_trader?lang=${language}`} />}\n\t\t\t\t\t/>\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}),\n\t),\n);\n","import * as React from 'react';\nimport { memo } from 'react';\nimport { I18nextProvider } from 'react-i18next';\nimport { i18next } from '../../../../utils/i18n.utils';\nimport { Theme } from '../../../ui-kit/components/theme/theme.component';\nimport { LayoutContainer } from '../../../layout/containers/layout/layout.container';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { Route } from '../../../../ui-common/route/containers/route.container';\nimport { routes } from '../../../../ui-common/routes';\nimport { TradeDashboardContainer } from '../../../trade/containers/trade-dashboard/trade-dashboard.container';\nimport { Redirect } from '../../../../ui-common/redirect/containers/redirect.container';\nimport { PositionDashboardContainer } from '../../../positions/containers/positions-dashboard/positions-dashboard.container';\nimport { RedirectListener } from '../../../../ui-common/redirect/containers/redirect-listener.container';\nimport { OrdersDashboardContainer } from '../../../orders/containers/orders-dashboard/orders-dashboard.container';\nimport { HistoryDashboardContainer } from '../../../history/containers/history-dashboard/history-dashboard.container';\nimport { CrmPages } from '../../../../ui-common/crm-pages/components/crm-pages.component';\nimport { empty } from 'fp-ts/lib/Record';\n\nexport const Authorized = combineContext(\n\tLayoutContainer,\n\tHistoryDashboardContainer,\n\tPositionDashboardContainer,\n\tTradeDashboardContainer,\n\tRoute,\n\tRedirect,\n\tOrdersDashboardContainer,\n\tRedirectListener,\n\tCrmPages,\n\t(\n\t\tLayoutContainer,\n\t\tHistoryDashboardContainer,\n\t\tPositionDashboardContainer,\n\t\tTradeDashboardContainer,\n\t\tRoute,\n\t\tRedirect,\n\t\tOrdersDashboardContainer,\n\t\tRedirectListener,\n\t\tCrmPages,\n\t) =>\n\t\tmemo(() => {\n\t\t\tconst redirectToTrade = () => <Redirect to={routes.trade.root} value={empty} />;\n\t\t\tconst renderTrade = () => <TradeDashboardContainer />;\n\t\t\tconst renderPositions = () => <PositionDashboardContainer />;\n\t\t\tconst renderOrders = () => <OrdersDashboardContainer />;\n\t\t\tconst renderHistory = () => <HistoryDashboardContainer />;\n\t\t\treturn (\n\t\t\t\t<I18nextProvider i18n={i18next}>\n\t\t\t\t\t<Theme>\n\t\t\t\t\t\t<LayoutContainer>\n\t\t\t\t\t\t\t<Route match={routes.root} render={redirectToTrade} />\n\t\t\t\t\t\t\t<Route match={routes.trade.root} render={renderTrade} />\n\t\t\t\t\t\t\t<Route match={routes.positions.root} render={renderPositions} />\n\t\t\t\t\t\t\t<Route match={routes.orders.root} render={renderOrders} />\n\t\t\t\t\t\t\t<Route match={routes.history.root} render={renderHistory} />\n\t\t\t\t\t\t\t<CrmPages />\n\t\t\t\t\t\t\t<RedirectListener />\n\t\t\t\t\t\t</LayoutContainer>\n\t\t\t\t\t</Theme>\n\t\t\t\t</I18nextProvider>\n\t\t\t);\n\t\t}),\n);\n","import { Option } from 'fp-ts/lib/Option';\nimport { string, array, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type MarketSymbolsTO = { symbols: Option<Array<string>> };\nexport const MarketSymbolsTOIO = type({ symbols: createOptionFromNullable(array(string)) });\n","import { Option } from 'fp-ts/lib/Option';\nimport { string, number, union, literal, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type ProfileTO = {\n\tsymbol: string;\n\tquantity: Option<number>;\n\ttradingStatus: 'UNDEFINED' | 'HALTED' | 'ACTIVE';\n\tstatusReason: string;\n\thaltStartTime: number;\n\thaltEndTime: number;\n\thighLimitPrice: Option<number>;\n\tlowLimitPrice: Option<number>;\n};\nexport const ProfileTOIO = type({\n\tsymbol: string,\n\tquantity: createOptionFromNullable(number),\n\ttradingStatus: union([literal('UNDEFINED'), literal('HALTED'), literal('ACTIVE')]),\n\tstatusReason: string,\n\thaltStartTime: number,\n\thaltEndTime: number,\n\thighLimitPrice: createOptionFromNullable(number),\n\tlowLimitPrice: createOptionFromNullable(number),\n});\n","import { Option } from 'fp-ts/lib/Option';\nimport { number, string, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type TradeTO = {\n\tquantity: Option<number>;\n\tlastDirection: number;\n\tsymbol: string;\n\tlast: Option<number>;\n\tvolume: Option<number>;\n\ttime: number;\n};\nexport const TradeTOIO = type({\n\tquantity: createOptionFromNullable(number),\n\tlastDirection: number,\n\tsymbol: string,\n\tlast: createOptionFromNullable(number),\n\tvolume: createOptionFromNullable(number),\n\ttime: number,\n});\n","import { string, array, type } from 'io-ts';\n\nexport type UpdateMarketSymbolsSubscriptionTO = { symbolsToAdd: Array<string>; symbolsToRemove: Array<string> };\nexport const UpdateMarketSymbolsSubscriptionTOIO = type({\n\tsymbolsToAdd: array(string),\n\tsymbolsToRemove: array(string),\n});\n","import { ResponseValidationError, TAPIClient } from '../client/client';\nimport { ConversionRateTO, ConversionRateTOIO } from '../definitions/ConversionRateTO';\nimport { MarketSymbolsTO, MarketSymbolsTOIO } from '../definitions/MarketSymbolsTO';\nimport { ProfileTO, ProfileTOIO } from '../definitions/ProfileTO';\nimport { QuoteTO, QuoteTOIO } from '../definitions/QuoteTO';\nimport { SummaryTO, SummaryTOIO } from '../definitions/SummaryTO';\nimport { TradeTO, TradeTOIO } from '../definitions/TradeTO';\nimport {\n\tUpdateMarketSymbolsSubscriptionTO,\n\tUpdateMarketSymbolsSubscriptionTOIO,\n} from '../definitions/UpdateMarketSymbolsSubscriptionTO';\nimport { fromEither } from '@devexperts/remote-data-ts';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { asks } from 'fp-ts/lib/Reader';\nimport { array, string, type, partial, void as tvoid } from 'io-ts';\nimport { map } from 'rxjs/operators';\n\nexport type MarketDataController = {\n\t/**\n\t * Get list of conversion rates by symbols\n\t * @param { object } parameters\n\t */\n\treadonly getConversionRates: (parameters: {\n\t\tquery: { symbols: Array<string> };\n\t}) => LiveData<Error, Array<ConversionRateTO>>;\n\n\t/**\n\t * Change conversion rates subscription\n\t * @param { object } [parameters]\n\t */\n\treadonly changeConversionRateSubscription: (parameters: {\n\t\tbody?: UpdateMarketSymbolsSubscriptionTO;\n\t}) => LiveData<Error, void>;\n\n\t/**\n\t * Change market symbols subscription (quotes, trades, summary)\n\t * @param { object } [parameters]\n\t */\n\treadonly changeSubscription: (parameters: { body?: UpdateMarketSymbolsSubscriptionTO }) => LiveData<Error, void>;\n\n\t/**\n\t * Subscribe on additional market symbols (quotes, trades, summary)\n\t * @param { object } [parameters]\n\t */\n\treadonly subscribeInstrumentTemporary: (parameters: { body?: MarketSymbolsTO }) => LiveData<Error, void>;\n\n\t/**\n\t * Remove subscription on market symbols (quotes, trades, summary)\n\t * @param { object } [parameters]\n\t */\n\treadonly removeTemporaryInstrumentSubscription: (parameters: { body?: MarketSymbolsTO }) => LiveData<Error, void>;\n\n\t/**\n\t * Get the latest profiles for symbols\n\t * @param { object } parameters\n\t */\n\treadonly getLatestProfiles: (parameters: {\n\t\tquery: { symbols: Array<string> };\n\t}) => LiveData<Error, Array<ProfileTO>>;\n\n\t/**\n\t * Get the latest quotes for symbols\n\t * @param { object } parameters\n\t */\n\treadonly getLatestQuotes: (parameters: { query: { symbols: Array<string> } }) => LiveData<Error, Array<QuoteTO>>;\n\n\t/**\n\t * Get the latest summaries for symbols\n\t * @param { object } parameters\n\t */\n\treadonly getLatestSummaries: (parameters: {\n\t\tquery: { symbols: Array<string> };\n\t}) => LiveData<Error, Array<SummaryTO>>;\n\n\t/**\n\t * Get the latest trades for symbols\n\t * @param { object } parameters\n\t */\n\treadonly getLatestTrades: (parameters: { query: { symbols: Array<string> } }) => LiveData<Error, Array<TradeTO>>;\n};\n\nexport const marketDataController = asks(\n\t(e: { apiClient: TAPIClient }): MarketDataController => ({\n\t\tgetConversionRates: parameters => {\n\t\t\tconst encoded = partial({ query: type({ symbols: array(string) }) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/conversionrates`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(ConversionRateTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tchangeConversionRateSubscription: parameters => {\n\t\t\tconst encoded = partial({ body: UpdateMarketSymbolsSubscriptionTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/conversionrates`,\n\t\t\t\t\tmethod: 'PUT',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tchangeSubscription: parameters => {\n\t\t\tconst encoded = partial({ body: UpdateMarketSymbolsSubscriptionTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/marketdata`,\n\t\t\t\t\tmethod: 'PUT',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tsubscribeInstrumentTemporary: parameters => {\n\t\t\tconst encoded = partial({ body: MarketSymbolsTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/marketdata`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tremoveTemporaryInstrumentSubscription: parameters => {\n\t\t\tconst encoded = partial({ body: MarketSymbolsTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/marketdata`,\n\t\t\t\t\tmethod: 'DELETE',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tgetLatestProfiles: parameters => {\n\t\t\tconst encoded = partial({ query: type({ symbols: array(string) }) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/marketdata/profile`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(ProfileTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tgetLatestQuotes: parameters => {\n\t\t\tconst encoded = partial({ query: type({ symbols: array(string) }) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/marketdata/quote`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(QuoteTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tgetLatestSummaries: parameters => {\n\t\t\tconst encoded = partial({ query: type({ symbols: array(string) }) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/marketdata/summary`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(SummaryTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tgetLatestTrades: parameters => {\n\t\t\tconst encoded = partial({ query: type({ symbols: array(string) }) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/marketdata/trade`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(TradeTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\t}),\n);\n","import { Observable, OperatorFunction, Subscriber } from 'rxjs';\nimport { Lazy } from 'fp-ts/lib/function';\n\nexport function tapOnLastUnsubscribe<T>(cb: Lazy<void>): OperatorFunction<T, T> {\n\treturn function tapOperation(source$: Observable<T>): Observable<T> {\n\t\tlet count = 0;\n\n\t\treturn Observable.create((subscriber: Subscriber<T>) => {\n\t\t\tcount++;\n\t\t\tconst subscription = source$.subscribe(subscriber);\n\t\t\treturn () => {\n\t\t\t\t//teardown\n\t\t\t\tcount--;\n\t\t\t\tsubscription.unsubscribe();\n\t\t\t\tif (count === 0) {\n\t\t\t\t\t//if there're no subscriptions invoke callback\n\t\t\t\t\tcb();\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t};\n}\n","import { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { QuoteTO } from '../../api/generated/swagger/definitions/QuoteTO';\nimport { SocketClient } from '../../api/socket-client';\nimport { combineLatest, Observable } from 'rxjs';\nimport { distinctUntilChanged, filter, map, mergeMap, scan, startWith } from 'rxjs/operators';\nimport {\n\tisQuoteSubscriptionInitializedTO,\n\tisQuoteTO,\n\tisSummaryTO,\n\tisAvaWatchListInstrumentInfoTO,\n} from '../../api/socket/socket-message.to';\nimport { pending, success } from '@devexperts/remote-data-ts';\nimport { marketDataController } from '../../api/generated/swagger/controllers/MarketDataController';\nimport { EntityStore } from '@devexperts/rx-utils/dist/rd/entity-store.utils';\nimport { getEq, none, Option, some } from 'fp-ts/lib/Option';\nimport { findFirst } from 'fp-ts/lib/Array';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { constUndefined } from 'fp-ts/lib/function';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { SummaryTO } from '../../api/generated/swagger/definitions/SummaryTO';\nimport { filterMap } from '../../utils/rxjs/filtermap';\nimport { getStructEq, Eq, eqString } from 'fp-ts/lib/Eq';\nimport { setoidStrict } from '../../utils/setoid.utils';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { ask, combineContext, fromReader } from '@devexperts/rx-utils/dist/context.utils';\nimport { tapOnLastUnsubscribe } from '../../utils/rxjs/tap-on-last-unsubscribe';\nimport { shareReplayWithDefaults } from '../../utils/rxjs/shareReplayWithDefaults';\n\nexport type MarketDataEntity = {\n\tsymbol: string;\n\tlastQuote: Option<QuoteTO>;\n\tlastSummary: Option<SummaryTO>;\n\tdayChange: Option<number>;\n};\nconst setoidMarketDataEntity: Eq<MarketDataEntity> = getStructEq({\n\tsymbol: eqString,\n\tlastQuote: getEq(setoidStrict),\n\tlastSummary: getEq(setoidStrict),\n\tdayChange: getEq(setoidStrict),\n});\n\nexport type MarketDataStore = {\n\treadonly getDataBySymbol: (symbol: string) => LiveData<Error, MarketDataEntity>;\n\treadonly isInitialized$: LiveData<Error, boolean>;\n};\n\nexport type MarketDataStoreContext = {\n\tsocketClient: SocketClient;\n};\n\nexport type CreateMarketDataStore = Sink<() => Sink<MarketDataStore>>;\n\nexport const createMarketDataStore = combineContext(\n\tfromReader(marketDataController),\n\task<MarketDataStoreContext>(),\n\t(marketDataController, e): CreateMarketDataStore => {\n\t\tconst { socketClient } = e;\n\n\t\tconst isInitialized$: LiveData<Error, boolean> = e.socketClient.message$.pipe(\n\t\t\tfilter(isQuoteSubscriptionInitializedTO),\n\t\t\tfilter(message => message.body.success),\n\t\t\tmap(message => success<Error, boolean>(message.body.success)),\n\t\t\tstartWith(pending),\n\t\t\tdistinctUntilChanged(),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst quotes$ = socketClient.message$.pipe(filter(isQuoteTO));\n\t\tconst summaries$ = socketClient.message$.pipe(filter(isSummaryTO));\n\t\tconst avaWatchlistInstrumentInfo$ = socketClient.message$.pipe(filter(isAvaWatchListInstrumentInfoTO));\n\t\tconst pk = (entity: MarketDataEntity) => entity.symbol;\n\n\t\treturn new Sink(() => {\n\t\t\tconst store = new EntityStore<Error, MarketDataEntity>();\n\n\t\t\tconst onSymbolRemove = createHandler<string>();\n\t\t\tconst removeSymbolEffect$ = onSymbolRemove.value$.pipe(\n\t\t\t\t//request on each call\n\t\t\t\tmergeMap(symbol =>\n\t\t\t\t\tstore\n\t\t\t\t\t\t.remove(\n\t\t\t\t\t\t\tsymbol,\n\t\t\t\t\t\t\tpk,\n\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\tmarketDataController\n\t\t\t\t\t\t\t\t\t.removeTemporaryInstrumentSubscription({\n\t\t\t\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\t\t\t\tsymbols: some([symbol]),\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.pipe(mapRD(() => [])),\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.pipe(mapRD(constUndefined)),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tconst getDataBySymbol = (symbol: string): LiveData<Error, MarketDataEntity> =>\n\t\t\t\tstore.get(symbol, () => {\n\t\t\t\t\tconst request$ = isInitialized$.pipe(\n\t\t\t\t\t\tswitchMapRD(() =>\n\t\t\t\t\t\t\tmarketDataController.subscribeInstrumentTemporary({\n\t\t\t\t\t\t\t\tbody: { symbols: some([symbol]) },\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\n\t\t\t\t\tconst quote$: Observable<Option<QuoteTO>> = quotes$.pipe(\n\t\t\t\t\t\tfilterMap(quotes => findFirst(quotes.body.toArray(), quote => quote.symbol === symbol)),\n\t\t\t\t\t\tmap(quote => some(quote)),\n\t\t\t\t\t\tstartWith(none),\n\t\t\t\t\t);\n\t\t\t\t\tconst summary$: Observable<Option<SummaryTO>> = summaries$.pipe(\n\t\t\t\t\t\tfilterMap(summaries =>\n\t\t\t\t\t\t\tfindFirst(summaries.body.toArray(), summary => summary.symbol === symbol),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tmap(summary => some(summary)),\n\t\t\t\t\t\tstartWith(none),\n\t\t\t\t\t);\n\t\t\t\t\tconst dayChange$ = avaWatchlistInstrumentInfo$.pipe(\n\t\t\t\t\t\tfilterMap(changeInfo => findFirst(changeInfo.body, changeInfo => changeInfo.symbol === symbol)),\n\t\t\t\t\t\tmap(changeInfo => changeInfo.dayChange),\n\t\t\t\t\t\tstartWith(none),\n\t\t\t\t\t);\n\n\t\t\t\t\tconst entity$: Observable<MarketDataEntity> = combineLatest(quote$, summary$, dayChange$).pipe(\n\t\t\t\t\t\tscan<[Option<QuoteTO>, Option<SummaryTO>, Option<number>], MarketDataEntity>(\n\t\t\t\t\t\t\t(acc, entity) => {\n\t\t\t\t\t\t\t\tconst [lastQuote, lastSummary, dayChange] = entity;\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t\t\t\tlastQuote,\n\t\t\t\t\t\t\t\t\tlastSummary,\n\t\t\t\t\t\t\t\t\tdayChange,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsymbol,\n\t\t\t\t\t\t\t\tlastQuote: none,\n\t\t\t\t\t\t\t\tlastSummary: none,\n\t\t\t\t\t\t\t\tdayChange: none,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t),\n\t\t\t\t\t\tdistinctUntilChanged(setoidMarketDataEntity.equals),\n\t\t\t\t\t);\n\n\t\t\t\t\tconst result$ = combineLatest(request$, entity$).pipe(\n\t\t\t\t\t\t//make request and immediately switch to entity$ observable\n\t\t\t\t\t\t//messages in the socket are send _before_ the end of the request\n\t\t\t\t\t\tmap(([request, entity]) => request.map(() => entity)),\n\t\t\t\t\t);\n\n\t\t\t\t\treturn result$.pipe(tapOnLastUnsubscribe(() => onSymbolRemove.handle(symbol)));\n\t\t\t\t});\n\n\t\t\treturn new Sink(\n\t\t\t\t{\n\t\t\t\t\tgetDataBySymbol,\n\t\t\t\t\tisInitialized$,\n\t\t\t\t},\n\t\t\t\tremoveSymbolEffect$,\n\t\t\t);\n\t\t}, isInitialized$);\n\t},\n);\n","import { InstrumentTO } from '../../api/generated/swagger/definitions/InstrumentTO';\nimport { SocketClient } from '../../api/socket-client';\nimport { EntityStore } from '@devexperts/rx-utils/dist/rd/entity-store.utils';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { isInstrumentTO } from '../../api/socket/socket-message.to';\nimport { fromOption, success } from '@devexperts/remote-data-ts';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { findFirst } from 'fp-ts/lib/Array';\nimport { filterMap } from '../../utils/rxjs/filtermap';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { combineContext, ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as O from 'fp-ts/lib/Option';\n\nexport type InstrumentStore = Readonly<{\n\tgetBySymbol: (symbol: string) => LiveData<Error, InstrumentTO>;\n\tgetById: (id: number) => LiveData<Error, InstrumentTO>;\n\tall$: LiveData<Error, InstrumentTO[]>;\n}>;\n\nexport type CreateInstrumentStore = Sink<() => InstrumentStore>;\n\nexport type InstrumentStoreContext = {\n\tsocketClient: SocketClient;\n};\n\nconst getPKFromId = (id: number) => id.toString();\n\nexport const createInstrumentStore = combineContext(\n\task<InstrumentStoreContext>(),\n\t(e): CreateInstrumentStore => {\n\t\tconst { socketClient } = e;\n\t\tconst pk = (instrument: InstrumentTO) => getPKFromId(instrument.id);\n\n\t\tconst store = new EntityStore<Error, InstrumentTO>();\n\t\tconst instruments$: Observable<InstrumentTO[]> = socketClient.message$.pipe(\n\t\t\tfilter(isInstrumentTO),\n\t\t\tmap(message => message.body.toArray()),\n\t\t);\n\n\t\tconst all$ = store.getAll(pk, () => instruments$.pipe(map(to => success(to))));\n\n\t\tconst getById = (id: number): LiveData<Error, InstrumentTO> =>\n\t\t\tstore.get(getPKFromId(id), () => {\n\t\t\t\treturn instruments$.pipe(\n\t\t\t\t\tfilterMap(instruments =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\tfindFirst(instruments, instrument => instrument.id === id),\n\t\t\t\t\t\t\tO.map(to => success<Error, InstrumentTO>(to)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t});\n\n\t\tconst getBySymbol = (symbol: string): LiveData<Error, InstrumentTO> =>\n\t\t\tall$.pipe(\n\t\t\t\tmap(data =>\n\t\t\t\t\tdata.chain(instruments =>\n\t\t\t\t\t\tfromOption(\n\t\t\t\t\t\t\tfindFirst(instruments, instrument => instrument.symbol === symbol),\n\t\t\t\t\t\t\t() => new Error(`Instrument with symbol ${symbol} not found in instrument.store`),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\treturn new Sink<() => InstrumentStore>(\n\t\t\t() => ({\n\t\t\t\tgetBySymbol,\n\t\t\t\tgetById,\n\t\t\t\tall$,\n\t\t\t}),\n\t\t\tall$,\n\t\t);\n\t},\n);\n","import { SocketClient } from '../../api/socket-client';\nimport { EntityStore } from '@devexperts/rx-utils/dist/rd/entity-store.utils';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { asks } from '@devexperts/rx-utils/dist/context.utils';\nimport { InstrumentinfoController } from '../../api/generated/swagger/controllers/InstrumentinfoController';\nimport { InstrumentInfoTO } from '../../api/generated/swagger/definitions/InstrumentInfoTO';\nimport { merge } from 'rxjs';\nimport { filter, map, switchMap } from 'rxjs/operators';\nimport { tapOnLastUnsubscribe } from '../../utils/rxjs/tap-on-last-unsubscribe';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { isAvaInstrumentInfoTO } from '../../api/socket/socket-message.to';\nimport { success } from '@devexperts/remote-data-ts';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { filterMap } from '@devexperts/rx-utils/dist/operators/filter-map';\nimport { findFirst } from 'fp-ts/lib/Array';\nimport { shareReplayWithDefaults } from '../../utils/rxjs/shareReplayWithDefaults';\n\nexport type InstrumentInfoStore = Readonly<{\n\tgetBySymbol: (symbol: string) => LiveData<Error, InstrumentInfoTO>;\n}>;\n\ntype CreateInstrumentInfoStore = () => Sink<InstrumentInfoStore>;\n\ntype InstrumentInfoStoreContext = {\n\tsocketClient: SocketClient;\n\tinstrumentInfoController: InstrumentinfoController;\n};\n\nconst pk = (entity: InstrumentInfoTO) => entity.symbol;\n\nexport const createInstrumentInfoStore = asks(\n\t(e: InstrumentInfoStoreContext): CreateInstrumentInfoStore => {\n\t\treturn () => {\n\t\t\tconst store = new EntityStore<Error, InstrumentInfoTO>();\n\n\t\t\tconst removeBySymbol = createHandler<string>();\n\n\t\t\tconst removeEffect$ = removeBySymbol.value$.pipe(\n\t\t\t\tswitchMap(symbol =>\n\t\t\t\t\tstore.remove(symbol, pk, () =>\n\t\t\t\t\t\te.instrumentInfoController\n\t\t\t\t\t\t\t.changeInstrumentInfoSubscription({\n\t\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\t\tsymbolsToAdd: [],\n\t\t\t\t\t\t\t\t\tsymbolsToRemove: [symbol],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.pipe(mapRD(() => [])),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tshareReplayWithDefaults(),\n\t\t\t);\n\n\t\t\tconst effects$ = merge(removeEffect$);\n\n\t\t\tconst getBySymbol = (symbol: string) => {\n\t\t\t\tconst instrumentInfoMessages$: LiveData<Error, InstrumentInfoTO> = e.socketClient.message$.pipe(\n\t\t\t\t\tfilter(isAvaInstrumentInfoTO),\n\t\t\t\t\tfilterMap(data => findFirst(data.body, item => item.symbol === symbol)),\n\t\t\t\t\tmap(data => success<Error, InstrumentInfoTO>(data)),\n\t\t\t\t\tshareReplayWithDefaults(),\n\t\t\t\t);\n\n\t\t\t\tconst request$ = e.instrumentInfoController.changeInstrumentInfoSubscription({\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tsymbolsToAdd: [symbol],\n\t\t\t\t\t\tsymbolsToRemove: [],\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\treturn store.get(symbol, () =>\n\t\t\t\t\tcombineLatestRD(request$, instrumentInfoMessages$).pipe(\n\t\t\t\t\t\tmapRD(([_, instrumentInfo]) => instrumentInfo),\n\t\t\t\t\t\ttapOnLastUnsubscribe(() => removeBySymbol.handle(symbol)),\n\t\t\t\t\t\tshareReplayWithDefaults(),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t};\n\t\t\treturn new Sink(\n\t\t\t\t{\n\t\t\t\t\tgetBySymbol,\n\t\t\t\t},\n\t\t\t\teffects$,\n\t\t\t);\n\t\t};\n\t},\n);\n","import { PositionKeyTO, PositionKeyTOIO } from '../definitions/PositionKeyTO';\nimport { ProtectionOrderTO, ProtectionOrderTOIO } from '../definitions/ProtectionOrderTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { string, number, union, literal, boolean, dictionary, type } from 'io-ts';\nimport { createOptionFromNullable, DateFromISOString } from 'io-ts-types';\n\nexport type OrderTemplateTO = {\n\taccountId: string;\n\tinstrumentId: number;\n\tquantity: number;\n\torderType:\n\t\t| 'CANCEL'\n\t\t| 'MARKET'\n\t\t| 'AUTO'\n\t\t| 'LIMIT'\n\t\t| 'STOP'\n\t\t| 'TRIGGERED_STOP'\n\t\t| 'STOP_LIMIT'\n\t\t| 'TRIGGERED_LIMIT'\n\t\t| 'TRAIL_STOP'\n\t\t| 'TRAIL_STOP_LIMIT'\n\t\t| 'OCO';\n\ttimeInForce: 'DAY' | 'GTC' | 'IOC' | 'GTD' | 'FOK';\n\tlimitPrice: Option<number>;\n\tstopPrice: Option<number>;\n\tstopPriceOffset: Option<number>;\n\tocoGroupCode: Option<string>;\n\trefOrderChainId: Option<string>;\n\tpositionKey: Option<PositionKeyTO>;\n\teffect: 'OPENING' | 'CLOSING';\n\torderSide: Option<'BUY' | 'SELL'>;\n\texpireAt: Option<Date>;\n\talertExpression: Option<string>;\n\tdirectExchange: Option<boolean>;\n\tadditionalParameters: Option<{ [key: string]: string }>;\n\ttakeProfit: Option<ProtectionOrderTO>;\n\tstopLoss: Option<ProtectionOrderTO>;\n\trequestId: Option<string>;\n};\nexport const OrderTemplateTOIO = type({\n\taccountId: string,\n\tinstrumentId: number,\n\tquantity: number,\n\torderType: union([\n\t\tliteral('CANCEL'),\n\t\tliteral('MARKET'),\n\t\tliteral('AUTO'),\n\t\tliteral('LIMIT'),\n\t\tliteral('STOP'),\n\t\tliteral('TRIGGERED_STOP'),\n\t\tliteral('STOP_LIMIT'),\n\t\tliteral('TRIGGERED_LIMIT'),\n\t\tliteral('TRAIL_STOP'),\n\t\tliteral('TRAIL_STOP_LIMIT'),\n\t\tliteral('OCO'),\n\t]),\n\ttimeInForce: union([literal('DAY'), literal('GTC'), literal('IOC'), literal('GTD'), literal('FOK')]),\n\tlimitPrice: createOptionFromNullable(number),\n\tstopPrice: createOptionFromNullable(number),\n\tstopPriceOffset: createOptionFromNullable(number),\n\tocoGroupCode: createOptionFromNullable(string),\n\trefOrderChainId: createOptionFromNullable(string),\n\tpositionKey: createOptionFromNullable(PositionKeyTOIO),\n\teffect: union([literal('OPENING'), literal('CLOSING')]),\n\torderSide: createOptionFromNullable(union([literal('BUY'), literal('SELL')])),\n\texpireAt: createOptionFromNullable(DateFromISOString),\n\talertExpression: createOptionFromNullable(string),\n\tdirectExchange: createOptionFromNullable(boolean),\n\tadditionalParameters: createOptionFromNullable(dictionary(string, string)),\n\ttakeProfit: createOptionFromNullable(ProtectionOrderTOIO),\n\tstopLoss: createOptionFromNullable(ProtectionOrderTOIO),\n\trequestId: createOptionFromNullable(string),\n});\n","import { PositionKeyTO, PositionKeyTOIO } from '../definitions/PositionKeyTO';\nimport { ProtectionOrderTO, ProtectionOrderTOIO } from '../definitions/ProtectionOrderTO';\nimport { array, type } from 'io-ts';\n\nexport type PositionAttachProtectionsTO = { positionKey: PositionKeyTO; protectionOrders: Array<ProtectionOrderTO> };\nexport const PositionAttachProtectionsTOIO = type({\n\tpositionKey: PositionKeyTOIO,\n\tprotectionOrders: array(ProtectionOrderTOIO),\n});\n","import { PositionTO, PositionTOIO } from '../definitions/PositionTO';\nimport { type } from 'io-ts';\n\nexport type PositionCloseByTO = { source: PositionTO; target: PositionTO };\nexport const PositionCloseByTOIO = type({ source: PositionTOIO, target: PositionTOIO });\n","import { ResponseValidationError, TAPIClient } from '../client/client';\nimport { FxPositionMetricsTO, FxPositionMetricsTOIO } from '../definitions/FxPositionMetricsTO';\nimport { OrderTemplateTO, OrderTemplateTOIO } from '../definitions/OrderTemplateTO';\nimport { PositionAttachProtectionsTO, PositionAttachProtectionsTOIO } from '../definitions/PositionAttachProtectionsTO';\nimport { PositionCloseByTO, PositionCloseByTOIO } from '../definitions/PositionCloseByTO';\nimport { PositionTO, PositionTOIO } from '../definitions/PositionTO';\nimport { fromEither } from '@devexperts/remote-data-ts';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { asks } from 'fp-ts/lib/Reader';\nimport { array, string, type, partial, void as tvoid, number } from 'io-ts';\nimport { map } from 'rxjs/operators';\n\nexport type PositionsController = {\n\t/**\n\t * Get list of existing positions for specified accounts\n\t * @param { object } parameters\n\t */\n\treadonly getPositions: (parameters: { query: { accountId: Array<string> } }) => LiveData<Error, Array<PositionTO>>;\n\n\t/**\n\t * Close position with closing order\n\t * @param { object } [parameters]\n\t */\n\treadonly closePosition: (parameters: { body?: OrderTemplateTO }) => LiveData<Error, void>;\n\n\t/**\n\t * Close one position using another one\n\t * @param { object } [parameters]\n\t */\n\treadonly closeBy: (parameters: { body?: PositionCloseByTO }) => LiveData<Error, void>;\n\n\t/**\n\t * Close all positions\n\t */\n\treadonly closeAllPositions: () => LiveData<Error, void>;\n\n\t/**\n\t * Get FX position metrics\n\t * @param { object } parameters\n\t */\n\treadonly getPositionMetrics: (parameters: {\n\t\tquery: { accountId: string };\n\t}) => LiveData<Error, Array<FxPositionMetricsTO>>;\n\n\t/**\n\t * Modify protection orders for position\n\t * @param { object } [parameters]\n\t */\n\treadonly modifyProtectionOrders: (parameters: { body?: PositionAttachProtectionsTO }) => LiveData<Error, void>;\n\n\t/**\n\t * Place protection orders for position\n\t * @param { object } [parameters]\n\t */\n\treadonly placeProtectionOrders: (parameters: { body?: PositionAttachProtectionsTO }) => LiveData<Error, void>;\n\n\t/**\n\t * Close all positions existing for the specified instrument\n\t * @param { number } instrumentId - Instrument id\n\t */\n\treadonly closeAllPositionsForInstrument: (instrumentId: number) => LiveData<Error, void>;\n};\n\nexport const positionsController = asks(\n\t(e: { apiClient: TAPIClient }): PositionsController => ({\n\t\tgetPositions: parameters => {\n\t\t\tconst encoded = partial({ query: type({ accountId: array(string) }) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/positions`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(PositionTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tclosePosition: parameters => {\n\t\t\tconst encoded = partial({ body: OrderTemplateTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/positions/close`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tcloseBy: parameters => {\n\t\t\tconst encoded = partial({ body: PositionCloseByTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/positions/closeby`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tcloseAllPositions: () => {\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/positions/liquidate`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tgetPositionMetrics: parameters => {\n\t\t\tconst encoded = partial({ query: type({ accountId: string }) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/positions/metrics`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(FxPositionMetricsTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tmodifyProtectionOrders: parameters => {\n\t\t\tconst encoded = partial({ body: PositionAttachProtectionsTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/positions/protections`,\n\t\t\t\t\tmethod: 'PUT',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tplaceProtectionOrders: parameters => {\n\t\t\tconst encoded = partial({ body: PositionAttachProtectionsTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/positions/protections`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tcloseAllPositionsForInstrument: instrumentId => {\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/positions/${encodeURIComponent(number.encode(instrumentId).toString())}/liquidate`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\t}),\n);\n","import { findFirst, getEq, filter as filterArray } from 'fp-ts/lib/Array';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { filter, map, distinctUntilChanged, switchMap, mapTo, tap } from 'rxjs/operators';\nimport { ask, combineContext, fromReader } from '@devexperts/rx-utils/dist/context.utils';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { failure, fromOption, success } from '@devexperts/remote-data-ts';\nimport { EntityStore } from '@devexperts/rx-utils/dist/rd/entity-store.utils';\nimport { PositionTO } from '../../api/generated/swagger/definitions/PositionTO';\nimport { SocketClient } from '../../api/socket-client';\nimport { isOrdersTO, isPositionTO } from '../../api/socket/socket-message.to';\nimport { eqString } from 'fp-ts/lib/Eq';\nimport { ProtectionOrderTO } from '../../api/generated/swagger/definitions/ProtectionOrderTO';\nimport { positionsController } from '../../api/generated/swagger/controllers/PositionsController';\nimport { uuid } from '@devexperts/utils/dist/string';\nimport { OrderTemplateTO } from '../../api/generated/swagger/definitions/OrderTemplateTO';\nimport { PositionKeyTO } from '../../api/generated/swagger/definitions/PositionKeyTO';\nimport { Observable, merge } from 'rxjs';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { tapRD } from '@devexperts/rx-utils/dist/rd/operators/tapRD';\nimport { Predicate } from 'fp-ts/lib/function';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { OrdersMessageTO } from '../../api/socket/to/orders-message.to';\nimport { OrderTO } from '../../api/generated/swagger/definitions/OrderTO';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\ntype PositionQuote = { bid: Option<number>; ask: Option<number> };\n\nexport type PositionsStore = {\n\tall$: LiveData<Error, PositionTO[]>;\n\tkeys$: Observable<string[]>;\n\tgetPositionByUid: (uid: string) => LiveData<Error, PositionTO>;\n\tgetAllByInstrumentId: (instrumentId: number) => LiveData<Error, PositionTO[]>;\n\tsendCloseRequest: (\n\t\taccountId: string,\n\t\tinstrumentId: number,\n\t\tamount: number,\n\t\tpositionKey: PositionKeyTO,\n\t\tquote: PositionQuote,\n\t\tquantity: number,\n\t) => LiveData<Error, void>;\n\tsendUpdateProtectionOrdersRequest: (\n\t\tpositionKey: PositionKeyTO,\n\t\tprotectionOrders: Array<ProtectionOrderTO>,\n\t) => LiveData<Error, void>;\n\terror$: Observable<Option<Error>>;\n\tclosedPositions$: LiveData<Error, PositionTO[]>;\n};\n\ntype PositionsStoreContext = {\n\tsocketClient: SocketClient;\n};\n\nexport type CreatePositionsStore = Sink<() => PositionsStore>;\n\nexport const createPositionsStore = combineContext(\n\tfromReader(positionsController),\n\task<PositionsStoreContext>(),\n\t(positionsController, context): CreatePositionsStore => {\n\t\tconst { socketClient } = context;\n\n\t\tconst pk = (positionTO: PositionTO): string => positionTO.uid;\n\t\tconst store = new EntityStore<Error, PositionTO>();\n\n\t\tconst error = createHandler<Option<Error>>();\n\t\tconst error$ = error.value$.pipe(tap(r => console.log(r)));\n\n\t\tconst positions$: LiveData<Error, PositionTO[]> = socketClient.message$.pipe(\n\t\t\tfilter(isPositionTO),\n\t\t\tmap(positions => success<Error, PositionTO[]>(positions.body)),\n\t\t);\n\n\t\tconst closedPositions$: LiveData<Error, PositionTO[]> = positions$.pipe(\n\t\t\tmapRD(positions => positions.filter(pos => !filterZeroQtyPositionsPredicate(pos))),\n\t\t);\n\n\t\tconst closeOrders$ = socketClient.message$.pipe(filter(isOrdersTO));\n\n\t\tconst all$ = store\n\t\t\t.getAll(pk, () => positions$)\n\t\t\t.pipe(mapRD(positions => filterArray(positions, filterZeroQtyPositionsPredicate)));\n\n\t\t// TODO: delete distinctUntilChanged after #111 (dx-platform)\n\t\tconst keys$ = store.keys$.pipe(distinctUntilChanged(getEq(eqString).equals));\n\n\t\tconst getPositionByUid = (positionUid: string) =>\n\t\t\tstore.get(positionUid, () =>\n\t\t\t\tpositions$.pipe(\n\t\t\t\t\tmap(positionsData =>\n\t\t\t\t\t\tpositionsData.chain(positionData =>\n\t\t\t\t\t\t\tfromOption(\n\t\t\t\t\t\t\t\tfindFirst(positionData, data => data.uid === positionUid),\n\t\t\t\t\t\t\t\t() => new Error(`Position data with uid ${positionUid} not found in positions.store`),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\tconst getAllByInstrumentId = (instrumentId: number) =>\n\t\t\tall$.pipe(mapRD(data => data.filter(getPredicateByInstrumentId(instrumentId))));\n\n\t\tconst sendCloseRequest = (\n\t\t\taccountId: string,\n\t\t\tinstrumentId: number,\n\t\t\tamount: number,\n\t\t\tpositionKey: PositionKeyTO,\n\t\t\tquote: PositionQuote,\n\t\t\tquantity: number,\n\t\t): LiveData<Error, void> => {\n\t\t\tconst requestId = uuid();\n\t\t\treturn positionsController\n\t\t\t\t.closePosition({\n\t\t\t\t\tbody: buildCloseOrderTemplateTO(\n\t\t\t\t\t\taccountId,\n\t\t\t\t\t\tinstrumentId,\n\t\t\t\t\t\tamount,\n\t\t\t\t\t\tpositionKey,\n\t\t\t\t\t\tquote,\n\t\t\t\t\t\trequestId,\n\t\t\t\t\t\tquantity,\n\t\t\t\t\t),\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\t// we need to catch position close rejection for showing the error\n\t\t\t\t\tswitchMap(() =>\n\t\t\t\t\t\tcloseOrders$.pipe(\n\t\t\t\t\t\t\tmap((orders: OrdersMessageTO) =>\n\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\torders.body,\n\t\t\t\t\t\t\t\t\tfindFirst(item =>\n\t\t\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\t\t\titem.requestId,\n\t\t\t\t\t\t\t\t\t\t\tO.exists(id => id === requestId),\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tO.fold(\n\t\t\t\t\t\t\t\t\t\t() => failure<Error, OrderTO>(new Error()),\n\t\t\t\t\t\t\t\t\t\torder => {\n\t\t\t\t\t\t\t\t\t\t\tif (order.status === 'REJECTED') {\n\t\t\t\t\t\t\t\t\t\t\t\tconst err = new Error(order.statusDescription);\n\t\t\t\t\t\t\t\t\t\t\t\terror.handle(O.some(err));\n\t\t\t\t\t\t\t\t\t\t\t\treturn failure<Error, OrderTO>(err);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\terror.handle(O.none);\n\t\t\t\t\t\t\t\t\t\t\treturn success(order);\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t\tmapTo(success(undefined)),\n\t\t\t\t);\n\t\t};\n\n\t\tconst sendUpdateProtectionOrdersRequest = (\n\t\t\tpositionKey: PositionKeyTO,\n\t\t\tprotectionOrders: Array<ProtectionOrderTO>,\n\t\t) => {\n\t\t\treturn positionsController.modifyProtectionOrders({\n\t\t\t\tbody: { positionKey, protectionOrders },\n\t\t\t});\n\t\t};\n\n\t\tconst removePositionFromStore = (uid: string) => () => all$.pipe(mapRD(filterClosedPositions(uid)));\n\n\t\tconst removeEffect$ = positions$.pipe(\n\t\t\ttapRD(positions =>\n\t\t\t\tpositions.forEach(\n\t\t\t\t\t({ uid, quantity }) => quantity === 0 && store.remove(uid, pk, removePositionFromStore(uid)),\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\n\t\tconst effects$ = merge(all$, removeEffect$);\n\n\t\treturn new Sink(\n\t\t\t() => ({\n\t\t\t\tall$,\n\t\t\t\tkeys$,\n\t\t\t\terror$,\n\t\t\t\tgetPositionByUid,\n\t\t\t\tgetAllByInstrumentId,\n\t\t\t\tsendCloseRequest,\n\t\t\t\tsendUpdateProtectionOrdersRequest,\n\t\t\t\tclosedPositions$,\n\t\t\t}),\n\t\t\teffects$,\n\t\t);\n\t},\n);\n\nconst getPredicateByInstrumentId = (instrumentId: number): Predicate<PositionTO> => position =>\n\tposition.positionKey.instrumentId === instrumentId;\n\nfunction buildCloseOrderTemplateTO(\n\taccountId: string,\n\tinstrumentId: number,\n\tamount: number,\n\tpositionKey: PositionKeyTO,\n\tquote: PositionQuote,\n\trequestId: string,\n\tpositionQuantity: number,\n): OrderTemplateTO {\n\t//if quantity > 0 - position was opened by buying\n\tconst isQuantityPositive = positionQuantity > 0;\n\tconst limitPrice = isQuantityPositive ? quote.bid : quote.ask;\n\tconst sign = positionQuantity > 0 ? -1 : 1;\n\treturn {\n\t\taccountId,\n\t\tinstrumentId,\n\t\t// ensure that we apply multiplier to an absolute value\n\t\tquantity: Math.abs(amount) * sign,\n\t\torderType: 'MARKET',\n\t\ttimeInForce: 'GTC',\n\t\tlimitPrice,\n\t\tstopPrice: O.none,\n\t\tstopPriceOffset: O.none,\n\t\tocoGroupCode: O.none,\n\t\trefOrderChainId: O.none,\n\t\tpositionKey: O.some(positionKey),\n\t\teffect: 'CLOSING',\n\t\torderSide: O.none,\n\t\texpireAt: O.none,\n\t\talertExpression: O.none,\n\t\tdirectExchange: O.none,\n\t\tadditionalParameters: O.none,\n\t\ttakeProfit: O.none,\n\t\tstopLoss: O.none,\n\t\trequestId: O.some(requestId),\n\t};\n}\n\nfunction filterClosedPositions(uid: string) {\n\treturn (positions: PositionTO[]) => filterArray(positions, position => position.uid === uid);\n}\n\nfunction filterZeroQtyPositionsPredicate(position: PositionTO) {\n\treturn position.quantity !== 0;\n}\n","import { OrderTemplateTO, OrderTemplateTOIO } from '../definitions/OrderTemplateTO';\nimport { type } from 'io-ts';\n\nexport type BracketGroupTemplateTO = { firstOrder: OrderTemplateTO; secondOrder: OrderTemplateTO };\nexport const BracketGroupTemplateTOIO = type({ firstOrder: OrderTemplateTOIO, secondOrder: OrderTemplateTOIO });\n","import { BracketGroupTemplateTO, BracketGroupTemplateTOIO } from '../definitions/BracketGroupTemplateTO';\nimport { OrderTemplateTO, OrderTemplateTOIO } from '../definitions/OrderTemplateTO';\nimport { array, type } from 'io-ts';\n\nexport type IfThenBracketGroupTemplateTO = { ifOrder: OrderTemplateTO; brackets: Array<BracketGroupTemplateTO> };\nexport const IfThenBracketGroupTemplateTOIO = type({\n\tifOrder: OrderTemplateTOIO,\n\tbrackets: array(BracketGroupTemplateTOIO),\n});\n","import { OrderTemplateTO, OrderTemplateTOIO } from '../definitions/OrderTemplateTO';\nimport { type } from 'io-ts';\n\nexport type OCOGroupTemplateTO = { firstOrder: OrderTemplateTO; secondOrder: OrderTemplateTO };\nexport const OCOGroupTemplateTOIO = type({ firstOrder: OrderTemplateTOIO, secondOrder: OrderTemplateTOIO });\n","import { OCOGroupTemplateTO, OCOGroupTemplateTOIO } from '../definitions/OCOGroupTemplateTO';\nimport { OrderTemplateTO, OrderTemplateTOIO } from '../definitions/OrderTemplateTO';\nimport { type } from 'io-ts';\n\nexport type IfThenOCOGroupTemplateTO = { ifOrder: OrderTemplateTO; ocoGroupTemplateTO: OCOGroupTemplateTO };\nexport const IfThenOCOGroupTemplateTOIO = type({\n\tifOrder: OrderTemplateTOIO,\n\tocoGroupTemplateTO: OCOGroupTemplateTOIO,\n});\n","import { OrderTemplateTO, OrderTemplateTOIO } from '../definitions/OrderTemplateTO';\nimport { type } from 'io-ts';\n\nexport type OSOGroupTemplateTO = { ifOrder: OrderTemplateTO; thenOrder: OrderTemplateTO };\nexport const OSOGroupTemplateTOIO = type({ ifOrder: OrderTemplateTOIO, thenOrder: OrderTemplateTOIO });\n","import { ExecutionMessageTO, ExecutionMessageTOIO } from '../definitions/ExecutionMessageTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport { number, union, literal, array, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type ValidationResultTO = {\n\triskyOrdersTradeCost: Option<number>;\n\trestriction: Option<\n\t\t| 'NOT_RESTRICTED'\n\t\t| 'CONFIRMATION_NEEDED'\n\t\t| 'DO_NOT_ACTIVATE'\n\t\t| 'RESTRICTED_REJECT'\n\t\t| 'RESTRICTED_MANUAL_EXECUTION'\n\t>;\n\texecutionMessages: Option<Array<ExecutionMessageTO>>;\n};\nexport const ValidationResultTOIO = type({\n\triskyOrdersTradeCost: createOptionFromNullable(number),\n\trestriction: createOptionFromNullable(\n\t\tunion([\n\t\t\tliteral('NOT_RESTRICTED'),\n\t\t\tliteral('CONFIRMATION_NEEDED'),\n\t\t\tliteral('DO_NOT_ACTIVATE'),\n\t\t\tliteral('RESTRICTED_REJECT'),\n\t\t\tliteral('RESTRICTED_MANUAL_EXECUTION'),\n\t\t]),\n\t),\n\texecutionMessages: createOptionFromNullable(array(ExecutionMessageTOIO)),\n});\n","import { ResponseValidationError, TAPIClient } from '../client/client';\nimport { BracketGroupTemplateTO, BracketGroupTemplateTOIO } from '../definitions/BracketGroupTemplateTO';\nimport { HistoryOrderTO, HistoryOrderTOIO } from '../definitions/HistoryOrderTO';\nimport {\n\tIfThenBracketGroupTemplateTO,\n\tIfThenBracketGroupTemplateTOIO,\n} from '../definitions/IfThenBracketGroupTemplateTO';\nimport { IfThenOCOGroupTemplateTO, IfThenOCOGroupTemplateTOIO } from '../definitions/IfThenOCOGroupTemplateTO';\nimport { OCOGroupTemplateTO, OCOGroupTemplateTOIO } from '../definitions/OCOGroupTemplateTO';\nimport { OSOGroupTemplateTO, OSOGroupTemplateTOIO } from '../definitions/OSOGroupTemplateTO';\nimport { OrderTO, OrderTOIO } from '../definitions/OrderTO';\nimport { OrderTemplateTO, OrderTemplateTOIO } from '../definitions/OrderTemplateTO';\nimport { ResponseResultTO, ResponseResultTOIO } from '../definitions/ResponseResultTO';\nimport { ValidationResultTO, ValidationResultTOIO } from '../definitions/ValidationResultTO';\nimport { fromEither } from '@devexperts/remote-data-ts';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { Option } from 'fp-ts/lib/Option';\nimport { asks } from 'fp-ts/lib/Reader';\nimport { array, string, type, partial, number, void as tvoid } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\nimport { map } from 'rxjs/operators';\n\nexport type OrdersController = {\n\t/**\n\t * Get list of existing orders for specified accounts\n\t * @param { object } parameters\n\t */\n\treadonly getOrders: (parameters: { query: { accountId: Array<string> } }) => LiveData<Error, Array<OrderTO>>;\n\n\t/**\n\t * Modify bracket order\n\t * @param { object } [parameters]\n\t */\n\treadonly modifyBracketOrder: (parameters: { body?: BracketGroupTemplateTO }) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Place bracket order\n\t * @param { object } [parameters]\n\t */\n\treadonly placeBracketOrder: (parameters: { body?: BracketGroupTemplateTO }) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Cancel order\n\t * @param { object } parameters\n\t */\n\treadonly cancelOrder: (parameters: {\n\t\tquery: { accountId: string; orderChainId: string };\n\t}) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Get order history within date range\n\t * @param { object } [parameters]\n\t */\n\treadonly getOrderHistory: (parameters: {\n\t\tquery?: { from: Option<number>; to: Option<number> };\n\t}) => LiveData<Error, Array<HistoryOrderTO>>;\n\n\t/**\n\t * Request order history within date range\n\t * @param { object } [parameters]\n\t */\n\treadonly requestOrderHistory: (parameters: {\n\t\tquery?: { from: Option<number>; to: Option<number> };\n\t}) => LiveData<Error, void>;\n\n\t/**\n\t * Modify IF-THEN-BRACKET order\n\t * @param { object } [parameters]\n\t */\n\treadonly modifyIfThenBracketOrder: (parameters: {\n\t\tbody?: IfThenBracketGroupTemplateTO;\n\t}) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Place IF-THEN-BRACKET order\n\t * @param { object } [parameters]\n\t */\n\treadonly placeIfThenBracketOrder: (parameters: {\n\t\tbody?: IfThenBracketGroupTemplateTO;\n\t}) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Modify IF-THEN-OCO order\n\t * @param { object } [parameters]\n\t */\n\treadonly modifyIfThenOcoOrder: (parameters: {\n\t\tbody?: IfThenOCOGroupTemplateTO;\n\t}) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Place IF-THEN-OCO order\n\t * @param { object } [parameters]\n\t */\n\treadonly placeIfThenOcoOrder: (parameters: {\n\t\tbody?: IfThenOCOGroupTemplateTO;\n\t}) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Cancel all orders\n\t */\n\treadonly cancelAllOrders: () => LiveData<Error, void>;\n\n\t/**\n\t * Modify OCO order\n\t * @param { object } [parameters]\n\t */\n\treadonly modifyOCOOrder: (parameters: { body?: OCOGroupTemplateTO }) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Place OCO order\n\t * @param { object } [parameters]\n\t */\n\treadonly placeOCOOrder: (parameters: { body?: OCOGroupTemplateTO }) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Validate single order\n\t * @param { object } [parameters]\n\t */\n\treadonly validateOcoOrder: (parameters: {\n\t\tbody?: OCOGroupTemplateTO;\n\t}) => LiveData<Error, Array<ValidationResultTO>>;\n\n\t/**\n\t * Modify OSO order\n\t * @param { object } [parameters]\n\t */\n\treadonly modifyIfThenOrder: (parameters: { body?: OSOGroupTemplateTO }) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Place OSO order\n\t * @param { object } [parameters]\n\t */\n\treadonly placeIfThenOrder: (parameters: { body?: OSOGroupTemplateTO }) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Modify single order\n\t * @param { object } [parameters]\n\t */\n\treadonly modifySingleOrder: (parameters: { body?: OrderTemplateTO }) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Place single order\n\t * @param { object } [parameters]\n\t */\n\treadonly placeSingleOrder: (parameters: { body?: OrderTemplateTO }) => LiveData<Error, ResponseResultTO>;\n\n\t/**\n\t * Validate single order\n\t * @param { object } [parameters]\n\t */\n\treadonly validateOrder: (parameters: { body?: OrderTemplateTO }) => LiveData<Error, Array<ValidationResultTO>>;\n\n\t/**\n\t * Unsubscribe order history within date range\n\t * @param { object } [parameters]\n\t */\n\treadonly unsubscribeHistory: (parameters: {\n\t\tquery?: { from: Option<number>; to: Option<number> };\n\t}) => LiveData<Error, void>;\n};\n\nexport const ordersController = asks(\n\t(e: { apiClient: TAPIClient }): OrdersController => ({\n\t\tgetOrders: parameters => {\n\t\t\tconst encoded = partial({ query: type({ accountId: array(string) }) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(OrderTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tmodifyBracketOrder: parameters => {\n\t\t\tconst encoded = partial({ body: BracketGroupTemplateTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/bracket`,\n\t\t\t\t\tmethod: 'PUT',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tplaceBracketOrder: parameters => {\n\t\t\tconst encoded = partial({ body: BracketGroupTemplateTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/bracket`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tcancelOrder: parameters => {\n\t\t\tconst encoded = partial({ query: type({ accountId: string, orderChainId: string }) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/cancel`,\n\t\t\t\t\tmethod: 'DELETE',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tgetOrderHistory: parameters => {\n\t\t\tconst encoded = partial({\n\t\t\t\tquery: type({ from: createOptionFromNullable(number), to: createOptionFromNullable(number) }),\n\t\t\t}).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/history`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(HistoryOrderTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\trequestOrderHistory: parameters => {\n\t\t\tconst encoded = partial({\n\t\t\t\tquery: type({ from: createOptionFromNullable(number), to: createOptionFromNullable(number) }),\n\t\t\t}).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/history`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tmodifyIfThenBracketOrder: parameters => {\n\t\t\tconst encoded = partial({ body: IfThenBracketGroupTemplateTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/if-then-bracket`,\n\t\t\t\t\tmethod: 'PUT',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tplaceIfThenBracketOrder: parameters => {\n\t\t\tconst encoded = partial({ body: IfThenBracketGroupTemplateTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/if-then-bracket`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tmodifyIfThenOcoOrder: parameters => {\n\t\t\tconst encoded = partial({ body: IfThenOCOGroupTemplateTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/if-then-oco`,\n\t\t\t\t\tmethod: 'PUT',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tplaceIfThenOcoOrder: parameters => {\n\t\t\tconst encoded = partial({ body: IfThenOCOGroupTemplateTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/if-then-oco`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tcancelAllOrders: () => {\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/liquidate`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tmodifyOCOOrder: parameters => {\n\t\t\tconst encoded = partial({ body: OCOGroupTemplateTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/oco`,\n\t\t\t\t\tmethod: 'PUT',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tplaceOCOOrder: parameters => {\n\t\t\tconst encoded = partial({ body: OCOGroupTemplateTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/oco`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tvalidateOcoOrder: parameters => {\n\t\t\tconst encoded = partial({ body: OCOGroupTemplateTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/oco/validate`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(ValidationResultTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tmodifyIfThenOrder: parameters => {\n\t\t\tconst encoded = partial({ body: OSOGroupTemplateTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/oso`,\n\t\t\t\t\tmethod: 'PUT',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tplaceIfThenOrder: parameters => {\n\t\t\tconst encoded = partial({ body: OSOGroupTemplateTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/oso`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tmodifySingleOrder: parameters => {\n\t\t\tconst encoded = partial({ body: OrderTemplateTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/single`,\n\t\t\t\t\tmethod: 'PUT',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tplaceSingleOrder: parameters => {\n\t\t\tconst encoded = partial({ body: OrderTemplateTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/single`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(ResponseResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tvalidateOrder: parameters => {\n\t\t\tconst encoded = partial({ body: OrderTemplateTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/single/validate`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(ValidationResultTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tunsubscribeHistory: parameters => {\n\t\t\tconst encoded = partial({\n\t\t\t\tquery: type({ from: createOptionFromNullable(number), to: createOptionFromNullable(number) }),\n\t\t\t}).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/orders/unsubscribeHistory`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\t}),\n);\n","export function applyT<A, B, C, D, R>(f: (a: A, b: B, c: C, d: D) => R): (t: [A, B, C, D]) => R;\nexport function applyT<A, B, C, R>(f: (a: A, b: B, c: C) => R): (t: [A, B, C]) => R;\nexport function applyT<A, B, R>(f: (a: A, b: B) => R): (t: [A, B]) => R;\nexport function applyT<A, R>(f: (a: A) => R): (t: [A]) => R;\nexport function applyT<A, R>(f: (...a: A[]) => R): (t: A[]) => R {\n\treturn t => f(...t);\n}\n\nexport const firstT = <A, B>(t: [A, B]): A => t[0];\nexport const secondT = <A, B>(t: [A, B]): B => t[1];\n","import { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { ordersController } from '../../api/generated/swagger/controllers/OrdersController';\nimport { SocketClient } from '../../api/socket-client';\nimport { OrderTO } from '../../api/generated/swagger/definitions/OrderTO';\nimport { ProtectionOrderTO } from '../../api/generated/swagger/definitions/ProtectionOrderTO';\nimport { EntityStore } from '@devexperts/rx-utils/dist/rd/entity-store.utils';\nimport { isOrdersTO } from '../../api/socket/socket-message.to';\nimport { filter, map, mapTo, switchMap, tap, distinctUntilChanged } from 'rxjs/operators';\nimport { findFirst, getEq } from 'fp-ts/lib/Array';\nimport { failure, fromOption, isSuccess, success } from '@devexperts/remote-data-ts';\nimport { Observable } from 'rxjs';\nimport { sequenceTOption } from '../../utils/option.utils';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { uuid } from '@devexperts/utils/dist/string';\nimport { OrderTemplateTO } from '../../api/generated/swagger/definitions/OrderTemplateTO';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { secondT } from '../../utils/tuple.utils';\nimport { constUndefined, constant } from 'fp-ts/lib/function';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { ask, combineContext, fromReader } from '@devexperts/rx-utils/dist/context.utils';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { merge } from 'rxjs/internal/observable/merge';\nimport { eqString } from 'fp-ts/lib/Eq';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type UpdateOrderData = {\n\torderId: string;\n\tdata: OrderData;\n};\n\nexport type OrderData = {\n\trequestId: Option<string>;\n\taccountId: string;\n\tinstrumentId: number;\n\tbid: number;\n\task: number;\n\tquantity: number;\n\tside: OrderTemplateTO['orderSide'];\n\texpireAt: Option<Date>;\n\texecutionPrice: Option<number>;\n\ttakeProfit: Option<ProtectionOrderTO>;\n\tstopLoss: Option<ProtectionOrderTO>;\n\torderChainId: Option<string>;\n\tdistance: number;\n};\n\nexport type OrderStore = Readonly<{\n\tplace: (\n\t\taccountId: string,\n\t\tinstrumentId: number,\n\t\tbid: number,\n\t\task: number,\n\t\tquantity: number,\n\t\tside: OrderTemplateTO['orderSide'],\n\t\texpireAt: Option<Date>,\n\t\texecutionPrice: Option<number>,\n\t\ttakeProfit: Option<ProtectionOrderTO>,\n\t\tstopLoss: Option<ProtectionOrderTO>,\n\t\tdistance: number,\n\t) => LiveData<Error, void>;\n\tupdateOrder: (data: UpdateOrderData) => void;\n\tgetById: (id: number) => LiveData<Error, OrderTO>;\n\tall$: LiveData<Error, OrderTO[]>;\n\terror$: Observable<Option<Error>>;\n\tremove: (id: number) => LiveData<Error, void>;\n\tkeys$: Observable<string[]>;\n}>;\n\nexport type OrderStoreContext = {\n\tsocketClient: SocketClient;\n};\n\nexport type CreateOrderStore = Sink<() => OrderStore>;\n\nexport const createOrderStore = combineContext(\n\tfromReader(ordersController),\n\task<OrderStoreContext>(),\n\t(ordersController, e): CreateOrderStore => {\n\t\tconst { socketClient } = e;\n\t\tconst pk = (order: OrderTO) => order.orderId.toString();\n\n\t\tconst store = new EntityStore<Error, OrderTO>();\n\n\t\tconst error = createHandler<Option<Error>>();\n\t\tconst error$ = error.value$;\n\n\t\tconst orderMessages$ = socketClient.message$.pipe(filter(isOrdersTO));\n\n\t\tconst orders$: Observable<OrderTO[]> = orderMessages$.pipe(\n\t\t\tmap(message => message.body),\n\t\t\tmap(orders => orders.filter(order => filterWorkingOrderPredicate(order))),\n\t\t);\n\n\t\tconst all$ = store.getAll(pk, () => orders$.pipe(map(to => success(to))));\n\t\t// TODO: delete distinctUntilChanged after #111 (dx-platform)\n\t\tconst keys$ = store.keys$.pipe(distinctUntilChanged(getEq(eqString).equals));\n\n\t\tconst removeFromStore = (id: number) => (): LiveData<Error, Array<OrderTO>> =>\n\t\t\tall$.pipe(mapRD(orders => orders.filter(order => order.orderId !== id)));\n\n\t\tconst removeEffect$ = orderMessages$.pipe(\n\t\t\tmap(message => message.body),\n\t\t\tmap(orders => orders.filter(order => filterCompletedAndCancelledOrdersPredicate(order))),\n\t\t\ttap(ordersToRemove =>\n\t\t\t\tordersToRemove.forEach(({ orderId }) => store.remove(String(orderId), pk, removeFromStore(orderId))),\n\t\t\t),\n\t\t);\n\n\t\tconst place = (\n\t\t\taccountId: string,\n\t\t\tinstrumentId: number,\n\t\t\tbid: number,\n\t\t\task: number,\n\t\t\tquantity: number,\n\t\t\tside: OrderTemplateTO['orderSide'],\n\t\t\texpireAt: Option<Date>,\n\t\t\texecutionPrice: Option<number>,\n\t\t\ttakeProfit: Option<ProtectionOrderTO>,\n\t\t\tstopLoss: Option<ProtectionOrderTO>,\n\t\t\tdistance: number,\n\t\t): LiveData<Error, void> =>\n\t\t\tstore\n\t\t\t\t.create(pk, () => {\n\t\t\t\t\tconst requestId = uuid();\n\n\t\t\t\t\tconst request$ = ordersController.placeSingleOrder({\n\t\t\t\t\t\tbody: buildOrderTemplateTO({\n\t\t\t\t\t\t\taccountId,\n\t\t\t\t\t\t\tinstrumentId,\n\t\t\t\t\t\t\tbid,\n\t\t\t\t\t\t\task,\n\t\t\t\t\t\t\tquantity,\n\t\t\t\t\t\t\tside,\n\t\t\t\t\t\t\ttakeProfit,\n\t\t\t\t\t\t\tstopLoss,\n\t\t\t\t\t\t\trequestId: O.some(requestId),\n\t\t\t\t\t\t\texpireAt,\n\t\t\t\t\t\t\texecutionPrice,\n\t\t\t\t\t\t\torderChainId: O.none,\n\t\t\t\t\t\t\tdistance,\n\t\t\t\t\t\t}),\n\t\t\t\t\t});\n\n\t\t\t\t\tconst order$ = orderMessages$.pipe(\n\t\t\t\t\t\tmap(orders =>\n\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\tfindFirst(orders.body, item =>\n\t\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\t\titem.requestId,\n\t\t\t\t\t\t\t\t\t\tO.exists(id => id === requestId),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tO.fold(\n\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\tfailure<Error, OrderTO>(\n\t\t\t\t\t\t\t\t\t\t\tnew Error(`Order with id ${requestId} not found in orders.store`),\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\torder => success<Error, OrderTO>(order),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tmap(order =>\n\t\t\t\t\t\t\torder.chain(order => {\n\t\t\t\t\t\t\t\tif (order.status === 'REJECTED') {\n\t\t\t\t\t\t\t\t\tconst err = new Error(order.statusDescription);\n\t\t\t\t\t\t\t\t\terror.handle(O.some(err));\n\t\t\t\t\t\t\t\t\treturn failure<Error, OrderTO>(err);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\terror.handle(O.none);\n\t\t\t\t\t\t\t\treturn success(order);\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfilter(order => order.exists(filterWorkingOrderPredicate)),\n\t\t\t\t\t);\n\n\t\t\t\t\treturn combineLatestRD(request$, order$).pipe(mapRD(secondT));\n\t\t\t\t})\n\t\t\t\t.pipe(mapRD(constUndefined));\n\n\t\tconst getById = (id: number): LiveData<Error, OrderTO> =>\n\t\t\tall$.pipe(\n\t\t\t\tmap(orders =>\n\t\t\t\t\torders.chain(order =>\n\t\t\t\t\t\tfromOption(\n\t\t\t\t\t\t\tfindFirst(order, data => data.orderId === id),\n\t\t\t\t\t\t\t() => new Error(`Order with id ${id} not found in orders.store`),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\tconst updateOrderInStore = (id: number, data: OrderTO) => (): LiveData<Error, OrderTO> =>\n\t\t\tall$.pipe(\n\t\t\t\tmap(orders =>\n\t\t\t\t\torders.chain(order =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\tfindFirst(order, data => data.orderId === id),\n\t\t\t\t\t\t\tO.fold(\n\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\tfailure<Error, OrderTO>(new Error(`Order with id ${id} not found in orders.store`)),\n\t\t\t\t\t\t\t\t() => success(data),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\tconst updateOrder = createHandler<UpdateOrderData>();\n\n\t\tconst sendRequestToUpdateOrder = (data: UpdateOrderData) => {\n\t\t\tconst requestId = uuid();\n\t\t\tconst dataTemplateTO = { ...buildOrderTemplateTO(data.data), requestId: O.some(requestId) };\n\t\t\treturn ordersController.modifySingleOrder({ body: dataTemplateTO }).pipe(\n\t\t\t\tfilter(isSuccess),\n\t\t\t\tmapTo(data),\n\t\t\t);\n\t\t};\n\n\t\tconst subscribeToOrdersAndUpdateStore = (data: UpdateOrderData) =>\n\t\t\torderMessages$.pipe(\n\t\t\t\tmap(orders =>\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tfindFirst(orders.body, item => item.orderId.toString() === data.orderId),\n\t\t\t\t\t\tO.fold(\n\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\tfailure<Error, OrderTO>(\n\t\t\t\t\t\t\t\t\tnew Error(`Order with id ${data.orderId} not found in orders.store`),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\torder => success<Error, OrderTO>(order),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tmap(order =>\n\t\t\t\t\torder.chain(order => {\n\t\t\t\t\t\tif (order.status === 'REJECTED') {\n\t\t\t\t\t\t\tconst err = new Error(order.statusDescription);\n\t\t\t\t\t\t\terror.handle(O.some(err));\n\t\t\t\t\t\t\treturn failure<Error, OrderTO>(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t\terror.handle(O.none);\n\t\t\t\t\t\treturn success(order);\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t\t\tfilter(isSuccess),\n\t\t\t\tmapRD(order => store.update(data.orderId, updateOrderInStore(Number(data.orderId), order))),\n\t\t\t);\n\n\t\tconst updateEffects$ = updateOrder.value$.pipe(\n\t\t\tswitchMap(data => sendRequestToUpdateOrder(data)),\n\t\t\tswitchMap(data => subscribeToOrdersAndUpdateStore(data)),\n\t\t);\n\n\t\tconst remove = (id: number): LiveData<Error, void> =>\n\t\t\tall$.pipe(\n\t\t\t\tmap(orders =>\n\t\t\t\t\torders.chain(orders =>\n\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\tfindFirst(orders, order => order.orderId === id),\n\t\t\t\t\t\t\tO.fold(\n\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\tfailure<Error, OrderTO>(new Error(`Order with id ${id} not found in orders.store`)),\n\t\t\t\t\t\t\t\torder => success<Error, OrderTO>(order),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tswitchMapRD(order =>\n\t\t\t\t\tordersController.cancelOrder({\n\t\t\t\t\t\tquery: {\n\t\t\t\t\t\t\taccountId: order.accountId,\n\t\t\t\t\t\t\torderChainId: order.orderChainId,\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t\t\tmapTo(success(undefined)),\n\t\t\t);\n\n\t\treturn new Sink(\n\t\t\t() => ({\n\t\t\t\tplace,\n\t\t\t\tall$,\n\t\t\t\tgetById,\n\t\t\t\terror$,\n\t\t\t\tremove,\n\t\t\t\tupdateOrder: updateOrder.handle,\n\t\t\t\tkeys$,\n\t\t\t}),\n\t\t\tmerge(all$, updateEffects$, removeEffect$),\n\t\t);\n\t},\n);\n\nfunction buildOrderTemplateTO(data: OrderData): OrderTemplateTO {\n\tconst {\n\t\taccountId,\n\t\tinstrumentId,\n\t\tbid,\n\t\task,\n\t\tquantity,\n\t\tside,\n\t\ttakeProfit,\n\t\tstopLoss,\n\t\trequestId,\n\t\texpireAt,\n\t\texecutionPrice,\n\t\torderChainId,\n\t\tdistance,\n\t} = data;\n\tconst currentPrice = getCurrentPrice(side, bid, ask);\n\tconst orderType = getOrderType(executionPrice, currentPrice, distance, side);\n\tconst stopPrice = orderType === 'STOP' ? executionPrice : O.none;\n\tconst limitPrice = orderType === 'LIMIT' ? executionPrice : O.none;\n\tconst timeInForce = O.isSome(expireAt) ? 'GTD' : 'GTC';\n\tconst currentQuantity = getCurrentQuantity(side, quantity);\n\n\treturn {\n\t\taccountId,\n\t\tinstrumentId,\n\t\tquantity: currentQuantity,\n\t\torderType,\n\t\ttimeInForce,\n\t\tlimitPrice,\n\t\tstopPrice,\n\t\tstopPriceOffset: O.none,\n\t\tocoGroupCode: O.none,\n\t\trefOrderChainId: orderChainId,\n\t\tpositionKey: O.none,\n\t\teffect: 'OPENING',\n\t\torderSide: side,\n\t\texpireAt,\n\t\talertExpression: O.none,\n\t\tdirectExchange: O.none,\n\t\tadditionalParameters: O.none,\n\t\ttakeProfit,\n\t\tstopLoss,\n\t\trequestId,\n\t};\n}\n\nfunction getCurrentPrice(side: OrderTemplateTO['orderSide'], bid: number, ask: number): Option<number> {\n\treturn pipe(\n\t\tside,\n\t\tO.map(sideVal => {\n\t\t\tswitch (sideVal) {\n\t\t\t\tcase 'BUY': {\n\t\t\t\t\treturn ask;\n\t\t\t\t}\n\t\t\t\tcase 'SELL': {\n\t\t\t\t\treturn bid;\n\t\t\t\t}\n\t\t\t}\n\t\t}),\n\t);\n}\n\nexport function getOrderType(\n\texecutionPrice: Option<number>,\n\tcurrentPrice: Option<number>,\n\tdistance: number,\n\tside: OrderTemplateTO['orderSide'],\n): OrderTemplateTO['orderType'] {\n\treturn pipe(\n\t\tsequenceTOption(executionPrice, currentPrice, side),\n\t\tO.map(([price, currentPrice, side]) => {\n\t\t\t// please refer to https://jira.in.devexperts.com/browse/DXREQ-10550?focusedCommentId=1956701&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-1956701\n\t\t\tswitch (side) {\n\t\t\t\tcase 'BUY': {\n\t\t\t\t\tif (price >= currentPrice + distance) {\n\t\t\t\t\t\treturn 'STOP';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (price <= currentPrice - distance) {\n\t\t\t\t\t\treturn 'LIMIT';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcase 'SELL': {\n\t\t\t\t\tif (price >= currentPrice + distance) {\n\t\t\t\t\t\treturn 'LIMIT';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (price <= currentPrice - distance) {\n\t\t\t\t\t\treturn 'STOP';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'MARKET';\n\t\t\t}\n\t\t}),\n\t\tO.getOrElse<OrderTemplateTO['orderType']>(constant('MARKET')),\n\t);\n}\n\nfunction getCurrentQuantity(side: OrderTemplateTO['orderSide'], quantity: number): number {\n\treturn pipe(\n\t\tside,\n\t\tO.map(sideVal => {\n\t\t\tswitch (sideVal) {\n\t\t\t\tcase 'BUY':\n\t\t\t\t\treturn quantity;\n\t\t\t\tcase 'SELL':\n\t\t\t\t\treturn -quantity;\n\t\t\t}\n\t\t}),\n\t\tO.getOrElse(() => quantity),\n\t);\n}\n\nfunction filterWorkingOrderPredicate(order: OrderTO) {\n\tconst statusWorking: Array<OrderTO['status']> = [\n\t\t'WORKING',\n\t\t'WAITING_LIMIT',\n\t\t'WAITING_STOP',\n\t\t'WAITING_TRIGGER',\n\t\t'EXECUTING',\n\t];\n\tconst foundStatusWorking = findFirst(statusWorking, status => status === order.status);\n\treturn O.isSome(foundStatusWorking);\n}\n\nfunction filterCompletedAndCancelledOrdersPredicate(order: OrderTO) {\n\tconst statusWorking: Array<OrderTO['status']> = ['CANCELED', 'COMPLETED'];\n\tconst foundStatusWorking = findFirst(statusWorking, status => status === order.status);\n\treturn O.isSome(foundStatusWorking);\n}\n","import { Option } from 'fp-ts/lib/Option';\nimport { number, string, type } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\n\nexport type InstrumentSuggestTO = {\n\tid: number;\n\tsortIndex: number;\n\tname: string;\n\tdescription: Option<string>;\n\ttype: string;\n};\nexport const InstrumentSuggestTOIO = type({\n\tid: number,\n\tsortIndex: number,\n\tname: string,\n\tdescription: createOptionFromNullable(string),\n\ttype: string,\n});\n","import { ask, combineContext, fromReader } from '@devexperts/rx-utils/dist/context.utils';\nimport { SocketClient } from '../../api/socket-client';\nimport { combineLatest, merge } from 'rxjs';\nimport { distinctUntilChanged, filter, map, switchMap } from 'rxjs/operators';\nimport {\n\tisWatchlistContentTO,\n\tisWatchlistSubscriptionInitializedTO,\n\tisWatchlistTO,\n} from '../../api/socket/socket-message.to';\nimport { EntityStore } from '@devexperts/rx-utils/dist/rd/entity-store.utils';\nimport { success, getSetoid as getSetoidRD, fromOption, RemoteData } from '@devexperts/remote-data-ts';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport * as O from 'fp-ts/lib/Option';\nimport { symbolSuggestController } from '../../api/generated/swagger/controllers/SymbolSuggestController';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { watchlistsController } from '../../api/generated/swagger/controllers/WatchlistsController';\nimport { findFirst, getEq as getSetoidArray, mapOption, isEmpty } from 'fp-ts/lib/Array';\nimport { getStructEq, Eq, eqString } from 'fp-ts/lib/Eq';\nimport { setoidStrict } from '@devexperts/utils/dist/typeclasses/setoid/setoid.utils';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { identity } from 'fp-ts/lib/function';\nimport { ordString } from 'fp-ts/lib/Ord';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { shareReplayWithDefaults } from '../../utils/rxjs/shareReplayWithDefaults';\n\nexport enum WatchlistType {\n\tPRIVATE = '* PRIVATE *',\n\tPUBLIC = '* PUBLIC *',\n\tCATEGORY = '* CATEGORY *',\n}\n\nexport type WatchlistEntity = {\n\tid: string;\n\tname: string;\n\tsymbols: string[];\n\ttype: WatchlistType;\n};\n\nconst setoidWatchlistEntity: Eq<WatchlistEntity> = getStructEq({\n\tid: eqString,\n\tname: eqString,\n\tsymbols: getSetoidArray(eqString),\n\ttype: setoidStrict,\n});\n\nconst setoidWatchlistEntityRD: Eq<RemoteData<Error, WatchlistEntity>> = getSetoidRD(\n\tsetoidStrict,\n\tsetoidWatchlistEntity,\n);\n\nconst setoidWatchlistEntityArrayRD: Eq<RemoteData<Error, WatchlistEntity[]>> = getSetoidRD(\n\tsetoidStrict,\n\tgetSetoidArray(setoidWatchlistEntity),\n);\n\nexport type WatchlistStore = Readonly<{\n\treadonly all$: LiveData<Error, WatchlistEntity[]>;\n\treadonly private$: LiveData<Error, WatchlistEntity[]>;\n\treadonly public$: LiveData<Error, WatchlistEntity[]>;\n\treadonly categories$: LiveData<Error, WatchlistEntity[]>;\n\treadonly getById: (id: string) => LiveData<Error, WatchlistEntity>;\n}>;\n\nexport type CreateWatchlistStore = Sink<() => WatchlistStore>;\n\nexport type WatchlistStoreContext = {\n\tsocketClient: SocketClient;\n};\n\nexport const createWatchlistStore = combineContext(\n\tfromReader(watchlistsController),\n\tfromReader(symbolSuggestController),\n\task<WatchlistStoreContext>(),\n\t(watchlistsController, symbolSuggestController, context: WatchlistStoreContext): CreateWatchlistStore => {\n\t\tconst { socketClient } = context;\n\t\tconst pk = (category: WatchlistEntity) => category.id;\n\n\t\tconst isInitialized$: LiveData<Error, boolean> = socketClient.message$.pipe(\n\t\t\tfilter(isWatchlistSubscriptionInitializedTO),\n\t\t\tfilter(message => message.body.success),\n\t\t\tmap(message => success(message.body.success)),\n\t\t);\n\n\t\tconst store = new EntityStore<Error, WatchlistEntity>();\n\t\tconst watchlists$ = socketClient.message$.pipe(\n\t\t\tfilter(isWatchlistTO),\n\t\t\tmap(watchlists => [...watchlists.body.commonWatchlists, ...watchlists.body.accountWatchlists]),\n\t\t);\n\n\t\tconst watchlistData$ = socketClient.message$.pipe(\n\t\t\tfilter(isWatchlistContentTO),\n\t\t\tmap(wldata => wldata.body),\n\t\t);\n\n\t\tconst watchlistsWithData$: LiveData<Error, WatchlistEntity[]> = combineLatest(watchlists$, watchlistData$).pipe(\n\t\t\tmap(([watchlists, watchlistsData]) =>\n\t\t\t\tmapOption(watchlistsData, watchlistData => {\n\t\t\t\t\treturn pipe(\n\t\t\t\t\t\twatchlists,\n\t\t\t\t\t\tfindFirst(item => item.id.toString() === watchlistData.watchlistId),\n\t\t\t\t\t\tO.map(data => ({\n\t\t\t\t\t\t\tid: data.id,\n\t\t\t\t\t\t\tname: data.name,\n\t\t\t\t\t\t\tsymbols: watchlistData.symbols,\n\t\t\t\t\t\t\ttype: pipe(\n\t\t\t\t\t\t\t\tdata.common,\n\t\t\t\t\t\t\t\tO.exists(identity),\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t? WatchlistType.PUBLIC\n\t\t\t\t\t\t\t\t: WatchlistType.PRIVATE,\n\t\t\t\t\t\t})),\n\t\t\t\t\t);\n\t\t\t\t}),\n\t\t\t),\n\t\t\tmap(data => success(data)),\n\t\t);\n\n\t\tconst watchlistSubscribeEffect$ = watchlists$.pipe(\n\t\t\tswitchMap(watchlists =>\n\t\t\t\twatchlistsController.changeWatchlistContentSubscription({\n\t\t\t\t\tbody: {\n\t\t\t\t\t\twatchlistIdsToAdd: watchlists.map(wl => wl.id),\n\t\t\t\t\t\twatchlistIdsToRemove: [],\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t),\n\t\t);\n\n\t\tconst watchlistsFromInstrumentTree$: LiveData<\n\t\t\tError,\n\t\t\tWatchlistEntity[]\n\t\t> = symbolSuggestController.requestSuggestsTree({ query: { text: '*', instrumentTypes: O.none } }).pipe(\n\t\t\tmapRD(data =>\n\t\t\t\tdata.root.childNodes.map(suggestion => ({\n\t\t\t\t\tid: suggestion.name.toLowerCase(),\n\t\t\t\t\tname: suggestion.name,\n\t\t\t\t\tsymbols: suggestion.suggests.map(item => item.name),\n\t\t\t\t\ttype: WatchlistType.CATEGORY,\n\t\t\t\t})),\n\t\t\t),\n\t\t);\n\n\t\tconst request$: LiveData<Error, WatchlistEntity[]> = isInitialized$.pipe(\n\t\t\tswitchMapRD(() => merge(watchlistsWithData$, watchlistsFromInstrumentTree$)),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\t\tconst all$: LiveData<Error, WatchlistEntity[]> = store\n\t\t\t.getAll(pk, () => request$)\n\t\t\t.pipe(mapRD(data => data.sort((a, b) => ordString.compare(a.name, b.name))));\n\t\tconst private$: LiveData<Error, WatchlistEntity[]> = all$.pipe(\n\t\t\tmapRD(data => data.filter(item => item.type === WatchlistType.PRIVATE)),\n\t\t\tfilter(privateWlRD => privateWlRD.map(privateWl => !isEmpty(privateWl)).getOrElse(true)),\n\t\t\tdistinctUntilChanged(setoidWatchlistEntityArrayRD.equals),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst public$: LiveData<Error, WatchlistEntity[]> = all$.pipe(\n\t\t\tmapRD(data => data.filter(item => item.type === WatchlistType.PUBLIC)),\n\t\t\tdistinctUntilChanged(setoidWatchlistEntityArrayRD.equals),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst categories$: LiveData<Error, WatchlistEntity[]> = all$.pipe(\n\t\t\tmapRD(data => data.filter(item => item.type === WatchlistType.CATEGORY)),\n\t\t\tdistinctUntilChanged(setoidWatchlistEntityArrayRD.equals),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst getById = (id: string): LiveData<Error, WatchlistEntity> =>\n\t\t\tstore\n\t\t\t\t.get(id, () =>\n\t\t\t\t\tcombineLatestRD(watchlistsWithData$, watchlistsFromInstrumentTree$).pipe(\n\t\t\t\t\t\tswitchMapRD(() =>\n\t\t\t\t\t\t\tall$.pipe(\n\t\t\t\t\t\t\t\tmapRD(data => findFirst(data, item => item.id === id)),\n\t\t\t\t\t\t\t\tmap(data =>\n\t\t\t\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\t\t\t\tfromOption(value, () => new Error('Watchlist is not available')),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t)\n\t\t\t\t.pipe(\n\t\t\t\t\tdistinctUntilChanged(setoidWatchlistEntityRD.equals),\n\t\t\t\t\tshareReplayWithDefaults(),\n\t\t\t\t);\n\n\t\treturn new Sink(\n\t\t\t() => ({ all$, public$, private$, categories$, getById }),\n\t\t\tmerge(all$, watchlistSubscribeEffect$),\n\t\t);\n\t},\n);\n","import { InstrumentSuggestTO, InstrumentSuggestTOIO } from '../definitions/InstrumentSuggestTO';\nimport { array, boolean, type } from 'io-ts';\n\nexport type SuggestResultTO = { suggests: Array<InstrumentSuggestTO>; overflow: boolean };\nexport const SuggestResultTOIO = type({ suggests: array(InstrumentSuggestTOIO), overflow: boolean });\n","import { InstrumentSuggestTO, InstrumentSuggestTOIO } from '../definitions/InstrumentSuggestTO';\nimport { string, array, type, recursion } from 'io-ts';\n\nexport type InstrumentSuggestTreeNodeTO = {\n\tname: string;\n\tchildNodes: Array<InstrumentSuggestTreeNodeTO>;\n\tsuggests: Array<InstrumentSuggestTO>;\n};\nexport const InstrumentSuggestTreeNodeTOIO = recursion<InstrumentSuggestTreeNodeTO, unknown>(\n\t'InstrumentSuggestTreeNodeTOIO',\n\tInstrumentSuggestTreeNodeTOIO =>\n\t\ttype({\n\t\t\tname: string,\n\t\t\tchildNodes: array(InstrumentSuggestTreeNodeTOIO),\n\t\t\tsuggests: array(InstrumentSuggestTOIO),\n\t\t}),\n);\n","import { InstrumentSuggestTreeNodeTO, InstrumentSuggestTreeNodeTOIO } from '../definitions/InstrumentSuggestTreeNodeTO';\nimport { boolean, type } from 'io-ts';\n\nexport type TreeSuggestResultTO = { root: InstrumentSuggestTreeNodeTO; overflow: boolean };\nexport const TreeSuggestResultTOIO = type({ root: InstrumentSuggestTreeNodeTOIO, overflow: boolean });\n","import { ResponseValidationError, TAPIClient } from '../client/client';\nimport { SuggestResultTO, SuggestResultTOIO } from '../definitions/SuggestResultTO';\nimport { TreeSuggestResultTO, TreeSuggestResultTOIO } from '../definitions/TreeSuggestResultTO';\nimport { fromEither } from '@devexperts/remote-data-ts';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { Option } from 'fp-ts/lib/Option';\nimport { asks } from 'fp-ts/lib/Reader';\nimport { string, array, type, partial } from 'io-ts';\nimport { createOptionFromNullable } from 'io-ts-types';\nimport { map } from 'rxjs/operators';\n\nexport type SymbolSuggestController = {\n\t/**\n\t * Request suggest results using symbol text for suggestion\n\t * @param { object } parameters\n\t */\n\treadonly requestSuggestions: (parameters: {\n\t\tquery: { text: string; instrumentTypes: Option<Array<string>> };\n\t}) => LiveData<Error, SuggestResultTO>;\n\n\t/**\n\t * Request tree suggest results using symbol text\n\t * @param { object } parameters\n\t */\n\treadonly requestSuggestsTree: (parameters: {\n\t\tquery: { text: string; instrumentTypes: Option<Array<string>> };\n\t}) => LiveData<Error, TreeSuggestResultTO>;\n};\n\nexport const symbolSuggestController = asks(\n\t(e: { apiClient: TAPIClient }): SymbolSuggestController => ({\n\t\trequestSuggestions: parameters => {\n\t\t\tconst encoded = partial({\n\t\t\t\tquery: type({ text: string, instrumentTypes: createOptionFromNullable(array(string)) }),\n\t\t\t}).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/suggest`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(SuggestResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\trequestSuggestsTree: parameters => {\n\t\t\tconst encoded = partial({\n\t\t\t\tquery: type({ text: string, instrumentTypes: createOptionFromNullable(array(string)) }),\n\t\t\t}).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/suggest/tree`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(TreeSuggestResultTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\t}),\n);\n","import { AggregationPeriodTO } from '../../api/generated/swagger/definitions/AggregationPeriodTO';\nimport { AggrPeriodRangePairTO } from '../../api/generated/swagger/definitions/AggrPeriodRangePairTO';\nimport { SocketClient } from '../../api/socket-client';\nimport { isGlobalChartSettingsTO } from '../../api/socket/socket-message.to';\nimport { filter, map } from 'rxjs/operators';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { combineContext, ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { fromOption } from '@devexperts/remote-data-ts';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as O from 'fp-ts/lib/Option';\nimport { shareReplayWithDefaults } from '../../utils/rxjs/shareReplayWithDefaults';\n\nexport type ChartSettingsStore = {\n\tperiods$: LiveData<Error, AggregationPeriodTO[]>;\n\tpairs$: LiveData<Error, AggrPeriodRangePairTO[]>;\n};\n\ntype ChartSettingsStoreContext = {\n\tsocketClient: SocketClient;\n};\n\nexport type CreateChartSettingsStore = Sink<() => ChartSettingsStore>;\n\nexport const createChartSettingsStore = combineContext(\n\task<ChartSettingsStoreContext>(),\n\t(context: ChartSettingsStoreContext): CreateChartSettingsStore => {\n\t\tconst { socketClient } = context;\n\n\t\tconst chartSettings$ = socketClient.message$.pipe(\n\t\t\tfilter(isGlobalChartSettingsTO),\n\t\t\tmap(res => res.body.chartSettings),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst periods$ = chartSettings$.pipe(\n\t\t\tmap(chartSettings =>\n\t\t\t\tfromOption(\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tchartSettings,\n\t\t\t\t\t\tO.chain(settings => settings.periods),\n\t\t\t\t\t),\n\t\t\t\t\t() => new Error(`Can't loading chart period settings`),\n\t\t\t\t),\n\t\t\t),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst pairs$ = chartSettings$.pipe(\n\t\t\tmap(chartSettings =>\n\t\t\t\tfromOption(\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tchartSettings,\n\t\t\t\t\t\tO.chain(settings => settings.pairs),\n\t\t\t\t\t),\n\t\t\t\t\t() => new Error(`Can't loading chart period settings`),\n\t\t\t\t),\n\t\t\t),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\treturn new Sink(() => ({ periods$, pairs$ }), chartSettings$);\n\t},\n);\n","import { merge, Observable } from 'rxjs';\nimport { filter, map, distinctUntilChanged, startWith } from 'rxjs/operators';\nimport { Option } from 'fp-ts/lib/Option';\nimport { isAccountMetricsTO, isAccountsTO, isLogoutEventTO, isUserInfoTO } from '../../api/socket/socket-message.to';\nimport { SocketClient } from '../../api/socket-client';\nimport { AccountMetricsTO } from '../../api/generated/swagger/definitions/AccountMetricsTO';\nimport { AccountTO } from '../../api/socket/to/accounts-message.to';\nimport { UserTO } from '../../api/generated/swagger/definitions/UserTO';\nimport { LogoutEventTO } from '../../api/generated/swagger/definitions/LogoutEventTO';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { setoidOptionNumber } from '../../utils/setoid.utils';\nimport { shareReplayWithDefaults } from '../../utils/rxjs/shareReplayWithDefaults';\n\nexport type AccountViewModel = {\n\taccountMetrics$: Observable<AccountMetricsTO>;\n\tcurrent$: Observable<AccountTO>;\n\tavailableAccounts$: Observable<AccountTO[]>;\n\taccountInfo$: Observable<UserTO>;\n\tequity$: Observable<Option<number>>;\n\tpreloader$: Observable<boolean>;\n\tonPreloaderChange: (state: boolean) => void;\n\tlogoutEvent$: Observable<LogoutEventTO>;\n};\n\nexport type AccountViewModelContext = {\n\tsocketClient: SocketClient;\n};\n\nexport type CreateAccountViewModel = () => Sink<AccountViewModel>;\n\nexport const createAccountViewModel = combineContext(\n\task<AccountViewModelContext>(),\n\t(e): CreateAccountViewModel => {\n\t\tconst accountMetrics$ = e.socketClient.message$.pipe(\n\t\t\tfilter(isAccountMetricsTO),\n\t\t\tmap(accountMetrics => accountMetrics.body),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\t\tconst current$ = e.socketClient.message$.pipe(\n\t\t\tfilter(isAccountsTO),\n\t\t\tmap(accounts => accounts.body.currentAccount),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\t\tconst availableAccounts$ = e.socketClient.message$.pipe(\n\t\t\tfilter(isAccountsTO),\n\t\t\tmap(accounts => accounts.body.availableAccounts),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\t\tconst accountInfo$ = e.socketClient.message$.pipe(\n\t\t\tfilter(isUserInfoTO),\n\t\t\tmap(data => data.body.user),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\t\tconst equity$ = accountMetrics$.pipe(\n\t\t\tmap(accountMetrics => accountMetrics.equity),\n\t\t\tdistinctUntilChanged(setoidOptionNumber.equals),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\t\tconst preloader = createHandler<boolean>();\n\t\tconst onPreloaderChange = (state: boolean) => preloader.handle(state);\n\n\t\tconst preloader$ = preloader.value$.pipe(\n\t\t\tstartWith(false),\n\t\t\tshareReplayWithDefaults(),\n\t\t);\n\n\t\tconst logoutEvent$ = e.socketClient.message$.pipe(\n\t\t\tfilter(isLogoutEventTO),\n\t\t\tmap(data => data.body),\n\t\t);\n\n\t\tconst effects$ = merge(current$, availableAccounts$, accountMetrics$, accountInfo$, preloader$);\n\n\t\treturn () =>\n\t\t\tnew Sink(\n\t\t\t\t{\n\t\t\t\t\tcurrent$,\n\t\t\t\t\tavailableAccounts$,\n\t\t\t\t\taccountMetrics$,\n\t\t\t\t\taccountInfo$,\n\t\t\t\t\tequity$,\n\t\t\t\t\tpreloader$,\n\t\t\t\t\tonPreloaderChange,\n\t\t\t\t\tlogoutEvent$,\n\t\t\t\t},\n\t\t\t\teffects$,\n\t\t\t);\n\t},\n);\n","import { merge, Observable } from 'rxjs';\nimport { getTime, compareDesc, compareAsc } from 'date-fns';\nimport { filter, map, switchMap, share } from 'rxjs/operators';\nimport { some } from 'fp-ts/lib/Option';\nimport { findFirst, filter as filterArray, takeEnd } from 'fp-ts/lib/Array';\nimport { ordersController } from '../../api/generated/swagger/controllers/OrdersController';\nimport { SocketClient } from '../../api/socket-client';\nimport { EntityStore } from '@devexperts/rx-utils/dist/rd/entity-store.utils';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { ask, combineContext, fromReader } from '@devexperts/rx-utils/dist/context.utils';\nimport { isHistoryOrderTO } from '../../api/socket/socket-message.to';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { success, fromOption } from '@devexperts/remote-data-ts';\nimport { HistoryOrderTO } from '../../api/generated/swagger/definitions/HistoryOrderTO';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { combineLatestRD } from '@devexperts/rx-utils/dist/rd/operators/combineLatestRD';\nimport { switchMapRD } from '@devexperts/rx-utils/dist/rd/operators/switchMapRD';\nimport { shareReplayWithDefaults } from '../../utils/rxjs/shareReplayWithDefaults';\n\nconst ORDERS_LIMIT = 100;\n\nexport type HistoryOrderStore = Readonly<{\n\trequestedOrders$: LiveData<Error, HistoryOrderTO[]>;\n\tallOrders$: LiveData<Error, HistoryOrderTO[]>;\n\tgetOrderHistoryById: (orderId: number) => LiveData<Error, HistoryOrderTO>;\n\tonDateChange: (from: number, to: number) => void;\n}>;\n\ntype HistoryContext = {\n\tsocketClient: SocketClient;\n};\n\ntype CreateHistoryOrderStore = Sink<() => HistoryOrderStore>;\n\ntype RequestData = {\n\tfrom: number;\n\tto: number;\n};\n\nexport const createHistoryOrderStore = combineContext(\n\tfromReader(ordersController),\n\task<HistoryContext>(),\n\t(ordersController, ctx): CreateHistoryOrderStore => {\n\t\tconst { socketClient } = ctx;\n\n\t\tconst pk = (order: HistoryOrderTO) => String(order.orderId);\n\n\t\tconst store = new EntityStore<Error, HistoryOrderTO>();\n\n\t\tconst orders$: Observable<HistoryOrderTO[]> = socketClient.message$.pipe(\n\t\t\tfilter(isHistoryOrderTO),\n\t\t\tmap(data => data.body),\n\t\t);\n\n\t\tconst allOrders$: LiveData<Error, HistoryOrderTO[]> = store.getAll(pk, () =>\n\t\t\torders$.pipe(map(to => success(to.sort((a, b) => compareAsc(a.closeTime, b.closeTime))))),\n\t\t);\n\n\t\tconst lastOrders$ = allOrders$.pipe(\n\t\t\tmapRD(orders => takeEnd(ORDERS_LIMIT, orders).sort((a, b) => compareDesc(a.closeTime, b.closeTime))),\n\t\t);\n\n\t\tconst getOrderHistoryById = (orderId: number): LiveData<Error, HistoryOrderTO> =>\n\t\t\tstore.get(String(orderId), () =>\n\t\t\t\tlastOrders$.pipe(\n\t\t\t\t\tmap(orders =>\n\t\t\t\t\t\torders.chain(orders =>\n\t\t\t\t\t\t\tfromOption(\n\t\t\t\t\t\t\t\tfindFirst(orders, order => order.orderId === orderId),\n\t\t\t\t\t\t\t\t() => new Error(`History orders with id ${orderId} not found in history-order.store`),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\tconst sendOrdersHistoryRequest = createHandler<RequestData>();\n\n\t\tconst sharedHistoryRequestData$ = sendOrdersHistoryRequest.value$.pipe(shareReplayWithDefaults());\n\n\t\tconst sendEffect$ = sharedHistoryRequestData$.pipe(\n\t\t\tswitchMap(requestData =>\n\t\t\t\tordersController.requestOrderHistory({\n\t\t\t\t\tquery: { from: some(requestData.from), to: some(requestData.to) },\n\t\t\t\t}),\n\t\t\t),\n\t\t\tshare(),\n\t\t);\n\n\t\tconst allOrdersWithinGivenPeriod$: LiveData<Error, HistoryOrderTO[]> = combineLatestRD(\n\t\t\tlastOrders$,\n\t\t\tsharedHistoryRequestData$.pipe(map(data => success(data))),\n\t\t).pipe(mapRD(([orders, requestData]) => filterArray(orders, isOrderWithinRangePredicate(requestData))));\n\n\t\tconst requestedOrders$: LiveData<Error, HistoryOrderTO[]> = sendEffect$.pipe(\n\t\t\tswitchMapRD(sendEffect => allOrdersWithinGivenPeriod$),\n\t\t\tshare(),\n\t\t);\n\n\t\tconst effect$ = merge(orders$, requestedOrders$);\n\n\t\treturn new Sink(\n\t\t\t(): HistoryOrderStore => ({\n\t\t\t\trequestedOrders$,\n\t\t\t\tallOrders$,\n\t\t\t\tgetOrderHistoryById,\n\t\t\t\tonDateChange: (from: number, to: number) => sendOrdersHistoryRequest.handle({ from, to }),\n\t\t\t}),\n\t\t\teffect$,\n\t\t);\n\t},\n);\n\nfunction isOrderWithinRangePredicate(requestData: RequestData) {\n\treturn (order: HistoryOrderTO) =>\n\t\trequestData.from <= getTime(order.closeTime) && requestData.to >= getTime(order.closeTime);\n}\n","import { string, array, type } from 'io-ts';\n\nexport type InstrumentInfoSubscriptionTO = { symbolsToAdd: Array<string>; symbolsToRemove: Array<string> };\nexport const InstrumentInfoSubscriptionTOIO = type({ symbolsToAdd: array(string), symbolsToRemove: array(string) });\n","import { ResponseValidationError, TAPIClient } from '../client/client';\nimport {\n\tInstrumentInfoSubscriptionTO,\n\tInstrumentInfoSubscriptionTOIO,\n} from '../definitions/InstrumentInfoSubscriptionTO';\nimport { InstrumentInfoTO, InstrumentInfoTOIO } from '../definitions/InstrumentInfoTO';\nimport { fromEither } from '@devexperts/remote-data-ts';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { asks } from 'fp-ts/lib/Reader';\nimport { array, string, type, partial, void as tvoid } from 'io-ts';\nimport { map } from 'rxjs/operators';\n\nexport type InstrumentinfoController = {\n\t/**\n\t * Get instrument info for specified symbols\n\t * @param { object } parameters\n\t */\n\treadonly getInstrumentInfo: (parameters: {\n\t\tquery: { symbols: Array<string> };\n\t}) => LiveData<Error, Array<InstrumentInfoTO>>;\n\n\t/**\n\t * Change instrument info subscription\n\t * @param { object } [parameters]\n\t */\n\treadonly changeInstrumentInfoSubscription: (parameters: {\n\t\tbody?: InstrumentInfoSubscriptionTO;\n\t}) => LiveData<Error, void>;\n};\n\nexport const instrumentinfoController = asks(\n\t(e: { apiClient: TAPIClient }): InstrumentinfoController => ({\n\t\tgetInstrumentInfo: parameters => {\n\t\t\tconst encoded = partial({ query: type({ symbols: array(string) }) }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/instrumentinfo`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(InstrumentInfoTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tchangeInstrumentInfoSubscription: parameters => {\n\t\t\tconst encoded = partial({ body: InstrumentInfoSubscriptionTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/instrumentinfo`,\n\t\t\t\t\tmethod: 'PUT',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\t}),\n);\n","import { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { SocketClient } from '../../api/socket-client';\nimport { ask, combineContext, fromReader } from '@devexperts/rx-utils/dist/context.utils';\nimport { ConversionRateTO } from '../../api/generated/swagger/definitions/ConversionRateTO';\nimport { Option } from 'fp-ts/lib/Option';\nimport * as O from 'fp-ts/lib/Option';\nimport { combineLatest, merge, Observable, of, Subscriber } from 'rxjs';\nimport { EntityStore } from '@devexperts/rx-utils/dist/rd/entity-store.utils';\nimport { distinctUntilChanged, filter, map, mergeMap, scan } from 'rxjs/operators';\nimport { isConversionRateTO } from '../../api/socket/socket-message.to';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { constUndefined } from 'fp-ts/lib/function';\nimport { marketDataController } from '../../api/generated/swagger/controllers/MarketDataController';\nimport { filterMap } from '../../utils/rxjs/filtermap';\nimport { getStructEq, Eq, eqString } from 'fp-ts/lib/Eq';\nimport { findFirst } from 'fp-ts/lib/Array';\nimport { RemoteData, success } from '@devexperts/remote-data-ts';\nimport { setoidStrict } from '../../utils/setoid.utils';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type ConversionRateEntity = {\n\tsymbol: string;\n\tconversionRate: Option<ConversionRateTO>;\n};\nconst setoidConversionRateEntity: Eq<ConversionRateEntity> = getStructEq({\n\tsymbol: eqString,\n\tconversionRate: O.getEq(setoidStrict),\n});\nexport type ConversionRateStore = {\n\treadonly getRateBySymbol: (from: string, to: string) => LiveData<Error, ConversionRateEntity>;\n};\n\nexport type ConversionRateStoreContext = {\n\tsocketClient: SocketClient;\n};\nexport type CreateConversionRateStore = () => Sink<ConversionRateStore>;\n\nexport const createConversionRateStore = combineContext(\n\tfromReader(marketDataController),\n\task<ConversionRateStoreContext>(),\n\t(marketDataController, e): CreateConversionRateStore => {\n\t\tconst { socketClient } = e;\n\t\tconst pk = (entity: ConversionRateEntity) => entity.symbol;\n\n\t\tconst conversionRates$ = socketClient.message$.pipe(filter(isConversionRateTO));\n\n\t\treturn () => {\n\t\t\tconst store = new EntityStore<Error, ConversionRateEntity>();\n\n\t\t\tconst onSymbolRemove = createHandler<string>();\n\t\t\tconst removeSymbolEffect$ = onSymbolRemove.value$.pipe(\n\t\t\t\tmergeMap(symbol =>\n\t\t\t\t\tstore\n\t\t\t\t\t\t.remove(\n\t\t\t\t\t\t\tsymbol,\n\t\t\t\t\t\t\tpk,\n\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\tmarketDataController\n\t\t\t\t\t\t\t\t\t.changeConversionRateSubscription({\n\t\t\t\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\t\t\t\tsymbolsToAdd: [],\n\t\t\t\t\t\t\t\t\t\t\tsymbolsToRemove: [symbol],\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.pipe(mapRD(() => [])),\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.pipe(mapRD(constUndefined)),\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tconst getRateBySymbol = (from: string, to: string): LiveData<Error, ConversionRateEntity> => {\n\t\t\t\tconst symbol = `${from}/${to}`;\n\t\t\t\tif (from === to) {\n\t\t\t\t\treturn of(\n\t\t\t\t\t\tsuccess({\n\t\t\t\t\t\t\tsymbol,\n\t\t\t\t\t\t\tconversionRate: O.some({\n\t\t\t\t\t\t\t\tquantity: O.some(1),\n\t\t\t\t\t\t\t\tfrom: O.some(from),\n\t\t\t\t\t\t\t\tto: O.some(to),\n\t\t\t\t\t\t\t\tvalue: O.some(1),\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn store.get(symbol, () => {\n\t\t\t\t\t/**\n\t\t\t\t\t * Current subscriptions counter\n\t\t\t\t\t * @mutable\n\t\t\t\t\t */\n\t\t\t\t\tlet count = 0;\n\t\t\t\t\tconst request$ = marketDataController.changeConversionRateSubscription({\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\tsymbolsToAdd: [symbol],\n\t\t\t\t\t\t\tsymbolsToRemove: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tconst rate$: Observable<ConversionRateTO> = conversionRates$.pipe(\n\t\t\t\t\t\tfilterMap(rates =>\n\t\t\t\t\t\t\tfindFirst(rates.body, rate =>\n\t\t\t\t\t\t\t\tO.getEq(eqString).equals(\n\t\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\t\trate.from,\n\t\t\t\t\t\t\t\t\t\tO.chain(from =>\n\t\t\t\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\t\t\t\trate.to,\n\t\t\t\t\t\t\t\t\t\t\t\tO.map(to => `${from}/${to}`),\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tO.some(symbol),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\n\t\t\t\t\tconst entity$: Observable<ConversionRateEntity> = rate$.pipe(\n\t\t\t\t\t\tscan<ConversionRateTO, ConversionRateEntity>(\n\t\t\t\t\t\t\t(acc, rate) => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t\t\t\tconversionRate: O.some(rate),\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsymbol,\n\t\t\t\t\t\t\t\tconversionRate: O.none,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t),\n\t\t\t\t\t\tdistinctUntilChanged(setoidConversionRateEntity.equals),\n\t\t\t\t\t);\n\n\t\t\t\t\tconst result$ = combineLatest(request$, entity$).pipe(\n\t\t\t\t\t\tmap(([request, entity]) => request.map(() => entity)),\n\t\t\t\t\t);\n\t\t\t\t\treturn Observable.create((subscriber: Subscriber<RemoteData<Error, ConversionRateEntity>>) => {\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t\tconst subscription = result$.subscribe(subscriber);\n\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\tcount--;\n\t\t\t\t\t\t\tsubscription.unsubscribe();\n\t\t\t\t\t\t\tif (count === 0) {\n\t\t\t\t\t\t\t\tonSymbolRemove.handle(symbol);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tconst effects$ = merge(removeSymbolEffect$);\n\n\t\t\treturn new Sink(\n\t\t\t\t{\n\t\t\t\t\tgetRateBySymbol,\n\t\t\t\t},\n\t\t\t\teffects$,\n\t\t\t);\n\t\t};\n\t},\n);\n","import { filter, map } from 'rxjs/operators';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { EntityStore } from '@devexperts/rx-utils/dist/rd/entity-store.utils';\nimport { FxPositionMetricsTO } from '../../api/generated/swagger/definitions/FxPositionMetricsTO';\nimport { SocketClient } from '../../api/socket-client';\nimport { combineContext, ask } from '@devexperts/rx-utils/dist/context.utils';\nimport { isPositionMetricsTO } from '../../api/socket/socket-message.to';\nimport { success, fromOption } from '@devexperts/remote-data-ts';\nimport { findFirst } from 'fp-ts/lib/Array';\n\nexport type MetricsStore = {\n\tall$: LiveData<Error, FxPositionMetricsTO[]>;\n\tgetMetricsByUid: (uid: string) => LiveData<Error, FxPositionMetricsTO>;\n};\n\ntype MetricsStoreContext = {\n\tsocketClient: SocketClient;\n};\n\ntype CreateMetricsStore = Sink<() => MetricsStore>;\n\nexport const createMetricsStore = combineContext(\n\task<MetricsStoreContext>(),\n\t(context): CreateMetricsStore => {\n\t\tconst { socketClient } = context;\n\n\t\tconst pk = (metricsTO: FxPositionMetricsTO): string => metricsTO.uid;\n\t\tconst store = new EntityStore<Error, FxPositionMetricsTO>();\n\n\t\tconst metrics$ = socketClient.message$.pipe(\n\t\t\tfilter(isPositionMetricsTO),\n\t\t\tmap(metrics => success<Error, FxPositionMetricsTO[]>(metrics.body)),\n\t\t);\n\n\t\tconst all$ = store.getAll(pk, () => metrics$);\n\n\t\tconst getMetricsByUid = (uid: string) =>\n\t\t\tstore.get(uid, () =>\n\t\t\t\tmetrics$.pipe(\n\t\t\t\t\tmap(metrics =>\n\t\t\t\t\t\tmetrics.chain(metrics =>\n\t\t\t\t\t\t\tfromOption(\n\t\t\t\t\t\t\t\tfindFirst(metrics, metric => metric.uid === uid),\n\t\t\t\t\t\t\t\t() => new Error(`Position metric with uid ${uid} not found in metrics.store`),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\n\t\treturn new Sink(() => ({ all$, getMetricsByUid }), all$);\n\t},\n);\n","import { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { ask, combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { SocketClient } from '../../api/socket-client';\nimport { LimitsDomainTO } from '../../api/generated/swagger/definitions/LimitsDomainTO';\nimport { EntityStore } from '@devexperts/rx-utils/dist/rd/entity-store.utils';\nimport { isLimitsTO } from '../../api/socket/socket-message.to';\nimport { filter, map } from 'rxjs/operators';\nimport { Observable } from 'rxjs/index';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { findFirst } from 'fp-ts/lib/Array';\nimport { failure, success } from '@devexperts/remote-data-ts';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport * as O from 'fp-ts/lib/Option';\n\nexport type LimitsStore = Readonly<{\n\tgetLimitsByInstrumentId: (id: number) => LiveData<Error, LimitsDomainTO>;\n}>;\n\ntype LimitsStoreContext = {\n\tsocketClient: SocketClient;\n};\n\ntype CreateLimitsStore = () => Sink<LimitsStore>;\n\nexport const createLimitsStore = combineContext(\n\task<LimitsStoreContext>(),\n\t(e): CreateLimitsStore => {\n\t\tconst { socketClient } = e;\n\t\tconst pk = (limits: LimitsDomainTO) => limits.instrumentId.toString();\n\n\t\tconst store = new EntityStore<Error, LimitsDomainTO>();\n\n\t\tconst data$: Observable<LimitsDomainTO[]> = socketClient.message$.pipe(\n\t\t\tfilter(isLimitsTO),\n\t\t\tmap(message => message.body),\n\t\t);\n\n\t\tconst all$ = store.getAll(pk, () => data$.pipe(map(to => success(to))));\n\n\t\treturn () => {\n\t\t\tconst getLimitsByInstrumentId = (id: number): LiveData<Error, LimitsDomainTO> =>\n\t\t\t\tstore.get(id.toString(), () =>\n\t\t\t\t\tdata$.pipe(\n\t\t\t\t\t\tmap(limits =>\n\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\tfindFirst(limits, limit => limit.instrumentId === id),\n\t\t\t\t\t\t\t\tO.fold(\n\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\tfailure<Error, LimitsDomainTO>(\n\t\t\t\t\t\t\t\t\t\t\tnew Error(`Limits for instrument with id ${id} not found in limits.store`),\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tto => success<Error, LimitsDomainTO>(to),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\n\t\t\treturn new Sink(\n\t\t\t\t{\n\t\t\t\t\tgetLimitsByInstrumentId,\n\t\t\t\t},\n\t\t\t\tall$,\n\t\t\t);\n\t\t};\n\t},\n);\n","import { PositionKeyTO, PositionKeyTOIO } from '../definitions/PositionKeyTO';\nimport { array, type } from 'io-ts';\n\nexport type UpdatePositionKeysSubscriptionTO = {\n\tpositionKeysToAdd: Array<PositionKeyTO>;\n\tpositionKeysToRemove: Array<PositionKeyTO>;\n};\nexport const UpdatePositionKeysSubscriptionTOIO = type({\n\tpositionKeysToAdd: array(PositionKeyTOIO),\n\tpositionKeysToRemove: array(PositionKeyTOIO),\n});\n","import { ResponseValidationError, TAPIClient } from '../client/client';\nimport { MarginImpactTO, MarginImpactTOIO } from '../definitions/MarginImpactTO';\nimport {\n\tUpdateMarketSymbolsSubscriptionTO,\n\tUpdateMarketSymbolsSubscriptionTOIO,\n} from '../definitions/UpdateMarketSymbolsSubscriptionTO';\nimport {\n\tUpdatePositionKeysSubscriptionTO,\n\tUpdatePositionKeysSubscriptionTOIO,\n} from '../definitions/UpdatePositionKeysSubscriptionTO';\nimport { fromEither } from '@devexperts/remote-data-ts';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { asks } from 'fp-ts/lib/Reader';\nimport { array, string, type, partial, void as tvoid } from 'io-ts';\nimport { map } from 'rxjs/operators';\n\nexport type MarginImpactsController = {\n\t/**\n\t * Get list of margin impacts for specified accounts by positions\n\t * @param { object } parameters\n\t */\n\treadonly getMarginImpactsByPositions: (parameters: {\n\t\tquery: { accountId: Array<string>; positionCodes: Array<string> };\n\t}) => LiveData<Error, Array<MarginImpactTO>>;\n\n\t/**\n\t * Subscribe on margin impacts by positions\n\t * @param { object } [parameters]\n\t */\n\treadonly changeSubscriptionByPositions: (parameters: {\n\t\tbody?: UpdatePositionKeysSubscriptionTO;\n\t}) => LiveData<Error, void>;\n\n\t/**\n\t * Get list of margin impacts for specified accounts by symbols\n\t * @param { object } parameters\n\t */\n\treadonly getMarginImpactsBySymbols: (parameters: {\n\t\tquery: { accountId: Array<string>; symbols: Array<string> };\n\t}) => LiveData<Error, Array<MarginImpactTO>>;\n\n\t/**\n\t * Subscribe on margin impacts by symbols\n\t * @param { object } [parameters]\n\t */\n\treadonly changeSubscriptionByInstruments: (parameters: {\n\t\tbody?: UpdateMarketSymbolsSubscriptionTO;\n\t}) => LiveData<Error, void>;\n};\n\nexport const marginImpactsController = asks(\n\t(e: { apiClient: TAPIClient }): MarginImpactsController => ({\n\t\tgetMarginImpactsByPositions: parameters => {\n\t\t\tconst encoded = partial({ query: type({ accountId: array(string), positionCodes: array(string) }) }).encode(\n\t\t\t\tparameters,\n\t\t\t);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/marginImpacts/positions`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(MarginImpactTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tchangeSubscriptionByPositions: parameters => {\n\t\t\tconst encoded = partial({ body: UpdatePositionKeysSubscriptionTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/marginImpacts/positions`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tgetMarginImpactsBySymbols: parameters => {\n\t\t\tconst encoded = partial({ query: type({ accountId: array(string), symbols: array(string) }) }).encode(\n\t\t\t\tparameters,\n\t\t\t);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/marginImpacts/symbols`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tquery: encoded.query,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tarray(MarginImpactTOIO)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tchangeSubscriptionByInstruments: parameters => {\n\t\t\tconst encoded = partial({ body: UpdateMarketSymbolsSubscriptionTOIO }).encode(parameters);\n\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/marginImpacts/symbols`,\n\t\t\t\t\tmethod: 'POST',\n\n\t\t\t\t\tbody: encoded.body,\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value => fromEither(tvoid.decode(value).mapLeft(ResponseValidationError.create))),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\t}),\n);\n","import { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { SocketClient } from '../../api/socket-client';\nimport { filter, map, switchMap } from 'rxjs/operators';\nimport { isMarginImpactTO } from '../../api/socket/socket-message.to';\nimport { EntityStore } from '@devexperts/rx-utils/dist/rd/entity-store.utils';\nimport { findFirst } from 'fp-ts/lib/Array';\nimport { mapRD } from '@devexperts/rx-utils/dist/rd/operators/mapRD';\nimport { createHandler } from '@devexperts/rx-utils/dist/create-handler.utils';\nimport { filterMap } from '../../utils/rxjs/filtermap';\nimport { marginImpactsController } from '../../api/generated/swagger/controllers/MarginImpactsController';\nimport { MarginImpactTO } from '../../api/generated/swagger/definitions/MarginImpactTO';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { ask, combineContext, fromReader } from '@devexperts/rx-utils/dist/context.utils';\nimport { tapOnLastUnsubscribe } from '../../utils/rxjs/tap-on-last-unsubscribe';\nimport { combineLatest } from 'rxjs/internal/observable/combineLatest';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { constant } from 'fp-ts/lib/function';\nimport * as O from 'fp-ts/lib/Option';\nimport { shareReplayWithDefaults } from '../../utils/rxjs/shareReplayWithDefaults';\n\nexport type MarginImpactStore = {\n\treadonly getMarginImpactBySymbol: (symbol: string) => LiveData<Error, MarginImpactTO>;\n};\n\nexport type MarginImpactStoreContext = {\n\tsocketClient: SocketClient;\n};\n\nexport type CreateMarginImpactStore = () => Sink<MarginImpactStore>;\n\nexport const createMarginImpactStore = combineContext(\n\tfromReader(marginImpactsController),\n\task<MarginImpactStoreContext>(),\n\t(marginImpactsController, e): CreateMarginImpactStore => {\n\t\tconst { socketClient } = e;\n\t\tconst pk = (data: MarginImpactTO) =>\n\t\t\tpipe(\n\t\t\t\tdata.instrumentSymbol,\n\t\t\t\tO.getOrElse(constant('')),\n\t\t\t);\n\n\t\tconst marginImpacts$ = socketClient.message$.pipe(filter(isMarginImpactTO));\n\n\t\treturn () => {\n\t\t\tconst store = new EntityStore<Error, MarginImpactTO>();\n\n\t\t\tconst onSymbolRemove = createHandler<string>();\n\t\t\tconst removeSymbolEffect$ = onSymbolRemove.value$.pipe(\n\t\t\t\t//request on each call\n\t\t\t\tswitchMap(symbol =>\n\t\t\t\t\tstore.remove(symbol, pk, () =>\n\t\t\t\t\t\tmarginImpactsController\n\t\t\t\t\t\t\t.changeSubscriptionByInstruments({\n\t\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\t\tsymbolsToAdd: [],\n\t\t\t\t\t\t\t\t\tsymbolsToRemove: [symbol],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.pipe(mapRD(() => [])),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t\tshareReplayWithDefaults(),\n\t\t\t);\n\n\t\t\tconst getMarginImpactBySymbol = (symbol: string): LiveData<Error, MarginImpactTO> => {\n\t\t\t\tconst request$ = marginImpactsController.changeSubscriptionByInstruments({\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tsymbolsToAdd: [symbol],\n\t\t\t\t\t\tsymbolsToRemove: [],\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\tconst marginImpact$: Observable<MarginImpactTO> = marginImpacts$.pipe(\n\t\t\t\t\tfilterMap(marginImpacts =>\n\t\t\t\t\t\tfindFirst(\n\t\t\t\t\t\t\tmarginImpacts.body,\n\t\t\t\t\t\t\tmarginImpact =>\n\t\t\t\t\t\t\t\tpipe(\n\t\t\t\t\t\t\t\t\tmarginImpact.instrumentSymbol,\n\t\t\t\t\t\t\t\t\tO.getOrElse(constant('')),\n\t\t\t\t\t\t\t\t) === symbol,\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t\tshareReplayWithDefaults(),\n\t\t\t\t);\n\n\t\t\t\tconst result$ = combineLatest(request$, marginImpact$).pipe(\n\t\t\t\t\tmap(([request, entity]) => request.map(() => entity)),\n\t\t\t\t);\n\n\t\t\t\treturn store.get(symbol, () => result$.pipe(tapOnLastUnsubscribe(() => onSymbolRemove.handle(symbol))));\n\t\t\t};\n\n\t\t\treturn new Sink(\n\t\t\t\t{\n\t\t\t\t\tgetMarginImpactBySymbol,\n\t\t\t\t},\n\t\t\t\tremoveSymbolEffect$,\n\t\t\t);\n\t\t};\n\t},\n);\n","import { SocketClient } from '../../api/socket-client';\nimport { Observable } from 'rxjs';\nimport { Sink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { asks } from '@devexperts/rx-utils/dist/context.utils';\nimport { filter, first, map } from 'rxjs/operators';\nimport { isAvaSystemSettingsTO } from '../../api/socket/socket-message.to';\nimport { AvaAccountTO } from '../../api/generated/swagger/definitions/AvaAccountTO';\nimport { AvaSystemSettingsTO } from '../../api/generated/swagger/definitions/AvaSystemSettingsTO';\n\nexport type SystemSettingsViewModelContext = {\n\tsocketClient: SocketClient;\n};\n\nexport type SystemSettingsViewModel = {\n\tpreview$: Observable<boolean>;\n\tavailableAccounts$: Observable<Array<AvaAccountTO>>;\n\tplatformType$: Observable<AvaSystemSettingsTO['platformType']>;\n};\n\nexport type CreateSystemSettingsViewModel = () => Sink<SystemSettingsViewModel>;\n\nexport const createSystemSettingsViewModel = asks(\n\t(e: SystemSettingsViewModelContext): CreateSystemSettingsViewModel => {\n\t\tconst settings$ = e.socketClient.message$.pipe(\n\t\t\tfilter(isAvaSystemSettingsTO),\n\t\t\t// TODO: Remove after RIA update specs. Remove when develop task [DXTF-11554]\n\t\t\tmap(data => ({ ...data.body, incomplete: false })),\n\t\t);\n\t\tconst preview$ = settings$.pipe(\n\t\t\tmap(settings => settings.incomplete),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst availableAccounts$ = settings$.pipe(\n\t\t\tmap(settings => settings.availableAccounts),\n\t\t\tfirst(),\n\t\t);\n\n\t\tconst platformType$ = settings$.pipe(\n\t\t\tmap(settings => settings.platformType),\n\t\t\tfirst(),\n\t\t);\n\n\t\treturn () => new Sink({ preview$, availableAccounts$, platformType$ }, settings$);\n\t},\n);\n","import { createBrowserHistory } from 'history';\nimport { combineContext, deferContext, fromReader, sequenceTContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { Authorized } from '../../components/authorized/authorized.component';\nimport { runOnMount } from '../../../../utils/react.utils';\nimport { createMarketDataStore } from '../../../../store/market-data/market-data.store';\nimport { createInstrumentStore } from '../../../../store/instrument/instrument.store';\nimport { createInstrumentInfoStore } from '../../../../store/instrument-info/instrument-info.store';\nimport { createPositionsStore } from '../../../../store/positions/positions.store';\nimport { sequenceTSink } from '@devexperts/rx-utils/dist/sink.utils';\nimport { createOrderStore } from '../../../../store/order/order.store';\nimport { createRouter } from '../../../../utils/router.utils';\nimport { createWatchlistStore } from '../../../../store/watchlist/watchlist.store';\nimport { createChartSettingsStore } from '../../../../store/chart-settings/chart-settings.store';\nimport { createAccountViewModel } from '../../../../view-model/account/account.view-model';\nimport { createHistoryOrderStore } from '../../../../store/history-order/history-order.store';\nimport { symbolSuggestController } from '../../../../api/generated/swagger/controllers/SymbolSuggestController';\nimport { instrumentinfoController } from '../../../../api/generated/swagger/controllers/InstrumentinfoController';\nimport { createConversionRateStore } from '../../../../store/conversion-rate/conversion-rate.store';\nimport { createMetricsStore } from '../../../../store/metrics/metrics.store';\nimport { createLimitsStore } from '../../../../store/limits/limits.store';\nimport { tradinghoursendpointController } from '../../../../api/generated/swagger/controllers/TradinghoursendpointController';\nimport { createMarginImpactStore } from '../../../../store/margin-impact/margin-impact.store';\nimport { createSystemSettingsViewModel } from '../../../../view-model/system-settings/system-settings.view-model';\n\nconst ContainerWithStores = combineContext(\n\tdeferContext(\n\t\tAuthorized,\n\t\t'instrumentStore',\n\t\t'marketDataStore',\n\t\t'marginImpactStore',\n\t\t'instrumentInfoStore',\n\t\t'orderStore',\n\t\t'watchlistStore',\n\t\t'chartSettingsStore',\n\t\t'historyOrderStore',\n\t\t'positionsStore',\n\t\t'metricsStore',\n\t\t'conversionRateStore',\n\t\t'limitsStore',\n\t),\n\tcreateInstrumentInfoStore,\n\tcreateHistoryOrderStore,\n\tcreatePositionsStore,\n\tcreateConversionRateStore,\n\tsequenceTContext(createMarketDataStore, createMarginImpactStore, createOrderStore, createWatchlistStore),\n\tsequenceTContext(createInstrumentStore, createChartSettingsStore, createMetricsStore, createLimitsStore),\n\t(\n\t\tContainer,\n\t\tcreateInstrumentInfoStore,\n\t\tcreateHistoryOrderStore,\n\t\tcreatePositionsStore,\n\t\tcreateConversionRateStore,\n\t\t[createMarketDataStore, createMarginImpactStore, createOrderStore, createWatchlistStore],\n\t\t[createInstrumentStore, createChartSettingsStore, createMetricsStore, createLimitsStore],\n\t) =>\n\t\tsequenceTSink(\n\t\t\tcreateMarketDataStore(),\n\t\t\tcreateMarginImpactStore(),\n\t\t\tcreateConversionRateStore(),\n\t\t\tcreateInstrumentInfoStore(),\n\t\t\tcreateLimitsStore(),\n\t\t).chain(([marketDataStore, marginImpactStore, conversionRateStore, instrumentInfoStore, limitsStore]) =>\n\t\t\tContainer.run({\n\t\t\t\tmarketDataStore,\n\t\t\t\tmarginImpactStore,\n\t\t\t\torderStore: createOrderStore(),\n\t\t\t\tinstrumentStore: createInstrumentStore(),\n\t\t\t\tinstrumentInfoStore,\n\t\t\t\twatchlistStore: createWatchlistStore(),\n\t\t\t\tchartSettingsStore: createChartSettingsStore(),\n\t\t\t\thistoryOrderStore: createHistoryOrderStore(),\n\t\t\t\tpositionsStore: createPositionsStore(),\n\t\t\t\tmetricsStore: createMetricsStore(),\n\t\t\t\tconversionRateStore,\n\t\t\t\tlimitsStore,\n\t\t\t}),\n\t\t),\n);\n\nconst ContainerWithStoresAndRouter = combineContext(\n\tdeferContext(ContainerWithStores, 'router'),\n\tdeferContext(createRouter, 'history'),\n\t(Container, createRouter) =>\n\t\tcreateRouter\n\t\t\t.run({ history: createBrowserHistory() })\n\t\t\t.chain(createRouter => createRouter())\n\t\t\t.chain(router =>\n\t\t\t\tContainer.run({\n\t\t\t\t\trouter,\n\t\t\t\t}),\n\t\t\t),\n);\n\nconst ContainerWithGlobalViewModels = combineContext(\n\tdeferContext(ContainerWithStoresAndRouter, 'accountViewModel', 'systemSettingsViewModel'),\n\tcreateAccountViewModel,\n\tcreateSystemSettingsViewModel,\n\t(Container, createAccountViewModel, createSystemSettingsViewModel) =>\n\t\tsequenceTSink(createAccountViewModel(), createSystemSettingsViewModel()).chain(\n\t\t\t([accountViewModel, systemSettingsViewModel]) =>\n\t\t\t\tContainer.run({\n\t\t\t\t\taccountViewModel,\n\t\t\t\t\tsystemSettingsViewModel,\n\t\t\t\t}),\n\t\t),\n);\n\nexport const AuthorizedContainer = combineContext(\n\tdeferContext(\n\t\tContainerWithGlobalViewModels,\n\t\t'symbolSuggestController',\n\t\t'instrumentInfoController',\n\t\t'tradingHoursController',\n\t),\n\tfromReader(symbolSuggestController),\n\tfromReader(instrumentinfoController),\n\tfromReader(tradinghoursendpointController),\n\t(Container, symbolSuggestController, instrumentinfoController, tradinghoursendpointController) =>\n\t\trunOnMount(Container, () => () => ({\n\t\t\tsymbolSuggestController,\n\t\t\tinstrumentInfoController: instrumentinfoController,\n\t\t\ttradingHoursController: tradinghoursendpointController,\n\t\t})),\n);\n","import { fromEvent, Observable } from 'rxjs';\nimport { PostMessageTO, postMessagesTO } from './post-message/post-message.to';\nimport { filter, map } from 'rxjs/operators';\nimport { isRight, tryCatch2v } from 'fp-ts/lib/Either';\nimport * as E from 'fp-ts/lib/Either';\nimport { pipe } from 'fp-ts/lib/pipeable';\n\nexport type PostMessageClient = {\n\tpostMessage$: Observable<PostMessageTO>;\n};\n\nconst postMessage$ = fromEvent<MessageEvent>(window, 'message');\n\nexport const createPostMessageClient = (): PostMessageClient => {\n\tconst decodedMessages$ = postMessage$.pipe(\n\t\tfilter(message => message.origin.indexOf('.avatrade') > 0),\n\t\tmap(message =>\n\t\t\tpipe(\n\t\t\t\ttryCatch2v(\n\t\t\t\t\t() => JSON.parse(message.data),\n\t\t\t\t\te => (e instanceof Error ? e : new Error('Cannot parse JSON')),\n\t\t\t\t),\n\t\t\t\tE.chain(data =>\n\t\t\t\t\tpipe(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tpostMessagesTO.decode,\n\t\t\t\t\t\tE.mapLeft(() => new Error('Validation error')),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t),\n\t\t),\n\t\tfilter(isRight),\n\t\tmap(data => data.value),\n\t);\n\n\treturn {\n\t\tpostMessage$: decodedMessages$,\n\t};\n};\n","import { doOnMount } from '../../../../utils/react.utils';\nimport { ask, combineContext, deferContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { createSocketClient } from '../../../../api/socket-client';\nimport { createApiClient } from '../../../../api/api-client';\nimport { AuthorizedContainer } from '../authorized/authorized.container';\nimport { createPostMessageClient } from '../../../../api/post-message.client';\n\nexport type ConnectionContext = {\n\treadonly restURL: string;\n\treadonly socketURL: string;\n};\n\nexport const AppContainer = combineContext(\n\tdeferContext(AuthorizedContainer, 'socketClient', 'apiClient', 'postMessageClient'),\n\task<ConnectionContext>(),\n\t(Connection, e) => {\n\t\tconst socketClient = createSocketClient(e.socketURL);\n\t\tconst apiClient = createApiClient(e.restURL, socketClient.uuid$);\n\t\tconst postMessageClient = createPostMessageClient();\n\t\treturn Connection.run({ socketClient, apiClient, postMessageClient }).map(Resolved =>\n\t\t\tdoOnMount(Resolved, () => {\n\t\t\t\tsocketClient.run();\n\t\t\t}),\n\t\t);\n\t},\n);\n","import * as React from 'react';\nimport { PureComponent } from 'react';\nimport { RemoteData } from '@devexperts/remote-data-ts';\nimport { RemoteDataState } from '../../../ui-common/remote-data-state/remote-data-state.component';\nimport { combineContext } from '@devexperts/rx-utils/dist/context.utils';\nimport { AppContainer } from '../../app/containers/app/app.container';\nimport { Option } from 'fp-ts/lib/Option';\n\nexport type EnvProps = {\n\tinitialize: RemoteData<Error, Option<string>>;\n};\n\nexport const EnvComponent = combineContext(\n\tAppContainer,\n\tAppContainer =>\n\t\tclass EnvComponent extends PureComponent<EnvProps> {\n\t\t\trender() {\n\t\t\t\treturn <RemoteDataState data={this.props.initialize} success={this.renderSuccess} />;\n\t\t\t}\n\n\t\t\trenderSuccess() {\n\t\t\t\treturn <AppContainer />;\n\t\t\t}\n\t\t},\n);\n","import { ResponseValidationError, TAPIClient } from '../client/client';\nimport { AvaSystemSettingsTO, AvaSystemSettingsTOIO } from '../definitions/AvaSystemSettingsTO';\nimport { unknownType } from '../utils/utils';\nimport { fromEither } from '@devexperts/remote-data-ts';\nimport { LiveData } from '@devexperts/rx-utils/dist/rd/live-data.utils';\nimport { asks } from 'fp-ts/lib/Reader';\nimport { string, dictionary } from 'io-ts';\nimport { map } from 'rxjs/operators';\n\nexport type AvasystemsettingsinfoController = {\n\t/**\n\t * Get app settings if user is authenticated\n\t */\n\treadonly getAppSettings: () => LiveData<Error, { [key: string]: unknown }>;\n\n\t/**\n\t * Get ava system settings info\n\t */\n\treadonly getSystemInfo: () => LiveData<Error, AvaSystemSettingsTO>;\n};\n\nexport const avasystemsettingsinfoController = asks(\n\t(e: { apiClient: TAPIClient }): AvasystemsettingsinfoController => ({\n\t\tgetAppSettings: () => {\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/settings/app`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(\n\t\t\t\t\t\t\t\tdictionary(string, unknownType)\n\t\t\t\t\t\t\t\t\t.decode(value)\n\t\t\t\t\t\t\t\t\t.mapLeft(ResponseValidationError.create),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\n\t\tgetSystemInfo: () => {\n\t\t\treturn e.apiClient\n\t\t\t\t.request({\n\t\t\t\t\turl: `/settings/info`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t})\n\t\t\t\t.pipe(\n\t\t\t\t\tmap(data =>\n\t\t\t\t\t\tdata.chain(value =>\n\t\t\t\t\t\t\tfromEither(AvaSystemSettingsTOIO.decode(value).mapLeft(ResponseValidationError.create)),\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t},\n\t}),\n);\n","import { combineContext, deferContext, fromReader, ask, ContextEnvType } from '@devexperts/rx-utils/dist/context.utils';\nimport { ask as askReader } from 'fp-ts/lib/Reader';\nimport * as Reader from 'fp-ts/lib/Reader';\nimport { createEnvViewModel, EnvViewModel } from '../../../view-model/env/env.view-model';\nimport { EnvComponent } from '../components/env.component';\nimport { pending } from '@devexperts/remote-data-ts';\nimport { runOnMount } from '../../../utils/react.utils';\nimport { avasystemsettingsinfoController } from '../../../api/generated/swagger/controllers/AvasystemsettingsinfoController';\nimport { ConnectionContext } from '../../app/containers/app/app.container';\nimport { createApiClient } from '../../../api/api-client';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { withRXWithDefaults } from '../../../utils/withRXWithDefaults';\n\ntype EnvContainerContext = {\n\tenvViewModel: EnvViewModel;\n};\n\nconst Container = combineContext(EnvComponent, ask<EnvContainerContext>(), (EnvComponent, e) =>\n\twithRXWithDefaults(EnvComponent)(() => ({\n\t\tdefaultProps: { initialize: pending },\n\t\tprops: { initialize: e.envViewModel.initialize$ },\n\t})),\n);\n\nconst EnvContainerInstanceVM = combineContext(\n\tdeferContext(Container, 'envViewModel'),\n\tcreateEnvViewModel,\n\t(Container, createEnvViewModel) => runOnMount(Container, () => () => ({ envViewModel: createEnvViewModel() })),\n);\n\nconst EnvContainerWithApiClient = combineContext(\n\tdeferContext(EnvContainerInstanceVM, 'avasystemsettingsinfoController'),\n\tdeferContext(fromReader(avasystemsettingsinfoController), 'apiClient'),\n\task<ConnectionContext>(),\n\t(EnvContainerInstanceVM, avasystemsettingsinfoController, e) => {\n\t\tconst apiClient = createApiClient(e.restURL);\n\t\treturn runOnMount(EnvContainerInstanceVM, () => () =>\n\t\t\tavasystemsettingsinfoController\n\t\t\t\t.map(avasystemsettingsinfoController => ({ avasystemsettingsinfoController }))\n\t\t\t\t.run({ apiClient }),\n\t\t);\n\t},\n);\n\n//asks for the environment and runs all effects inside App subtree on its mount\nexport const EnvContainer = pipe(\n\taskReader<ContextEnvType<typeof EnvContainerWithApiClient>>(),\n\tReader.map(e => runOnMount(EnvContainerWithApiClient, () => () => e)),\n);\n","import { createElement } from 'react';\nimport { render } from 'react-dom';\nimport { IO } from 'fp-ts/lib/IO';\nimport { EnvContainer } from './ui-desktop/env/containers/env.container';\n\nconst env = {\n\trestURL: '/api',\n\tsocketURL: '/client/connector',\n};\n\nexport const app = new IO<void>(() =>\n\trender(createElement(EnvContainer.run(env)), document.getElementById('root')),\n).run();\n"],"sourceRoot":""}